/**
 * Integrated by Dominique Cavailhez (c) 2016
 * https://github.com/Dominique92/MyLeaflet/tree/af67a323669dfdad425e2e5c78fa4948bd620edb
 * Includes part of :
	https://github.com/Leaflet/Leaflet/tree/197f9d43b7bbc73c0492bf62cd666a5a98038098
	https://github.com/Leaflet/Leaflet.fullscreen/tree/f5e76270ad40bb573bd11595f9069c3f15f8f286
	https://github.com/MrMufflon/Leaflet.Coordinates/tree/062f7596a0304cc3676e38d172dbd4b682fd9e4b
	https://github.com/stefanocudini/leaflet-gps/tree/8e6ac4a551c7652c727d6cdd2f53626076fd2619
	https://github.com/k4r573n/leaflet-control-osm-geocoder/tree/f833500063e165506503ee8aae997928052c3c4a
	https://github.com/shramov/leaflet-plugins/tree/6d2f274be0855f1825812d5d47b301d152b33542
	https://github.com/kartena/Proj4Leaflet/tree/89419bee63688d472e8951d0c3197d7f4d0d38ce
	https://github.com/tyrasd/togpx/tree/21fb5d2c37be21335923e861cfceee386ac0e085
	https://github.com/rob-murray/os-leaflet/tree-commit/7b53a09827a8bf90dba554232c4d94f23bf2c297
	https://github.com/makinacorpus/Leaflet.FileLayer/tree/685d1ed3cf239601ea00ea4822f0c198ffb7bb7a
	https://github.com/mapbox/togeojson/tree/966626ec5b7dc6c67dd6bda8a0b27ee422447624
	https://github.com/erictheise/rrose/tree/04fac08b0b367e137b64fb4e5e08e2dd020955c6
	https://github.com/Leaflet/Leaflet.draw/tree/1f49919df00467a234a9ed94c93bbfa9d804f6ec
	https://github.com/makinacorpus/Leaflet.GeometryUtil/tree/4097170a0e0b0f15c2029416dd589e0d6431e304
	https://github.com/makinacorpus/Leaflet.Snap/tree/e6b24835d8e8f08602bd5f5718507dd326ea2455
	https://github.com/phayes/geoPHP/tree/d7e099a8f4ce23db1d0b1840b1ec984c5d208fb4
 *
 * This file is automatically generated. Do not modify.
*/
var oldL=window.L,L={};L.version="0.7.7","object"==typeof module&&"object"==typeof module.exports?module.exports=L:"function"==typeof define&&define.amd&&define(L),L.noConflict=function(){return window.L=oldL,this},window.L=L;
L.Util={extend:function(n){var t,r,e,i,o=Array.prototype.slice.call(arguments,1);for(r=0,e=o.length;e>r;r++){i=o[r]||{};for(t in i)i.hasOwnProperty(t)&&(n[t]=i[t])}return n},bind:function(n,t){var r=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return n.apply(t,r||arguments)}},stamp:function(){var n=0,t="_leaflet_id";return function(r){return r[t]=r[t]||++n,r[t]}}(),invokeEach:function(n,t,r){var e,i;if("object"==typeof n){i=Array.prototype.slice.call(arguments,3);for(e in n)t.apply(r,[e,n[e]].concat(i));return!0}return!1},limitExecByInterval:function(n,t,r){var e,i;return function o(){var a=arguments;return e?void(i=!0):(e=!0,setTimeout(function(){e=!1,i&&(o.apply(r,a),i=!1)},t),void n.apply(r,a))}},falseFn:function(){return!1},formatNum:function(n,t){var r=Math.pow(10,t||5);return Math.round(n*r)/r},trim:function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")},splitWords:function(n){return L.Util.trim(n).split(/\s+/)},setOptions:function(n,t){return n.options=L.extend({},n.options,t),n.options},getParamString:function(n,t,r){var e=[];for(var i in n)e.push(encodeURIComponent(r?i.toUpperCase():i)+"="+encodeURIComponent(n[i]));return(t&&-1!==t.indexOf("?")?"&":"?")+e.join("&")},template:function(n,t){return n.replace(/\{ *([\w_]+) *\}/g,function(n,r){var e=t[r];if(void 0===e)throw new Error("No value provided for variable "+n);return"function"==typeof e&&(e=e(t)),e})},isArray:Array.isArray||function(n){return"[object Array]"===Object.prototype.toString.call(n)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function n(n){var t,r,e=["webkit","moz","o","ms"];for(t=0;t<e.length&&!r;t++)r=window[e[t]+n];return r}function t(n){var t=+new Date,e=Math.max(0,16-(t-r));return r=t+e,window.setTimeout(n,e)}var r=0,e=window.requestAnimationFrame||n("RequestAnimationFrame")||t,i=window.cancelAnimationFrame||n("CancelAnimationFrame")||n("CancelRequestAnimationFrame")||function(n){window.clearTimeout(n)};L.Util.requestAnimFrame=function(n,r,i,o){return n=L.bind(n,r),i&&e===t?void n():e.call(window,n,o)},L.Util.cancelAnimFrame=function(n){n&&i.call(window,n)}}(),L.extend=L.Util.extend,L.bind=L.Util.bind,L.stamp=L.Util.stamp,L.setOptions=L.Util.setOptions;
L.Class=function(){},L.Class.extend=function(t){var o=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},i=function(){};i.prototype=this.prototype;var s=new i;s.constructor=o,o.prototype=s;for(var n in this)this.hasOwnProperty(n)&&"prototype"!==n&&(o[n]=this[n]);t.statics&&(L.extend(o,t.statics),delete t.statics),t.includes&&(L.Util.extend.apply(null,[s].concat(t.includes)),delete t.includes),t.options&&s.options&&(t.options=L.extend({},s.options,t.options)),L.extend(s,t),s._initHooks=[];var e=this;return o.__super__=e.prototype,s.callInitHooks=function(){if(!this._initHooksCalled){e.prototype.callInitHooks&&e.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,o=s._initHooks.length;o>t;t++)s._initHooks[t].call(this)}},o},L.Class.include=function(t){L.extend(this.prototype,t)},L.Class.mergeOptions=function(t){L.extend(this.prototype.options,t)},L.Class.addInitHook=function(t){var o=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,o)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i)};
var eventsKey="_leaflet_events";L.Mixin={},L.Mixin.Events={addEventListener:function(e,t,n){if(L.Util.invokeEach(e,this.addEventListener,this,t,n))return this;var i,s,r,v,h,l,o,a=this[eventsKey]=this[eventsKey]||{},E=n&&n!==this&&L.stamp(n);for(e=L.Util.splitWords(e),i=0,s=e.length;s>i;i++)r={action:t,context:n||this},v=e[i],E?(h=v+"_idx",l=h+"_len",o=a[h]=a[h]||{},o[E]||(o[E]=[],a[l]=(a[l]||0)+1),o[E].push(r)):(a[v]=a[v]||[],a[v].push(r));return this},hasEventListeners:function(e){var t=this[eventsKey];return!!t&&(e in t&&t[e].length>0||e+"_idx"in t&&t[e+"_idx_len"]>0)},removeEventListener:function(e,t,n){if(!this[eventsKey])return this;if(!e)return this.clearAllEventListeners();if(L.Util.invokeEach(e,this.removeEventListener,this,t,n))return this;var i,s,r,v,h,l,o,a,E,d=this[eventsKey],f=n&&n!==this&&L.stamp(n);for(e=L.Util.splitWords(e),i=0,s=e.length;s>i;i++)if(r=e[i],l=r+"_idx",o=l+"_len",a=d[l],t){if(v=f&&a?a[f]:d[r]){for(h=v.length-1;h>=0;h--)v[h].action!==t||n&&v[h].context!==n||(E=v.splice(h,1),E[0].action=L.Util.falseFn);n&&a&&0===v.length&&(delete a[f],d[o]--)}}else delete d[r],delete d[l],delete d[o];return this},clearAllEventListeners:function(){return delete this[eventsKey],this},fireEvent:function(e,t){if(!this.hasEventListeners(e))return this;var n,i,s,r,v,h=L.Util.extend({},t,{type:e,target:this}),l=this[eventsKey];if(l[e])for(n=l[e].slice(),i=0,s=n.length;s>i;i++)n[i].action.call(n[i].context,h);r=l[e+"_idx"];for(v in r)if(n=r[v].slice())for(i=0,s=n.length;s>i;i++)n[i].action.call(n[i].context,h);return this},addOneTimeEventListener:function(e,t,n){if(L.Util.invokeEach(e,this.addOneTimeEventListener,this,t,n))return this;var i=L.bind(function(){this.removeEventListener(e,t,n).removeEventListener(e,i,n)},this);return this.addEventListener(e,t,n).addEventListener(e,i,n)}},L.Mixin.Events.on=L.Mixin.Events.addEventListener,L.Mixin.Events.off=L.Mixin.Events.removeEventListener,L.Mixin.Events.once=L.Mixin.Events.addOneTimeEventListener,L.Mixin.Events.fire=L.Mixin.Events.fireEvent;
!function(){var i="ActiveXObject"in window,e=i&&!document.addEventListener,n=navigator.userAgent.toLowerCase(),o=-1!==n.indexOf("webkit"),t=-1!==n.indexOf("chrome"),d=-1!==n.indexOf("phantom"),w=-1!==n.indexOf("android"),a=-1!==n.search("android [23]"),r=-1!==n.indexOf("gecko"),c=typeof orientation!=void 0+"",m=!window.PointerEvent&&window.MSPointerEvent,s=window.PointerEvent&&window.navigator.pointerEnabled||m,l="devicePixelRatio"in window&&window.devicePixelRatio>1||"matchMedia"in window&&window.matchMedia("(min-resolution:144dpi)")&&window.matchMedia("(min-resolution:144dpi)").matches,u=document.documentElement,b=i&&"transition"in u.style,h="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!a,v="MozPerspective"in u.style,p="OTransition"in u.style,O=!window.L_DISABLE_3D&&(b||h||v||p)&&!d,x=!window.L_NO_TOUCH&&!d&&(s||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch);L.Browser={ie:i,ielt9:e,webkit:o,gecko:r&&!o&&!window.opera&&!i,android:w,android23:a,chrome:t,ie3d:b,webkit3d:h,gecko3d:v,opera3d:p,any3d:O,mobile:c,mobileWebkit:c&&o,mobileWebkit3d:c&&h,mobileOpera:c&&window.opera,touch:x,msPointer:m,pointer:s,retina:l}}();
L.Point=function(t,n,i){this.x=i?Math.round(t):t,this.y=i?Math.round(n):n},L.Point.prototype={clone:function(){return new L.Point(this.x,this.y)},add:function(t){return this.clone()._add(L.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(L.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(t){t=L.point(t);var n=t.x-this.x,i=t.y-this.y;return Math.sqrt(n*n+i*i)},equals:function(t){return t=L.point(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=L.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+L.Util.formatNum(this.x)+", "+L.Util.formatNum(this.y)+")"}},L.point=function(t,n,i){return t instanceof L.Point?t:L.Util.isArray(t)?new L.Point(t[0],t[1]):void 0===t||null===t?t:new L.Point(t,n,i)};
L.Bounds=function(t,n){if(t)for(var i=n?[t,n]:t,s=0,m=i.length;m>s;s++)this.extend(i[s])},L.Bounds.prototype={extend:function(t){return t=L.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new L.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new L.Point(this.min.x,this.max.y)},getTopRight:function(){return new L.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var n,i;return t="number"==typeof t[0]||t instanceof L.Point?L.point(t):L.bounds(t),t instanceof L.Bounds?(n=t.min,i=t.max):n=i=t,n.x>=this.min.x&&i.x<=this.max.x&&n.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=L.bounds(t);var n=this.min,i=this.max,s=t.min,m=t.max,x=m.x>=n.x&&s.x<=i.x,h=m.y>=n.y&&s.y<=i.y;return x&&h},isValid:function(){return!(!this.min||!this.max)}},L.bounds=function(t,n){return!t||t instanceof L.Bounds?t:new L.Bounds(t,n)};
L.Transformation=function(t,n,i,r){this._a=t,this._b=n,this._c=i,this._d=r},L.Transformation.prototype={transform:function(t,n){return this._transform(t.clone(),n)},_transform:function(t,n){return n=n||1,t.x=n*(this._a*t.x+this._b),t.y=n*(this._c*t.y+this._d),t},untransform:function(t,n){return n=n||1,new L.Point((t.x/n-this._b)/this._a,(t.y/n-this._d)/this._c)}};
L.DomUtil={get:function(t){return"string"==typeof t?document.getElementById(t):t},getStyle:function(t,e){var o=t.style[e];if(!o&&t.currentStyle&&(o=t.currentStyle[e]),(!o||"auto"===o)&&document.defaultView){var n=document.defaultView.getComputedStyle(t,null);o=n?n[e]:null}return"auto"===o?null:o},getViewportOffset:function(t){var e,o=0,n=0,l=t,i=document.body,s=document.documentElement;do{if(o+=l.offsetTop||0,n+=l.offsetLeft||0,o+=parseInt(L.DomUtil.getStyle(l,"borderTopWidth"),10)||0,n+=parseInt(L.DomUtil.getStyle(l,"borderLeftWidth"),10)||0,e=L.DomUtil.getStyle(l,"position"),l.offsetParent===i&&"absolute"===e)break;if("fixed"===e){o+=i.scrollTop||s.scrollTop||0,n+=i.scrollLeft||s.scrollLeft||0;break}if("relative"===e&&!l.offsetLeft){var r=L.DomUtil.getStyle(l,"width"),a=L.DomUtil.getStyle(l,"max-width"),c=l.getBoundingClientRect();("none"!==r||"none"!==a)&&(n+=c.left+l.clientLeft),o+=c.top+(i.scrollTop||s.scrollTop||0);break}l=l.offsetParent}while(l);l=t;do{if(l===i)break;o-=l.scrollTop||0,n-=l.scrollLeft||0,l=l.parentNode}while(l);return new L.Point(n,o)},documentIsLtr:function(){return L.DomUtil._docIsLtrCached||(L.DomUtil._docIsLtrCached=!0,L.DomUtil._docIsLtr="ltr"===L.DomUtil.getStyle(document.body,"direction")),L.DomUtil._docIsLtr},create:function(t,e,o){var n=document.createElement(t);return n.className=e,o&&o.appendChild(n),n},hasClass:function(t,e){if(void 0!==t.classList)return t.classList.contains(e);var o=L.DomUtil._getClass(t);return o.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(o)},addClass:function(t,e){if(void 0!==t.classList)for(var o=L.Util.splitWords(e),n=0,l=o.length;l>n;n++)t.classList.add(o[n]);else if(!L.DomUtil.hasClass(t,e)){var i=L.DomUtil._getClass(t);L.DomUtil._setClass(t,(i?i+" ":"")+e)}},removeClass:function(t,e){void 0!==t.classList?t.classList.remove(e):L.DomUtil._setClass(t,L.Util.trim((" "+L.DomUtil._getClass(t)+" ").replace(" "+e+" "," ")))},_setClass:function(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e},_getClass:function(t){return void 0===t.className.baseVal?t.className:t.className.baseVal},setOpacity:function(t,e){if("opacity"in t.style)t.style.opacity=e;else if("filter"in t.style){var o=!1,n="DXImageTransform.Microsoft.Alpha";try{o=t.filters.item(n)}catch(l){if(1===e)return}e=Math.round(100*e),o?(o.Enabled=100!==e,o.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"}},testProp:function(t){for(var e=document.documentElement.style,o=0;o<t.length;o++)if(t[o]in e)return t[o];return!1},getTranslateString:function(t){var e=L.Browser.webkit3d,o="translate"+(e?"3d":"")+"(",n=(e?",0":"")+")";return o+t.x+"px,"+t.y+"px"+n},getScaleString:function(t,e){var o=L.DomUtil.getTranslateString(e.add(e.multiplyBy(-1*t))),n=" scale("+t+") ";return o+n},setPosition:function(t,e,o){t._leaflet_pos=e,!o&&L.Browser.any3d?t.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(e):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos}},L.DomUtil.TRANSFORM=L.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),L.DomUtil.TRANSITION=L.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),L.DomUtil.TRANSITION_END="webkitTransition"===L.DomUtil.TRANSITION||"OTransition"===L.DomUtil.TRANSITION?L.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in document)L.extend(L.DomUtil,{disableTextSelection:function(){L.DomEvent.on(window,"selectstart",L.DomEvent.preventDefault)},enableTextSelection:function(){L.DomEvent.off(window,"selectstart",L.DomEvent.preventDefault)}});else{var t=L.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);L.extend(L.DomUtil,{disableTextSelection:function(){if(t){var e=document.documentElement.style;this._userSelect=e[t],e[t]="none"}},enableTextSelection:function(){t&&(document.documentElement.style[t]=this._userSelect,delete this._userSelect)}})}L.extend(L.DomUtil,{disableImageDrag:function(){L.DomEvent.on(window,"dragstart",L.DomEvent.preventDefault)},enableImageDrag:function(){L.DomEvent.off(window,"dragstart",L.DomEvent.preventDefault)}})}();
L.LatLng=function(t,n,a){if(t=parseFloat(t),n=parseFloat(n),isNaN(t)||isNaN(n))throw new Error("Invalid LatLng object: ("+t+", "+n+")");this.lat=t,this.lng=n,void 0!==a&&(this.alt=parseFloat(a))},L.extend(L.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),L.LatLng.prototype={equals:function(t){if(!t)return!1;t=L.latLng(t);var n=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return n<=L.LatLng.MAX_MARGIN},toString:function(t){return"LatLng("+L.Util.formatNum(this.lat,t)+", "+L.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){t=L.latLng(t);var n=6378137,a=L.LatLng.DEG_TO_RAD,l=(t.lat-this.lat)*a,i=(t.lng-this.lng)*a,r=this.lat*a,s=t.lat*a,o=Math.sin(l/2),e=Math.sin(i/2),g=o*o+e*e*Math.cos(r)*Math.cos(s);return 2*n*Math.atan2(Math.sqrt(g),Math.sqrt(1-g))},wrap:function(t,n){var a=this.lng;return t=t||-180,n=n||180,a=(a+n)%(n-t)+(t>a||a===n?n:t),new L.LatLng(this.lat,a)}},L.latLng=function(t,n){return t instanceof L.LatLng?t:L.Util.isArray(t)?"number"==typeof t[0]||"string"==typeof t[0]?new L.LatLng(t[0],t[1],t[2]):null:void 0===t||null===t?t:"object"==typeof t&&"lat"in t?new L.LatLng(t.lat,"lng"in t?t.lng:t.lon):void 0===n?null:new L.LatLng(t,n)};
L.LatLngBounds=function(t,n){if(t)for(var s=n?[t,n]:t,h=0,e=s.length;e>h;h++)this.extend(s[h])},L.LatLngBounds.prototype={extend:function(t){if(!t)return this;var n=L.latLng(t);return t=null!==n?n:L.latLngBounds(t),t instanceof L.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(t.lat,this._southWest.lat),this._southWest.lng=Math.min(t.lng,this._southWest.lng),this._northEast.lat=Math.max(t.lat,this._northEast.lat),this._northEast.lng=Math.max(t.lng,this._northEast.lng)):(this._southWest=new L.LatLng(t.lat,t.lng),this._northEast=new L.LatLng(t.lat,t.lng)):t instanceof L.LatLngBounds&&(this.extend(t._southWest),this.extend(t._northEast)),this},pad:function(t){var n=this._southWest,s=this._northEast,h=Math.abs(n.lat-s.lat)*t,e=Math.abs(n.lng-s.lng)*t;return new L.LatLngBounds(new L.LatLng(n.lat-h,n.lng-e),new L.LatLng(s.lat+h,s.lng+e))},getCenter:function(){return new L.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new L.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new L.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof L.LatLng?L.latLng(t):L.latLngBounds(t);var n,s,h=this._southWest,e=this._northEast;return t instanceof L.LatLngBounds?(n=t.getSouthWest(),s=t.getNorthEast()):n=s=t,n.lat>=h.lat&&s.lat<=e.lat&&n.lng>=h.lng&&s.lng<=e.lng},intersects:function(t){t=L.latLngBounds(t);var n=this._southWest,s=this._northEast,h=t.getSouthWest(),e=t.getNorthEast(),a=e.lat>=n.lat&&h.lat<=s.lat,o=e.lng>=n.lng&&h.lng<=s.lng;return a&&o},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return t?(t=L.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}},L.latLngBounds=function(t,n){return!t||t instanceof L.LatLngBounds?t:new L.LatLngBounds(t,n)};
L.Projection={};
L.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(t){var a=L.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,t.lat),-n),M=t.lng*a,e=r*a;return e=Math.log(Math.tan(Math.PI/4+e/2)),new L.Point(M,e)},unproject:function(t){var a=L.LatLng.RAD_TO_DEG,n=t.x*a,r=(2*Math.atan(Math.exp(t.y))-Math.PI/2)*a;return new L.LatLng(r,n)}};
L.Projection.LonLat={project:function(n){return new L.Point(n.lng,n.lat)},unproject:function(n){return new L.LatLng(n.y,n.x)}};
L.CRS={latLngToPoint:function(t,n){var r=this.projection.project(t),o=this.scale(n);return this.transformation._transform(r,o)},pointToLatLng:function(t,n){var r=this.scale(n),o=this.transformation.untransform(t,r);return this.projection.unproject(o)},project:function(t){return this.projection.project(t)},scale:function(t){return 256*Math.pow(2,t)},getSize:function(t){var n=this.scale(t);return L.point(n,n)}};
L.CRS.EPSG3857=L.extend({},L.CRS,{code:"EPSG:3857",projection:L.Projection.SphericalMercator,transformation:new L.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(t){var o=this.projection.project(t),e=6378137;return o.multiplyBy(e)}}),L.CRS.EPSG900913=L.extend({},L.CRS.EPSG3857,{code:"EPSG:900913"});
L.CRS.EPSG4326=L.extend({},L.CRS,{code:"EPSG:4326",projection:L.Projection.LonLat,transformation:new L.Transformation(1/360,.5,-1/360,.5)});
L.Map=L.Class.extend({includes:L.Mixin.Events,options:{crs:L.CRS.EPSG3857,fadeAnimation:L.DomUtil.TRANSITION&&!L.Browser.android23,trackResize:!0,markerZoomAnimation:L.DomUtil.TRANSITION&&L.Browser.any3d},initialize:function(t,i){i=L.setOptions(this,i),this._initContainer(t),this._initLayout(),this._onResize=L.bind(this._onResize,this),this._initEvents(),i.maxBounds&&this.setMaxBounds(i.maxBounds),i.center&&void 0!==i.zoom&&this.setView(L.latLng(i.center),i.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(i.layers)},setView:function(t,i){return i=void 0===i?this.getZoom():i,this._resetView(L.latLng(t),this._limitZoom(i)),this},setZoom:function(t,i){return this._loaded?this.setView(this.getCenter(),t,{zoom:i}):(this._zoom=this._limitZoom(t),this)},zoomIn:function(t,i){return this.setZoom(this._zoom+(t||1),i)},zoomOut:function(t,i){return this.setZoom(this._zoom-(t||1),i)},setZoomAround:function(t,i,e){var n=this.getZoomScale(i),o=this.getSize().divideBy(2),s=t instanceof L.Point?t:this.latLngToContainerPoint(t),a=s.subtract(o).multiplyBy(1-1/n),r=this.containerPointToLatLng(o.add(a));return this.setView(r,i,{zoom:e})},fitBounds:function(t,i){i=i||{},t=t.getBounds?t.getBounds():L.latLngBounds(t);var e=L.point(i.paddingTopLeft||i.padding||[0,0]),n=L.point(i.paddingBottomRight||i.padding||[0,0]),o=this.getBoundsZoom(t,!1,e.add(n));o=i.maxZoom?Math.min(i.maxZoom,o):o;var s=n.subtract(e).divideBy(2),a=this.project(t.getSouthWest(),o),r=this.project(t.getNorthEast(),o),h=this.unproject(a.add(r).divideBy(2).add(s),o);return this.setView(h,o,i)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,i){return this.setView(t,this._zoom,{pan:i})},panBy:function(t){return this.fire("movestart"),this._rawPanBy(L.point(t)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(t){return t=L.latLngBounds(t),this.options.maxBounds=t,t?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(t,i){var e=this.getCenter(),n=this._limitCenter(e,this._zoom,t);return e.equals(n)?this:this.panTo(n,i)},addLayer:function(t){var i=L.stamp(t);return this._layers[i]?this:(this._layers[i]=t,!t.options||isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[i]=t,this._updateZoomLevels()),this.options.zoomAnimation&&L.TileLayer&&t instanceof L.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,t.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(t),this)},removeLayer:function(t){var i=L.stamp(t);return this._layers[i]?(this._loaded&&t.onRemove(this),delete this._layers[i],this._loaded&&this.fire("layerremove",{layer:t}),this._zoomBoundLayers[i]&&(delete this._zoomBoundLayers[i],this._updateZoomLevels()),this.options.zoomAnimation&&L.TileLayer&&t instanceof L.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,t.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(t){return t?L.stamp(t)in this._layers:!1},eachLayer:function(t,i){for(var e in this._layers)t.call(i,this._layers[e]);return this},invalidateSize:function(t){if(!this._loaded)return this;t=L.extend({animate:!1,pan:!0},t===!0?{animate:!0}:t);var i=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var e=this.getSize(),n=i.divideBy(2).round(),o=e.divideBy(2).round(),s=n.subtract(o);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(L.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:e})):this},addHandler:function(t,i){if(!i)return this;var e=this[t]=new i(this);return this._handlers.push(e),this.options[t]&&e.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(t){this._container._leaflet=void 0}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),i=this.unproject(t.getBottomLeft()),e=this.unproject(t.getTopRight());return new L.LatLngBounds(i,e)},getMinZoom:function(){return void 0===this.options.minZoom?void 0===this._layersMinZoom?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,i,e){t=L.latLngBounds(t);var n,o=this.getMinZoom()-(i?1:0),s=this.getMaxZoom(),a=this.getSize(),r=t.getNorthWest(),h=t.getSouthEast(),u=!0;e=L.point(e||[0,0]);do o++,n=this.project(h,o).subtract(this.project(r,o)).add(e),u=i?n.x<a.x||n.y<a.y:a.contains(n);while(u&&s>=o);return u&&i?null:i?o:o-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new L.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var t=this._getTopLeftPoint();return new L.Bounds(t,t.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t){var i=this.options.crs;return i.scale(t)/i.scale(this._zoom)},getScaleZoom:function(t){return this._zoom+Math.log(t)/Math.LN2},project:function(t,i){return i=void 0===i?this._zoom:i,this.options.crs.latLngToPoint(L.latLng(t),i)},unproject:function(t,i){return i=void 0===i?this._zoom:i,this.options.crs.pointToLatLng(L.point(t),i)},layerPointToLatLng:function(t){var i=L.point(t).add(this.getPixelOrigin());return this.unproject(i)},latLngToLayerPoint:function(t){var i=this.project(L.latLng(t))._round();return i._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(t){return L.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return L.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var i=this.containerPointToLayerPoint(L.point(t));return this.layerPointToLatLng(i)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(L.latLng(t)))},mouseEventToContainerPoint:function(t){return L.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var i=this._container=L.DomUtil.get(t);if(!i)throw new Error("Map container not found.");if(i._leaflet)throw new Error("Map container is already initialized.");i._leaflet=!0},_initLayout:function(){var t=this._container;L.DomUtil.addClass(t,"leaflet-container"+(L.Browser.touch?" leaflet-touch":"")+(L.Browser.retina?" leaflet-retina":"")+(L.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var i=L.DomUtil.getStyle(t,"position");"absolute"!==i&&"relative"!==i&&"fixed"!==i&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._mapPane=t.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=t.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),t.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),t.shadowPane=this._createPane("leaflet-shadow-pane"),t.overlayPane=this._createPane("leaflet-overlay-pane"),t.markerPane=this._createPane("leaflet-marker-pane"),t.popupPane=this._createPane("leaflet-popup-pane");var i=" leaflet-zoom-hide";this.options.markerZoomAnimation||(L.DomUtil.addClass(t.markerPane,i),L.DomUtil.addClass(t.shadowPane,i),L.DomUtil.addClass(t.popupPane,i))},_createPane:function(t,i){return L.DomUtil.create("div",t,i||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(t){t=t?L.Util.isArray(t)?t:[t]:[];for(var i=0,e=t.length;e>i;i++)this.addLayer(t[i])},_resetView:function(t,i,e,n){var o=this._zoom!==i;n||(this.fire("movestart"),o&&this.fire("zoomstart")),this._zoom=i,this._initialCenter=t,this._initialTopLeftPoint=this._getNewTopLeftPoint(t),e?this._initialTopLeftPoint._add(this._getMapPanePos()):L.DomUtil.setPosition(this._mapPane,new L.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var s=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!e}),s&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("move"),(o||n)&&this.fire("zoomend"),this.fire("moveend",{hard:!e})},_rawPanBy:function(t){L.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var t,i=1/0,e=-(1/0),n=this._getZoomSpan();for(t in this._zoomBoundLayers){var o=this._zoomBoundLayers[t];isNaN(o.options.minZoom)||(i=Math.min(i,o.options.minZoom)),isNaN(o.options.maxZoom)||(e=Math.max(e,o.options.maxZoom))}void 0===t?this._layersMaxZoom=this._layersMinZoom=void 0:(this._layersMaxZoom=e,this._layersMinZoom=i),n!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){if(L.DomEvent){t=t||"on",L.DomEvent[t](this._container,"click",this._onMouseClick,this);var i,e,n=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(i=0,e=n.length;e>i;i++)L.DomEvent[t](this._container,n[i],this._fireMouseEvent,this);this.options.trackResize&&L.DomEvent[t](window,"resize",this._onResize,this)}},_onResize:function(){L.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=L.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(t){!this._loaded||!t._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||L.DomEvent._skipped(t)||(this.fire("preclick"),this._fireMouseEvent(t))},_fireMouseEvent:function(t){if(this._loaded&&!L.DomEvent._skipped(t)){var i=t.type;if(i="mouseenter"===i?"mouseover":"mouseleave"===i?"mouseout":i,this.hasEventListeners(i)){"contextmenu"===i&&L.DomEvent.preventDefault(t);var e=this.mouseEventToContainerPoint(t),n=this.containerPointToLayerPoint(e),o=this.layerPointToLatLng(n);this.fire(i,{latlng:o,layerPoint:n,containerPoint:e,originalEvent:t})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var t=0,i=this._handlers.length;i>t;t++)this._handlers[t].disable()},whenReady:function(t,i){return this._loaded?t.call(i||this,this):this.on("load",t,i),this},_layerAdd:function(t){t.onAdd(this),this.fire("layeradd",{layer:t})},_getMapPanePos:function(){return L.DomUtil.getPosition(this._mapPane)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(t,i){var e=this.getSize()._divideBy(2);return this.project(t,i)._subtract(e)._round()},_latLngToNewLayerPoint:function(t,i,e){var n=this._getNewTopLeftPoint(e,i).add(this._getMapPanePos());return this.project(t,i)._subtract(n)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,i,e){if(!e)return t;var n=this.project(t,i),o=this.getSize().divideBy(2),s=new L.Bounds(n.subtract(o),n.add(o)),a=this._getBoundsOffset(s,e,i);return this.unproject(n.add(a),i)},_limitOffset:function(t,i){if(!i)return t;var e=this.getPixelBounds(),n=new L.Bounds(e.min.add(t),e.max.add(t));return t.add(this._getBoundsOffset(n,i))},_getBoundsOffset:function(t,i,e){var n=this.project(i.getNorthWest(),e).subtract(t.min),o=this.project(i.getSouthEast(),e).subtract(t.max),s=this._rebound(n.x,-o.x),a=this._rebound(n.y,-o.y);return new L.Point(s,a)},_rebound:function(t,i){return t+i>0?Math.round(t-i)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(i))},_limitZoom:function(t){var i=this.getMinZoom(),e=this.getMaxZoom();return Math.max(i,Math.min(e,t))}}),L.map=function(t,i){return new L.Map(t,i)};
L.TileLayer=L.Class.extend({includes:L.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:L.Browser.mobile,updateWhenIdle:L.Browser.mobile},initialize:function(t,i){i=L.setOptions(this,i),i.detectRetina&&L.Browser.retina&&i.maxZoom>0&&(i.tileSize=Math.floor(i.tileSize/2),i.zoomOffset++,i.minZoom>0&&i.minZoom--,this.options.maxZoom--),i.bounds&&(i.bounds=L.latLngBounds(i.bounds)),this._url=t;var e=this.options.subdomains;"string"==typeof e&&(this.options.subdomains=e.split(""))},onAdd:function(t){this._map=t,this._animated=t._zoomAnimated,this._initContainer(),t.on({viewreset:this._reset,moveend:this._update},this),this._animated&&t.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=L.Util.limitExecByInterval(this._update,150,this),t.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this._container.parentNode.removeChild(this._container),t.off({viewreset:this._reset,moveend:this._update},this),this._animated&&t.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||t.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var t=this._map._panes.tilePane;return this._container&&(t.appendChild(this._container),this._setAutoZIndex(t,Math.max)),this},bringToBack:function(){var t=this._map._panes.tilePane;return this._container&&(t.insertBefore(this._container,t.firstChild),this._setAutoZIndex(t,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},setUrl:function(t,i){return this._url=t,i||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t,i){var e,o,s,n=t.children,r=-i(1/0,-(1/0));for(o=0,s=n.length;s>o;o++)n[o]!==this._container&&(e=parseInt(n[o].style.zIndex,10),isNaN(e)||(r=i(r,e)));this.options.zIndex=this._container.style.zIndex=(isFinite(r)?r:0)+i(1,-1)},_updateOpacity:function(){var t,i=this._tiles;if(L.Browser.ielt9)for(t in i)L.DomUtil.setOpacity(i[t],this.options.opacity);else L.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var t=this._map._panes.tilePane;if(!this._container){if(this._container=L.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var i="leaflet-tile-container";this._bgBuffer=L.DomUtil.create("div",i,this._container),this._tileContainer=L.DomUtil.create("div",i,this._container)}else this._tileContainer=this._container;t.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(t){for(var i in this._tiles)this.fire("tileunload",{tile:this._tiles[i]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&t&&t.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var t=this._map,i=t.getZoom()+this.options.zoomOffset,e=this.options.maxNativeZoom,o=this.options.tileSize;return e&&i>e&&(o=Math.round(t.getZoomScale(i)/t.getZoomScale(e)*o)),o},_update:function(){if(this._map){var t=this._map,i=t.getPixelBounds(),e=t.getZoom(),o=this._getTileSize();if(!(e>this.options.maxZoom||e<this.options.minZoom)){var s=L.bounds(i.min.divideBy(o)._floor(),i.max.divideBy(o)._floor());this._addTilesFromCenterOut(s),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(s)}}},_addTilesFromCenterOut:function(t){var i,e,o,s=[],n=t.getCenter();for(i=t.min.y;i<=t.max.y;i++)for(e=t.min.x;e<=t.max.x;e++)o=new L.Point(e,i),this._tileShouldBeLoaded(o)&&s.push(o);var r=s.length;if(0!==r){s.sort(function(t,i){return t.distanceTo(n)-i.distanceTo(n)});var a=document.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=r,e=0;r>e;e++)this._addTile(s[e],a);this._tileContainer.appendChild(a)}},_tileShouldBeLoaded:function(t){if(t.x+":"+t.y in this._tiles)return!1;var i=this.options;if(!i.continuousWorld){var e=this._getWrapTileNum();if(i.noWrap&&(t.x<0||t.x>=e.x)||t.y<0||t.y>=e.y)return!1}if(i.bounds){var o=this._getTileSize(),s=t.multiplyBy(o),n=s.add([o,o]),r=this._map.unproject(s),a=this._map.unproject(n);if(i.continuousWorld||i.noWrap||(r=r.wrap(),a=a.wrap()),!i.bounds.intersects([r,a]))return!1}return!0},_removeOtherTiles:function(t){var i,e,o,s;for(s in this._tiles)i=s.split(":"),e=parseInt(i[0],10),o=parseInt(i[1],10),(e<t.min.x||e>t.max.x||o<t.min.y||o>t.max.y)&&this._removeTile(s)},_removeTile:function(t){var i=this._tiles[t];this.fire("tileunload",{tile:i,url:i.src}),this.options.reuseTiles?(L.DomUtil.removeClass(i,"leaflet-tile-loaded"),this._unusedTiles.push(i)):i.parentNode===this._tileContainer&&this._tileContainer.removeChild(i),L.Browser.android||(i.onload=null,i.src=L.Util.emptyImageUrl),delete this._tiles[t]},_addTile:function(t,i){var e=this._getTilePos(t),o=this._getTile();L.DomUtil.setPosition(o,e,L.Browser.chrome),this._tiles[t.x+":"+t.y]=o,this._loadTile(o,t),o.parentNode!==this._tileContainer&&i.appendChild(o)},_getZoomForUrl:function(){var t=this.options,i=this._map.getZoom();return t.zoomReverse&&(i=t.maxZoom-i),i+=t.zoomOffset,t.maxNativeZoom?Math.min(i,t.maxNativeZoom):i},_getTilePos:function(t){var i=this._map.getPixelOrigin(),e=this._getTileSize();return t.multiplyBy(e).subtract(i)},getTileUrl:function(t){return L.Util.template(this._url,L.extend({s:this._getSubdomain(t),z:t.z,x:t.x,y:t.y},this.options))},_getWrapTileNum:function(){var t=this._map.options.crs,i=t.getSize(this._map.getZoom());return i.divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(t){var i=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(t.x=(t.x%i.x+i.x)%i.x),this.options.tms&&(t.y=i.y-t.y-1),t.z=this._getZoomForUrl()},_getSubdomain:function(t){var i=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[i]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var t=this._unusedTiles.pop();return this._resetTile(t),t}return this._createTile()},_resetTile:function(){},_createTile:function(){var t=L.DomUtil.create("img","leaflet-tile");return t.style.width=t.style.height=this._getTileSize()+"px",t.galleryimg="no",t.onselectstart=t.onmousemove=L.Util.falseFn,L.Browser.ielt9&&void 0!==this.options.opacity&&L.DomUtil.setOpacity(t,this.options.opacity),L.Browser.mobileWebkit3d&&(t.style.WebkitBackfaceVisibility="hidden"),t},_loadTile:function(t,i){t._layer=this,t.onload=this._tileOnLoad,t.onerror=this._tileOnError,this._adjustTilePoint(i),t.src=this.getTileUrl(i),this.fire("tileloadstart",{tile:t,url:t.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&L.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(L.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var t=this._layer;this.src!==L.Util.emptyImageUrl&&(L.DomUtil.addClass(this,"leaflet-tile-loaded"),t.fire("tileload",{tile:this,url:this.src})),t._tileLoaded()},_tileOnError:function(){var t=this._layer;t.fire("tileerror",{tile:this,url:this.src});var i=t.options.errorTileUrl;i&&(this.src=i),t._tileLoaded()}}),L.tileLayer=function(t,i){return new L.TileLayer(t,i)};
L.TileLayer.WMS=L.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(t,s){this._url=t;var i=L.extend({},this.defaultWmsParams),e=s.tileSize||this.options.tileSize;s.detectRetina&&L.Browser.retina?i.width=i.height=2*e:i.width=i.height=e;for(var r in s)this.options.hasOwnProperty(r)||"crs"===r||(i[r]=s[r]);this.wmsParams=i,L.setOptions(this,s)},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var s=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[s]=this._crs.code,L.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var s=this._map,i=this.options.tileSize,e=t.multiplyBy(i),r=e.add([i,i]),a=this._crs.project(s.unproject(e,t.z)),n=this._crs.project(s.unproject(r,t.z)),o=this._wmsVersion>=1.3&&this._crs===L.CRS.EPSG4326?[n.y,a.x,a.y,n.x].join(","):[a.x,n.y,n.x,a.y].join(","),h=L.Util.template(this._url,{s:this._getSubdomain(t)});return h+L.Util.getParamString(this.wmsParams,h,!0)+"&BBOX="+o},setParams:function(t,s){return L.extend(this.wmsParams,t),s||this.redraw(),this}}),L.tileLayer.wms=function(t,s){return new L.TileLayer.WMS(t,s)};
L.TileLayer.Canvas=L.TileLayer.extend({options:{async:!1},initialize:function(i){L.setOptions(this,i)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var i in this._tiles)this._redrawTile(this._tiles[i]);return this},_redrawTile:function(i){this.drawTile(i,i._tilePoint,this._map._zoom)},_createTile:function(){var i=L.DomUtil.create("canvas","leaflet-tile");return i.width=i.height=this.options.tileSize,i.onselectstart=i.onmousemove=L.Util.falseFn,i},_loadTile:function(i,t){i._layer=this,i._tilePoint=t,this._redrawTile(i),this.options.async||this.tileDrawn(i)},drawTile:function(){},tileDrawn:function(i){this._tileOnLoad.call(i)}}),L.tileLayer.canvas=function(i){return new L.TileLayer.Canvas(i)};
L.ImageOverlay=L.Class.extend({includes:L.Mixin.Events,options:{opacity:1},initialize:function(t,i,e){this._url=t,this._bounds=L.latLngBounds(i),L.setOptions(this,e)},onAdd:function(t){this._map=t,this._image||this._initImage(),t._panes.overlayPane.appendChild(this._image),t.on("viewreset",this._reset,this),t.options.zoomAnimation&&L.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._image),t.off("viewreset",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var t=this._map._panes.overlayPane;return this._image&&t.insertBefore(this._image,t.firstChild),this},setUrl:function(t){this._url=t,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=L.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&L.Browser.any3d?L.DomUtil.addClass(this._image,"leaflet-zoom-animated"):L.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),L.extend(this._image,{galleryimg:"no",onselectstart:L.Util.falseFn,onmousemove:L.Util.falseFn,onload:L.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(t){var i=this._map,e=this._image,o=i.getZoomScale(t.zoom),a=this._bounds.getNorthWest(),n=this._bounds.getSouthEast(),s=i._latLngToNewLayerPoint(a,t.zoom,t.center),h=i._latLngToNewLayerPoint(n,t.zoom,t.center)._subtract(s),m=s._add(h._multiplyBy(.5*(1-1/o)));e.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(m)+" scale("+o+") "},_reset:function(){var t=this._image,i=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),e=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(i);L.DomUtil.setPosition(t,i),t.style.width=e.x+"px",t.style.height=e.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){L.DomUtil.setOpacity(this._image,this.options.opacity)}}),L.imageOverlay=function(t,i,e){return new L.ImageOverlay(t,i,e)};
L.Icon=L.Class.extend({options:{className:""},initialize:function(t){L.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,n){var e=this._getIconUrl(t);if(!e){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var o;return o=n&&"IMG"===n.tagName?this._createImg(e,n):this._createImg(e),this._setIconStyles(o,t),o},_setIconStyles:function(t,n){var e,o=this.options,i=L.point(o[n+"Size"]);e="shadow"===n?L.point(o.shadowAnchor||o.iconAnchor):L.point(o.iconAnchor),!e&&i&&(e=i.divideBy(2,!0)),t.className="leaflet-marker-"+n+" "+o.className,e&&(t.style.marginLeft=-e.x+"px",t.style.marginTop=-e.y+"px"),i&&(t.style.width=i.x+"px",t.style.height=i.y+"px")},_createImg:function(t,n){return n=n||document.createElement("img"),n.src=t,n},_getIconUrl:function(t){return L.Browser.retina&&this.options[t+"RetinaUrl"]?this.options[t+"RetinaUrl"]:this.options[t+"Url"]}}),L.icon=function(t){return new L.Icon(t)};
L.Icon.Default=L.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(t){var e=t+"Url";if(this.options[e])return this.options[e];L.Browser.retina&&"icon"===t&&(t+="-2x");var n=L.Icon.Default.imagePath;if(!n)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return n+"/marker-"+t+".png"}}),L.Icon.Default.imagePath=function(){var t,e,n,o,r,a=document.getElementsByTagName("script"),i=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(t=0,e=a.length;e>t;t++)if(n=a[t].src,o=n.match(i))return r=n.split(i)[0],(r?r+"/":"")+"images"}();
L.Marker=L.Class.extend({includes:L.Mixin.Events,options:{icon:new L.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(t,i){L.setOptions(this,i),this._latlng=L.latLng(t)},onAdd:function(t){this._map=t,t.on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),t.options.zoomAnimation&&t.options.markerZoomAnimation&&t.on("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),t.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=L.latLng(t),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update(),this},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){return this._icon&&this._setPos(this._map.latLngToLayerPoint(this._latlng).round()),this},_initIcon:function(){var t=this.options,i=this._map,n=i.options.zoomAnimation&&i.options.markerZoomAnimation,o=n?"leaflet-zoom-animated":"leaflet-zoom-hide",e=t.icon.createIcon(this._icon),s=!1;e!==this._icon&&(this._icon&&this._removeIcon(),s=!0,t.title&&(e.title=t.title),t.alt&&(e.alt=t.alt)),L.DomUtil.addClass(e,o),t.keyboard&&(e.tabIndex="0"),this._icon=e,this._initInteraction(),t.riseOnHover&&L.DomEvent.on(e,"mouseover",this._bringToFront,this).on(e,"mouseout",this._resetZIndex,this);var a=t.icon.createShadow(this._shadow),h=!1;a!==this._shadow&&(this._removeShadow(),h=!0),a&&L.DomUtil.addClass(a,o),this._shadow=a,t.opacity<1&&this._updateOpacity();var r=this._map._panes;s&&r.markerPane.appendChild(this._icon),a&&h&&r.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&L.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(t){L.DomUtil.setPosition(this._icon,t),this._shadow&&L.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(i)},_initInteraction:function(){if(this.options.clickable){var t=this._icon,i=["dblclick","mousedown","mouseover","mouseout","contextmenu"];L.DomUtil.addClass(t,"leaflet-clickable"),L.DomEvent.on(t,"click",this._onMouseClick,this),L.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var n=0;n<i.length;n++)L.DomEvent.on(t,i[n],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(t){var i=this.dragging&&this.dragging.moved();(this.hasEventListeners(t.type)||i)&&L.DomEvent.stopPropagation(t),i||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(t.type,{originalEvent:t,latlng:this._latlng})},_onKeyPress:function(t){13===t.keyCode&&this.fire("click",{originalEvent:t,latlng:this._latlng})},_fireMouseEvent:function(t){this.fire(t.type,{originalEvent:t,latlng:this._latlng}),"contextmenu"===t.type&&this.hasEventListeners(t.type)&&L.DomEvent.preventDefault(t),"mousedown"!==t.type?L.DomEvent.stopPropagation(t):L.DomEvent.preventDefault(t)},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){L.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&L.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),L.marker=function(t,i){return new L.Marker(t,i)};
L.DivIcon=L.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(n){var e=n&&"DIV"===n.tagName?n:document.createElement("div"),t=this.options;return t.html!==!1?e.innerHTML=t.html:e.innerHTML="",t.bgPos&&(e.style.backgroundPosition=-t.bgPos.x+"px "+-t.bgPos.y+"px"),this._setIconStyles(e,"icon"),e},createShadow:function(){return null}}),L.divIcon=function(n){return new L.DivIcon(n)};
L.Map.mergeOptions({closePopupOnClick:!0}),L.Popup=L.Class.extend({includes:L.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(t,i){L.setOptions(this,t),this._source=i,this._animated=L.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(t){this._map=t,this._container||this._initLayout();var i=t.options.fadeAnimation;i&&L.DomUtil.setOpacity(this._container,0),t._panes.popupPane.appendChild(this._container),t.on(this._getEvents(),this),this.update(),i&&L.DomUtil.setOpacity(this._container,1),this.fire("open"),t.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(t){return t.addLayer(this),this},openOn:function(t){return t.openPopup(this),this},onRemove:function(t){t._panes.popupPane.removeChild(this._container),L.Util.falseFn(this._container.offsetWidth),t.off(this._getEvents(),this),t.options.fadeAnimation&&L.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),t.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=L.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var t={viewreset:this._updatePosition};return this._animated&&(t.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t,i="leaflet-popup",n=i+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),o=this._container=L.DomUtil.create("div",n);this.options.closeButton&&(t=this._closeButton=L.DomUtil.create("a",i+"-close-button",o),t.href="#close",t.innerHTML="&#215;",L.DomEvent.disableClickPropagation(t),L.DomEvent.on(t,"click",this._onCloseButtonClick,this));var e=this._wrapper=L.DomUtil.create("div",i+"-content-wrapper",o);L.DomEvent.disableClickPropagation(e),this._contentNode=L.DomUtil.create("div",i+"-content",e),L.DomEvent.disableScrollPropagation(this._contentNode),L.DomEvent.on(e,"contextmenu",L.DomEvent.stopPropagation),this._tipContainer=L.DomUtil.create("div",i+"-tip-container",o),this._tip=L.DomUtil.create("div",i+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var t=this._contentNode,i=t.style;i.width="",i.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),i.width=n+1+"px",i.whiteSpace="",i.height="";var o=t.offsetHeight,e=this.options.maxHeight,s="leaflet-popup-scrolled";e&&o>e?(i.height=e+"px",L.DomUtil.addClass(t,s)):L.DomUtil.removeClass(t,s),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),i=this._animated,n=L.point(this.options.offset);i&&L.DomUtil.setPosition(this._container,t),this._containerBottom=-n.y-(i?0:t.y),this._containerLeft=-Math.round(this._containerWidth/2)+n.x+(i?0:t.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);L.DomUtil.setPosition(this._container,i)},_adjustPan:function(){if(this.options.autoPan){var t=this._map,i=this._container.offsetHeight,n=this._containerWidth,o=new L.Point(this._containerLeft,-i-this._containerBottom);this._animated&&o._add(L.DomUtil.getPosition(this._container));var e=t.layerPointToContainerPoint(o),s=L.point(this.options.autoPanPadding),a=L.point(this.options.autoPanPaddingTopLeft||s),p=L.point(this.options.autoPanPaddingBottomRight||s),h=t.getSize(),c=0,r=0;e.x+n+p.x>h.x&&(c=e.x+n-h.x+p.x),e.x-c-a.x<0&&(c=e.x-a.x),e.y+i+p.y>h.y&&(r=e.y+i-h.y+p.y),e.y-r-a.y<0&&(r=e.y-a.y),(c||r)&&t.fire("autopanstart").panBy([c,r])}},_onCloseButtonClick:function(t){this._close(),L.DomEvent.stop(t)}}),L.popup=function(t,i){return new L.Popup(t,i)},L.Map.include({openPopup:function(t,i,n){if(this.closePopup(),!(t instanceof L.Popup)){var o=t;t=new L.Popup(n).setLatLng(i).setContent(o)}return t._isOpen=!0,this._popup=t,this.addLayer(t)},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&(this.removeLayer(t),t._isOpen=!1),this}});
L.LayerGroup=L.Class.extend({initialize:function(e){this._layers={};var r,t;if(e)for(r=0,t=e.length;t>r;r++)this.addLayer(e[r])},addLayer:function(e){var r=this.getLayerId(e);return this._layers[r]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var r=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[r]&&this._map.removeLayer(this._layers[r]),delete this._layers[r],this},hasLayer:function(e){return e?e in this._layers||this.getLayerId(e)in this._layers:!1},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(e){var r,t,a=Array.prototype.slice.call(arguments,1);for(r in this._layers)t=this._layers[r],t[e]&&t[e].apply(t,a);return this},onAdd:function(e){this._map=e,this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e),this._map=null},addTo:function(e){return e.addLayer(this),this},eachLayer:function(e,r){for(var t in this._layers)e.call(r,this._layers[t]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];for(var r in this._layers)e.push(this._layers[r]);return e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return L.stamp(e)}}),L.layerGroup=function(e){return new L.LayerGroup(e)};
L.FeatureGroup=L.LayerGroup.extend({includes:L.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(t){return this.hasLayer(t)?this:("on"in t&&t.on(L.FeatureGroup.EVENTS,this._propagateEvent,this),L.LayerGroup.prototype.addLayer.call(this,t),this._popupContent&&t.bindPopup&&t.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),"off"in t&&t.off(L.FeatureGroup.EVENTS,this._propagateEvent,this),L.LayerGroup.prototype.removeLayer.call(this,t),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:t})):this},bindPopup:function(t,e){return this._popupContent=t,this._popupOptions=e,this.invoke("bindPopup",t,e)},openPopup:function(t){for(var e in this._layers){this._layers[e].openPopup(t);break}return this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new L.LatLngBounds;return this.eachLayer(function(e){t.extend(e instanceof L.Marker?e.getLatLng():e.getBounds())}),t},_propagateEvent:function(t){t=L.extend({layer:t.target,target:this},t),this.fire(t.type,t)}}),L.featureGroup=function(t){return new L.FeatureGroup(t)};
L.Path=L.Class.extend({includes:[L.Mixin.Events],statics:{CLIP_PADDING:function(){var t=L.Browser.mobile?1280:2e3,i=(t/Math.max(window.outerWidth,window.outerHeight)-1)/2;return Math.max(0,Math.min(.5,i))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(t){L.setOptions(this,t)},onAdd:function(t){this._map=t,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),t.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){t._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,L.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),t.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(t){return L.setOptions(this,t),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),L.Map.include({_updatePathViewport:function(){var t=L.Path.CLIP_PADDING,i=this.getSize(),n=L.DomUtil.getPosition(this._mapPane),e=n.multiplyBy(-1)._subtract(i.multiplyBy(t)._round()),s=e.add(i.multiplyBy(1+2*t)._round());this._pathViewport=new L.Bounds(e,s)}});
L.Path.SVG_NS="http://www.w3.org/2000/svg",L.Browser.svg=!(!document.createElementNS||!document.createElementNS(L.Path.SVG_NS,"svg").createSVGRect),L.Path=L.Path.extend({statics:{SVG:L.Browser.svg},bringToFront:function(){var t=this._map._pathRoot,i=this._container;return i&&t.lastChild!==i&&t.appendChild(i),this},bringToBack:function(){var t=this._map._pathRoot,i=this._container,e=t.firstChild;return i&&e!==i&&t.insertBefore(i,e),this},getPathString:function(){},_createElement:function(t){return document.createElementNS(L.Path.SVG_NS,t)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&L.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var t=this.getPathString();t||(t="M0 0"),this._path.setAttribute("d",t)},_initEvents:function(){if(this.options.clickable){(L.Browser.svg||!L.Browser.vml)&&L.DomUtil.addClass(this._path,"leaflet-clickable"),L.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var t=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],i=0;i<t.length;i++)L.DomEvent.on(this._container,t[i],this._fireMouseEvent,this)}},_onMouseClick:function(t){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(t)},_fireMouseEvent:function(t){if(this._map&&this.hasEventListeners(t.type)){var i=this._map,e=i.mouseEventToContainerPoint(t),o=i.containerPointToLayerPoint(e),s=i.layerPointToLatLng(o);this.fire(t.type,{latlng:s,layerPoint:o,containerPoint:e,originalEvent:t}),"contextmenu"===t.type&&L.DomEvent.preventDefault(t),"mousemove"!==t.type&&L.DomEvent.stopPropagation(t)}}}),L.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=L.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&L.Browser.any3d?(L.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):L.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(t){var i=this.getZoomScale(t.zoom),e=this._getCenterOffset(t.center)._multiplyBy(-i)._add(this._pathViewport.min);this._pathRoot.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(e)+" scale("+i+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,i=t.min,e=t.max,o=e.x-i.x,s=e.y-i.y,n=this._pathRoot,h=this._panes.overlayPane;L.Browser.mobileWebkit&&h.removeChild(n),L.DomUtil.setPosition(n,i),n.setAttribute("width",o),n.setAttribute("height",s),n.setAttribute("viewBox",[i.x,i.y,o,s].join(" ")),L.Browser.mobileWebkit&&h.appendChild(n)}}});
L.Browser.canvas=function(){return!!document.createElement("canvas").getContext}(),L.Path=L.Path.SVG&&!window.L_PREFER_CANVAS||!L.Browser.canvas?L.Path:L.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(t){return L.setOptions(this,t),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(t){t.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this.fire("remove"),this._map=null},_requestUpdate:function(){this._map&&!L.Path._updateRequest&&(L.Path._updateRequest=L.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){L.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var t=this.options;t.stroke&&(this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color),t.fill&&(this._ctx.fillStyle=t.fillColor||t.color),t.lineCap&&(this._ctx.lineCap=t.lineCap),t.lineJoin&&(this._ctx.lineJoin=t.lineJoin)},_drawPath:function(){var t,i,e,s,o,n;for(this._ctx.beginPath(),t=0,e=this._parts.length;e>t;t++){for(i=0,s=this._parts[t].length;s>i;i++)o=this._parts[t][i],n=(0===i?"move":"line")+"To",this._ctx[n](o.x,o.y);this instanceof L.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var t=this._ctx,i=this.options;this._drawPath(),t.save(),this._updateStyle(),i.fill&&(t.globalAlpha=i.fillOpacity,t.fill(i.fillRule||"evenodd")),i.stroke&&(t.globalAlpha=i.opacity,t.stroke()),t.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click dblclick contextmenu",this._fireMouseEvent,this))},_fireMouseEvent:function(t){this._containsPoint(t.layerPoint)&&this.fire(t.type,t)},_onMouseMove:function(t){this._map&&!this._map._animatingZoom&&(this._containsPoint(t.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",t)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",t)))}}),L.Map.include(L.Path.SVG&&!window.L_PREFER_CANVAS||!L.Browser.canvas?{}:{_initPathRoot:function(){var t,i=this._pathRoot;i||(i=this._pathRoot=document.createElement("canvas"),i.style.position="absolute",t=this._canvasCtx=i.getContext("2d"),t.lineCap="round",t.lineJoin="round",this._panes.overlayPane.appendChild(i),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,i=t.min,e=t.max.subtract(i),s=this._pathRoot;L.DomUtil.setPosition(s,i),s.width=e.x,s.height=e.y,s.getContext("2d").translate(-i.x,-i.y)}}});
L.LineUtil={simplify:function(t,n){if(!n||!t.length)return t.slice();var i=n*n;return t=this._reducePoints(t,i),t=this._simplifyDP(t,i)},pointToSegmentDistance:function(t,n,i){return Math.sqrt(this._sqClosestPointOnSegment(t,n,i,!0))},closestPointOnSegment:function(t,n,i){return this._sqClosestPointOnSegment(t,n,i)},_simplifyDP:function(t,n){var i=t.length,e=typeof Uint8Array!=void 0+""?Uint8Array:Array,s=new e(i);s[0]=s[i-1]=1,this._simplifyDPStep(t,s,n,0,i-1);var r,o=[];for(r=0;i>r;r++)s[r]&&o.push(t[r]);return o},_simplifyDPStep:function(t,n,i,e,s){var r,o,y,u=0;for(o=e+1;s-1>=o;o++)y=this._sqClosestPointOnSegment(t[o],t[e],t[s],!0),y>u&&(r=o,u=y);u>i&&(n[r]=1,this._simplifyDPStep(t,n,i,e,r),this._simplifyDPStep(t,n,i,r,s))},_reducePoints:function(t,n){for(var i=[t[0]],e=1,s=0,r=t.length;r>e;e++)this._sqDist(t[e],t[s])>n&&(i.push(t[e]),s=e);return r-1>s&&i.push(t[r-1]),i},clipSegment:function(t,n,i,e){var s,r,o,y=e?this._lastCode:this._getBitCode(t,i),u=this._getBitCode(n,i);for(this._lastCode=u;;){if(!(y|u))return[t,n];if(y&u)return!1;s=y||u,r=this._getEdgeIntersection(t,n,s,i),o=this._getBitCode(r,i),s===y?(t=r,y=o):(n=r,u=o)}},_getEdgeIntersection:function(t,n,i,e){var s=n.x-t.x,r=n.y-t.y,o=e.min,y=e.max;return 8&i?new L.Point(t.x+s*(y.y-t.y)/r,y.y):4&i?new L.Point(t.x+s*(o.y-t.y)/r,o.y):2&i?new L.Point(y.x,t.y+r*(y.x-t.x)/s):1&i?new L.Point(o.x,t.y+r*(o.x-t.x)/s):void 0},_getBitCode:function(t,n){var i=0;return t.x<n.min.x?i|=1:t.x>n.max.x&&(i|=2),t.y<n.min.y?i|=4:t.y>n.max.y&&(i|=8),i},_sqDist:function(t,n){var i=n.x-t.x,e=n.y-t.y;return i*i+e*e},_sqClosestPointOnSegment:function(t,n,i,e){var s,r=n.x,o=n.y,y=i.x-r,u=i.y-o,f=y*y+u*u;return f>0&&(s=((t.x-r)*y+(t.y-o)*u)/f,s>1?(r=i.x,o=i.y):s>0&&(r+=y*s,o+=u*s)),y=t.x-r,u=t.y-o,e?y*y+u*u:new L.Point(r,o)}};
L.Polyline=L.Path.extend({initialize:function(t,n){L.Path.prototype.initialize.call(this,n),this._latlngs=this._convertLatLngs(t)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var t=0,n=this._latlngs.length;n>t;t++)this._originalPoints[t]=this._map.latLngToLayerPoint(this._latlngs[t])},getPathString:function(){for(var t=0,n=this._parts.length,i="";n>t;t++)i+=this._getPathPartStr(this._parts[t]);return i},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._latlngs=this._convertLatLngs(t),this.redraw()},addLatLng:function(t){return this._latlngs.push(L.latLng(t)),this.redraw()},spliceLatLngs:function(){var t=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),t},closestLayerPoint:function(t){for(var n,i,s=1/0,r=this._parts,a=null,o=0,e=r.length;e>o;o++)for(var l=r[o],h=1,g=l.length;g>h;h++){n=l[h-1],i=l[h];var p=L.LineUtil._sqClosestPointOnSegment(t,n,i,!0);s>p&&(s=p,a=L.LineUtil._sqClosestPointOnSegment(t,n,i))}return a&&(a.distance=Math.sqrt(s)),a},getBounds:function(){return new L.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(t,n){var i,s,r=n?t:[];for(i=0,s=t.length;s>i;i++){if(L.Util.isArray(t[i])&&"number"!=typeof t[i][0])return;r[i]=L.latLng(t[i])}return r},_initEvents:function(){L.Path.prototype._initEvents.call(this)},_getPathPartStr:function(t){for(var n,i=L.Path.VML,s=0,r=t.length,a="";r>s;s++)n=t[s],i&&n._round(),a+=(s?"L":"M")+n.x+" "+n.y;return a},_clipPoints:function(){var t,n,i,s=this._originalPoints,r=s.length;if(this.options.noClip)return void(this._parts=[s]);this._parts=[];var a=this._parts,o=this._map._pathViewport,e=L.LineUtil;for(t=0,n=0;r-1>t;t++)i=e.clipSegment(s[t],s[t+1],o,t),i&&(a[n]=a[n]||[],a[n].push(i[0]),(i[1]!==s[t+1]||t===r-2)&&(a[n].push(i[1]),n++))},_simplifyPoints:function(){for(var t=this._parts,n=L.LineUtil,i=0,s=t.length;s>i;i++)t[i]=n.simplify(t[i],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),L.Path.prototype._updatePath.call(this))}}),L.polyline=function(t,n){return new L.Polyline(t,n)};
L.PolyUtil={},L.PolyUtil.clipPolygon=function(e,o){var t,d,i,n,_,c,g,l,r,h=[1,4,2,8],s=L.LineUtil;for(d=0,g=e.length;g>d;d++)e[d]._code=s._getBitCode(e[d],o);for(n=0;4>n;n++){for(l=h[n],t=[],d=0,g=e.length,i=g-1;g>d;i=d++)_=e[d],c=e[i],_._code&l?c._code&l||(r=s._getEdgeIntersection(c,_,l,o),r._code=s._getBitCode(r,o),t.push(r)):(c._code&l&&(r=s._getEdgeIntersection(c,_,l,o),r._code=s._getBitCode(r,o),t.push(r)),t.push(_));e=t}return e};
L.Polygon=L.Polyline.extend({options:{fill:!0},initialize:function(t,i){L.Polyline.prototype.initialize.call(this,t,i),this._initWithHoles(t)},_initWithHoles:function(t){var i,o,s;if(t&&L.Util.isArray(t[0])&&"number"!=typeof t[0][0])for(this._latlngs=this._convertLatLngs(t[0]),this._holes=t.slice(1),i=0,o=this._holes.length;o>i;i++)s=this._holes[i]=this._convertLatLngs(this._holes[i]),s[0].equals(s[s.length-1])&&s.pop();t=this._latlngs,t.length>=2&&t[0].equals(t[t.length-1])&&t.pop()},projectLatlngs:function(){if(L.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var t,i,o,s;for(t=0,o=this._holes.length;o>t;t++)for(this._holePoints[t]=[],i=0,s=this._holes[t].length;s>i;i++)this._holePoints[t][i]=this._map.latLngToLayerPoint(this._holes[t][i])}},setLatLngs:function(t){return t&&L.Util.isArray(t[0])&&"number"!=typeof t[0][0]?(this._initWithHoles(t),this.redraw()):L.Polyline.prototype.setLatLngs.call(this,t)},_clipPoints:function(){var t=this._originalPoints,i=[];if(this._parts=[t].concat(this._holePoints),!this.options.noClip){for(var o=0,s=this._parts.length;s>o;o++){var l=L.PolyUtil.clipPolygon(this._parts[o],this._map._pathViewport);l.length&&i.push(l)}this._parts=i}},_getPathPartStr:function(t){var i=L.Polyline.prototype._getPathPartStr.call(this,t);return i+(L.Browser.svg?"z":"x")}}),L.polygon=function(t,i){return new L.Polygon(t,i)};
!function(){function t(t){return L.FeatureGroup.extend({initialize:function(t,n){this._layers={},this._options=n,this.setLatLngs(t)},setLatLngs:function(n){var i=0,e=n.length;for(this.eachLayer(function(t){e>i?t.setLatLngs(n[i++]):this.removeLayer(t)},this);e>i;)this.addLayer(new t(n[i++],this._options));return this},getLatLngs:function(){var t=[];return this.eachLayer(function(n){t.push(n.getLatLngs())}),t}})}L.MultiPolyline=t(L.Polyline),L.MultiPolygon=t(L.Polygon),L.multiPolyline=function(t,n){return new L.MultiPolyline(t,n)},L.multiPolygon=function(t,n){return new L.MultiPolygon(t,n)}}();
L.Circle=L.Path.extend({initialize:function(t,i,n){L.Path.prototype.initialize.call(this,n),this._latlng=L.latLng(t),this._mRadius=i},options:{fill:!0},setLatLng:function(t){return this._latlng=L.latLng(t),this.redraw()},setRadius:function(t){return this._mRadius=t,this.redraw()},projectLatlngs:function(){var t=this._getLngRadius(),i=this._latlng,n=this._map.latLngToLayerPoint([i.lat,i.lng-t]);this._point=this._map.latLngToLayerPoint(i),this._radius=Math.max(this._point.x-n.x,1)},getBounds:function(){var t=this._getLngRadius(),i=this._mRadius/40075017*360,n=this._latlng;return new L.LatLngBounds([n.lat-i,n.lng-t],[n.lat+i,n.lng+t])},getLatLng:function(){return this._latlng},getPathString:function(){var t=this._point,i=this._radius;return this._checkIfEmpty()?"":L.Browser.svg?"M"+t.x+","+(t.y-i)+"A"+i+","+i+",0,1,1,"+(t.x-.1)+","+(t.y-i)+" z":(t._round(),i=Math.round(i),"AL "+t.x+","+t.y+" "+i+","+i+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(L.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var t=this._map._pathViewport,i=this._radius,n=this._point;return n.x-i>t.max.x||n.y-i>t.max.y||n.x+i<t.min.x||n.y+i<t.min.y}}),L.circle=function(t,i,n){return new L.Circle(t,i,n)};
L.CircleMarker=L.Circle.extend({options:{radius:10,weight:2},initialize:function(t,i){L.Circle.prototype.initialize.call(this,t,null,i),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){L.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(t){return L.Circle.prototype.setLatLng.call(this,t),this._popup&&this._popup._isOpen&&this._popup.setLatLng(t),this},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius}}),L.circleMarker=function(t,i){return new L.CircleMarker(t,i)};
L.Polyline.include(L.Path.CANVAS?{_containsPoint:function(t,n){var i,e,o,r,s,h,a,l=this.options.weight/2;for(L.Browser.touch&&(l+=10),i=0,r=this._parts.length;r>i;i++)for(a=this._parts[i],e=0,s=a.length,o=s-1;s>e;o=e++)if((n||0!==e)&&(h=L.LineUtil.pointToSegmentDistance(t,a[o],a[e]),l>=h))return!0;return!1}}:{});
L.GeoJSON=L.FeatureGroup.extend({initialize:function(e,t){L.setOptions(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,o,r,n=L.Util.isArray(e)?e:e.features;if(n){for(t=0,o=n.length;o>t;t++)r=n[t],(r.geometries||r.geometry||r.features||r.coordinates)&&this.addData(n[t]);return this}var i=this.options;if(!i.filter||i.filter(e)){var s=L.GeoJSON.geometryToLayer(e,i.pointToLayer,i.coordsToLatLng,i);return s.feature=L.GeoJSON.asFeature(e),s.defaultOptions=s.options,this.resetStyle(s),i.onEachFeature&&i.onEachFeature(e,s),this.addLayer(s)}},resetStyle:function(e){var t=this.options.style;t&&(L.Util.extend(e.options,e.defaultOptions),this._setLayerStyle(e,t))},setStyle:function(e){this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){"function"==typeof t&&(t=t(e.feature)),e.setStyle&&e.setStyle(t)}}),L.extend(L.GeoJSON,{geometryToLayer:function(e,t,o,r){var n,i,s,a,u="Feature"===e.type?e.geometry:e,l=u.coordinates,c=[];switch(o=o||this.coordsToLatLng,u.type){case"Point":return n=o(l),t?t(e,n):new L.Marker(n);case"MultiPoint":for(s=0,a=l.length;a>s;s++)n=o(l[s]),c.push(t?t(e,n):new L.Marker(n));return new L.FeatureGroup(c);case"LineString":return i=this.coordsToLatLngs(l,0,o),new L.Polyline(i,r);case"Polygon":if(2===l.length&&!l[1].length)throw new Error("Invalid GeoJSON object.");return i=this.coordsToLatLngs(l,1,o),new L.Polygon(i,r);case"MultiLineString":return i=this.coordsToLatLngs(l,1,o),new L.MultiPolyline(i,r);case"MultiPolygon":return i=this.coordsToLatLngs(l,2,o),new L.MultiPolygon(i,r);case"GeometryCollection":for(s=0,a=u.geometries.length;a>s;s++)c.push(this.geometryToLayer({geometry:u.geometries[s],type:"Feature",properties:e.properties},t,o,r));return new L.FeatureGroup(c);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(e){return new L.LatLng(e[1],e[0],e[2])},coordsToLatLngs:function(e,t,o){var r,n,i,s=[];for(n=0,i=e.length;i>n;n++)r=t?this.coordsToLatLngs(e[n],t-1,o):(o||this.coordsToLatLng)(e[n]),s.push(r);return s},latLngToCoords:function(e){var t=[e.lng,e.lat];return void 0!==e.alt&&t.push(e.alt),t},latLngsToCoords:function(e){for(var t=[],o=0,r=e.length;r>o;o++)t.push(L.GeoJSON.latLngToCoords(e[o]));return t},getFeature:function(e,t){return e.feature?L.extend({},e.feature,{geometry:t}):L.GeoJSON.asFeature(t)},asFeature:function(e){return"Feature"===e.type?e:{type:"Feature",properties:{},geometry:e}}});var PointToGeoJSON={toGeoJSON:function(){return L.GeoJSON.getFeature(this,{type:"Point",coordinates:L.GeoJSON.latLngToCoords(this.getLatLng())})}};L.Marker.include(PointToGeoJSON),L.Circle.include(PointToGeoJSON),L.CircleMarker.include(PointToGeoJSON),L.Polyline.include({toGeoJSON:function(){return L.GeoJSON.getFeature(this,{type:"LineString",coordinates:L.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),L.Polygon.include({toGeoJSON:function(){var e,t,o,r=[L.GeoJSON.latLngsToCoords(this.getLatLngs())];if(r[0].push(r[0][0]),this._holes)for(e=0,t=this._holes.length;t>e;e++)o=L.GeoJSON.latLngsToCoords(this._holes[e]),o.push(o[0]),r.push(o);return L.GeoJSON.getFeature(this,{type:"Polygon",coordinates:r})}}),function(){function e(e){return function(){var t=[];return this.eachLayer(function(e){t.push(e.toGeoJSON().geometry.coordinates)}),L.GeoJSON.getFeature(this,{type:e,coordinates:t})}}L.MultiPolyline.include({toGeoJSON:e("MultiLineString")}),L.MultiPolygon.include({toGeoJSON:e("MultiPolygon")}),L.LayerGroup.include({toGeoJSON:function(){var t,o=this.feature&&this.feature.geometry,r=[];if(o&&"MultiPoint"===o.type)return e("MultiPoint").call(this);var n=o&&"GeometryCollection"===o.type;return this.eachLayer(function(e){e.toGeoJSON&&(t=e.toGeoJSON(),r.push(n?t.geometry:L.GeoJSON.asFeature(t)))}),n?L.GeoJSON.getFeature(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}})}(),L.geoJson=function(e,t){return new L.GeoJSON(e,t)};
L.DomEvent={addListener:function(e,t,n,o){var r,i,a,s=L.stamp(n),l="_leaflet_"+t+s;return e[l]?this:(r=function(t){return n.call(o||e,t||L.DomEvent._getEvent())},L.Browser.pointer&&0===t.indexOf("touch")?this.addPointerListener(e,t,r,s):(L.Browser.touch&&"dblclick"===t&&this.addDoubleTapListener&&this.addDoubleTapListener(e,r,s),"addEventListener"in e?"mousewheel"===t?(e.addEventListener("DOMMouseScroll",r,!1),e.addEventListener(t,r,!1)):"mouseenter"===t||"mouseleave"===t?(i=r,a="mouseenter"===t?"mouseover":"mouseout",r=function(t){return L.DomEvent._checkMouse(e,t)?i(t):void 0},e.addEventListener(a,r,!1)):"click"===t&&L.Browser.android?(i=r,r=function(e){return L.DomEvent._filterClick(e,i)},e.addEventListener(t,r,!1)):e.addEventListener(t,r,!1):"attachEvent"in e&&e.attachEvent("on"+t,r),e[l]=r,this))},removeListener:function(e,t,n){var o=L.stamp(n),r="_leaflet_"+t+o,i=e[r];return i?(L.Browser.pointer&&0===t.indexOf("touch")?this.removePointerListener(e,t,o):L.Browser.touch&&"dblclick"===t&&this.removeDoubleTapListener?this.removeDoubleTapListener(e,o):"removeEventListener"in e?"mousewheel"===t?(e.removeEventListener("DOMMouseScroll",i,!1),e.removeEventListener(t,i,!1)):"mouseenter"===t||"mouseleave"===t?e.removeEventListener("mouseenter"===t?"mouseover":"mouseout",i,!1):e.removeEventListener(t,i,!1):"detachEvent"in e&&e.detachEvent("on"+t,i),e[r]=null,this):this},stopPropagation:function(e){return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,L.DomEvent._skipped(e),this},disableScrollPropagation:function(e){var t=L.DomEvent.stopPropagation;return L.DomEvent.on(e,"mousewheel",t).on(e,"MozMousePixelScroll",t)},disableClickPropagation:function(e){for(var t=L.DomEvent.stopPropagation,n=L.Draggable.START.length-1;n>=0;n--)L.DomEvent.on(e,L.Draggable.START[n],t);return L.DomEvent.on(e,"click",L.DomEvent._fakeStop).on(e,"dblclick",t)},preventDefault:function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this},stop:function(e){return L.DomEvent.preventDefault(e).stopPropagation(e)},getMousePosition:function(e,t){if(!t)return new L.Point(e.clientX,e.clientY);var n=t.getBoundingClientRect();return new L.Point(e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop)},getWheelDelta:function(e){var t=0;return e.wheelDelta&&(t=e.wheelDelta/120),e.detail&&(t=-e.detail/3),t},_skipEvents:{},_fakeStop:function(e){L.DomEvent._skipEvents[e.type]=!0},_skipped:function(e){var t=this._skipEvents[e.type];return this._skipEvents[e.type]=!1,t},_checkMouse:function(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch(o){return!1}return n!==e},_getEvent:function(){var e=window.event;if(!e)for(var t=arguments.callee.caller;t&&(e=t.arguments[0],!e||window.Event!==e.constructor);)t=t.caller;return e},_filterClick:function(e,t){var n=e.timeStamp||e.originalEvent.timeStamp,o=L.DomEvent._lastClick&&n-L.DomEvent._lastClick;return o&&o>100&&500>o||e.target._simulatedClick&&!e._simulated?void L.DomEvent.stop(e):(L.DomEvent._lastClick=n,t(e))}},L.DomEvent.on=L.DomEvent.addListener,L.DomEvent.off=L.DomEvent.removeListener;
L.Draggable=L.Class.extend({includes:L.Mixin.Events,statics:{START:L.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e){this._element=t,this._dragStartTarget=e||t},enable:function(){if(!this._enabled){for(var t=L.Draggable.START.length-1;t>=0;t--)L.DomEvent.on(this._dragStartTarget,L.Draggable.START[t],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var t=L.Draggable.START.length-1;t>=0;t--)L.DomEvent.off(this._dragStartTarget,L.Draggable.START[t],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(t){if(this._moved=!1,!t.shiftKey&&(1===t.which||1===t.button||t.touches)&&(L.DomEvent.stopPropagation(t),!L.Draggable._disabled&&(L.DomUtil.disableImageDrag(),L.DomUtil.disableTextSelection(),!this._moving))){var e=t.touches?t.touches[0]:t;this._startPoint=new L.Point(e.clientX,e.clientY),this._startPos=this._newPos=L.DomUtil.getPosition(this._element),L.DomEvent.on(document,L.Draggable.MOVE[t.type],this._onMove,this).on(document,L.Draggable.END[t.type],this._onUp,this)}},_onMove:function(t){if(t.touches&&t.touches.length>1)return void(this._moved=!0);var e=t.touches&&1===t.touches.length?t.touches[0]:t,o=new L.Point(e.clientX,e.clientY),i=o.subtract(this._startPoint);(i.x||i.y)&&(L.Browser.touch&&Math.abs(i.x)+Math.abs(i.y)<3||(L.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=L.DomUtil.getPosition(this._element).subtract(i),L.DomUtil.addClass(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,L.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,L.Util.cancelAnimFrame(this._animRequest),this._animRequest=L.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)))},_updatePosition:function(){this.fire("predrag"),L.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){L.DomUtil.removeClass(document.body,"leaflet-dragging"),this._lastTarget&&(L.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var t in L.Draggable.MOVE)L.DomEvent.off(document,L.Draggable.MOVE[t],this._onMove).off(document,L.Draggable.END[t],this._onUp);L.DomUtil.enableImageDrag(),L.DomUtil.enableTextSelection(),this._moved&&this._moving&&(L.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}});
L.Handler=L.Class.extend({initialize:function(e){this._map=e},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}});
L.Map.mergeOptions({dragging:!0,inertia:!L.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:L.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),L.Map.Drag=L.Handler.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new L.Draggable(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),i.on("viewreset",this._onViewReset,this),i.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var i=this._map;i._panAnim&&i._panAnim.stop(),i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var i=this._lastTime=+new Date,t=this._lastPos=this._draggable._newPos;this._positions.push(t),this._times.push(i),i-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var i=this._map.getSize()._divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(i).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var i=this._worldWidth,t=Math.round(i/2),a=this._initialWorldOffset,e=this._draggable._newPos.x,s=(e-t+a)%i+t-a,n=(e+t+a)%i-t-a,r=Math.abs(s+a)<Math.abs(n+a)?s:n;this._draggable._newPos.x=r},_onDragEnd:function(i){var t=this._map,a=t.options,e=+new Date-this._lastTime,s=!a.inertia||e>a.inertiaThreshold||!this._positions[0];if(t.fire("dragend",i),s)t.fire("moveend");else{var n=this._lastPos.subtract(this._positions[0]),r=(this._lastTime+e-this._times[0])/1e3,o=a.easeLinearity,h=n.multiplyBy(o/r),d=h.distanceTo([0,0]),_=Math.min(a.inertiaMaxSpeed,d),g=h.multiplyBy(_/d),l=_/(a.inertiaDeceleration*o),p=g.multiplyBy(-l/2).round();p.x&&p.y?(p=t._limitOffset(p,t.options.maxBounds),L.Util.requestAnimFrame(function(){t.panBy(p,{duration:l,easeLinearity:o,noMoveStart:!0})})):t.fire("moveend")}}}),L.Map.addInitHook("addHandler","dragging",L.Map.Drag);
L.Map.mergeOptions({scrollWheelZoom:!0}),L.Map.ScrollWheelZoom=L.Handler.extend({addHooks:function(){L.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),L.DomEvent.on(this._map._container,"MozMousePixelScroll",L.DomEvent.preventDefault),this._delta=0},removeHooks:function(){L.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),L.DomEvent.off(this._map._container,"MozMousePixelScroll",L.DomEvent.preventDefault)},_onWheelScroll:function(e){var o=L.DomEvent.getWheelDelta(e);this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var t=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(L.bind(this._performZoom,this),t),L.DomEvent.preventDefault(e),L.DomEvent.stopPropagation(e)},_performZoom:function(){var e=this._map,o=this._delta,t=e.getZoom();o=o>0?Math.ceil(o):Math.floor(o),o=Math.max(Math.min(o,4),-4),o=e._limitZoom(t+o)-t,this._delta=0,this._startTime=null,o&&("center"===e.options.scrollWheelZoom?e.setZoom(t+o):e.setZoomAround(this._lastMousePos,t+o))}}),L.Map.addInitHook("addHandler","scrollWheelZoom",L.Map.ScrollWheelZoom);
L.extend(L.DomEvent,{POINTER_DOWN:L.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:L.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:L.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:L.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(e,t,n,r){switch(t){case"touchstart":return this.addPointerListenerStart(e,t,n,r);case"touchend":return this.addPointerListenerEnd(e,t,n,r);case"touchmove":return this.addPointerListenerMove(e,t,n,r);default:throw"Unknown touch event type"}},addPointerListenerStart:function(e,t,n,r){var i="_leaflet_",o=this._pointers,s=function(e){"mouse"!==e.pointerType&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE&&L.DomEvent.preventDefault(e);for(var t=!1,r=0;r<o.length;r++)if(o[r].pointerId===e.pointerId){t=!0;break}t||o.push(e),e.touches=o.slice(),e.changedTouches=[e],n(e)};if(e[i+"touchstart"+r]=s,e.addEventListener(this.POINTER_DOWN,s,!1),!this._pointerDocumentListener){var c=function(e){for(var t=0;t<o.length;t++)if(o[t].pointerId===e.pointerId){o.splice(t,1);break}};document.documentElement.addEventListener(this.POINTER_UP,c,!1),document.documentElement.addEventListener(this.POINTER_CANCEL,c,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(e,t,n,r){function i(e){if(e.pointerType!==e.MSPOINTER_TYPE_MOUSE&&"mouse"!==e.pointerType||0!==e.buttons){for(var t=0;t<s.length;t++)if(s[t].pointerId===e.pointerId){s[t]=e;break}e.touches=s.slice(),e.changedTouches=[e],n(e)}}var o="_leaflet_",s=this._pointers;return e[o+"touchmove"+r]=i,e.addEventListener(this.POINTER_MOVE,i,!1),this},addPointerListenerEnd:function(e,t,n,r){var i="_leaflet_",o=this._pointers,s=function(e){for(var t=0;t<o.length;t++)if(o[t].pointerId===e.pointerId){o.splice(t,1);break}e.touches=o.slice(),e.changedTouches=[e],n(e)};return e[i+"touchend"+r]=s,e.addEventListener(this.POINTER_UP,s,!1),e.addEventListener(this.POINTER_CANCEL,s,!1),this},removePointerListener:function(e,t,n){var r="_leaflet_",i=e[r+t+n];switch(t){case"touchstart":e.removeEventListener(this.POINTER_DOWN,i,!1);break;case"touchmove":e.removeEventListener(this.POINTER_MOVE,i,!1);break;case"touchend":e.removeEventListener(this.POINTER_UP,i,!1),e.removeEventListener(this.POINTER_CANCEL,i,!1)}return this}});
L.Map.mergeOptions({touchZoom:L.Browser.touch&&!L.Browser.android23,bounceAtZoomLimits:!0}),L.Map.TouchZoom=L.Handler.extend({addHooks:function(){L.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){L.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var o=this._map;if(t.touches&&2===t.touches.length&&!o._animatingZoom&&!this._zooming){var e=o.mouseEventToLayerPoint(t.touches[0]),i=o.mouseEventToLayerPoint(t.touches[1]),n=o._getCenterLayerPoint();this._startCenter=e.add(i)._divideBy(2),this._startDist=e.distanceTo(i),this._moved=!1,this._zooming=!0,this._centerOffset=n.subtract(this._startCenter),o._panAnim&&o._panAnim.stop(),L.DomEvent.on(document,"touchmove",this._onTouchMove,this).on(document,"touchend",this._onTouchEnd,this),L.DomEvent.preventDefault(t)}},_onTouchMove:function(t){var o=this._map;if(t.touches&&2===t.touches.length&&this._zooming){var e=o.mouseEventToLayerPoint(t.touches[0]),i=o.mouseEventToLayerPoint(t.touches[1]);this._scale=e.distanceTo(i)/this._startDist,this._delta=e._add(i)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(o.options.bounceAtZoomLimits||!(o.getZoom()===o.getMinZoom()&&this._scale<1||o.getZoom()===o.getMaxZoom()&&this._scale>1))&&(this._moved||(L.DomUtil.addClass(o._mapPane,"leaflet-touching"),o.fire("movestart").fire("zoomstart"),this._moved=!0),L.Util.cancelAnimFrame(this._animRequest),this._animRequest=L.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),L.DomEvent.preventDefault(t))}},_updateOnMove:function(){var t=this._map,o=this._getScaleOrigin(),e=t.layerPointToLatLng(o),i=t.getScaleZoom(this._scale);t._animateZoom(e,i,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);var t=this._map;this._zooming=!1,L.DomUtil.removeClass(t._mapPane,"leaflet-touching"),L.Util.cancelAnimFrame(this._animRequest),L.DomEvent.off(document,"touchmove",this._onTouchMove).off(document,"touchend",this._onTouchEnd);var o=this._getScaleOrigin(),e=t.layerPointToLatLng(o),i=t.getZoom(),n=t.getScaleZoom(this._scale)-i,s=n>0?Math.ceil(n):Math.floor(n),a=t._limitZoom(i+s),h=t.getZoomScale(a)/this._scale;t._animateZoom(e,a,o,h)},_getScaleOrigin:function(){var t=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(t)}}),L.Map.addInitHook("addHandler","touchZoom",L.Map.TouchZoom);
L.Handler.MarkerDrag=L.Handler.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new L.Draggable(a,a)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),L.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),L.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var a=this._marker,r=a._shadow,t=L.DomUtil.getPosition(a._icon),e=a._map.layerPointToLatLng(t);r&&L.DomUtil.setPosition(r,t),a._latlng=e,a.fire("move",{latlng:e}).fire("drag")},_onDragEnd:function(a){this._marker.fire("moveend").fire("dragend",a)}});
L.Control=L.Class.extend({options:{position:"topright"},initialize:function(t){L.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var o=this._map;return o&&o.removeControl(this),this.options.position=t,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this._map=t;var o=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return L.DomUtil.addClass(o,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(o,i.firstChild):i.appendChild(o),this},removeFrom:function(t){var o=this.getPosition(),n=t._controlCorners[o];return n.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(t),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),L.control=function(t){return new L.Control(t)},L.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.removeFrom(this),this},_initControlPos:function(){function t(t,r){var e=n+t+" "+n+r;o[t+r]=L.DomUtil.create("div",e,i)}var o=this._controlCorners={},n="leaflet-",i=this._controlContainer=L.DomUtil.create("div",n+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}});
L.Control.Zoom=L.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(o){var t="leaflet-control-zoom",n=L.DomUtil.create("div",t+" leaflet-bar");return this._map=o,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,t+"-in",n,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,t+"-out",n,this._zoomOut,this),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(o){this._map.zoomIn(o.shiftKey?3:1)},_zoomOut:function(o){this._map.zoomOut(o.shiftKey?3:1)},_createButton:function(o,t,n,i,e,s){var m=L.DomUtil.create("a",n,i);m.innerHTML=o,m.href="#",m.title=t;var l=L.DomEvent.stopPropagation;return L.DomEvent.on(m,"click",l).on(m,"mousedown",l).on(m,"dblclick",l).on(m,"click",L.DomEvent.preventDefault).on(m,"click",e,s).on(m,"click",this._refocusOnMap,s),m},_updateDisabled:function(){var o=this._map,t="leaflet-disabled";L.DomUtil.removeClass(this._zoomInButton,t),L.DomUtil.removeClass(this._zoomOutButton,t),o._zoom===o.getMinZoom()&&L.DomUtil.addClass(this._zoomOutButton,t),o._zoom===o.getMaxZoom()&&L.DomUtil.addClass(this._zoomInButton,t)}}),L.Map.mergeOptions({zoomControl:!0}),L.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new L.Control.Zoom,this.addControl(this.zoomControl))}),L.control.zoom=function(o){return new L.Control.Zoom(o)};
L.Control.Attribution=L.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){L.setOptions(this,t),this._attributions={}},onAdd:function(t){this._container=L.DomUtil.create("div","leaflet-control-attribution"),L.DomEvent.disableClickPropagation(this._container);for(var i in t._layers)t._layers[i].getAttribution&&this.addAttribution(t._layers[i].getAttribution());return t.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(t){t.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):void 0},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):void 0},_update:function(){if(this._map){var t=[];for(var i in this._attributions)this._attributions[i]&&t.push(i);var o=[];this.options.prefix&&o.push(this.options.prefix),t.length&&o.push(t.join(", ")),this._container.innerHTML=o.join(" | ")}},_onLayerAdd:function(t){t.layer.getAttribution&&this.addAttribution(t.layer.getAttribution())},_onLayerRemove:function(t){t.layer.getAttribution&&this.removeAttribution(t.layer.getAttribution())}}),L.Map.mergeOptions({attributionControl:!0}),L.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new L.Control.Attribution).addTo(this))}),L.control.attribution=function(t){return new L.Control.Attribution(t)};
L.Control.Scale=L.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(t){this._map=t;var e="leaflet-control-scale",i=L.DomUtil.create("div",e),n=this.options;return this._addScales(n,e,i),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=L.DomUtil.create("div",e+"-line",i)),t.imperial&&(this._iScale=L.DomUtil.create("div",e+"-line",i))},_update:function(){var t=this._map.getBounds(),e=t.getCenter().lat,i=6378137*Math.PI*Math.cos(e*Math.PI/180),n=i*(t.getNorthEast().lng-t.getSouthWest().lng)/180,a=this._map.getSize(),o=this.options,h=0;a.x>0&&(h=n*(o.maxWidth/a.x)),this._updateScales(o,h)},_updateScales:function(t,e){t.metric&&e&&this._updateMetric(e),t.imperial&&e&&this._updateImperial(e)},_updateMetric:function(t){var e=this._getRoundNum(t);this._mScale.style.width=this._getScaleWidth(e/t)+"px",this._mScale.innerHTML=1e3>e?e+" m":e/1e3+" km"},_updateImperial:function(t){var e,i,n,a=3.2808399*t,o=this._iScale;a>5280?(e=a/5280,i=this._getRoundNum(e),o.style.width=this._getScaleWidth(i/e)+"px",o.innerHTML=i+" mi"):(n=this._getRoundNum(a),o.style.width=this._getScaleWidth(n/a)+"px",o.innerHTML=n+" ft")},_getScaleWidth:function(t){return Math.round(this.options.maxWidth*t)-10},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,e*i}}),L.control.scale=function(t){return new L.Control.Scale(t)};
L.Control.Layers=L.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(e,t,a){L.setOptions(this,a),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var i in e)this._addLayer(e[i],i);for(i in t)this._addLayer(t[i],i,!0)},onAdd:function(e){return this._initLayout(),this._update(),e.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(e){e.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._update(),this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._update(),this},removeLayer:function(e){var t=L.stamp(e);return delete this._layers[t],this._update(),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=L.DomUtil.create("div",e);t.setAttribute("aria-haspopup",!0),L.Browser.touch?L.DomEvent.on(t,"click",L.DomEvent.stopPropagation):L.DomEvent.disableClickPropagation(t).disableScrollPropagation(t);var a=this._form=L.DomUtil.create("form",e+"-list");if(this.options.collapsed){L.Browser.android||L.DomEvent.on(t,"mouseover",this._expand,this).on(t,"mouseout",this._collapse,this);var i=this._layersLink=L.DomUtil.create("a",e+"-toggle",t);i.href="#",i.title="Layers",L.Browser.touch?L.DomEvent.on(i,"click",L.DomEvent.stop).on(i,"click",this._expand,this):L.DomEvent.on(i,"focus",this._expand,this),L.DomEvent.on(a,"click",function(){setTimeout(L.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=L.DomUtil.create("div",e+"-base",a),this._separator=L.DomUtil.create("div",e+"-separator",a),this._overlaysList=L.DomUtil.create("div",e+"-overlays",a),t.appendChild(a)},_addLayer:function(e,t,a){var i=L.stamp(e);this._layers[i]={layer:e,name:t,overlay:a},this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var e,t,a=!1,i=!1;for(e in this._layers)t=this._layers[e],this._addItem(t),i=i||t.overlay,a=a||!t.overlay;this._separator.style.display=i&&a?"":"none"}},_onLayerChange:function(e){var t=this._layers[L.stamp(e.layer)];if(t){this._handlingClick||this._update();var a=t.overlay?"layeradd"===e.type?"overlayadd":"overlayremove":"layeradd"===e.type?"baselayerchange":null;a&&this._map.fire(a,t)}},_createRadioElement:function(e,t){var a='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"';t&&(a+=' checked="checked"'),a+="/>";var i=document.createElement("div");return i.innerHTML=a,i.firstChild},_addItem:function(e){var t,a=document.createElement("label"),i=this._map.hasLayer(e.layer);e.overlay?(t=document.createElement("input"),t.type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=i):t=this._createRadioElement("leaflet-base-layers",i),t.layerId=L.stamp(e.layer),L.DomEvent.on(t,"click",this._onInputClick,this);var s=document.createElement("span");s.innerHTML=" "+e.name,a.appendChild(t),a.appendChild(s);var n=e.overlay?this._overlaysList:this._baseLayersList;return n.appendChild(a),a},_onInputClick:function(){var e,t,a,i=this._form.getElementsByTagName("input"),s=i.length;for(this._handlingClick=!0,e=0;s>e;e++)t=i[e],a=this._layers[t.layerId],t.checked&&!this._map.hasLayer(a.layer)?this._map.addLayer(a.layer):!t.checked&&this._map.hasLayer(a.layer)&&this._map.removeLayer(a.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){L.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),L.control.layers=function(e,t,a){return new L.Control.Layers(e,t,a)};
L.PosAnimation=L.Class.extend({includes:L.Mixin.Events,run:function(t,i,s,e){this.stop(),this._el=t,this._inProgress=!0,this._newPos=i,this.fire("start"),t.style[L.DomUtil.TRANSITION]="all "+(s||.25)+"s cubic-bezier(0,0,"+(e||.5)+",1)",L.DomEvent.on(t,L.DomUtil.TRANSITION_END,this._onTransitionEnd,this),L.DomUtil.setPosition(t,i),L.Util.falseFn(t.offsetWidth),this._stepTimer=setInterval(L.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(L.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),L.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var t=this._getPos();return t?(this._el._leaflet_pos=t,void this.fire("step")):void this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var t,i,s,e=this._el,n=window.getComputedStyle(e);if(L.Browser.any3d){if(s=n[L.DomUtil.TRANSFORM].match(this._transformRe),!s)return;t=parseFloat(s[1]),i=parseFloat(s[2])}else t=parseFloat(n.left),i=parseFloat(n.top);return new L.Point(t,i,!0)},_onTransitionEnd:function(){L.DomEvent.off(this._el,L.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[L.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}});
L.Map.include({setView:function(i,t,n){if(t=void 0===t?this._zoom:this._limitZoom(t),i=this._limitCenter(L.latLng(i),t,this.options.maxBounds),n=n||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!n.reset&&n!==!0){void 0!==n.animate&&(n.zoom=L.extend({animate:n.animate},n.zoom),n.pan=L.extend({animate:n.animate},n.pan));var e=this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,t,n.zoom):this._tryAnimatedPan(i,n.pan);if(e)return clearTimeout(this._sizeTimer),this}return this._resetView(i,t),this},panBy:function(i,t){if(i=L.point(i).round(),t=t||{},!i.x&&!i.y)return this;if(this._panAnim||(this._panAnim=new L.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),t.animate!==!1){L.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(i);this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){L.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,t){var n=this._getCenterOffset(i)._floor();return(t&&t.animate)===!0||this.getSize().contains(n)?(this.panBy(n,t),!0):!1}});
L.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),L.DomUtil.TRANSITION&&L.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&L.DomUtil.TRANSITION&&L.Browser.any3d&&!L.Browser.android23&&!L.Browser.mobileOpera,this._zoomAnimated&&L.DomEvent.on(this._mapPane,L.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),L.Map.include(L.DomUtil.TRANSITION?{_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,t,o){if(this._animatingZoom)return!0;if(o=o||{},!this._zoomAnimated||o.animate===!1||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(t),a=this._getCenterOffset(i)._divideBy(1-1/n),e=this._getCenterLayerPoint()._add(a);return o.animate===!0||this.getSize().contains(a)?(this.fire("movestart").fire("zoomstart"),this._animateZoom(i,t,e,n,null,!0),!0):!1},_animateZoom:function(i,t,o,n,a,e,m){m||(this._animatingZoom=!0),L.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=i,this._animateToZoom=t,L.Draggable&&(L.Draggable._disabled=!0),L.Util.requestAnimFrame(function(){this.fire("zoomanim",{center:i,zoom:t,origin:o,scale:n,delta:a,backwards:e}),setTimeout(L.bind(this._onZoomTransitionEnd,this),250)},this)},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._animatingZoom=!1,L.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),L.Util.requestAnimFrame(function(){this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),L.Draggable&&(L.Draggable._disabled=!1)},this))}}:{});
L.TileLayer.include({_animateZoom:function(e){this._animating||(this._animating=!0,this._prepareBgBuffer());var t=this._bgBuffer,i=L.DomUtil.TRANSFORM,a=e.delta?L.DomUtil.getTranslateString(e.delta):t.style[i],n=L.DomUtil.getScaleString(e.scale,e.origin);t.style[i]=e.backwards?n+" "+a:a+" "+n},_endZoomAnim:function(){var e=this._tileContainer,t=this._bgBuffer;e.style.visibility="",e.parentNode.appendChild(e),L.Util.falseFn(t.offsetWidth);var i=this._map.getZoom();(i>this.options.maxZoom||i<this.options.minZoom)&&this._clearBgBuffer(),this._animating=!1},_clearBgBuffer:function(){var e=this._map;!e||e._animatingZoom||e.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[L.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var e=this._tileContainer,t=this._bgBuffer,i=this._getLoadedTilesPercentage(t),a=this._getLoadedTilesPercentage(e);return t&&i>.5&&.5>a?(e.style.visibility="hidden",void this._stopLoadingImages(e)):(t.style.visibility="hidden",t.style[L.DomUtil.TRANSFORM]="",this._tileContainer=t,t=this._bgBuffer=e,this._stopLoadingImages(t),void clearTimeout(this._clearBgBufferTimer))},_getLoadedTilesPercentage:function(e){var t,i,a=e.getElementsByTagName("img"),n=0;for(t=0,i=a.length;i>t;t++)a[t].complete&&n++;return n/i},_stopLoadingImages:function(e){var t,i,a,n=Array.prototype.slice.call(e.getElementsByTagName("img"));for(t=0,i=n.length;i>t;t++)a=n[t],a.complete||(a.onload=L.Util.falseFn,a.onerror=L.Util.falseFn,a.src=L.Util.emptyImageUrl,a.parentNode.removeChild(a))}});
L.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(o){if(o=this._locateOptions=L.extend(this._defaultLocateOptions,o),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=L.bind(this._handleGeolocationResponse,this),i=L.bind(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,i,o):navigator.geolocation.getCurrentPosition(t,i,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){var t=o.code,i=o.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(o){var t=o.coords.latitude,i=o.coords.longitude,e=new L.LatLng(t,i),a=180*o.coords.accuracy/40075017,n=a/Math.cos(L.LatLng.DEG_TO_RAD*t),s=L.latLngBounds([t-a,i-n],[t+a,i+n]),c=this._locateOptions;if(c.setView){var r=Math.min(this.getBoundsZoom(s),c.maxZoom);this.setView(e,r)}var l={latlng:e,bounds:s,timestamp:o.timestamp};for(var h in o.coords)"number"==typeof o.coords[h]&&(l[h]=o.coords[h]);this.fire("locationfound",l)}});
L.Control.Fullscreen=L.Control.extend({options:{position:"topleft",title:{"false":"View Fullscreen","true":"Exit Fullscreen"}},onAdd:function(e){var l=L.DomUtil.create("div","leaflet-control-fullscreen leaflet-bar leaflet-control");return this.link=L.DomUtil.create("a","leaflet-control-fullscreen-button leaflet-bar-part",l),this.link.href="#",this._map=e,this._map.on("fullscreenchange",this._toggleTitle,this),this._toggleTitle(),L.DomEvent.on(this.link,"click",this._click,this),l},_click:function(e){L.DomEvent.stopPropagation(e),L.DomEvent.preventDefault(e),this._map.toggleFullscreen(this.options)},_toggleTitle:function(){this.link.title=this.options.title[this._map.isFullscreen()]}}),L.Map.include({isFullscreen:function(){return this._isFullscreen||!1},toggleFullscreen:function(e){var l=this.getContainer();this.isFullscreen()?e&&e.pseudoFullscreen?this._disablePseudoFullscreen(l):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():this._disablePseudoFullscreen(l):e&&e.pseudoFullscreen?this._enablePseudoFullscreen(l):l.requestFullscreen?l.requestFullscreen():l.mozRequestFullScreen?l.mozRequestFullScreen():l.webkitRequestFullscreen?l.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):l.msRequestFullscreen?l.msRequestFullscreen():this._enablePseudoFullscreen(l)},_enablePseudoFullscreen:function(e){L.DomUtil.addClass(e,"leaflet-pseudo-fullscreen"),this._setFullscreen(!0),this.invalidateSize(),this.fire("fullscreenchange")},_disablePseudoFullscreen:function(e){L.DomUtil.removeClass(e,"leaflet-pseudo-fullscreen"),this._setFullscreen(!1),this.invalidateSize(),this.fire("fullscreenchange")},_setFullscreen:function(e){this._isFullscreen=e;var l=this.getContainer();e?L.DomUtil.addClass(l,"leaflet-fullscreen-on"):L.DomUtil.removeClass(l,"leaflet-fullscreen-on")},_onFullscreenChange:function(e){var l=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;l!==this.getContainer()||this._isFullscreen?l!==this.getContainer()&&this._isFullscreen&&(this._setFullscreen(!1),this.fire("fullscreenchange")):(this._setFullscreen(!0),this.fire("fullscreenchange"))}}),L.Map.mergeOptions({fullscreenControl:!1}),L.Map.addInitHook(function(){this.options.fullscreenControl&&(this.fullscreenControl=new L.Control.Fullscreen(this.options.fullscreenControl),this.addControl(this.fullscreenControl));var e;if("onfullscreenchange"in document?e="fullscreenchange":"onmozfullscreenchange"in document?e="mozfullscreenchange":"onwebkitfullscreenchange"in document?e="webkitfullscreenchange":"onmsfullscreenchange"in document&&(e="MSFullscreenChange"),e){var l=L.bind(this._onFullscreenChange,this);this.whenReady(function(){L.DomEvent.on(document,e,l)}),this.on("unload",function(){L.DomEvent.off(document,e,l)})}}),L.control.fullscreen=function(e){return new L.Control.Fullscreen(e)};
L.NumberFormatter={round:function(r,t,a){var o=L.Util.formatNum(r,t)+"",n=o.split(".");if(n[1]){for(var i=t-n[1].length;i>0;i--)n[1]+="0";o=n.join(a||".")}return o},toDMS:function(r){var t=Math.floor(Math.abs(r)),a=60*(Math.abs(r)-t),o=Math.floor(a),n=60*(a-o),i=Math.round(n);60==i&&(o++,i="00"),60==o&&(t++,o="00"),10>i&&(i="0"+i),10>o&&(o="0"+o);var e="";return 0>r&&(e="-"),""+e+t+"&deg; "+o+"' "+i+"''"},createValidNumber:function(r,t){if(r&&r.length>0){var a=r.split(t||".");try{var o=Number(a.join("."));return isNaN(o)?void 0:o}catch(n){return void 0}}return void 0}};
L.Control.Coordinates=L.Control.extend({options:{position:"bottomright",decimals:4,decimalSeperator:".",labelTemplateLat:"Lat: {y}",labelTemplateLng:"Lng: {x}",labelFormatterLat:void 0,labelFormatterLng:void 0,enableUserInput:!0,useDMS:!1,useLatLngOrder:!1,centerUserCoordinates:!1,markerType:L.marker,markerProps:{}},onAdd:function(t){this._map=t;var e="leaflet-control-coordinates",i=this._container=L.DomUtil.create("div",e),n=this.options;this._labelcontainer=L.DomUtil.create("div","uiElement label",i),this._label=L.DomUtil.create("span","labelFirst",this._labelcontainer),this._inputcontainer=L.DomUtil.create("div","uiElement input uiHidden",i);var a,o;return n.useLatLngOrder?(o=L.DomUtil.create("span","",this._inputcontainer),this._inputY=this._createInput("inputY",this._inputcontainer),a=L.DomUtil.create("span","",this._inputcontainer),this._inputX=this._createInput("inputX",this._inputcontainer)):(a=L.DomUtil.create("span","",this._inputcontainer),this._inputX=this._createInput("inputX",this._inputcontainer),o=L.DomUtil.create("span","",this._inputcontainer),this._inputY=this._createInput("inputY",this._inputcontainer)),a.innerHTML=n.labelTemplateLng.replace("{x}",""),o.innerHTML=n.labelTemplateLat.replace("{y}",""),L.DomEvent.on(this._inputX,"keyup",this._handleKeypress,this),L.DomEvent.on(this._inputY,"keyup",this._handleKeypress,this),t.on("mousemove",this._update,this),t.on("dragstart",this.collapse,this),t.whenReady(this._update,this),this._showsCoordinates=!0,n.enableUserInput&&L.DomEvent.addListener(this._container,"click",this._switchUI,this),i},_createInput:function(t,e){var i=L.DomUtil.create("input",t,e);return i.type="text",L.DomEvent.disableClickPropagation(i),i},_clearMarker:function(){this._map.removeLayer(this._marker)},_handleKeypress:function(t){switch(t.keyCode){case 27:this.collapse();break;case 13:this._handleSubmit(),this.collapse();break;default:this._handleSubmit()}},_handleSubmit:function(){var t=L.NumberFormatter.createValidNumber(this._inputX.value,this.options.decimalSeperator),e=L.NumberFormatter.createValidNumber(this._inputY.value,this.options.decimalSeperator);if(void 0!==t&&void 0!==e){var i=this._marker;i||(i=this._marker=this._createNewMarker(),i.on("click",this._clearMarker,this));var n=new L.LatLng(e,t);i.setLatLng(n),i.addTo(this._map),this.options.centerUserCoordinates&&this._map.setView(n,this._map.getZoom())}},expand:function(){this._showsCoordinates=!1,this._map.off("mousemove",this._update,this),L.DomEvent.addListener(this._container,"mousemove",L.DomEvent.stop),L.DomEvent.removeListener(this._container,"click",this._switchUI,this),L.DomUtil.addClass(this._labelcontainer,"uiHidden"),L.DomUtil.removeClass(this._inputcontainer,"uiHidden")},_createCoordinateLabel:function(t){var e,i,n=this.options;return e=n.labelFormatterLng?n.labelFormatterLng(t.lng):L.Util.template(n.labelTemplateLng,{x:this._getNumber(t.lng,n)}),i=n.labelFormatterLat?n.labelFormatterLat(t.lat):L.Util.template(n.labelTemplateLat,{y:this._getNumber(t.lat,n)}),n.useLatLngOrder?i+" "+e:e+" "+i},_getNumber:function(t,e){var i;return i=e.useDMS?L.NumberFormatter.toDMS(t):L.NumberFormatter.round(t,e.decimals,e.decimalSeperator)},collapse:function(){if(!this._showsCoordinates){this._map.on("mousemove",this._update,this),this._showsCoordinates=!0;this.options;if(L.DomEvent.addListener(this._container,"click",this._switchUI,this),L.DomEvent.removeListener(this._container,"mousemove",L.DomEvent.stop),L.DomUtil.addClass(this._inputcontainer,"uiHidden"),L.DomUtil.removeClass(this._labelcontainer,"uiHidden"),this._marker){var t=this._createNewMarker(),e=this._marker.getLatLng();t.setLatLng(e);var i=L.DomUtil.create("div",""),n=L.DomUtil.create("div","",i);n.innerHTML=this._createCoordinateLabel(e);var a=L.DomUtil.create("a","",i);a.innerHTML="Remove",a.href="#";var o=L.DomEvent.stopPropagation;L.DomEvent.on(a,"click",o).on(a,"mousedown",o).on(a,"dblclick",o).on(a,"click",L.DomEvent.preventDefault).on(a,"click",function(){this._map.removeLayer(t)},this),t.bindPopup(i),t.addTo(this._map),this._map.removeLayer(this._marker),this._marker=null}}},_switchUI:function(t){L.DomEvent.stop(t),L.DomEvent.stopPropagation(t),L.DomEvent.preventDefault(t),this._showsCoordinates?this.expand():this.collapse()},onRemove:function(t){t.off("mousemove",this._update,this)},_update:function(t){var e=t.latlng,i=this.options;e&&(e=e.wrap(),this._currentPos=e,this._inputY.value=L.NumberFormatter.round(e.lat,i.decimals,i.decimalSeperator),this._inputX.value=L.NumberFormatter.round(e.lng,i.decimals,i.decimalSeperator),this._label.innerHTML=this._createCoordinateLabel(e))},_createNewMarker:function(){return this.options.markerType(null,this.options.markerProps)}}),L.control.coordinates=function(t){return new L.Control.Coordinates(t)},L.Map.mergeOptions({coordinateControl:!1}),L.Map.addInitHook(function(){this.options.coordinateControl&&(this.coordinateControl=new L.Control.Coordinates,this.addControl(this.coordinateControl))});
(function(){L.Control.Gps=L.Control.extend({includes:L.Mixin.Events,options:{autoActive:!1,autoCenter:!1,maxZoom:null,textErr:null,callErr:null,style:{radius:5,weight:2,color:"#c20",opacity:1,fillColor:"#f23",fillOpacity:1},marker:null,accuracy:!0,title:"Center map on your location",position:"topleft",transform:function(t){return t},setView:!1},initialize:function(t){t&&t.style&&(t.style=L.Util.extend({},this.options.style,t.style)),L.Util.setOptions(this,t),this._errorFunc=this.options.callErr||this.showAlert,this._isActive=!1,this._firstMoved=!1,this._currentLocation=null},onAdd:function(t){this._map=t;var i=L.DomUtil.create("div","leaflet-control-gps");return this._button=L.DomUtil.create("a","gps-button",i),this._button.href="#",this._button.title=this.options.title,L.DomEvent.on(this._button,"click",L.DomEvent.stop,this).on(this._button,"click",this._switchGps,this),this._alert=L.DomUtil.create("div","gps-alert",i),this._alert.style.display="none",this._gpsMarker=this.options.marker?this.options.marker:new L.CircleMarker([0,0],this.options.style),this._map.on("locationfound",this._drawGps,this).on("locationerror",this._errorGps,this),this.options.autoActive&&this.activate(),i},onRemove:function(t){this.deactivate()},_switchGps:function(){this._isActive?this.deactivate():this.activate()},getLocation:function(){return this._currentLocation},activate:function(){this._isActive=!0,this._map.addLayer(this._gpsMarker),this._map.locate({enableHighAccuracy:!0,watch:!0,setView:this.options.setView,maxZoom:this.options.maxZoom})},deactivate:function(){this._isActive=!1,this._firstMoved=!1,this._map.stopLocate(),L.DomUtil.removeClass(this._button,"active"),this._map.removeLayer(this._gpsMarker),this.fire("gpsdisabled")},_drawGps:function(t){this._currentLocation=this.options.transform(t.latlng),this._gpsMarker.setLatLng(this._currentLocation),!this._isActive||this._firstMoved&&!this.options.autoCenter||this._moveTo(this._currentLocation),this.fire("gpslocated",{latlng:this._currentLocation,marker:this._gpsMarker}),L.DomUtil.addClass(this._button,"active")},_moveTo:function(t){this._firstMoved=!0,this.options.maxZoom?this._map.setView(t,Math.min(this._map.getZoom(),this.options.maxZoom)):this._map.panTo(t)},_errorGps:function(t){this.deactivate(),this._errorFunc.call(this,this.options.textErr||t.message)},showAlert:function(t){this._alert.style.display="block",this._alert.innerHTML=t;var i=this;clearTimeout(this.timerAlert),this.timerAlert=setTimeout(function(){i._alert.style.display="none"},2e3)}}),L.control.gps=function(t){return new L.Control.Gps(t)}}).call(this);
"undefined"==typeof console&&(this.console={log:function(t){}}),L.Control.OSMGeocoder=L.Control.extend({options:{collapsed:!0,position:"topright",text:"Locate",bounds:null,email:null,callback:function(t){if(0==t.length)return void console.log("ERROR: didn't find a result");var e=t[0].boundingbox,o=new L.LatLng(e[0],e[2]),n=new L.LatLng(e[1],e[3]),i=new L.LatLngBounds([o,n]);this._map.fitBounds(i)}},_callbackId:0,initialize:function(t){L.Util.setOptions(this,t)},onAdd:function(t){this._map=t;var e="leaflet-control-geocoder",o=this._container=L.DomUtil.create("div",e);L.DomEvent.disableClickPropagation(o);var n=this._form=L.DomUtil.create("form",e+"-form"),i=this._input=document.createElement("input");i.type="text";var s=document.createElement("input");if(s.type="submit",s.value=this.options.text,n.appendChild(i),n.appendChild(s),L.DomEvent.addListener(n,"submit",this._geocode,this),this.options.collapsed){L.DomEvent.addListener(o,"mouseover",this._expand,this),L.DomEvent.addListener(o,"mouseout",this._collapse,this);var a=this._layersLink=L.DomUtil.create("a",e+"-toggle",o);a.href="#",a.title="Nominatim Geocoder",L.DomEvent.addListener(a,L.Browser.touch?"click":"focus",this._expand,this),this._map.on("movestart",this._collapse,this)}else this._expand();return o.appendChild(n),o},_createSearchResult:function(t,e){var o=.005,n=[];return n[0]={},n[0].boundingbox=[parseFloat(t)-o,parseFloat(t)+o,parseFloat(e)-o,parseFloat(e)+o],n[0]["class"]="boundary",n[0].display_name="Position: "+t+" "+e,n[0].lat=t,n[0].lon=e,n},_isLatLon:function(t){var e=/(-?\d+\.\d+)\s(-?\d+\.\d+)/,o=e.exec(t);return void 0!=o?o:(e=/lat\D*(-?\d+\.\d+)\D*lon\D*(-?\d+\.\d+)/,o=e.exec(t),void 0!=o?o:null)},_isLatLon_decMin:function(t){return console.log("is LatLon?: "+t),re=/([ns])\s*(\d+)\D*(\d+\.\d+).?\s*([ew])\s*(\d+)\D*(\d+\.\d+)/i,m=re.exec(t.toLowerCase()),void 0!=m?m:null},_geocode:function(t){L.DomEvent.preventDefault(t);var e=this._input.value;if(null!=this._isLatLon(e)){var o=this._isLatLon(e);return console.log("LatLon: "+o[1]+" "+o[2]),void this.options.callback.call(this,this._createSearchResult(o[1],o[2]))}if(null!=this._isLatLon_decMin(e)){var o=this._isLatLon_decMin(e),n=new Array;return n.n=1,n.s=-1,n.e=1,n.w=-1,void this.options.callback.call(this,this._createSearchResult(n[o[1]]*(Number(o[2])+o[3]/60),n[o[4]]*(Number(o[5])+o[6]/60)))}console.log(this._callbackId),window["_l_osmgeocoder_"+this._callbackId]=L.Util.bind(this.options.callback,this);var i={q:this._input.value,json_callback:"_l_osmgeocoder_"+this._callbackId++,format:"json"};if(this.options.bounds&&null!=this.options.bounds){if(!(this.options.bounds instanceof L.LatLngBounds))return void console.log("bounds must be of type L.LatLngBounds");i.viewbox=this.options.bounds.toBBoxString(),i.bounded=1}this.options.email&&null!=this.options.email&&("string"==typeof this.options.email?i.email=this.options.email:console.log("email must be a string"));var s=location.protocol,a=s+"//nominatim.openstreetmap.org/search"+L.Util.getParamString(i),l=document.createElement("script");l.type="text/javascript",l.src=a,l.id=this._callbackId,document.getElementsByTagName("head")[0].appendChild(l)},_expand:function(){L.DomUtil.addClass(this._container,"leaflet-control-geocoder-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-geocoder-expanded","")}});
L.Control.Permalink=L.Control.extend({includes:L.Mixin.Events,options:{position:"bottomleft",useAnchor:!0,useLocation:!1,text:"Permalink"},initialize:function(t){L.Util.setOptions(this,t),this._params={},this._set_urlvars(),this.on("update",this._set_center,this);for(var i in this)"string"==typeof i&&0===i.indexOf("initialize_")&&this[i]()},onAdd:function(t){if(this._container=L.DomUtil.create("div","leaflet-control-attribution leaflet-control-permalink"),L.DomEvent.disableClickPropagation(this._container),this._map=t,this._href=L.DomUtil.create("a",null,this._container),this._href.innerHTML=this.options.text,t.on("moveend",this._update_center,this),this.fire("update",{params:this._params}),this._update_center(),this.options.useAnchor&&"onhashchange"in window){var i=this,r=window.onhashchange;window.onhashchange=function(){return i._set_urlvars(),r?r():void 0}}return this.fire("add",{map:t}),this._container},_update_center:function(){if(this._map){var t=this._round_point(this._map.getCenter());this._update({zoom:String(this._map.getZoom()),lat:String(t.lat),lon:String(t.lng)})}},_update_href:function(){var t=L.Util.getParamString(this._params),i="?";this.options.useAnchor&&(i="#");var r=this._url_base+i+t.slice(1);return this._href&&this._href.setAttribute("href",r),this.options.useLocation&&location.replace("#"+t.slice(1)),r},_round_point:function(t){var i=this._map.getBounds(),r=this._map.getSize(),n=i.getNorthEast(),e=i.getSouthWest(),a=function(t,i){if(0===i)return t;for(var r=1;1>i&&i>-1;)t*=10,i*=10,r*=10;return Math.floor(t)/r};return t.lat=a(t.lat,(n.lat-e.lat)/r.y),t.lng=a(t.lng,(n.lng-e.lng)/r.x),t},_update:function(t,i){for(var r in t)t.hasOwnProperty(r)&&(null!==t[r]&&void 0!==t[r]?this._params[r]=t[r]:delete this._params[r]);this._update_href()},_set_urlvars:function(){function t(t,i){for(var r in t)if(t.hasOwnProperty(r)&&t[r]!==i[r])return!1;return!0}var i;this.options.useAnchor?(i=L.UrlUtil.queryParse(L.UrlUtil.hash()),this._url_base=window.location.href.split("#")[0]):(i=L.UrlUtil.queryParse(L.UrlUtil.query()),this._url_base=window.location.href.split("#")[0].split("?")[0]),t(i,this._params)&&t(this._params,i)||(this._params=i,this._update_href(),this.fire("update",{params:this._params}))},_set_center:function(t){var i=t.params;void 0!==i.zoom&&void 0!==i.lat&&void 0!==i.lon&&this._map.setView(new L.LatLng(i.lat,i.lon),i.zoom)}}),L.UrlUtil={queryParse:function(t){var i={},r="&";-1!==t.search("&amp;")&&(r="&amp;");for(var n=t.split(r),e=0;e<n.length;e++){var a=n[e].split("=");2===a.length&&(i[a[0]]=decodeURI(a[1]))}return i},query:function(){var t=window.location.href.split("#")[0],i=t.indexOf("?");return 0>i?"":t.slice(i+1)},hash:function(){return window.location.hash.slice(1)},updateParamString:function(t,i){var r=L.UrlUtil.queryParse(t);for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n]);return L.Util.getParamString(r).slice(1)}};
L.Control.Permalink.include({initialize_layer:function(){this.on("update",this._set_layer,this),this.on("add",this._onadd_layer,this)},_onadd_layer:function(a){this._map.on("layeradd",this._update_layer,this),this._map.on("layerremove",this._update_layer,this),this._update_layer()},_update_layer:function(){if(this.options.layers){var a=this.options.layers.currentBaseLayer();a&&this._update({layer:a.name})}},_set_layer:function(a){var e=a.params;this.options.layers&&e.layer&&this.options.layers.chooseBaseLayer(e.layer)}}),L.Control.Layers.include({chooseBaseLayer:function(a){var e,r;for(var s in this._layers)this._layers.hasOwnProperty(s)&&(r=this._layers[s],r.overlay||r.name!==a||(e=r.layer));if(e&&!this._map.hasLayer(e)){for(var t in this._layers)this._layers.hasOwnProperty(t)&&(r=this._layers[t],!r.overlay&&this._map.hasLayer(r.layer)&&this._map.removeLayer(r.layer));this._map.addLayer(e),this._update()}},currentBaseLayer:function(){for(var a in this._layers)if(this._layers.hasOwnProperty(a)){var e=this._layers[a];if(!e.overlay&&!e.overlay&&this._map.hasLayer(e.layer))return e}}});
L.Control.Permalink.Cookies=L.Control.Permalink.extend({options:{useAnchor:!1,move:!0},onAdd:function(t){var o=document.cookie.match(/permalink=([^;]+)/);return o&&!this._params.zoom&&(this._params=L.UrlUtil.queryParse(o[1])),L.Control.Permalink.prototype.onAdd.call(this,t)},_set_center:function(t){var o=t.params;o.zoom&&o.lat&&o.lon&&this.options.move&&this._map.setView(new L.LatLng(o.lat,o.lon),o.zoom,{reset:!0})},_set_layer:function(t){this.options.move&&L.Control.Permalink.prototype._set_layer.call(this,t)},_update_href:function(){return document.cookie="permalink="+L.Util.getParamString(this._params).substring(1)+";path=/",L.Control.Permalink.prototype._update_href.call(this)}});
L.Map.addInitHook(function(){this._container.offsetHeight||(this.autoHeight(),L.DomEvent.on(window,"resize",this.autoHeight,this))}),L.Map.include({autoHeight:function(){this._container.style.height=Math.min(this._container.offsetWidth,window.innerHeight-20)+"px",this._onResize()}});
-1!=navigator.userAgent.search(/arach|archiver|bot|crawl|curl|factory|index|partner|rss|seek|search|semantic|scoot|spider|spyder|yandex/i)&&(L.Map.prototype.addLayer=function(){});
!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.proj4=t()}}(function(){return function t(n,s,i){function o(e,r){if(!s[e]){if(!n[e]){var h="function"==typeof require&&require;if(!r&&h)return h(e,!0);if(a)return a(e,!0);throw new Error("Cannot find module '"+e+"'")}var m=s[e]={exports:{}};n[e][0].call(m.exports,function(t){var s=n[e][1][t];return o(s?s:t)},m,m.exports,t,n,s,i)}return s[e].exports}for(var a="function"==typeof require&&require,e=0;e<i.length;e++)o(i[e]);return o}({1:[function(t,n,s){},{mgrs:66}],2:[function(t,n,s){function i(t,n){if(!(this instanceof i))return new i(t);n=n||function(t){if(t)throw t};var s=o(t);if("object"!=typeof s)return void n(t);var e=r(s),h=i.projections.get(e.projName);h?(a(this,e),a(this,h),this.init(),n(null,this)):n(t)}var o=t("./parseCode"),a=t("./extend"),e=t("./projections"),r=t("./deriveConstants");i.projections=e,i.projections.start(),n.exports=i},{"./deriveConstants":32,"./extend":33,"./parseCode":36,"./projections":38}],3:[function(t,n,s){},{}],4:[function(t,n,s){},{"./sign":21}],5:[function(t,n,s){var i=2*Math.PI,o=t("./sign");n.exports=function(t){return Math.abs(t)<Math.PI?t:t-o(t)*i}},{"./sign":21}],6:[function(t,n,s){},{}],7:[function(t,n,s){n.exports=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))}},{}],8:[function(t,n,s){n.exports=function(t){return.375*t*(1+.25*t*(1+.46875*t))}},{}],9:[function(t,n,s){n.exports=function(t){return.05859375*t*t*(1+.75*t)}},{}],10:[function(t,n,s){n.exports=function(t){return t*t*t*(35/3072)}},{}],11:[function(t,n,s){},{}],12:[function(t,n,s){},{}],13:[function(t,n,s){},{}],14:[function(t,n,s){n.exports=function(t,n,s,i,o){return t*o-n*Math.sin(2*o)+s*Math.sin(4*o)-i*Math.sin(6*o)}},{}],15:[function(t,n,s){n.exports=function(t,n,s){var i=t*n;return s/Math.sqrt(1-i*i)}},{}],16:[function(t,n,s){var i=Math.PI/2;n.exports=function(t,n){for(var s,o,a=.5*t,e=i-2*Math.atan(n),r=0;15>=r;r++)if(s=t*Math.sin(e),o=i-2*Math.atan(n*Math.pow((1-s)/(1+s),a))-e,e+=o,Math.abs(o)<=1e-10)return e;return-9999}},{}],17:[function(t,n,s){},{}],18:[function(t,n,s){},{"./pj_mlfn":19}],19:[function(t,n,s){},{}],20:[function(t,n,s){},{}],21:[function(t,n,s){},{}],22:[function(t,n,s){},{}],23:[function(t,n,s){n.exports=function(t){var n={x:t[0],y:t[1]};return t.length>2&&(n.z=t[2]),t.length>3&&(n.m=t[3]),n}},{}],24:[function(t,n,s){var i=Math.PI/2;n.exports=function(t,n,s){var o=t*s,a=.5*t;return o=Math.pow((1-o)/(1+o),a),Math.tan(.5*(i-n))/o}},{}],25:[function(t,n,s){s.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"}},{}],26:[function(t,n,s){s.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},s.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},s.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"},s.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},{}],27:[function(t,n,s){},{}],28:[function(t,n,s){function i(t,n,s){var i;return Array.isArray(s)?(i=r(t,n,s),3===s.length?[i.x,i.y,i.z]:[i.x,i.y]):r(t,n,s)}function o(t){return t instanceof e?t:t.oProj?t.oProj:e(t)}function a(t,n,s){t=o(t);var a,e=!1;return"undefined"==typeof n?(n=t,t=h,e=!0):("undefined"!=typeof n.x||Array.isArray(n))&&(s=n,n=t,t=h,e=!0),n=o(n),s?i(t,n,s):(a={forward:function(s){return i(t,n,s)},inverse:function(s){return i(n,t,s)}},e&&(a.oProj=n),a)}var e=t("./Proj"),r=t("./transform"),h=e("WGS84");n.exports=a},{"./Proj":2,"./transform":64}],29:[function(t,n,s){var i=Math.PI/2,o=1,a=2,e=3,r=4,h=5,m=484813681109536e-20,c=function(t){if(!(this instanceof c))return new c(t);if(this.datum_type=r,t){if(t.datumCode&&"none"===t.datumCode&&(this.datum_type=h),t.datum_params){for(var n=0;n<t.datum_params.length;n++)t.datum_params[n]=parseFloat(t.datum_params[n]);(0!==t.datum_params[0]||0!==t.datum_params[1]||0!==t.datum_params[2])&&(this.datum_type=o),t.datum_params.length>3&&(0!==t.datum_params[3]||0!==t.datum_params[4]||0!==t.datum_params[5]||0!==t.datum_params[6])&&(this.datum_type=a,t.datum_params[3]*=m,t.datum_params[4]*=m,t.datum_params[5]*=m,t.datum_params[6]=t.datum_params[6]/1e6+1)}this.datum_type=t.grids?e:this.datum_type,this.a=t.a,this.b=t.b,this.es=t.es,this.ep2=t.ep2,this.datum_params=t.datum_params,this.datum_type===e&&(this.grids=t.grids)}};c.prototype={compare_datums:function(t){return this.datum_type!==t.datum_type?!1:this.a!==t.a||Math.abs(this.es-t.es)>5e-11?!1:this.datum_type===o?this.datum_params[0]===t.datum_params[0]&&this.datum_params[1]===t.datum_params[1]&&this.datum_params[2]===t.datum_params[2]:this.datum_type===a?this.datum_params[0]===t.datum_params[0]&&this.datum_params[1]===t.datum_params[1]&&this.datum_params[2]===t.datum_params[2]&&this.datum_params[3]===t.datum_params[3]&&this.datum_params[4]===t.datum_params[4]&&this.datum_params[5]===t.datum_params[5]&&this.datum_params[6]===t.datum_params[6]:this.datum_type===e||t.datum_type===e?this.nadgrids===t.nadgrids:!0},geodetic_to_geocentric:function(t){var n,s,o,a,e,r,h,m=t.x,c=t.y,u=t.z?t.z:0,f=0;if(-i>c&&c>-1.001*i)c=-i;else if(c>i&&1.001*i>c)c=i;else if(-i>c||c>i)return null;return m>Math.PI&&(m-=2*Math.PI),e=Math.sin(c),h=Math.cos(c),r=e*e,a=this.a/Math.sqrt(1-this.es*r),n=(a+u)*h*Math.cos(m),s=(a+u)*h*Math.sin(m),o=(a*(1-this.es)+u)*e,t.x=n,t.y=s,t.z=o,f},geocentric_to_geodetic:function(t){var n,s,o,a,e,r,h,m,c,u,f,p,l,d,_,M,g,j=1e-12,y=j*j,b=30,x=t.x,v=t.y,w=t.z?t.z:0;if(l=!1,n=Math.sqrt(x*x+v*v),s=Math.sqrt(x*x+v*v+w*w),n/this.a<j){if(l=!0,_=0,s/this.a<j)return M=i,void(g=-this.b)}else _=Math.atan2(v,x);o=w/s,a=n/s,e=1/Math.sqrt(1-this.es*(2-this.es)*a*a),m=a*(1-this.es)*e,c=o*e,d=0;do d++,h=this.a/Math.sqrt(1-this.es*c*c),g=n*m+w*c-h*(1-this.es*c*c),r=this.es*h/(h+g),e=1/Math.sqrt(1-r*(2-r)*a*a),u=a*(1-r)*e,f=o*e,p=f*m-u*c,m=u,c=f;while(p*p>y&&b>d);return M=Math.atan(f/Math.abs(u)),t.x=_,t.y=M,t.z=g,t},geocentric_to_wgs84:function(t){if(this.datum_type===o)t.x+=this.datum_params[0],t.y+=this.datum_params[1],t.z+=this.datum_params[2];else if(this.datum_type===a){var n=this.datum_params[0],s=this.datum_params[1],i=this.datum_params[2],e=this.datum_params[3],r=this.datum_params[4],h=this.datum_params[5],m=this.datum_params[6],c=m*(t.x-h*t.y+r*t.z)+n,u=m*(h*t.x+t.y-e*t.z)+s,f=m*(-r*t.x+e*t.y+t.z)+i;t.x=c,t.y=u,t.z=f}},geocentric_from_wgs84:function(t){if(this.datum_type===o)t.x-=this.datum_params[0],t.y-=this.datum_params[1],t.z-=this.datum_params[2];else if(this.datum_type===a){var n=this.datum_params[0],s=this.datum_params[1],i=this.datum_params[2],e=this.datum_params[3],r=this.datum_params[4],h=this.datum_params[5],m=this.datum_params[6],c=(t.x-n)/m,u=(t.y-s)/m,f=(t.z-i)/m;t.x=c+h*u-r*f,t.y=-h*c+u+e*f,t.z=r*c-e*u+f}}},n.exports=c},{}],30:[function(t,n,s){var i=1,o=2,a=3,e=5,r=6378137,h=.006694379990141316;n.exports=function(t,n,s){function m(t){return t===i||t===o}var c,u,f;if(t.compare_datums(n))return s;if(t.datum_type===e||n.datum_type===e)return s;var p=t.a,l=t.es,d=n.a,_=n.es,M=t.datum_type;if(M===a)if(0===this.apply_gridshift(t,0,s))t.a=r,t.es=h;else{if(!t.datum_params)return t.a=p,t.es=t.es,s;for(c=1,u=0,f=t.datum_params.length;f>u;u++)c*=t.datum_params[u];if(0===c)return t.a=p,t.es=t.es,s;M=t.datum_params.length>3?o:i}return n.datum_type===a&&(n.a=r,n.es=h),(t.es!==n.es||t.a!==n.a||m(M)||m(n.datum_type))&&(t.geodetic_to_geocentric(s),m(t.datum_type)&&t.geocentric_to_wgs84(s),m(n.datum_type)&&n.geocentric_from_wgs84(s),n.geocentric_to_geodetic(s)),n.datum_type===a&&this.apply_gridshift(n,1,s),t.a=p,t.es=l,n.a=d,n.es=_,s}},{}],31:[function(t,n,s){function i(t){var n=this;if(2===arguments.length){var s=arguments[1];"string"==typeof s?"+"===s[0]?i[t]=a(arguments[1]):i[t]=e(arguments[1]):i[t]=s}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?i.apply(n,t):i(t)});if("string"==typeof t){if(t in i)return i[t]}else"EPSG"in t?i["EPSG:"+t.EPSG]=t:"ESRI"in t?i["ESRI:"+t.ESRI]=t:"IAU2000"in t?i["IAU2000:"+t.IAU2000]=t:console.log(t);return}}var o=t("./global"),a=t("./projString"),e=t("./wkt");o(i),n.exports=i},{"./global":34,"./projString":37,"./wkt":65}],32:[function(t,n,s){var i=t("./constants/Datum"),o=t("./constants/Ellipsoid"),a=t("./extend"),e=t("./datum"),r=1e-10,h=.16666666666666666,m=.04722222222222222,c=.022156084656084655;n.exports=function(t){if(t.datumCode&&"none"!==t.datumCode){var n=i[t.datumCode];n&&(t.datum_params=n.towgs84?n.towgs84.split(","):null,t.ellps=n.ellipse,t.datumName=n.datumName?n.datumName:t.datumCode)}if(!t.a){var s=o[t.ellps]?o[t.ellps]:o.WGS84;a(t,s)}return t.rf&&!t.b&&(t.b=(1-1/t.rf)*t.a),(0===t.rf||Math.abs(t.a-t.b)<r)&&(t.sphere=!0,t.b=t.a),t.a2=t.a*t.a,t.b2=t.b*t.b,t.es=(t.a2-t.b2)/t.a2,t.e=Math.sqrt(t.es),t.R_A&&(t.a*=1-t.es*(h+t.es*(m+t.es*c)),t.a2=t.a*t.a,t.b2=t.b*t.b,t.es=0),t.ep2=(t.a2-t.b2)/t.b2,t.k0||(t.k0=1),t.axis||(t.axis="enu"),t.datum=e(t),t}},{"./constants/Datum":25,"./constants/Ellipsoid":26,"./datum":29,"./extend":33}],33:[function(t,n,s){n.exports=function(t,n){t=t||{};var s,i;if(!n)return t;for(i in n)s=n[i],void 0!==s&&(t[i]=s);return t}},{}],34:[function(t,n,s){n.exports=function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}},{}],35:[function(t,n,s){var i=t("./core");i.defaultDatum="WGS84",i.Proj=t("./Proj"),i.WGS84=new i.Proj("WGS84"),i.Point=t("./Point"),i.toPoint=t("./common/toPoint"),i.defs=t("./defs"),i.transform=t("./transform"),i.mgrs=t("mgrs"),i.version=t("../package.json").version,t("./includedProjections")(i),n.exports=i},{"../package.json":67,"./Point":1,"./Proj":2,"./common/toPoint":23,"./core":28,"./defs":31,"./includedProjections":"gWUPNW","./transform":64,mgrs:66}],36:[function(t,n,s){function i(t){return"string"==typeof t}function o(t){return t in h}function a(t){var n=["GEOGCS","GEOCCS","PROJCS","LOCAL_CS"];return n.reduce(function(n,s){return n+1+t.indexOf(s)},0)}function e(t){return"+"===t[0]}function r(t){return i(t)?o(t)?h[t]:a(t)?m(t):e(t)?c(t):void 0:t}var h=t("./defs"),m=t("./wkt"),c=t("./projString");n.exports=r},{"./defs":31,"./projString":37,"./wkt":65}],37:[function(t,n,s){var i=.017453292519943295,o=t("./constants/PrimeMeridian");n.exports=function(t){var n={},s={};t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).forEach(function(t){var n=t.split("=");n.push(!0),s[n[0].toLowerCase()]=n[1]});var a,e,r,h={proj:"projName",datum:"datumCode",rf:function(t){n.rf=parseFloat(t,10)},lat_0:function(t){n.lat0=t*i},lat_1:function(t){n.lat1=t*i},lat_2:function(t){n.lat2=t*i},lat_ts:function(t){n.lat_ts=t*i},lon_0:function(t){n.long0=t*i},lon_1:function(t){n.long1=t*i},lon_2:function(t){n.long2=t*i},alpha:function(t){n.alpha=parseFloat(t)*i},lonc:function(t){n.longc=t*i},x_0:function(t){n.x0=parseFloat(t,10)},y_0:function(t){n.y0=parseFloat(t,10)},k_0:function(t){n.k0=parseFloat(t,10)},k:function(t){n.k0=parseFloat(t,10)},r_a:function(){n.R_A=!0},zone:function(t){n.zone=parseInt(t,10)},south:function(){n.utmSouth=!0},towgs84:function(t){n.datum_params=t.split(",").map(function(t){return parseFloat(t,10)})},to_meter:function(t){n.to_meter=parseFloat(t,10)},from_greenwich:function(t){n.from_greenwich=t*i},pm:function(t){n.from_greenwich=(o[t]?o[t]:parseFloat(t,10))*i},nadgrids:function(t){"@null"===t?n.datumCode="none":n.nadgrids=t},axis:function(t){var s="ewnsud";3===t.length&&-1!==s.indexOf(t.substr(0,1))&&-1!==s.indexOf(t.substr(1,1))&&-1!==s.indexOf(t.substr(2,1))&&(n.axis=t)}};for(a in s)e=s[a],a in h?(r=h[a],"function"==typeof r?r(e):n[r]=e):n[a]=e;return"string"==typeof n.datumCode&&"WGS84"!==n.datumCode&&(n.datumCode=n.datumCode.toLowerCase()),n}},{"./constants/PrimeMeridian":27}],38:[function(t,n,s){function i(t,n){var s=e.length;return t.names?(e[s]=t,t.names.forEach(function(t){a[t.toLowerCase()]=s}),this):!0}var o=[t("./projections/merc"),t("./projections/longlat")],a={},e=[];s.add=i,s.get=function(t){if(!t)return!1;var n=t.toLowerCase();return"undefined"!=typeof a[n]&&e[a[n]]?e[a[n]]:void 0},s.start=function(){o.forEach(i)}},{"./projections/longlat":50,"./projections/merc":51}],39:[function(t,n,s){var i=1e-10,o=t("../common/msfnz"),a=t("../common/qsfnz"),e=t("../common/adjust_lon");t("../common/asinz");s.init=function(){Math.abs(this.lat1+this.lat2)<i||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=o(this.e3,this.sin_po,this.cos_po),this.qs1=a(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=o(this.e3,this.sin_po,this.cos_po),this.qs2=a(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=a(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>i?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},s.forward=function(t){var n=t.x,s=t.y;this.sin_phi=Math.sin(s),this.cos_phi=Math.cos(s);var i=a(this.e3,this.sin_phi,this.cos_phi),o=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,r=this.ns0*e(n-this.long0),h=o*Math.sin(r)+this.x0,m=this.rh-o*Math.cos(r)+this.y0;return t.x=h,t.y=m,t},s.inverse=function(t){var n,s,i,o,a,r;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1),o=0,0!==n&&(o=Math.atan2(i*t.x,i*t.y)),i=n*this.ns0/this.a,this.sphere?r=Math.asin((this.c-i*i)/(2*this.ns0)):(s=(this.c-i*i)/this.ns0,r=this.phi1z(this.e3,s)),a=e(o/this.ns0+this.long0),t.x=a,t.y=r,t},s.names=["Albers_Conic_Equal_Area","Albers","aea"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/msfnz":15,"../common/qsfnz":20}],40:[function(t,n,s){t("../common/adjust_lon"),Math.PI/2,t("../common/mlfn"),t("../common/e0fn"),t("../common/e1fn"),t("../common/e2fn"),t("../common/e3fn"),t("../common/gN"),t("../common/asinz"),t("../common/imlfn");s.init=function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},s.names=["Azimuthal_Equidistant","aeqd"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/imlfn":12,"../common/mlfn":14}],41:[function(t,n,s){var i=t("../common/mlfn"),o=t("../common/e0fn"),a=t("../common/e1fn"),e=t("../common/e2fn"),r=t("../common/e3fn");t("../common/gN"),t("../common/adjust_lon"),t("../common/adjust_lat"),t("../common/imlfn"),Math.PI/2;s.init=function(){this.sphere||(this.e0=o(this.es),this.e1=a(this.es),this.e2=e(this.es),this.e3=r(this.es),this.ml0=this.a*i(this.e0,this.e1,this.e2,this.e3,this.lat0))},s.names=["Cassini","Cassini_Soldner","cass"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/imlfn":12,"../common/mlfn":14}],42:[function(t,n,s){var i=(t("../common/adjust_lon"),t("../common/qsfnz"),t("../common/msfnz"));t("../common/iqsfnz");s.init=function(){this.sphere||(this.k0=i(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},s.names=["cea"]},{"../common/adjust_lon":5,"../common/iqsfnz":13,"../common/msfnz":15,"../common/qsfnz":20}],43:[function(t,n,s){},{"../common/adjust_lat":4,"../common/adjust_lon":5}],44:[function(t,n,s){},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/imlfn":12,"../common/mlfn":14,"../common/msfnz":15}],45:[function(t,n,s){},{"../common/srat":22}],46:[function(t,n,s){},{"../common/adjust_lon":5,"../common/asinz":6}],47:[function(t,n,s){},{"../common/adjust_lon":5}],48:[function(t,n,s){},{"../common/adjust_lon":5,"../common/qsfnz":20}],49:[function(t,n,s){var i=1e-10,o=t("../common/msfnz"),a=t("../common/tsfnz"),e=Math.PI/2,r=t("../common/sign"),h=t("../common/adjust_lon"),m=t("../common/phi2z");s.init=function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<i)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var n=Math.sin(this.lat1),s=Math.cos(this.lat1),e=o(this.e,n,s),r=a(this.e,this.lat1,n),h=Math.sin(this.lat2),m=Math.cos(this.lat2),c=o(this.e,h,m),u=a(this.e,this.lat2,h),f=a(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>i?this.ns=Math.log(e/c)/Math.log(r/u):this.ns=n,isNaN(this.ns)&&(this.ns=n),this.f0=e/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(f,this.ns),this.title||(this.title="Lambert Conformal Conic")}},s.forward=function(t){var n=t.x,s=t.y;Math.abs(2*Math.abs(s)-Math.PI)<=i&&(s=r(s)*(e-2*i));var o,m,c=Math.abs(Math.abs(s)-e);if(c>i)o=a(this.e,s,Math.sin(s)),m=this.a*this.f0*Math.pow(o,this.ns);else{if(c=s*this.ns,0>=c)return null;m=0}var u=this.ns*h(n-this.long0);return t.x=this.k0*(m*Math.sin(u))+this.x0,t.y=this.k0*(this.rh-m*Math.cos(u))+this.y0,t},s.inverse=function(t){var n,s,i,o,a,r=(t.x-this.x0)/this.k0,c=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(n=Math.sqrt(r*r+c*c),s=1):(n=-Math.sqrt(r*r+c*c),s=-1);var u=0;if(0!==n&&(u=Math.atan2(s*r,s*c)),0!==n||this.ns>0){if(s=1/this.ns,i=Math.pow(n/(this.a*this.f0),s),o=m(this.e,i),-9999===o)return null}else o=-e;return a=h(u/this.ns+this.long0),t.x=a,t.y=o,t},s.names=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/sign":21,"../common/tsfnz":24}],50:[function(t,n,s){function i(t){return t}s.init=function(){},s.forward=i,s.inverse=i,s.names=["longlat","identity"]},{}],51:[function(t,n,s){},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/tsfnz":24}],52:[function(t,n,s){},{"../common/adjust_lon":5}],53:[function(t,n,s){},{"../common/adjust_lon":5}],54:[function(t,n,s){},{}],55:[function(t,n,s){},{"../common/adjust_lon":5,"../common/phi2z":16,"../common/tsfnz":24}],56:[function(t,n,s){},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/mlfn":14}],57:[function(t,n,s){},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/asinz":6,"../common/pj_enfn":17,"../common/pj_inv_mlfn":18,"../common/pj_mlfn":19}],58:[function(t,n,s){s.init=function(){var t=this.lat0;this.lambda0=this.long0;var n=Math.sin(t),s=this.a,i=this.rf,o=1/i,a=2*o-Math.pow(o,2),e=this.e=Math.sqrt(a);this.R=this.k0*s*Math.sqrt(1-a)/(1-a*Math.pow(n,2)),this.alpha=Math.sqrt(1+a/(1-a)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(n/this.alpha);var r=Math.log(Math.tan(Math.PI/4+this.b0/2)),h=Math.log(Math.tan(Math.PI/4+t/2)),m=Math.log((1+e*n)/(1-e*n));this.K=r-this.alpha*h+this.alpha*e/2*m},s.forward=function(t){var n=Math.log(Math.tan(Math.PI/4-t.y/2)),s=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),i=-this.alpha*(n+s)+this.K,o=2*(Math.atan(Math.exp(i))-Math.PI/4),a=this.alpha*(t.x-this.lambda0),e=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(o)+Math.cos(this.b0)*Math.cos(a))),r=Math.asin(Math.cos(this.b0)*Math.sin(o)-Math.sin(this.b0)*Math.cos(o)*Math.cos(a));return t.y=this.R/2*Math.log((1+Math.sin(r))/(1-Math.sin(r)))+this.y0,t.x=this.R*e+this.x0,t},s.inverse=function(t){for(var n=t.x-this.x0,s=t.y-this.y0,i=n/this.R,o=2*(Math.atan(Math.exp(s/this.R))-Math.PI/4),a=Math.asin(Math.cos(this.b0)*Math.sin(o)+Math.sin(this.b0)*Math.cos(o)*Math.cos(i)),e=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(o))),r=this.lambda0+e/this.alpha,h=0,m=a,c=-1e3,u=0;Math.abs(m-c)>1e-7;){if(++u>20)return;h=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(m))/2)),c=m,m=2*Math.atan(Math.exp(h))-Math.PI/2}return t.x=r,t.y=m,t},s.names=["somerc"]},{}],59:[function(t,n,s){},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/sign":21,"../common/tsfnz":24}],60:[function(t,n,s){},{"../common/adjust_lon":5,"./gauss":45}],61:[function(t,n,s){var i=t("../common/e0fn"),o=t("../common/e1fn"),a=t("../common/e2fn"),e=t("../common/e3fn"),r=t("../common/mlfn"),h=t("../common/adjust_lon"),m=Math.PI/2,c=1e-10,u=t("../common/sign"),f=t("../common/asinz");s.init=function(){this.e0=i(this.es),this.e1=o(this.es),this.e2=a(this.es),this.e3=e(this.es),this.ml0=this.a*r(this.e0,this.e1,this.e2,this.e3,this.lat0)},s.forward=function(t){var n,s,i,o=t.x,a=t.y,e=h(o-this.long0),m=Math.sin(a),c=Math.cos(a);if(this.sphere){var u=c*Math.sin(e);if(Math.abs(Math.abs(u)-1)<1e-10)return 93;s=.5*this.a*this.k0*Math.log((1+u)/(1-u)),n=Math.acos(c*Math.cos(e)/Math.sqrt(1-u*u)),0>a&&(n=-n),i=this.a*this.k0*(n-this.lat0)}else{var f=c*e,p=Math.pow(f,2),l=this.ep2*Math.pow(c,2),d=Math.tan(a),_=Math.pow(d,2);n=1-this.es*Math.pow(m,2);var M=this.a/Math.sqrt(n),g=this.a*r(this.e0,this.e1,this.e2,this.e3,a);s=this.k0*M*f*(1+p/6*(1-_+l+p/20*(5-18*_+Math.pow(_,2)+72*l-58*this.ep2)))+this.x0,i=this.k0*(g-this.ml0+M*d*(p*(.5+p/24*(5-_+9*l+4*Math.pow(l,2)+p/30*(61-58*_+Math.pow(_,2)+600*l-330*this.ep2)))))+this.y0}return t.x=s,t.y=i,t},s.inverse=function(t){var n,s,i,o,a,e,r=6;if(this.sphere){var p=Math.exp(t.x/(this.a*this.k0)),l=.5*(p-1/p),d=this.lat0+t.y/(this.a*this.k0),_=Math.cos(d);n=Math.sqrt((1-_*_)/(1+l*l)),a=f(n),0>d&&(a=-a),e=0===l&&0===_?this.long0:h(Math.atan2(l,_)+this.long0)}else{var M=t.x-this.x0,g=t.y-this.y0;for(n=(this.ml0+g/this.k0)/this.a,s=n,o=0;!0&&(i=(n+this.e1*Math.sin(2*s)-this.e2*Math.sin(4*s)+this.e3*Math.sin(6*s))/this.e0-s,s+=i,!(Math.abs(i)<=c));o++)if(o>=r)return 95;if(Math.abs(s)<m){var j=Math.sin(s),y=Math.cos(s),b=Math.tan(s),x=this.ep2*Math.pow(y,2),v=Math.pow(x,2),w=Math.pow(b,2),P=Math.pow(w,2);n=1-this.es*Math.pow(j,2);var z=this.a/Math.sqrt(n),q=z*(1-this.es)/n,S=M/(z*this.k0),C=Math.pow(S,2);a=s-z*b*C/q*(.5-C/24*(5+3*w+10*x-4*v-9*this.ep2-C/30*(61+90*w+298*x+45*P-252*this.ep2-3*v))),e=h(this.long0+S*(1-C/6*(1+2*w+x-C/20*(5-2*x+28*w-3*v+8*this.ep2+24*P)))/y)}else a=m*u(g),e=this.long0}return t.x=e,t.y=a,t},s.names=["Transverse_Mercator","Transverse Mercator","tmerc"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/mlfn":14,"../common/sign":21}],62:[function(t,n,s){var i=.017453292519943295,o=t("./tmerc");s.dependsOn="tmerc",s.init=function(){this.zone&&(this.lat0=0,this.long0=(6*Math.abs(this.zone)-183)*i,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,o.init.apply(this),this.forward=o.forward,this.inverse=o.inverse)},s.names=["Universal Transverse Mercator System","utm"]},{"./tmerc":61}],63:[function(t,n,s){},{"../common/adjust_lon":5,"../common/asinz":6}],64:[function(t,n,s){var i=.017453292519943295,o=57.29577951308232,a=1,e=2,r=t("./datum_transform"),h=t("./adjust_axis"),m=t("./Proj"),c=t("./common/toPoint");n.exports=function u(t,n,s){function f(t,n){return(t.datum.datum_type===a||t.datum.datum_type===e)&&"WGS84"!==n.datumCode}var p;return Array.isArray(s)&&(s=c(s)),t.datum&&n.datum&&(f(t,n)||f(n,t))&&(p=new m("WGS84"),u(t,p,s),t=p),"enu"!==t.axis&&h(t,!1,s),"longlat"===t.projName?(s.x*=i,s.y*=i):(t.to_meter&&(s.x*=t.to_meter,s.y*=t.to_meter),t.inverse(s)),t.from_greenwich&&(s.x+=t.from_greenwich),s=r(t.datum,n.datum,s),n.from_greenwich&&(s.x-=n.from_greenwich),"longlat"===n.projName?(s.x*=o,s.y*=o):(n.forward(s),n.to_meter&&(s.x/=n.to_meter,s.y/=n.to_meter)),"enu"!==n.axis&&h(n,!0,s),s}},{"./Proj":2,"./adjust_axis":3,"./common/toPoint":23,"./datum_transform":30}],65:[function(t,n,s){},{"./extend":33}],66:[function(t,n,s){},{}],67:[function(t,n,s){},{}],"./includedProjections":[function(t,n,s){},{}],gWUPNW:[function(t,n,s){var i=[t("./lib/projections/tmerc"),t("./lib/projections/utm"),t("./lib/projections/sterea"),t("./lib/projections/stere"),t("./lib/projections/somerc"),t("./lib/projections/omerc"),t("./lib/projections/lcc"),t("./lib/projections/krovak"),t("./lib/projections/cass"),t("./lib/projections/laea"),t("./lib/projections/aea"),t("./lib/projections/gnom"),t("./lib/projections/cea"),t("./lib/projections/eqc"),t("./lib/projections/poly"),t("./lib/projections/nzmg"),t("./lib/projections/mill"),t("./lib/projections/sinu"),t("./lib/projections/moll"),t("./lib/projections/eqdc"),t("./lib/projections/vandg"),t("./lib/projections/aeqd")];n.exports=function(t){i.forEach(function(n){t.Proj.projections.add(n)})}},{"./lib/projections/aea":39,"./lib/projections/aeqd":40,"./lib/projections/cass":41,"./lib/projections/cea":42,"./lib/projections/eqc":43,"./lib/projections/eqdc":44,"./lib/projections/gnom":46,"./lib/projections/krovak":47,"./lib/projections/laea":48,"./lib/projections/lcc":49,"./lib/projections/mill":52,"./lib/projections/moll":53,"./lib/projections/nzmg":54,"./lib/projections/omerc":55,"./lib/projections/poly":56,"./lib/projections/sinu":57,"./lib/projections/somerc":58,"./lib/projections/stere":59,"./lib/projections/sterea":60,"./lib/projections/tmerc":61,"./lib/projections/utm":62,"./lib/projections/vandg":63}]},{},[35])(35)});
!function(t){var o,i;if("function"==typeof define&&define.amd)define(["leaflet","proj4"],t);else if("object"==typeof module&&"object"==typeof module.exports)o=require("leaflet"),i=require("proj4"),module.exports=t(o,i);else{if("undefined"==typeof window.L||"undefined"==typeof window.proj4)throw"Leaflet and proj4 must be loaded first";t(window.L,window.proj4)}}(function(t,o){return t.Proj={},t.Proj._isProj4Obj=function(t){return"undefined"!=typeof t.inverse&&"undefined"!=typeof t.forward},t.Proj.ScaleDependantTransformation=function(t){this.scaleTransforms=t},t.Proj.ScaleDependantTransformation.prototype.transform=function(t,o){return this.scaleTransforms[o].transform(t,o)},t.Proj.ScaleDependantTransformation.prototype.untransform=function(t,o){return this.scaleTransforms[o].untransform(t,o)},t.Proj.Projection=t.Class.extend({initialize:function(i,e){if(t.Proj._isProj4Obj(i))this._proj=i;else{var n=i;if(e)o.defs(n,e);else if(void 0===o.defs[n]){var s=n.split(":");if(s.length>3&&(n=s[s.length-3]+":"+s[s.length-1]),void 0===o.defs[n])throw"No projection definition for code "+n}this._proj=o(n)}},project:function(o){var i=this._proj.forward([o.lng,o.lat]);return new t.Point(i[0],i[1])},unproject:function(o,i){var e=this._proj.inverse([o.x,o.y]);return new t.LatLng(e[1],e[0],i)}}),t.Proj.CRS=t.Class.extend({includes:t.CRS,options:{transformation:new t.Transformation(1,0,-1,0)},initialize:function(o,i,e){var n,s,r,a;if(t.Proj._isProj4Obj(o)?(s=o,n=s.srsCode,a=i||{},this.projection=new t.Proj.Projection(s)):(n=o,r=i,a=e||{},this.projection=new t.Proj.Projection(n,r)),t.Util.setOptions(this,a),this.code=n,this.transformation=this.options.transformation,this.options.origin&&(this.transformation=new t.Transformation(1,-this.options.origin[0],-1,this.options.origin[1])),this.options.scales)this._scales=this.options.scales;else if(this.options.resolutions){this._scales=[];for(var l=this.options.resolutions.length-1;l>=0;l--)this.options.resolutions[l]&&(this._scales[l]=1/this.options.resolutions[l])}},scale:function(t){var o,i,e,n,s=Math.floor(t);return t===s?this._scales[t]:(o=this._scales[s],i=this._scales[s+1],e=i-o,n=t-s,o+e*n)},getSize:function(o){var i,e,n,s=this.options.bounds;return s?(i=this.scale(o),e=this.transformation.transform(s.min,i),n=this.transformation.transform(s.max,i),t.point(Math.abs(n.x-e.x),Math.abs(n.y-e.y))):(i=256*Math.pow(2,o),t.point(i,i))}}),t.Proj.CRS.TMS=t.Proj.CRS.extend({options:{tileSize:256},initialize:function(o,i,e,n){var s,r,a,l,c;t.Proj._isProj4Obj(o)?(a=o,l=i,c=e||{},c.origin=[l[0],l[3]],t.Proj.CRS.prototype.initialize.call(this,a,c)):(s=o,r=i,l=e,c=n||{},c.origin=[l[0],l[3]],t.Proj.CRS.prototype.initialize.call(this,s,r,c)),this.projectedBounds=l,this._sizes=this._calculateSizes()},_calculateSizes:function(){var o,i,e,n,s=[],r=this.projectedBounds;for(i=this._scales.length-1;i>=0;i--)this._scales[i]&&(o=this.options.tileSize/this._scales[i],e=Math.ceil(parseFloat((r[2]-r[0])/o).toPrecision(3))*o*this._scales[i],n=Math.ceil(parseFloat((r[3]-r[1])/o).toPrecision(3))*o*this._scales[i],s[i]=t.point(e,n));return s},getSize:function(t){return this._sizes[t]}}),t.Proj.TileLayer={},t.Proj.TileLayer.TMS=t.TileLayer.extend({options:{continuousWorld:!0},initialize:function(o,i,e){var n,s,r,a,l=!0;if(!(i instanceof t.Proj.CRS.TMS))throw"CRS is not L.Proj.CRS.TMS.";for(t.TileLayer.prototype.initialize.call(this,o,e),this.options.tms=!1,this.crs=i,r=this.crs.projectedBounds,a=this.options.minZoom;a<this.options.maxZoom&&l;a++){var c=(r[3]-r[1])/this._projectedTileSize(a);l=Math.abs(c-Math.round(c))>.001}if(!l){for(n={},a=this.options.minZoom;a<this.options.maxZoom;a++)s=r[1]+Math.ceil((r[3]-r[1])/this._projectedTileSize(a))*this._projectedTileSize(a),n[this.crs.scale(a)]=new t.Transformation(1,-r[0],-1,s);this.crs=new t.Proj.CRS.TMS(this.crs.projection._proj,r,this.crs.options),this.crs.transformation=new t.Proj.ScaleDependantTransformation(n)}},getTileUrl:function(o){var i=this._map.getZoom(),e=Math.ceil((this.crs.projectedBounds[3]-this.crs.projectedBounds[1])/this._projectedTileSize(i));return t.Util.template(this._url,t.Util.extend({s:this._getSubdomain(o),z:this._getZoomForUrl(),x:o.x,y:e-o.y-1},this.options))},_projectedTileSize:function(t){return this.options.tileSize/this.crs.scale(t)}}),t.Proj.GeoJSON=t.GeoJSON.extend({initialize:function(o,i){this._callLevel=0,t.GeoJSON.prototype.initialize.call(this,null,i),o&&this.addData(o)},addData:function(o){var i;o&&(o.crs&&"name"===o.crs.type?i=new t.Proj.CRS(o.crs.properties.name):o.crs&&o.crs.type&&(i=new t.Proj.CRS(o.crs.type+":"+o.crs.properties.code)),void 0!==i&&(this.options.coordsToLatLng=function(o){var e=t.point(o[0],o[1]);return i.projection.unproject(e)})),this._callLevel++;try{t.GeoJSON.prototype.addData.call(this,o)}finally{this._callLevel--,0===this._callLevel&&delete this.options.coordsToLatLng}}}),t.Proj.geoJson=function(o,i){return new t.Proj.GeoJSON(o,i)},t.Proj.ImageOverlay=t.ImageOverlay.extend({initialize:function(o,i,e){t.ImageOverlay.prototype.initialize.call(this,o,null,e),this._projBounds=i},_animateZoom:function(o){var i=t.point(this._projBounds.min.x,this._projBounds.max.y),e=t.point(this._projBounds.max.x,this._projBounds.min.y),n=this._projectedToNewLayerPoint(i,o.zoom,o.center),s=this._projectedToNewLayerPoint(e,o.zoom,o.center).subtract(n),r=n.add(s._multiplyBy((1-1/o.scale)/2));this._image.style[t.DomUtil.TRANSFORM]=t.DomUtil.getTranslateString(r)+" scale("+this._map.getZoomScale(o.zoom)+") "},_reset:function(){var o=this._map.getZoom(),i=this._map.getPixelOrigin(),e=t.bounds(this._transform(this._projBounds.min,o)._subtract(i),this._transform(this._projBounds.max,o)._subtract(i)),n=e.getSize(),s=this._image;t.DomUtil.setPosition(s,e.min),s.style.width=n.x+"px",s.style.height=n.y+"px"},_projectedToNewLayerPoint:function(t,o,i){var e=this._map._getNewTopLeftPoint(i,o).add(this._map._getMapPanePos());return this._transform(t,o)._subtract(e)},_transform:function(t,o){var i=this._map.options.crs,e=i.transformation,n=i.scale(o);return e.transform(t,n)}}),t.Proj.imageOverlay=function(o,i,e){return new t.Proj.ImageOverlay(o,i,e)},"undefined"!=typeof t.CRS&&(t.CRS.proj4js=function(){return function(o,i,e,n){return n=n||{},e&&(n.transformation=e),new t.Proj.CRS(o,i,n)}}()),t.Proj});
L.Map.addInitHook(function(){this.on("layeradd",function(t){if(t.layer.options){var o=t.layer.options.crs||L.CRS.EPSG3857;if(t.layer.options.tileSize&&this.options.crs!=o){var s=this.getBounds(),i=this.getCenter();this.options.crs=o;var e=s.getNorthWest(),a=s.getSouthEast(),r=this.getSize().distanceTo(L.point(0,0)),n=1/0;for(z=0;z<this.getMaxZoom();z++){var h=this.project(a,z).distanceTo(this.project(e,z)),c=Math.abs(h-r);n>c&&(n=c,closestZoom=z)}this._resetView(i,closestZoom)}}},this)});
!function(e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):"undefined"!=typeof window?window.togpx=e():"undefined"!=typeof global?global.togpx=e():"undefined"!=typeof self&&(self.togpx=e())}(function(){return function e(t,r,n){function o(a,u){if(!r[a]){if(!t[a]){var f="function"==typeof require&&require;if(!u&&f)return f(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+a+"'")}var s=r[a]={exports:{}};t[a][0].call(s.exports,function(e){var r=t[a][1][e];return o(r?r:e)},s,s.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){function n(e,t){function r(e){if("object"==typeof e.tags){var t=r(e.tags);if(""!==t)return t}return e.name?e.name:e.ref?e.ref:e.id?e.id:""}function n(e){if("object"==typeof e.tags)return n(e.tags);var t="";for(var r in e)"object"!=typeof e[r]&&(t+=r+"="+e[r]+"\n");return t.substr(0,t.length-1)}function a(e,r){t.featureLink&&(e.link={"@href":t.featureLink(r.properties)})}t=function(e,t){for(var r in e)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}({creator:"togpx",metadata:void 0,featureTitle:r,featureDescription:n,featureLink:void 0},t||{});var u={gpx:{"@xmlns":"http://www.topografix.com/GPX/1/1","@xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","@xsi:schemaLocation":"http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd","@version":"1.1",wpt:[],trk:[]}};t.creator&&(u.gpx["@creator"]=t.creator),t.metadata&&(u.gpx.metadata=t.metadata);var f;return f="FeatureCollection"===e.type?e.features:"Feature"===e.type?[e]:[{type:"Feature",properties:{},geometry:e}],f.forEach(function s(e){switch(e.geometry.type){case"Point":case"MultiPoint":var r=e.geometry.coordinates;"Point"==e.geometry.type&&(r=[r]),r.forEach(function(r){o={"@lat":r[1],"@lon":r[0],name:t.featureTitle(e.properties),desc:t.featureDescription(e.properties)},void 0!==r[2]&&(o.ele=r[2]),a(o,e),u.gpx.wpt.push(o)});break;case"LineString":case"MultiLineString":var r=e.geometry.coordinates;"LineString"==e.geometry.type&&(r=[r]),o={name:t.featureTitle(e.properties),desc:t.featureDescription(e.properties)},a(o,e),o.trkseg=[],r.forEach(function(e){var t={trkpt:[]};e.forEach(function(e){var r={"@lat":e[1],"@lon":e[0]};void 0!==e[2]&&(r.ele=e[2]),t.trkpt.push(r)}),o.trkseg.push(t)}),u.gpx.trk.push(o);break;case"Polygon":case"MultiPolygon":o={name:t.featureTitle(e.properties),desc:t.featureDescription(e.properties)},a(o,e),o.trkseg=[];var r=e.geometry.coordinates;"Polygon"==e.geometry.type&&(r=[r]),r.forEach(function(e){e.forEach(function(e){var t={trkpt:[]};e.forEach(function(e){var r={"@lat":e[1],"@lon":e[0]};void 0!==e[2]&&(r.ele=e[2]),t.trkpt.push(r)}),o.trkseg.push(t)})}),u.gpx.trk.push(o);break;case"GeometryCollection":e.geometry.geometries.forEach(function(t){var r={properties:e.properties,geometry:t};s(r)});break;default:console.log("warning: unsupported geometry type: "+e.geometry.type)}}),gpx_str=i.stringify(u),gpx_str}var i=e("jxon");t.exports=n},{jxon:2}],2:[function(e,t,r){"undefined"==typeof XMLSerializer&&(XMLSerializer=e("xmldom").XMLSerializer,document={},document.implementation=new(e("xmldom").DOMImplementation));var n=new function(){function e(e){return p.test(e)?null:c.test(e)?"true"===e.toLowerCase():isFinite(e)?parseFloat(e):isFinite(Date.parse(e))?new Date(e):e}function t(){}function r(e){return null===e?new t:e instanceof Object?e:new e.constructor(e)}function o(t,n,i,p){var c,l,d=s.length,g=t.hasChildNodes(),m=t.hasAttributes(),h=Boolean(2&n),y=0,v="",x=h?{}:!0;if(g)for(var w,b=0;b<t.childNodes.length;b++)w=t.childNodes.item(b),4===w.nodeType?v+=w.nodeValue:3===w.nodeType?v+=w.nodeValue.trim():1!==w.nodeType||w.prefix||s.push(w);var k=s.length,S=e(v);h||!g&&!m||(x=0===n?r(S):{});for(var L=d;k>L;L++)c=s[L].nodeName.toLowerCase(),l=o(s[L],n,i,p),x.hasOwnProperty(c)?(x[c].constructor!==Array&&(x[c]=[x[c]]),x[c].push(l)):(x[c]=l,y++);if(m){for(var T,C=t.attributes.length,E=p?"":f,M=p?{}:x,P=0;C>P;y++,P++)T=t.attributes.item(P),M[E+T.name.toLowerCase()]=e(T.value.trim());p&&(i&&Object.freeze(M),x[u]=M,y-=C-1)}return 3===n||(2===n||1===n&&y>0)&&v?x[a]=S:!h&&0===y&&v&&(x=S),i&&(h||y>0)&&Object.freeze(x),s.length=d,x}function i(e,t,r){var n,o;r instanceof String||r instanceof Number||r instanceof Boolean?t.appendChild(e.createTextNode(r.toString())):r.constructor===Date&&t.appendChild(e.createTextNode(r.toGMTString()));for(var s in r)if(n=r[s],!(isFinite(s)||n instanceof Function))if(s===a)null!==n&&n!==!0&&t.appendChild(e.createTextNode(n.constructor===Date?n.toGMTString():String(n)));else if(s===u)for(var p in n)t.setAttribute(p,n[p]);else if(s.charAt(0)===f)t.setAttribute(s.slice(1),n);else if(n.constructor===Array)for(var c=0;c<n.length;c++)o=e.createElement(s),i(e,o,n[c]),t.appendChild(o);else o=e.createElement(s),n instanceof Object?i(e,o,n):null!==n&&n!==!0&&o.appendChild(e.createTextNode(n.toString())),t.appendChild(o)}var a="keyValue",u="keyAttributes",f="@",s=[],p=/^\s*$/,c=/^(?:true|false)$/i;t.prototype.toString=function(){return"null"},t.prototype.valueOf=function(){return null},this.build=function(e,t,r,n){var i=arguments.length>1&&"number"==typeof t?3&t:1;return o(e,i,r||!1,arguments.length>3?n:3===i)},this.unbuild=function(e){var t=document.implementation.createDocument("","",null);return i(t,t,e),t},this.stringify=function(e){return(new XMLSerializer).serializeToString(n.unbuild(e))}};t.exports=n},{xmldom:3}],3:[function(e,t,r){},{}]},{},[1])(1)});
L.extend(L.CRS,{title:{lng:"Longitude",lat:"Latitude"},format:function(e){if(1e3>e)return Math.round(e);var n=Math.floor(e/1e6),t=Math.floor((e-1e6*n)/1e3),o=Math.round(e-1e6*n-1e3*t);return o>=1e3&&(t++,o-=1e3),t>=1e3&&(n++,t-=1e3),(0===n?"":n+" ")+(n+t===0?"":(100>t?"0":"")+(10>t?"0":"")+t+" ")+(100>o?"0":"")+(10>o?"0":"")+o},unformat:function(e){return e?e.replace(/\s/g,"").replace(/,/g,"."):0}}),L.CRS.decimal=L.extend({},L.CRS.EPSG4326,{name:"Degrs dcimaux",format:function(e){return Math.round(1e5*e)/1e5}}),L.CRS.degminsec=L.extend({},L.CRS.decimal,{name:"Deg Min Sec",format:function(e){var n=Math.floor(Math.abs(e)),t=60*(Math.abs(e)-n),o=Math.floor(t),a=Math.round(600*(t-o))/10;return a>=60&&(o++,a-=60),o>=60&&(n++,o-=60),(0>e?"-":"")+n+""+(10>o?"0":"")+o+"'"+(10>a?"0":"")+a+'"'},unformat:function(e){return va="0"+e.replace(/\s/g,"").replace(/,/g,".").replace(/-/g,"")+"0",vs=va.replace(/'|"/g,"").split(""),("-"==e[0]?-1:1)*(parseFloat(vs[0])+parseFloat(0+vs[1])/60+parseFloat(0+vs[2])/3600)}}),L.CRS.degmin=L.extend({},L.CRS.degminsec,{name:"Deg Min",format:function(e){var n=Math.floor(Math.abs(e)),t=Math.round(60*(Math.abs(e)-n)*1e3)/1e3;return t>=60&&(n++,t-=60),(0>e?"-":"")+n+""+(10>t?"0":"")+t+"'"}});for(var u=28;35>=u;u++)L.CRS["EPSG326"+u]=L.extend(new L.Proj.CRS("EPSG:326"+u,"+proj=utm +zone="+u+" +ellps=WGS84 +datum=WGS84 +units=m +no_defs"),{bounds:L.bounds([6*u-186,0],[6*u-180,84]),name:"UTM "+u+"N"});L.CRS.EPSG32630.name+=" (France ouest)",L.CRS.EPSG32631.name+=" (France centre)",L.CRS.EPSG32632.name+=" (France est)",L.CRS.EPSG32633.name+=" (Autriche)",L.CRS.EPSG27571=L.extend(new L.Proj.CRS("EPSG:27571","+title=Lambert zone 1 , LCC +proj=lcc +lat_1=49.5 +lat_0=49.5 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs"),{bounds:L.bounds([-5.2,48.15],[8.23,51.1]),name:"Lambert I (Nord)"}),L.CRS.EPSG27572=L.extend({},L.CRS.EPSG27571,new L.Proj.CRS("EPSG:27572","+title=Lambert 2 tendue, LCC +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs"),{bounds:L.bounds([-5.2,42.25],[8.23,51.1]),name:"Lambert II (Centre)"}),L.CRS.EPSG27573=L.extend({},L.CRS.EPSG27571,new L.Proj.CRS("EPSG:27573","+title=Lambert zone 3, LCC +proj=lcc +lat_1=44.1 +lat_0=44.1 +lon_0=0 +k_0=0.999877499 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs"),{bounds:L.bounds([-1.76,42.33],[7.77,45.45]),name:"Lambert III (Sud)"}),L.CRS.EPSG27574=L.extend({},L.CRS.EPSG27571,new L.Proj.CRS("EPSG:27574","+title=Lambert zone 4, +proj=lcc +lat_1=42.165 +lat_0=42.165 +lon_0=0 +k_0=0.99994471 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs"),{bounds:L.bounds([8.5,41.33],[9.6,43.05]),name:"Lambert IV (Corse)"}),L.Marker.include({coordinates:function(e){var n=document.getElementById(e+"-json");if(n){var t=JSON.parse(n.innerHTML||n.value).coordinates;t&&this.setLatLng([t[1],t[0]])}return this.displayCoord(e),this},displayCoord:function(e){var n=this,t=n._latlng,o="decimal",a=document.getElementById(e+"-select");if(a){for(a.value&&(o=a.value);a.hasChildNodes();)a.removeChild(a.firstChild);for(c in L.CRS)if(L.CRS[c]&&L.CRS[c].name&&(!L.CRS[c].bounds||L.CRS[c].bounds.contains([t.lng,t.lat]))){var r=document.createElement("option");r.value=c,c==o&&(r.selected="selected"),r.appendChild(document.createTextNode(L.CRS[c].name)),a.appendChild(r)}a.onchange=function(){n.displayCoord(e)}}var i=L.extend({},L.CRS,L.CRS[o]),d=L.Projection.LonLat.unproject(i.projection.project(t));for(l in t){var u={title:i.title[l],deg:t[l],proj:i.format(d[l]),json:JSON.stringify(n.toGeoJSON().geometry)};for(v in u){var s=document.getElementById([e,v,l].join("-"))||document.getElementById([e,v].join("-"));if(s){var m="undefined"!=typeof s.value?"value":"innerHTML";s[m]=u[v],s.onchange=function(){var e={};for(l in t){var o=this.id.split("-");o[2]=l;var a=document.getElementById(o.join("-"));a&&(e[l]=i.unformat(a[m]))}var r=i.projection.unproject(L.Projection.LonLat.project(e));n.setLatLng(r),n.fire("edit"),n._map.panTo(r)}}}}n.on("move",function(){n.off("move"),n.displayCoord(e),n.fire("edit")})}});
L.TileLayer.OSM=L.TileLayer.extend({options:{url:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a>'},initialize:function(t){this.options.subAttribution&&(this.options.attribution+=" | "+this.options.subAttribution),L.TileLayer.prototype.initialize.call(this,this.options.url,t)}}),L.TileLayer.OSM.FR=L.TileLayer.OSM.extend({options:{url:"http://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png"}}),L.TileLayer.OSM.MRI=L.TileLayer.OSM.extend({options:{url:"http://maps.refuges.info/hiking/{z}/{x}/{y}.png",subAttribution:'<a href="http://wiki.openstreetmap.org/wiki/Hiking/mri">MRI</a>'}}),L.TileLayer.Kompass=L.TileLayer.OSM.extend({options:{l:"Touristik",url:"http://ec{s}.cdn.ecmaps.de/WmsGateway.ashx.jpg?Experience=kompass&MapStyle=KOMPASS%20{l}&TileX={x}&TileY={y}&ZoomLevel={z}",maxZoom:15,subdomains:"0123",subAttribution:'<a href="http://www.kompass.de/livemap/">KOMPASS</a>'}}),L.TileLayer.OSM.hikebike=L.TileLayer.OSM.extend({options:{url:"http://{s}.tiles.wmflabs.org/hikebike/{z}/{x}/{y}.png",subdomains:"abc",maxZoom:20,subAttribution:'<a href="http://www.hikebikemap.org/">hikebikemap.org</a>'}}),L.TileLayer.OSM.hill=L.TileLayer.OSM.extend({options:{url:"http://{s}.tiles.wmflabs.org/hillshading/{z}/{x}/{y}.png",subdomains:"abc",maxZoom:15,subAttribution:'<a href="https://wikitech.wikimedia.org">Wikimedia Tool Labs</a>'}});var ft=["Landscape","Outdoors","Cycle","Transport"];for(m in ft)L.TileLayer.OSM[ft[m]]=L.TileLayer.OSM.extend({options:{url:"http://{s}.tile.thunderforest.com/"+ft[m].toLowerCase()+"/{z}/{x}/{y}.png",subAttribution:'<a href="http://www.thunderforest.com">Thunderforest '+ft[m]+"</a>"}});
L.TileLayer.IGN=L.TileLayer.extend({options:{l:"GEOGRAPHICALGRIDSYSTEMS.MAPS",attribution:'&copy; <a href="http://www.ign.fr/">IGN</a>'},initialize:function(i){L.TileLayer.prototype.initialize.call(this,"http://gpp3-wxs.ign.fr/{k}/wmts?LAYER={l}&FORMAT=image/jpeg&SERVICE=WMTS&VERSION=1.0.0&REQUEST=GetTile&STYLE=normal&TILEMATRIXSET=PM&TILEMATRIX={z}&TILECOL={x}&TILEROW={y}",i)}});
L.TileLayer.WMS.IGM=L.TileLayer.WMS.extend({initialize:function(){L.TileLayer.WMS.prototype.initialize.call(this,"http://129.206.228.72/cached/osm?",{crs:L.CRS.EPSG900913,tileSize:512})},onAdd:function(t){L.TileLayer.WMS.prototype.onAdd.call(this,t),t.on("zoomend",this._onZoom,this),this._onZoom()},_onZoom:function(){if(this._map){var t={url:"http://wms.pcn.minambiente.it/ogc?map=/ms_ogc/WMS_v1.3/raster/",urlExt:"",attribution:'&copy; <a href="http://www.pcn.minambiente.it/viewer">IGM</a>'};this._map._zoom<11?(t.url="http://129.206.228.72/cached/osm?",t.layers="osm_auto:all",t.attribution='&copy; <a href="http://www.osm-wms.de/">OSM</a>'):this._map._zoom<13?(t.urlExt="IGM_250000.map",t.layers="CB.IGM250000"):this._map._zoom<15?(t.urlExt="IGM_100000.map",t.layers="MB.IGM100000"):this._map._zoom<16&&(t.urlExt="IGM_25000.map",t.layers="CB.IGM25000"),this.wmsParams.layers!=t.layers&&(this._url=t.url+t.urlExt,this.wmsParams.layers=t.layers,this.redraw(),this.options.attribution=t.attribution,this._map.attributionControl._attributions=[],this._map.attributionControl.addAttribution(t.attribution))}}});
L.TileLayer.WMS.IDEE=L.TileLayer.WMS.extend({options:{url:"http://www.idee.es/wms/MTN-Raster/MTN-Raster",layer:"mtn_rasterizado",crs:L.CRS.EPSG3857,attribution:'&copy; <a href="http://www.idee.es/">IDEE</a>'},initialize:function(t){L.TileLayer.WMS.prototype.initialize.call(this,this.options.url,{layers:this.options.layer,attribution:this.options.attribution},t)}}),L.TileLayer.WMS.IDEE.Photo=L.TileLayer.WMS.IDEE.extend({options:{url:"http://www.ign.es/wms-inspire/pnoa-ma",layer:"OI.OrthoimageCoverage",attribution:'&copy; <a href="http://www.ign.es/PNOA/">PNOA</a>'}});
L.CRS.EPSG21781=L.extend(new L.Proj.CRS("EPSG:21781","+proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +k_0=1 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs",{resolutions:[4e3,3750,3500,3250,3e3,2750,2500,2250,2e3,1750,1500,1250,1e3,750,650,500,250,100,50,20,10,5,2.5,2,1.5,1,.5],origin:[42e4,35e4]}),{bounds:L.bounds([5.97,45.83],[10.49,47.81]),name:"Coordonnes suisses",title:{lng:"X",lat:"Y"},distance:function(e,o){return L.CRS.Earth.distance(e,o)}}),L.TileLayer.SwissTopo=L.TileLayer.extend({options:{l:"ch.swisstopo.pixelkarte-farbe",subdomains:"56789",t:20151231,crs:L.CRS.EPSG21781,maxZoom:L.CRS.EPSG21781.options.resolutions.length-1,minZoom:0,attribution:'&copy; <a href="http://www.swisstopo.admin.ch/internet/swisstopo/fr/home.html">swisstopo, BAFU</a>'},initialize:function(e){L.TileLayer.prototype.initialize.call(this,"http://wmts{s}.geo.admin.ch/1.0.0/{l}/default/{t}/21781/{z}/{y}/{x}.jpeg",e)}});
L.TileLayer.Google=L.TileLayer.extend({options:{l:"m",maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"],attribution:'&copy; <a href="https://www.google.com/maps">Google Maps</a>'},initialize:function(o){L.TileLayer.prototype.initialize.call(this,"http://{s}.google.com/vt/lyrs={l}&x={x}&y={y}&z={z}",o)}});
!function(e,t){if("function"==typeof define&&define.amd)define(["leaflet","proj4leaflet"],t);else if("object"==typeof exports){var i=require("leaflet");require("proj4leaflet"),module.exports=t(i)}else{if("undefined"==typeof window.L)throw"Leaflet missing";e.returnExports=t(e.L)}}(this,function(e){return e.OSOpenSpace=e.Class.extend({statics:{RESOLUTIONS:[2500,1e3,500,200,100,50,25,10,5,2.5],_OSGB36:{EPSG:"EPSG:27700",DEF:"+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy+towgs84=446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894 +units=m +no_defs no_defs",EXTENT:[1393.0196,13494.9764,671196.3657,1230275.0454],PROJ_EXTENT:[0,0,7e5,13e5]},getCrsAsString:function(){return e.OSOpenSpace._OSGB36.DEF},getCRS:function(){var t=e.OSOpenSpace,i=new e.Proj.CRS(t._OSGB36.EPSG,t._OSGB36.DEF,{resolutions:t.RESOLUTIONS,bounds:e.bounds([t._OSGB36.PROJ_EXTENT[3],t._OSGB36.PROJ_EXTENT[0]],[t._OSGB36.PROJ_EXTENT[2],t._OSGB36.PROJ_EXTENT[1]])});return i}}}),e.TileLayer.OSOpenSpace=e.TileLayer.WMS.extend({defaultWmsParams:{SERVICE:"WMS",REQUEST:"GetMap",VERSION:"1.1.1",FORMAT:"image/png"},defaultLayerOptions:{maxZoom:null,minZoom:0,crs:e.OSOpenSpace.getCRS(),continuousWorld:!0,worldCopyJump:!1,tms:!0,attribution:" Crown copyright and database rights 2015 Ordnance Survey.",detectRetina:!1},resolutions:[],_url:"https://openspace.ordnancesurvey.co.uk/osmapapi/ts",debug:!1,initialize:function(t,i){if(!t)throw"OSOpenSpace layer requires an API Key parameter to function.";var n=200,o={KEY:t,URL:"file:///"};this.options.tileSize=n,this.resolutions=e.OSOpenSpace.RESOLUTIONS,this.defaultLayerOptions.maxZoom=e.OSOpenSpace.RESOLUTIONS.length-1;var r=e.extend(o,this.defaultWmsParams);r.width=r.height=n;for(var s in i)this.options.hasOwnProperty(s)||"crs"===s||(r[s]=i[s]),"debug"===s&&(this.debug=i[s]);this.wmsParams=r,e.setOptions(this,this.defaultLayerOptions)},getTileUrl:function(t){this.debug&&console.log(">>tilePoint: ",t.toString());var i=this.options.tileSize,n=t.z,o=this.resolutions[n],r=i*o,s=r*t.x,a=r*t.y;this.debug&&console.log(">>tileSizePixels: "+i+", zoom: "+n+", resolutionMpp: "+o+", tileSizeMetres: "+r);var l=[s,a,0,0].join(","),S=e.Util.template(this._url,{});return this.debug&&console.log(">>Bbox: ",l),S+e.Util.getParamString(this.wmsParams)+"&BBOX="+l+"&WIDTH="+i+"&HEIGHT="+i+"&LAYERS="+o}}),e.tileLayer.OSOpenSpace=function(t,i){return new e.TileLayer.OSOpenSpace(t,i)},e.tileLayer.OSOpenSpace});
L.BingLayer=L.TileLayer.extend({options:{subdomains:[0,1,2,3],type:"Aerial",attribution:"Bing",culture:""},initialize:function(t,i){L.Util.setOptions(this,i),this._key=t,this._url=null,this._providers=[],this.metaRequested=!1},tile2quad:function(t,i,e){for(var o="",a=e;a>0;a--){var r=0,n=1<<a-1;0!==(t&n)&&(r+=1),0!==(i&n)&&(r+=2),o+=r}return o},getTileUrl:function(t,i){var e=this._getZoomForUrl(),o=this.options.subdomains,a=this.options.subdomains[Math.abs((t.x+t.y)%o.length)];return this._url.replace("{subdomain}",a).replace("{quadkey}",this.tile2quad(t.x,t.y,e)).replace("{culture}",this.options.culture)},loadMetadata:function(){if(!this.metaRequested){this.metaRequested=!0;var t=this,i="_bing_metadata_"+L.Util.stamp(this);window[i]=function(e){window[i]=void 0;var o=document.getElementById(i);o.parentNode.removeChild(o),e.errorDetails||t.initMetadata(e)};var e="file:"===document.location.protocol?"http":document.location.protocol.slice(0,-1),o=e+"://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.options.type+"?include=ImageryProviders&jsonp="+i+"&key="+this._key+"&UriScheme="+e,a=document.createElement("script");a.type="text/javascript",a.src=o,a.id=i,document.getElementsByTagName("head")[0].appendChild(a)}},initMetadata:function(t){var i=t.resourceSets[0].resources[0];if(this.options.subdomains=i.imageUrlSubdomains,this._url=i.imageUrl,i.imageryProviders)for(var e=0;e<i.imageryProviders.length;e++)for(var o=i.imageryProviders[e],a=0;a<o.coverageAreas.length;a++){var r=o.coverageAreas[a],n={zoomMin:r.zoomMin,zoomMax:r.zoomMax,active:!1},s=new L.LatLngBounds(new L.LatLng(r.bbox[0]+.01,r.bbox[1]+.01),new L.LatLng(r.bbox[2]-.01,r.bbox[3]-.01));n.bounds=s,n.attrib=o.attribution,this._providers.push(n)}this._update()},_update:function(){null!==this._url&&this._map&&(this._update_attribution(),L.TileLayer.prototype._update.apply(this,[]))},_update_attribution:function(){for(var t=this._map.getBounds(),i=this._map.getZoom(),e=0;e<this._providers.length;e++){var o=this._providers[e];i<=o.zoomMax&&i>=o.zoomMin&&t.intersects(o.bounds)?(!o.active&&this._map.attributionControl&&this._map.attributionControl.addAttribution(o.attrib),o.active=!0):(o.active&&this._map.attributionControl&&this._map.attributionControl.removeAttribution(o.attrib),o.active=!1)}},onAdd:function(t){this.loadMetadata(),L.TileLayer.prototype.onAdd.apply(this,[t])},onRemove:function(t){for(var i=0;i<this._providers.length;i++){var e=this._providers[i];e.active&&this._map.attributionControl&&(this._map.attributionControl.removeAttribution(e.attrib),e.active=!1)}L.TileLayer.prototype.onRemove.apply(this,[t])}}),L.bingLayer=function(t,i){return new L.BingLayer(t,i)};
L.TileLayer.collection=function(e){var i=L.TileLayer._collection;if("undefined"==typeof i){i={OSM:new L.TileLayer.OSM,"OSM-FR":new L.TileLayer.OSM.FR,"Maps.Refuges.Info":new L.TileLayer.OSM.MRI,"Hike & Bike":new L.TileLayer.OSM.hikebike};var n=["Landscape","Outdoors","Cycle","Transport"];for(m in n)"undefined"!=typeof L.TileLayer.OSM[n[m]]&&(i["OSM-"+n[m]]=new L.TileLayer.OSM[n[m]]);"undefined"!=typeof L.TileLayer.IGN&&"undefined"!=typeof key&&"undefined"!=typeof key.ign&&L.Util.extend(i,{IGN:new L.TileLayer.IGN({k:key.ign,l:"GEOGRAPHICALGRIDSYSTEMS.MAPS"}),"IGN Photo":new L.TileLayer.IGN({k:key.ign,l:"ORTHOIMAGERY.ORTHOPHOTOS"}),"IGN Topo":new L.TileLayer.IGN({k:key.ign,l:"GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.STANDARD"}),"IGN Classique":new L.TileLayer.IGN({k:key.ign,l:"GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.CLASSIQUE"}),"IGN Cadastre":new L.TileLayer.IGN({k:key.ign,l:"CADASTRALPARCELS.PARCELS"})}),"undefined"!=typeof L.TileLayer.WMS.IDEE&&L.Util.extend(i,{Espagne:new L.TileLayer.WMS.IDEE,"Espagne photo":new L.TileLayer.WMS.IDEE.Photo}),"undefined"!=typeof L.TileLayer.WMS.IGM&&(i.Italie=new L.TileLayer.WMS.IGM),"undefined"!=typeof L.TileLayer.SwissTopo&&L.Util.extend(i,{SwissTopo:new L.TileLayer.SwissTopo({l:"ch.swisstopo.pixelkarte-farbe"}),"Swiss Image":new L.TileLayer.SwissTopo({l:"ch.swisstopo.swissimage"})}),"undefined"!=typeof L.TileLayer.Kompass&&L.Util.extend(i,{Autriche:new L.TileLayer.Kompass({l:"Touristik"}),Kompass:new L.TileLayer.Kompass({l:"OSM"})}),"undefined"!=typeof key&&"undefined"!=typeof key.os&&("undefined"!=typeof L.TileLayer.OSOpenSpace?i["OS-Great Britain"]=new L.TileLayer.OSOpenSpace(key.os,{}):"undefined"!=typeof L.TileLayer.WMS.OS&&(i["OS Great Britain"]=new L.TileLayer.WMS.OS({k:key.os}))),"undefined"!=typeof L.BingLayer&&"undefined"!=typeof key&&"undefined"!=typeof key.bing&&L.Util.extend(i,{"Bing Road":new L.BingLayer(key.bing,{type:"Road"}),"Bing Photo":new L.BingLayer(key.bing,{type:"Aerial"}),"Bing Hybrid":new L.BingLayer(key.bing,{type:"AerialWithLabels"})}),"undefined"!=typeof L.TileLayer.Google&&L.Util.extend(i,{"Google Road":new L.TileLayer.Google({l:"m"}),"Google Terrain":new L.TileLayer.Google({l:"p"}),"Google Photo":new L.TileLayer.Google({l:"s"}),"Google Hybride":new L.TileLayer.Google({l:"s,h"})})}return"undefined"!=typeof i[e]?i[e]:i};
var FileLoader=L.Class.extend({includes:L.Mixin.Events,options:{layerOptions:{},fileSizeLimit:1024},initialize:function(e,t){this._map=e,L.Util.setOptions(this,t),this._parsers={geojson:this._loadGeoJSON,gpx:this._convertToGeoJSON,kml:this._convertToGeoJSON}},load:function(e){var t=(e.size/1024).toFixed(4);if(t>this.options.fileSizeLimit)return void this.fire("data:error",{error:new Error("File size exceeds limit ("+t+" > "+this.options.fileSizeLimit+"kb)")});var i=e.name.split(".").pop(),o=this._parsers[i];if(!o)return void this.fire("data:error",{error:new Error("Unsupported file type "+e.type+"("+i+")")});var n=new FileReader;return n.onload=L.Util.bind(function(t){try{this.fire("data:loading",{filename:e.name,format:i});var n=o.call(this,t.target.result,i);this.fire("data:loaded",{layer:n,filename:e.name,format:i})}catch(r){this.fire("data:error",{error:r})}},this),n.readAsText(e),n},_loadGeoJSON:function(e){"string"==typeof e&&(e=JSON.parse(e));var t=L.geoJson(e,this.options.layerOptions);if(0===t.getLayers().length)throw new Error("GeoJSON has no valid layers.");return this.options.addToMap&&t.addTo(this._map),t},_convertToGeoJSON:function(e,t){"string"==typeof e&&(e=(new window.DOMParser).parseFromString(e,"text/xml"));var i=toGeoJSON[t](e);return this._loadGeoJSON(i)}});L.Control.FileLayerLoad=L.Control.extend({statics:{TITLE:"Load local file (GPX, KML, GeoJSON)",LABEL:"&#8965;"},options:{position:"topleft",fitBounds:!0,layerOptions:{},addToMap:!0,fileSizeLimit:1024},initialize:function(e){L.Util.setOptions(this,e),this.loader=null},onAdd:function(e){return this.loader=new FileLoader(e,this.options),this.loader.on("data:loaded",function(t){this.options.fitBounds&&window.setTimeout(function(){e.fitBounds(t.layer.getBounds())},500)},this),this._initDragAndDrop(e),this._initContainer()},_initDragAndDrop:function(e){var t=this.loader,i=e._container,o={dragenter:function(){e.scrollWheelZoom.disable()},dragleave:function(){e.scrollWheelZoom.enable()},dragover:function(e){e.stopPropagation(),e.preventDefault()},drop:function(i){i.stopPropagation(),i.preventDefault();var o=Array.prototype.slice.apply(i.dataTransfer.files);o.length;setTimeout(function(){t.load(o.shift()),o.length>0&&setTimeout(arguments.callee,25)},25),e.scrollWheelZoom.enable()}};for(var n in o)i.addEventListener(n,o[n],!1)},_initContainer:function(){var e="leaflet-control-filelayer leaflet-control-zoom",t="leaflet-bar",i=t+"-part",o=L.DomUtil.create("div",e+" "+t),n=L.DomUtil.create("a",e+"-in "+i,o);n.innerHTML=L.Control.FileLayerLoad.LABEL,n.href="#",n.title=L.Control.FileLayerLoad.TITLE;var r=L.DomUtil.create("input","hidden",o);r.type="file",this.options.formats?r.accept=this.options.formats.join(","):r.accept=".gpx,.kml,.geojson",r.style.display="none";var a=this.loader;return r.addEventListener("change",function(e){a.load(this.files[0]),this.value=""},!1),L.DomEvent.disableClickPropagation(n),L.DomEvent.on(n,"click",function(e){r.click(),e.preventDefault()}),o}}),L.Control.fileLayerLoad=function(e){return new L.Control.FileLayerLoad(e)};
var toGeoJSON=function(){"use strict";function e(e){if(!e||!e.length)return 0;for(var t=0,r=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)|0;return r}function t(e,t){return e.getElementsByTagName(t)}function r(e,t){return e.getAttribute(t)}function n(e,t){return parseFloat(r(e,t))}function i(e,r){var n=t(e,r);return n.length?n[0]:null}function o(e){return e.normalize&&e.normalize(),e}function a(e){for(var t=0,r=[];t<e.length;t++)r[t]=parseFloat(e[t]);return r}function s(e){var t={};for(var r in e)e[r]&&(t[r]=e[r]);return t}function l(e){return e&&o(e),e&&e.textContent||""}function u(e){return a(e.replace(m,"").split(","))}function c(e){for(var t=e.replace(d,"").split(y),r=[],n=0;n<t.length;n++)r.push(u(t[n]));return r}function g(e){var t,r=[n(e,"lon"),n(e,"lat")],o=i(e,"ele"),a=i(e,"gpxtpx:hr")||i(e,"hr"),s=i(e,"time");return o&&(t=parseFloat(l(o)),isNaN(t)||r.push(t)),{coordinates:r,time:s?l(s):null,heartRate:a?parseFloat(l(a)):null}}function f(){return{type:"FeatureCollection",features:[]}}function p(e){return void 0!==e.xml?e.xml:h.serializeToString(e)}var h,m=/\s*/g,d=/^\s*|\s*$/g,y=/\s+/;"undefined"!=typeof XMLSerializer?h=new XMLSerializer:"object"!=typeof exports||"object"!=typeof process||process.browser||(h=new(require("xmldom").XMLSerializer));var v={kml:function(n){function o(e){var t,r;return e=e||"","#"===e.substr(0,1)&&(e=e.substr(1)),(6===e.length||3===e.length)&&(t=e),8===e.length&&(r=parseInt(e.substr(0,2),16)/255,t="#"+e.substr(2)),[t,isNaN(r)?void 0:r]}function s(e){return a(e.split(" "))}function g(e){var r=t(e,"coord","gx"),n=[],i=[];0===r.length&&(r=t(e,"gx:coord"));for(var o=0;o<r.length;o++)n.push(s(l(r[o])));for(var a=t(e,"when"),u=0;u<a.length;u++)i.push(l(a[u]));return{coords:n,times:i}}function h(e){var r,n,o,a,s,f=[],p=[];if(i(e,"MultiGeometry"))return h(i(e,"MultiGeometry"));if(i(e,"MultiTrack"))return h(i(e,"MultiTrack"));if(i(e,"gx:MultiTrack"))return h(i(e,"gx:MultiTrack"));for(o=0;o<v.length;o++)if(n=t(e,v[o]))for(a=0;a<n.length;a++)if(r=n[a],"Point"===v[o])f.push({type:"Point",coordinates:u(l(i(r,"coordinates")))});else if("LineString"===v[o])f.push({type:"LineString",coordinates:c(l(i(r,"coordinates")))});else if("Polygon"===v[o]){var m=t(r,"LinearRing"),d=[];for(s=0;s<m.length;s++)d.push(c(l(i(m[s],"coordinates"))));f.push({type:"Polygon",coordinates:d})}else if("Track"===v[o]||"gx:Track"===v[o]){var y=g(r);f.push({type:"LineString",coordinates:y.coords}),y.times.length&&p.push(y.times)}return{geoms:f,coordTimes:p}}function m(e){var n,a=h(e),s={},u=l(i(e,"name")),c=l(i(e,"styleUrl")),g=l(i(e,"description")),f=i(e,"TimeSpan"),p=i(e,"ExtendedData"),m=i(e,"LineStyle"),d=i(e,"PolyStyle"),v=i(e,"visibility");if(!a.geoms.length)return[];if(u&&(s.name=u),"#"!==c[0]&&(c="#"+c),c&&y[c]&&(s.styleUrl=c,s.styleHash=y[c]),g&&(s.description=g),f){var S=l(i(f,"begin")),k=l(i(f,"end"));s.timespan={begin:S,end:k}}if(m){var T=o(l(i(m,"color"))),x=T[0],b=T[1],N=parseFloat(l(i(m,"width")));x&&(s.stroke=x),isNaN(b)||(s["stroke-opacity"]=b),isNaN(N)||(s["stroke-width"]=N)}if(d){var L=o(l(i(d,"color"))),M=L[0],F=L[1],P=l(i(d,"fill")),R=l(i(d,"outline"));M&&(s.fill=M),isNaN(F)||(s["fill-opacity"]=F),P&&(s["fill-opacity"]="1"===P?1:0),R&&(s["stroke-opacity"]="1"===R?1:0)}if(p){var w=t(p,"Data"),z=t(p,"SimpleData");for(n=0;n<w.length;n++)s[w[n].getAttribute("name")]=l(i(w[n],"value"));for(n=0;n<z.length;n++)s[z[n].getAttribute("name")]=l(z[n])}v&&(s.visibility=l(v)),a.coordTimes.length&&(s.coordTimes=1===a.coordTimes.length?a.coordTimes[0]:a.coordTimes);var G={type:"Feature",geometry:1===a.geoms.length?a.geoms[0]:{type:"GeometryCollection",geometries:a.geoms},properties:s};return r(e,"id")&&(G.id=r(e,"id")),[G]}for(var d=f(),y={},v=["Polygon","LineString","Point","Track","gx:Track"],S=t(n,"Placemark"),k=t(n,"Style"),T=t(n,"StyleMap"),x=0;x<k.length;x++)y["#"+r(k[x],"id")]=e(p(k[x])).toString(16);for(var b=0;b<T.length;b++)y["#"+r(T[b],"id")]=e(p(T[b])).toString(16);for(var N=0;N<S.length;N++)d.features=d.features.concat(m(S[N]));return d},gpx:function(e){function r(e,r){var n=t(e,r),i=[],o=[],a=[],s=n.length;if(2>s)return{};for(var l=0;s>l;l++){var u=g(n[l]);i.push(u.coordinates),u.time&&o.push(u.time),u.heartRate&&a.push(u.heartRate)}return{line:i,times:o,heartRates:a}}function n(e){for(var n,i=t(e,"trkseg"),o=[],a=[],s=[],l=0;l<i.length;l++)n=r(i[l],"trkpt"),n.line&&o.push(n.line),n.times&&n.times.length&&a.push(n.times),n.heartRates&&n.heartRates.length&&s.push(n.heartRates);if(0!==o.length){var c=u(e);return a.length&&(c.coordTimes=1===o.length?a[0]:a),s.length&&(c.heartRates=1===o.length?s[0]:s),{type:"Feature",properties:c,geometry:{type:1===o.length?"LineString":"MultiLineString",coordinates:1===o.length?o[0]:o}}}}function o(e){var t=r(e,"rtept");if(t.line){var n={type:"Feature",properties:u(e),geometry:{type:"LineString",coordinates:t.line}};return n}}function a(e){var t=u(e);return t.sym=l(i(e,"sym")),{type:"Feature",properties:t,geometry:{type:"Point",coordinates:g(e).coordinates}}}function u(e){var t,r=["name","desc","author","copyright","link","time","keywords"],n={};for(t=0;t<r.length;t++)n[r[t]]=l(i(e,r[t]));return s(n)}var c,p,h=t(e,"trk"),m=t(e,"rte"),d=t(e,"wpt"),y=f();for(c=0;c<h.length;c++)p=n(h[c]),p&&y.features.push(p);for(c=0;c<m.length;c++)p=o(m[c]),p&&y.features.push(p);for(c=0;c<d.length;c++)y.features.push(a(d[c]));return y}};return v}();"undefined"!=typeof module&&(module.exports=toGeoJSON);
L.Rrose=L.Popup.extend({_initLayout:function(){var t,i,o="leaflet-rrose",n=this._container=L.DomUtil.create("div",o+" "+this.options.className+" leaflet-zoom-animated");this.options.closeButton&&(t=this._closeButton=L.DomUtil.create("a",o+"-close-button",n),t.href="#close",t.innerHTML="&#215;",L.DomEvent.on(t,"click",this._onCloseButtonClick,this));var e=80,s=80;this.options.position="n";var a=s-this._map.latLngToContainerPoint(this._latlng).y;a>0&&(this.options.position="s");var p=this._map.latLngToContainerPoint(this._latlng).x-(this._map.getSize().x-e);p>0?this.options.position+="w":(p=e-this._map.latLngToContainerPoint(this._latlng).x,p>0&&(this.options.position+="e")),/s/.test(this.options.position)?("s"===this.options.position?(this._tipContainer=L.DomUtil.create("div",o+"-tip-container",n),i=this._wrapper=L.DomUtil.create("div",o+"-content-wrapper",n)):(this._tipContainer=L.DomUtil.create("div",o+"-tip-container "+o+"-tip-container-"+this.options.position,n),i=this._wrapper=L.DomUtil.create("div",o+"-content-wrapper "+o+"-content-wrapper-"+this.options.position,n)),this._tip=L.DomUtil.create("div",o+"-tip "+o+"-tip-"+this.options.position,this._tipContainer),L.DomEvent.disableClickPropagation(i),this._contentNode=L.DomUtil.create("div",o+"-content",i),L.DomEvent.on(this._contentNode,"mousewheel",L.DomEvent.stopPropagation)):("n"===this.options.position?(i=this._wrapper=L.DomUtil.create("div",o+"-content-wrapper",n),this._tipContainer=L.DomUtil.create("div",o+"-tip-container",n)):(i=this._wrapper=L.DomUtil.create("div",o+"-content-wrapper "+o+"-content-wrapper-"+this.options.position,n),this._tipContainer=L.DomUtil.create("div",o+"-tip-container "+o+"-tip-container-"+this.options.position,n)),L.DomEvent.disableClickPropagation(i),this._contentNode=L.DomUtil.create("div",o+"-content",i),L.DomEvent.on(this._contentNode,"mousewheel",L.DomEvent.stopPropagation),this._tip=L.DomUtil.create("div",o+"-tip "+o+"-tip-"+this.options.position,this._tipContainer))},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng),i=L.Browser.any3d,o=this.options.offset;i&&L.DomUtil.setPosition(this._container,t),/s/.test(this.options.position)?this._containerBottom=-this._container.offsetHeight+o.y-(i?0:t.y):this._containerBottom=-o.y-(i?0:t.y),/e/.test(this.options.position)?this._containerLeft=o.x+(i?0:t.x):/w/.test(this.options.position)?this._containerLeft=-Math.round(this._containerWidth)+o.x+(i?0:t.x):this._containerLeft=-Math.round(this._containerWidth/2)+o.x+(i?0:t.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}});
L.GeoJSON.Style=L.GeoJSON.extend({_setLayerStyle:function(t,e){var o=L.extend({},t.feature.properties,"function"==typeof e?e(t.feature):e);o.iconUrl&&t.setIcon(L.icon(o)),o.url&&t.on("click",function(t){t.originalEvent.shiftKey||t.originalEvent.ctrlKey?window.open(o.url):document.location.href=o.url}),t.on("mouseover mousemove",function(t){o.degroup&&this._degroup(t.target,o.degroup);var e=o.popupAnchor||[0,-45];o.title&&new L.Rrose({offset:new L.Point(e[0],e[1]),closeButton:!1,autoPan:!1}).setContent(o.title).setLatLng(t.latlng).openOn(this._map)},this),t.on("mouseout",function(t){this._map&&this._map.closePopup()}),L.GeoJSON.prototype._setLayerStyle.call(this,t,o)},_degroup:function(t,e){var o=t._latlng,n=this._map.latLngToLayerPoint(o);for(l in this._layers){var i=this._layers[l];if(i._lli||(i._lli=i._latlng),t._leaflet_id!=i._leaflet_id){var a=this._map.latLngToLayerPoint(i._lli),r=a.distanceTo(n);r?i.setLatLng(r>e?i._lli:[o.lat+(i._lli.lat-o.lat)*e/r,o.lng+(i._lli.lng-o.lng)*e/r]):i.setLatLng(this._map.layerPointToLatLng(a.add([e,0])))}}}});
L.GeoJSON.Ajax=L.GeoJSON.Style.extend({ajaxRequest:null,options:{proxy:"",urlGeoJSON:null,argsGeoJSON:{}},initialize:function(t,e){t&&(e.urlGeoJSON=t),L.GeoJSON.prototype.initialize.call(this,null,e)},onAdd:function(t){L.GeoJSON.prototype.onAdd.call(this,t),this.options.bbox&&t.on("moveend",this.reload,this),this.reload()},reload:function(t){if(L.extend(this.options.argsGeoJSON,t),this.options.bbox&&this._map){var e=this._map.getBounds(),s=e.getSouthWest(),o=e.getNorthEast();this.options.argsGeoJSON.bbox=s.lng+","+s.lat+","+o.lng+","+o.lat}this.ajaxRequest||(window.XMLHttpRequest?this.ajaxRequest=new XMLHttpRequest:window.ActiveXObject?this.ajaxRequest=new ActiveXObject("Microsoft.XMLHTTP"):(alert("Your browser doesn't support AJAX requests."),exit),this.ajaxRequest.context=this),this.ajaxRequest.onreadystatechange=function(t){t.target.readyState<4||(200==t.target.status?t.target.context.redraw(t.target.responseText):t.target.status&&alert("ajaxRequest error status = "+t.target.status+" calling "+this.options.urlGeoJSON))},this.ajaxRequest.open("GET",this.options.proxy+this.options.urlGeoJSON+L.Util.getParamString(this.options.argsGeoJSON),!0),this.ajaxRequest.send(null)},redraw:function(geoJSON){for(l in this._layers)this._map&&this._map.removeLayer(this._layers[l]);try{eval("this.addData(["+geoJSON+"])")}catch(e){e instanceof SyntaxError&&alert("Json syntax error on "+this.options.urlGeoJSON+this.args+" :\n"+geoJSON)}}});
L.Toolbar=L.Class.extend({includes:[L.Mixin.Events],initialize:function(t){L.setOptions(this,t),this._modes={},this._actionButtons=[],this._activeMode=null},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(t){var o,e=L.DomUtil.create("div","leaflet-draw-section"),i=0,a=this._toolbarClass||"",n=this.getModeHandlers(t);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=t,o=0;o<n.length;o++)n[o].enabled&&this._initModeHandler(n[o].handler,this._toolbarContainer,i++,a,n[o].title);return i?(this._lastButtonIndex=--i,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),e.appendChild(this._toolbarContainer),e.appendChild(this._actionsContainer),e):void 0},removeToolbar:function(){for(var t in this._modes)this._modes.hasOwnProperty(t)&&(this._disposeButton(this._modes[t].button,this._modes[t].handler.enable,this._modes[t].handler),this._modes[t].handler.disable(),this._modes[t].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var o=0,e=this._actionButtons.length;e>o;o++)this._disposeButton(this._actionButtons[o].button,this._actionButtons[o].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(t,o,e,i,a){var n=t.type;this._modes[n]={},this._modes[n].handler=t,this._modes[n].button=this._createButton({title:a,className:i+"-"+n,container:o,callback:this._modes[n].handler.enable,context:this._modes[n].handler}),this._modes[n].buttonIndex=e,this._modes[n].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_createButton:function(t){var o=L.DomUtil.create("a",t.className||"",t.container);return o.href="#",t.text&&(o.innerHTML=t.text),t.title&&(o.title=t.title),L.DomEvent.on(o,"click",L.DomEvent.stopPropagation).on(o,"mousedown",L.DomEvent.stopPropagation).on(o,"dblclick",L.DomEvent.stopPropagation).on(o,"click",L.DomEvent.preventDefault).on(o,"click",t.callback,t.context),o},_disposeButton:function(t,o){L.DomEvent.off(t,"click",L.DomEvent.stopPropagation).off(t,"mousedown",L.DomEvent.stopPropagation).off(t,"dblclick",L.DomEvent.stopPropagation).off(t,"click",L.DomEvent.preventDefault).off(t,"click",o)},_handlerActivated:function(t){this.disable(),this._activeMode=this._modes[t.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(t){var o,e,i,a,n=this._actionsContainer,s=this.getActions(t),l=s.length;for(e=0,i=this._actionButtons.length;i>e;e++)this._disposeButton(this._actionButtons[e].button,this._actionButtons[e].callback);for(this._actionButtons=[];n.firstChild;)n.removeChild(n.firstChild);for(var r=0;l>r;r++)"enabled"in s[r]&&!s[r].enabled||(o=L.DomUtil.create("li","",n),a=this._createButton({title:s[r].title,text:s[r].text,container:o,callback:s[r].callback,context:s[r].context}),this._actionButtons.push({button:a,callback:s[r].callback}))},_showActionsToolbar:function(){var t=this._activeMode.buttonIndex,o=this._lastButtonIndex,e=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=e+"px",0===t&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),t===o&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block"},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom")}});
L.Tooltip=L.Class.extend({initialize:function(t){this._map=t,this._popupPane=t._panes.popupPane,this._container=t.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1},dispose:function(){this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(t){return this._container?(t.subtext=t.subtext||"",0!==t.subtext.length||this._singleLineLabel?t.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(t.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+t.subtext+"</span><br />":"")+"<span>"+t.text+"</span>",this):this},updatePosition:function(t){var i=this._map.latLngToLayerPoint(t),e=this._container;return this._container&&(e.style.visibility="inherit",L.DomUtil.setPosition(e,i)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this}});
L.LatLngUtil={cloneLatLngs:function(n){for(var t=[],L=0,l=n.length;l>L;L++)t.push(this.cloneLatLng(n[L]));return t},cloneLatLng:function(n){return L.latLng(n.lat,n.lng)}};
L.Util.extend(L.LineUtil,{segmentsIntersect:function(e,c,t,n){return this._checkCounterclockwise(e,t,n)!==this._checkCounterclockwise(c,t,n)&&this._checkCounterclockwise(e,c,t)!==this._checkCounterclockwise(e,c,n)},_checkCounterclockwise:function(e,c,t){return(t.y-e.y)*(c.x-e.x)>(c.y-e.y)*(t.x-e.x)}});
L.Polygon.include({intersects:function(){var t,e,n,i,s,o=this._originalPoints;return this._tooFewPointsForIntersection()?!1:(t=L.Polyline.prototype.intersects.call(this))?!0:(e=o.length,n=o[0],i=o[e-1],s=e-2,this._lineSegmentsIntersectsRange(i,n,s,1))}});
L.Polyline.include({intersects:function(){var t,n,e,i=this._originalPoints,r=i?i.length:0;if(this._tooFewPointsForIntersection())return!1;for(t=r-1;t>=3;t--)if(n=i[t-1],e=i[t],this._lineSegmentsIntersectsRange(n,e,t-2))return!0;return!1},newLatLngIntersects:function(t,n){return this._map?this.newPointIntersects(this._map.latLngToLayerPoint(t),n):!1},newPointIntersects:function(t,n){var e=this._originalPoints,i=e?e.length:0,r=e?e[i-1]:null,s=i-2;return this._tooFewPointsForIntersection(1)?!1:this._lineSegmentsIntersectsRange(r,t,s,n?1:0)},_tooFewPointsForIntersection:function(t){var n=this._originalPoints,e=n?n.length:0;return e+=t||0,!this._originalPoints||3>=e},_lineSegmentsIntersectsRange:function(t,n,e,i){var r,s,o=this._originalPoints;i=i||0;for(var a=e;a>i;a--)if(r=o[a-1],s=o[a],L.LineUtil.segmentsIntersect(t,n,r,s))return!0;return!1}});
L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{}},initialize:function(t){for(var o in this.options)this.options.hasOwnProperty(o)&&t[o]&&(t[o]=L.extend({},this.options[o],t[o]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,t)},getModeHandlers:function(t){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(t,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(t,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(t,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(t,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(t,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker}]},getActions:function(t){return[{enabled:t.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:t.deleteLastVertex,context:t},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(t){L.setOptions(this,t);for(var o in this._modes)this._modes.hasOwnProperty(o)&&t.hasOwnProperty(o)&&this._modes[o].handler.setOptions(t[o])}});
L.Draw={},L.Draw.Feature=L.Handler.extend({includes:L.Mixin.Events,initialize:function(e,t){this._map=e,this._container=e._container,this._overlayPane=e._panes.overlayPane,this._popupPane=e._panes.popupPane,t&&t.shapeOptions&&(t.shapeOptions=L.Util.extend({},this.options.shapeOptions,t.shapeOptions)),L.setOptions(this,t)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire("draw:drawstart",{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire("draw:drawstop",{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var e=this._map;e&&(L.DomUtil.disableTextSelection(),e.getContainer().focus(),this._tooltip=new L.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(e){L.setOptions(this,e)},_fireCreatedEvent:function(e){this._map.fire("draw:created",{layer:e,layerType:this.type})},_cancelDrawing:function(e){27===e.keyCode&&this.disable()}});
L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,showLength:!0,zIndexOffset:2e3},initialize:function(t,e){this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,e&&e.drawError&&(e.drawError=L.Util.extend({},this.options.drawError,e.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mousedown",this._onMouseDown,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this).on("mouseup",this._onMouseUp,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseup",this._onMouseUp,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mousemove",this._onMouseMove,this).off("zoomend",this._onZoomEnd,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var t=this._markers.pop(),e=this._poly,i=this._poly.spliceLatLngs(e.getLatLngs().length-1,1)[0];this._markerGroup.removeLayer(t),e.getLatLngs().length<2&&this._map.removeLayer(e),this._vertexChanged(i,!1)}},addVertex:function(t){var e=this._markers.length;return e>0&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(t)?void this._showErrorTooltip():(this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(t)),this._poly.addLatLng(t),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),void this._vertexChanged(t,!0))},_finishShape:function(){var t=this._poly.newLatLngIntersects(this._poly.getLatLngs()[0],!0);return!this.options.allowIntersection&&t||!this._shapeIsValid()?void this._showErrorTooltip():(this._fireCreatedEvent(),this.disable(),void(this.options.repeatMode&&this.enable()))},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._updateGuide()},_onMouseMove:function(t){var e=t.layerPoint,i=t.latlng;this._currentLatLng=i,this._updateTooltip(i),this._updateGuide(e),this._mouseMarker.setLatLng(i),L.DomEvent.preventDefault(t.originalEvent)},_vertexChanged:function(t,e){this._updateFinishHandler(),this._updateRunningMeasure(t,e),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(t){var e=t.originalEvent;this._mouseDownOrigin=L.point(e.clientX,e.clientY)},_onMouseUp:function(t){if(this._mouseDownOrigin){var e=L.point(t.originalEvent.clientX,t.originalEvent.clientY).distanceTo(this._mouseDownOrigin);Math.abs(e)<9*(window.devicePixelRatio||1)&&this.addVertex(t.latlng)}this._mouseDownOrigin=null},_updateFinishHandler:function(){var t=this._markers.length;t>1&&this._markers[t-1].on("click",this._finishShape,this),t>2&&this._markers[t-2].off("click",this._finishShape,this)},_createMarker:function(t){var e=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(e),e},_updateGuide:function(t){var e=this._markers.length;e>0&&(t=t||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[e-1].getLatLng()),t))},_updateTooltip:function(t){var e=this._getTooltipText();t&&this._tooltip.updatePosition(t),this._errorShown||this._tooltip.updateContent(e)},_drawGuide:function(t,e){var i,o,r,s=Math.floor(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))),n=this.options.guidelineDistance,a=this.options.maxGuideLineLength,h=s>a?s-a:n;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));s>h;h+=this.options.guidelineDistance)i=h/s,o={x:Math.floor(t.x*(1-i)+i*e.x),y:Math.floor(t.y*(1-i)+i*e.y)},r=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),r.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(r,o)},_updateGuideColor:function(t){if(this._guidesContainer)for(var e=0,i=this._guidesContainer.childNodes.length;i>e;e++)this._guidesContainer.childNodes[e].style.backgroundColor=t},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var t,e,i=this.options.showLength;return 0===this._markers.length?t={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(e=i?this._getMeasurementString():"",t=1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:e}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:e}),t},_updateRunningMeasure:function(t,e){var i,o,r=this._markers.length;1===this._markers.length?this._measurementRunningTotal=0:(i=r-(e?2:1),o=t.distanceTo(this._markers[i].getLatLng()),this._measurementRunningTotal+=o*(e?1:-1))},_getMeasurementString:function(){var t,e=this._currentLatLng,i=this._markers[this._markers.length-1].getLatLng();return t=this._measurementRunningTotal+e.distanceTo(i),L.GeometryUtil.readableDistance(t,this.options.metric)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var t=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}});
L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(e,t){this.type=L.Draw.Marker.TYPE,L.Draw.Feature.prototype.initialize.call(this,e,t)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:L.drawLocal.draw.handlers.marker.tooltip.start}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._marker&&(this._marker.off("click",this._onClick,this),this._map.off("click",this._onClick,this).removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(e){var t=e.latlng;this._tooltip.updatePosition(t),this._mouseMarker.setLatLng(t),this._marker?(t=this._mouseMarker.getLatLng(),this._marker.setLatLng(t)):(this._marker=new L.Marker(t,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset}),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_fireCreatedEvent:function(){var e=new L.Marker(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,e)}});
L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0}},initialize:function(t,i){L.Draw.Polyline.prototype.initialize.call(this,t,i),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var t=this._markers.length;1===t&&this._markers[0].on("click",this._finishShape,this),t>2&&(this._markers[t-1].on("dblclick",this._finishShape,this),t>3&&this._markers[t-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var t,i;return 0===this._markers.length?t=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?t=L.drawLocal.draw.handlers.polygon.tooltip.cont:(t=L.drawLocal.draw.handlers.polygon.tooltip.end,i=this._getMeasurementString()),{text:t,subtext:i}},_getMeasurementString:function(){var t=this._area;return t?L.GeometryUtil.readableArea(t,this.options.metric):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(t,i){var e;!this.options.allowIntersection&&this.options.showArea&&(e=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(e)),L.Draw.Polyline.prototype._vertexChanged.call(this,t,i)},_cleanUpShape:function(){var t=this._markers.length;t>0&&(this._markers[0].off("click",this._finishShape,this),t>2&&this._markers[t-1].off("dblclick",this._finishShape,this))}});
L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{color:"#fe57a1",opacity:.6,dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},featureGroup:null},initialize:function(t){t.edit&&("undefined"==typeof t.edit.selectedPathOptions&&(t.edit.selectedPathOptions=this.options.edit.selectedPathOptions),t.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,t.edit.selectedPathOptions)),t.remove&&(t.remove=L.extend({},this.options.remove,t.remove)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,t),this._selectedFeatureCount=0},getModeHandlers:function(t){var e=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(t,{featureGroup:e,selectedPathOptions:this.options.edit.selectedPathOptions}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(t,{featureGroup:e}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(){return[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}]},addToolbar:function(t){var e=L.Toolbar.prototype.addToolbar.call(this,t);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),e},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode.handler.disable()},_checkDisabled:function(){var t,e=this.options.featureGroup,o=0!==e.getLayers().length;this.options.edit&&(t=this._modes[L.EditToolbar.Edit.TYPE].button,o?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",o?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(t=this._modes[L.EditToolbar.Delete.TYPE].button,o?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",o?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}});
L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},includes:L.Mixin.Events,initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.setOptions(this,e),this._featureGroup=e.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire("draw:editstart",{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire("draw:editstop",{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._featureGroup.eachLayer(function(t){this._revertLayer(t)},this)},save:function(){var t=new L.LayerGroup;this._featureGroup.eachLayer(function(e){e.edited&&(t.addLayer(e),e.edited=!1)}),this._map.fire("draw:edited",{layers:t})},_backupLayer:function(t){var e=L.Util.stamp(t);this._uneditedLayerProps[e]||(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?this._uneditedLayerProps[e]={latlngs:L.LatLngUtil.cloneLatLngs(t.getLatLngs())}:t instanceof L.Circle?this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng()),radius:t.getRadius()}:t instanceof L.Marker&&(this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng())}))},_revertLayer:function(t){var e=L.Util.stamp(t);t.edited=!1,this._uneditedLayerProps.hasOwnProperty(e)&&(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?t.setLatLngs(this._uneditedLayerProps[e].latlngs):t instanceof L.Circle?(t.setLatLng(this._uneditedLayerProps[e].latlng),t.setRadius(this._uneditedLayerProps[e].radius)):t instanceof L.Marker&&t.setLatLng(this._uneditedLayerProps[e].latlng),t.fire("revert-edited",{layer:t}))},_enableLayerEdit:function(t){var e,i=t.layer||t.target||t;this._backupLayer(i),this.options.selectedPathOptions&&(e=L.Util.extend({},this.options.selectedPathOptions),e.maintainColor&&(e.color=i.options.color,e.fillColor=i.options.fillColor),i.options.original=L.extend({},i.options),i.options.editing=e),i.editing.enable()},_disableLayerEdit:function(t){var e=t.layer||t.target||t;e.edited=!1,e.editing.disable(),delete e.options.editing,delete e.options.original},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_hasAvailableLayers:function(){return 0!==this._featureGroup.getLayers().length}});
L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},includes:L.Mixin.Events,initialize:function(e,t){if(L.Handler.prototype.initialize.call(this,e),L.Util.setOptions(this,t),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire("draw:deletestart",{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire("draw:deletestop",{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var e=this._map;e&&(e.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(e){this._deletableLayers.addLayer(e),e.fire("revert-deleted",{layer:e})},this)},save:function(){this._map.fire("draw:deleted",{layers:this._deletedLayers})},_enableLayerDelete:function(e){var t=e.layer||e.target||e;t.on("click",this._removeLayer,this)},_disableLayerDelete:function(e){var t=e.layer||e.target||e;t.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(t)},_removeLayer:function(e){var t=e.layer||e.target||e;this._deletableLayers.removeLayer(t),this._deletedLayers.addLayer(t),t.fire("deleted")},_onMouseMove:function(e){this._tooltip.updatePosition(e.latlng)},_hasAvailableLayers:function(){return 0!==this._deletableLayers.getLayers().length}});
L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(o){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,o);var t;this._toolbars={},L.DrawToolbar&&this.options.draw&&(t=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=t,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(t=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=t,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this))},onAdd:function(o){var t,r=L.DomUtil.create("div","leaflet-draw"),a=!1,i="leaflet-draw-toolbar-top";for(var s in this._toolbars)this._toolbars.hasOwnProperty(s)&&(t=this._toolbars[s].addToolbar(o),t&&(a||(L.DomUtil.hasClass(t,i)||L.DomUtil.addClass(t.childNodes[0],i),a=!0),r.appendChild(t)));return r},onRemove:function(){for(var o in this._toolbars)this._toolbars.hasOwnProperty(o)&&this._toolbars[o].removeToolbar()},setDrawingOptions:function(o){for(var t in this._toolbars)this._toolbars[t]instanceof L.DrawToolbar&&this._toolbars[t].setOptions(o)},_toolbarEnabled:function(o){var t=o.target;for(var r in this._toolbars)this._toolbars[r]!==t&&this._toolbars[r].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))});
L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"})},initialize:function(t,e){this._poly=t,L.setOptions(this,e)},addHooks:function(){var t=this._poly;t instanceof L.Polygon||(t.options.editing.fill=!1),t.setStyle(t.options.editing),this._poly._map&&(this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var t=this._poly;t.setStyle(t.options.original),t._map&&(t._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var t,e,i,r,n=this._poly._latlngs;for(t=0,i=n.length;i>t;t++)r=this._createMarker(n[t],t),r.on("click",this._onMarkerClick,this),this._markers.push(r);var a,s;for(t=0,e=i-1;i>t;e=t++)(0!==t||L.Polygon&&this._poly instanceof L.Polygon)&&(a=this._markers[e],s=this._markers[t],this._createMiddleMarker(a,s),this._updatePrevNext(a,s))},_createMarker:function(t,e){var i=new L.Marker(t,{draggable:!0,icon:this.options.icon});return i._origLatLng=t,i._index=e,i.on("drag",this._onMarkerDrag,this),i.on("dragend",this._fireEdit,this),this._markerGroup.addLayer(i),i},_removeMarker:function(t){var e=t._index;this._markerGroup.removeLayer(t),this._markers.splice(e,1),this._poly.spliceLatLngs(e,1),this._updateIndexes(e,-1),t.off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("click",this._onMarkerClick,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit")},_onMarkerDrag:function(t){var e=t.target;L.extend(e._origLatLng,e._latlng),e._middleLeft&&e._middleLeft.setLatLng(this._getMiddleLatLng(e._prev,e)),e._middleRight&&e._middleRight.setLatLng(this._getMiddleLatLng(e,e._next)),this._poly.redraw()},_onMarkerClick:function(t){var e=L.Polygon&&this._poly instanceof L.Polygon?4:3,i=t.target;this._poly._latlngs.length<e||(this._removeMarker(i),this._updatePrevNext(i._prev,i._next),i._middleLeft&&this._markerGroup.removeLayer(i._middleLeft),i._middleRight&&this._markerGroup.removeLayer(i._middleRight),i._prev&&i._next?this._createMiddleMarker(i._prev,i._next):i._prev?i._next||(i._prev._middleRight=null):i._next._middleLeft=null,this._fireEdit())},_updateIndexes:function(t,e){this._markerGroup.eachLayer(function(i){i._index>t&&(i._index+=e)})},_createMiddleMarker:function(t,e){var i,r,n,a=this._getMiddleLatLng(t,e),s=this._createMarker(a);s.setOpacity(.6),t._middleRight=e._middleLeft=s,r=function(){var r=e._index;s._index=r,s.off("click",i,this).on("click",this._onMarkerClick,this),a.lat=s.getLatLng().lat,a.lng=s.getLatLng().lng,this._poly.spliceLatLngs(r,0,a),this._markers.splice(r,0,s),s.setOpacity(1),this._updateIndexes(r,1),e._index++,this._updatePrevNext(t,s),this._updatePrevNext(s,e),this._poly.fire("editstart")},n=function(){s.off("dragstart",r,this),s.off("dragend",n,this),this._createMiddleMarker(t,s),this._createMiddleMarker(s,e)},i=function(){r.call(this),n.call(this),this._fireEdit()},s.on("click",this._cut,this).on("dragstart",r,this).on("dragend",n,this),this._markerGroup.addLayer(s)},_updatePrevNext:function(t,e){t&&(t._next=e),e&&(e._prev=t)},_getMiddleLatLng:function(t,e){var i=this._poly._map,r=i.project(t.getLatLng()),n=i.project(e.getLatLng());return i.unproject(r._add(n)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))});
L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(e,t){this._marker=e,L.setOptions(this,t)},addHooks:function(){var e=this._marker;e.dragging.enable(),e.on("dragend",this._onDragEnd,e),this._toggleMarkerHighlight()},removeHooks:function(){var e=this._marker;e.dragging.disable(),e.off("dragend",this._onDragEnd,e),this._toggleMarkerHighlight()},_onDragEnd:function(e){var t=e.target;t.edited=!0},_toggleMarkerHighlight:function(){if(this._icon){var e=this._icon;e.style.display="none",L.DomUtil.hasClass(e,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(e,"leaflet-edit-marker-selected"),this._offsetMarker(e,-4)):(L.DomUtil.addClass(e,"leaflet-edit-marker-selected"),this._offsetMarker(e,4)),e.style.display=""}},_offsetMarker:function(e,t){var i=parseInt(e.style.marginTop,10)-t,r=parseInt(e.style.marginLeft,10)-t;e.style.marginTop=i+"px",e.style.marginLeft=r+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())});
L.Marker.include({closePopup:function(){return this}}),L.Rectangle=L.Polygon.extend({}),L.Draw.Rectangle=L.Class.extend({}),L.Draw.Circle=L.Class.extend({}),L.drawLocal={edit:{handlers:{},toolbar:{buttons:{}}}};
!function(t){var e;if("function"==typeof define&&define.amd)define(["leaflet"],t);else if("undefined"!=typeof module)e=require("leaflet"),module.exports=t(e);else{if("undefined"==typeof window.L)throw"Leaflet must be loaded first";t(window.L)}}(function(t){"use strict";return t.GeometryUtil=t.extend(t.GeometryUtil||{},{distance:function(t,e,n){return t.latLngToLayerPoint(e).distanceTo(t.latLngToLayerPoint(n))},distanceSegment:function(e,n,r,a){var o=e.latLngToLayerPoint(n),i=e.latLngToLayerPoint(r),l=e.latLngToLayerPoint(a);return t.LineUtil.pointToSegmentDistance(o,i,l)},readableDistance:function(t,e){var n,r="imperial"!==e;return r?n=t>1e3?(t/1e3).toFixed(2)+" km":Math.ceil(t)+" m":(t*=1.09361,n=t>1760?(t/1760).toFixed(2)+" miles":Math.ceil(t)+" yd"),n},belongsSegment:function(t,e,n,r){r=void 0===r?.2:r;var a=e.distanceTo(n),o=e.distanceTo(t)+t.distanceTo(n)-a;return r>o/a},length:function(e){var n=t.GeometryUtil.accumulatedLengths(e);return n.length>0?n[n.length-1]:0},accumulatedLengths:function(t){if("function"==typeof t.getLatLngs&&(t=t.getLatLngs()),0===t.length)return[];for(var e=0,n=[0],r=0,a=t.length-1;a>r;r++)e+=t[r].distanceTo(t[r+1]),n.push(e);return n},closestOnSegment:function(e,n,r,a){var o=e.getMaxZoom();o===1/0&&(o=e.getZoom());var i=e.project(n,o),l=e.project(r,o),s=e.project(a,o),c=t.LineUtil.closestPointOnSegment(i,l,s);return e.unproject(c,o)},closest:function(e,n,r,a){"function"!=typeof n.getLatLngs&&(n=t.polyline(n));var o,i,l,s=n.getLatLngs().slice(0),c=1/0,u=null;if(a){for(o=0,i=s.length;i>o;o++){var g=s[o];l=t.GeometryUtil.distance(e,r,g),c>l&&(c=l,u=g,u.distance=l)}return u}for(n instanceof t.Polygon&&s.push(s[0]),o=0,i=s.length;i-1>o;o++){var f=s[o],L=s[o+1];l=t.GeometryUtil.distanceSegment(e,r,f,L),c>=l&&(c=l,u=t.GeometryUtil.closestOnSegment(e,r,f,L),u.distance=l)}return u},closestLayer:function(e,n,r){for(var a=1/0,o=null,i=null,l=1/0,s=0,c=n.length;c>s;s++){var u=n[s];"function"==typeof u.getLatLng?(i=u.getLatLng(),l=t.GeometryUtil.distance(e,r,i)):(i=t.GeometryUtil.closest(e,u,r),i&&(l=i.distance)),a>l&&(a=l,o={layer:u,latlng:i,distance:l})}return o},closestLayerSnap:function(e,n,r,a,o){a="number"==typeof a?a:1/0,o="boolean"==typeof o?o:!0;var i=t.GeometryUtil.closestLayer(e,n,r);if(!i||i.distance>a)return null;if(o&&"function"==typeof i.layer.getLatLngs){var l=t.GeometryUtil.closest(e,i.layer,i.latlng,!0);l.distance<a&&(i.latlng=l,i.distance=t.GeometryUtil.distance(e,l,r))}return i},interpolateOnPointSegment:function(e,n,r){return t.point(e.x*(1-r)+r*n.x,e.y*(1-r)+r*n.y)},interpolateOnLine:function(e,n,r){n=n instanceof t.Polyline?n.getLatLngs():n;var a=n.length;if(2>a)return null;if(r=Math.max(Math.min(r,1),0),0===r)return{latLng:n[0]instanceof t.LatLng?n[0]:t.latLng(n[0]),predecessor:-1};if(1==r)return{latLng:n[n.length-1]instanceof t.LatLng?n[n.length-1]:t.latLng(n[n.length-1]),predecessor:n.length-2};var o=e.getMaxZoom();o===1/0&&(o=e.getZoom());for(var i=[],l=0,s=0;a>s;s++)i[s]=e.project(n[s],o),s>0&&(l+=i[s-1].distanceTo(i[s]));for(var c=l*r,u=i[0],g=i[1],f=0,L=u.distanceTo(g),h=1;a>h&&c>L;h++)u=g,f=L,g=i[h],L+=u.distanceTo(g);var y=L-f!==0?(c-f)/(L-f):0,m=t.GeometryUtil.interpolateOnPointSegment(u,g,y);return{latLng:e.unproject(m,o),predecessor:h-2}},locateOnLine:function(e,n,r){var a=n.getLatLngs();if(r.equals(a[0]))return 0;if(r.equals(a[a.length-1]))return 1;for(var o=t.GeometryUtil.closest(e,n,r,!1),i=t.GeometryUtil.accumulatedLengths(a),l=i[i.length-1],s=0,c=!1,u=0,g=a.length-1;g>u;u++){var f=a[u],L=a[u+1];if(s=i[u],t.GeometryUtil.belongsSegment(o,f,L)){s+=f.distanceTo(o),c=!0;break}}if(!c)throw"Could not interpolate "+r.toString()+" within "+n.toString();return s/l},reverse:function(e){return t.polyline(e.getLatLngs().slice(0).reverse())},extract:function(e,n,r,a){if(r>a)return t.GeometryUtil.extract(e,t.GeometryUtil.reverse(n),1-r,1-a);r=Math.max(Math.min(r,1),0),a=Math.max(Math.min(a,1),0);var o=n.getLatLngs(),i=t.GeometryUtil.interpolateOnLine(e,n,r),l=t.GeometryUtil.interpolateOnLine(e,n,a);if(r==a){var s=t.GeometryUtil.interpolateOnLine(e,n,a);return[s.latLng]}-1==i.predecessor&&(i.predecessor=0),-1==l.predecessor&&(l.predecessor=0);var c=o.slice(i.predecessor+1,l.predecessor+1);return c.unshift(i.latLng),c.push(l.latLng),c},isBefore:function(t,e){if(!e)return!1;var n=t.getLatLngs(),r=e.getLatLngs();return n[n.length-1].equals(r[0])},isAfter:function(t,e){if(!e)return!1;var n=t.getLatLngs(),r=e.getLatLngs();return n[0].equals(r[r.length-1])},startsAtExtremity:function(t,e){if(!e)return!1;var n=t.getLatLngs(),r=e.getLatLngs(),a=n[0];return a.equals(r[0])||a.equals(r[r.length-1])},computeAngle:function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI},computeSlope:function(t,e){var n=(e.y-t.y)/(e.x-t.x),r=t.y-n*t.x;return{a:n,b:r}},rotatePoint:function(e,n,r,a){var o=e.getMaxZoom();o===1/0&&(o=e.getZoom());var i=r*Math.PI/180,l=e.project(n,o),s=e.project(a,o),c=Math.cos(i)*(l.x-s.x)-Math.sin(i)*(l.y-s.y)+s.x,u=Math.sin(i)*(l.x-s.x)+Math.cos(i)*(l.y-s.y)+s.y;return e.unproject(new t.Point(c,u),o)},bearing:function(t,e){var n=Math.PI/180,r=t.lat*n,a=e.lat*n,o=t.lng*n,i=e.lng*n,l=Math.sin(i-o)*Math.cos(a),s=Math.cos(r)*Math.sin(a)-Math.sin(r)*Math.cos(a)*Math.cos(i-o),c=(180*Math.atan2(l,s)/Math.PI+360)%360;return c>=180?c-360:c},destination:function(e,n,r){n=(n+360)%360;var a=Math.PI/180,o=180/Math.PI,i=6378137,l=e.lng*a,s=e.lat*a,c=n*a,u=Math.sin(s),g=Math.cos(s),f=Math.cos(r/i),L=Math.sin(r/i),h=Math.asin(u*f+g*L*Math.cos(c)),y=l+Math.atan2(Math.sin(c)*L*g,f-u*Math.sin(h));return y*=o,y=y>180?y-360:-180>y?y+360:y,t.latLng([h*o,y])}}),t.GeometryUtil});
!function(){L.Handler.MarkerSnap=L.Handler.extend({options:{snapDistance:15,snapVertices:!0},initialize:function(a,t,n){function i(){this._buffer=a.layerPointToLatLng(new L.Point(0,0)).lat-a.layerPointToLatLng(new L.Point(this.options.snapDistance,0)).lat}L.Handler.prototype.initialize.call(this,a),this._markers=[],this._guides=[],2==arguments.length&&(t instanceof L.Class||(n=t,t=null)),L.Util.setOptions(this,n||{}),t&&(t.dragging||(t.dragging=new L.Handler.MarkerDrag(t)),t.dragging.enable(),this.watchMarker(t)),a.on("zoomend",i,this),a.whenReady(i,this),i.call(this)},enable:function(){this.disable();for(var a=0;a<this._markers.length;a++)this.watchMarker(this._markers[a])},disable:function(){for(var a=0;a<this._markers.length;a++)this.unwatchMarker(this._markers[a])},watchMarker:function(a){-1==this._markers.indexOf(a)&&this._markers.push(a),a.on("move",this._snapMarker,this)},unwatchMarker:function(a){a.off("move",this._snapMarker,this),delete a.snap},addGuideLayer:function(a){for(var t=0,n=this._guides.length;n>t;t++)if(L.stamp(a)===L.stamp(this._guides[t]))return;this._guides.push(a)},_snapMarker:function(a){function t(a){if(n._leaflet_id!=a._leaflet_id)if(void 0!==a._layers&&"function"!=typeof a.searchBuffer)for(var e in a._layers)t(a._layers[e]);else"function"==typeof a.searchBuffer?s=s.concat(a.searchBuffer(i,this._buffer)):n._poly&&n._poly._poly==a||s.push(a)}for(var n=a.target,i=n.getLatLng(),s=[],e=0,r=this._guides.length;r>e;e++){var o=this._guides[e];t.call(this,o)}var l=this._findClosestLayerSnap(this._map,s,i,this.options.snapDistance,this.options.snapVertices);if(!l&&n._poly){var p=new L.Polyline(n._poly._poly._latlngs,n._poly._poly.options);p._latlngs.splice(n._index,1);var l=this._findClosestLayerSnap(this._map,[p],i,this.options.snapDistance,!0);l&&(l.layer=n._poly)}l=l||{layer:null,latlng:null},this._updateSnap(n,l.layer,l.latlng)},_findClosestLayerSnap:function(a,t,n,i,s){return L.GeometryUtil.closestLayerSnap(a,t,n,i,s)},_updateSnap:function(a,t,n){t&&n?(a._latlng=L.latLng(n),a.update(),a.snap!=t&&(a.snap=t,a._icon&&L.DomUtil.addClass(a._icon,"marker-snapped"),a.fire("snap",{layer:t,latlng:n}))):(a.snap&&(a._icon&&L.DomUtil.removeClass(a._icon,"marker-snapped"),a.fire("unsnap",{layer:a.snap})),delete a.snap)}}),L.Edit&&(L.Handler.PolylineSnap=L.Edit.Poly.extend({initialize:function(a,t,n){var i=this;L.Edit.Poly.prototype.initialize.call(this,t,n),this._snapper=new L.Handler.MarkerSnap(a,n),t.on("remove",function(){i.disable()})},addGuideLayer:function(a){this._snapper.addGuideLayer(a)},_createMarker:function(a,t){var n=L.Edit.Poly.prototype._createMarker.call(this,a,t);n._poly=this;var i=void 0===t;return i?n.on("dragstart",function(){this._snapper.watchMarker(n)},this):this._snapper.watchMarker(n),n}}),L.Draw.Feature.SnapMixin={_snap_initialize:function(){this.on("enabled",this._snap_on_enabled,this),this.on("disabled",this._snap_on_disabled,this)},_snap_on_enabled:function(){if(this.options.guideLayers){if(!this._mouseMarker)return void this._map.on("layeradd",this._snap_on_enabled,this);this._map.off("layeradd",this._snap_on_enabled,this),this._snapper||(this._snapper=new L.Handler.MarkerSnap(this._map),this.options.snapDistance&&(this._snapper.options.snapDistance=this.options.snapDistance),this.options.snapVertices&&(this._snapper.options.snapVertices=this.options.snapVertices));for(var a=0,t=this.options.guideLayers.length;t>a;a++)this._snapper.addGuideLayer(this.options.guideLayers[a]);var n=this._mouseMarker;this._snapper.watchMarker(n);var i=n.options.icon;n.on("snap",function(a){n.setIcon(this.options.icon),n.setOpacity(1)},this).on("unsnap",function(a){n.setIcon(i),n.setOpacity(0)},this),n.on("click",this._snap_on_click,this)}},_snap_on_click:function(a){if(this._markers){var t=this._markers.length,n=this._markers[t-1];if(this._mouseMarker.snap){if(a&&(n.setLatLng(a.target._latlng),this._poly)){var i=this._poly._latlngs.length;this._poly._latlngs[i-1]=a.target._latlng,this._poly.redraw()}L.DomUtil.addClass(n._icon,"marker-snapped")}}},_snap_on_disabled:function(){delete this._snapper}},L.Draw.Feature.include(L.Draw.Feature.SnapMixin),L.Draw.Feature.addInitHook("_snap_initialize"))}();
L.Util.extend(L.Polyline.prototype.options,{weight:4,opacity:1}),L.Util.extend(L.Draw.Polyline.prototype.options.shapeOptions,L.Polyline.prototype.options),L.Util.extend(L.Draw.Polygon.prototype.options.shapeOptions,L.Polygon.prototype.options),L.Draw.Polyline.prototype.options.shapeOptions.color="red",L.Draw.Polygon.prototype.options.shapeOptions.color="red",L.Control.Draw.Plus=L.Control.Draw.extend({snapLayers:new L.FeatureGroup,editLayers:new L.FeatureGroup,options:{draw:{marker:!1,polyline:!1,polygon:!1,rectangle:!1,circle:!1},edit:{edit:!1,remove:!1},entry:"edit-json",jsonOptions:{},editType:null,changed:"edit-changed"},initialize:function(e){e.edit=L.extend(this.options.edit,e.edit),e.draw=L.extend(this.options.draw,e.draw);for(o in e.draw)e.draw[o]&&(e.draw[o]={guideLayers:[this.snapLayers]});L.Control.Draw.prototype.initialize.call(this,e)},onAdd:function(e){this.editToolbar=this._toolbars[Object.keys(this._toolbars)[1]],this.editToolbar.options.featureGroup=this.editLayers,this.editLayers.addTo(this.snapLayers),this.snapLayers.addTo(e),e.on("draw:created",function(e){e.layer.options.color="blue",this.addLayer(e.layer)},this),e.on("draw:edited draw:deleted",this._optimPoly,this);var t=document.getElementById(this.options.entry),i=document.getElementById(this.options.changed);if(t){var o="undefined"!=typeof t.value?"value":"innerHTML",r=new L.GeoJSON(JSON.parse(t[o]||'{"type":"FeatureCollection","features":[]}'),this.options.jsonOptions)._layers;for(l in r)r[l].addTo(this);e.on("draw:edited",function(){if(this.options.editType){var e=[];this.editLayers.eachLayer(function(t){"Marker"==this.options.editType?t._latlng&&(e=t._latlng):t._latlngs&&("Multi"==this.options.editType.substring(0,5)?e.push(t._latlngs):e=t._latlngs)},this),t[o]=JSON.stringify(new L[this.options.editType](e).toGeoJSON().geometry)}else t[o]=JSON.stringify(this.editLayers.toGeoJSON());i&&(i.style.display="")},this)}return L.Control.Draw.prototype.onAdd.call(this,e)},addLayer:function(e){if(e._layers)for(l in e._layers)this.addLayer(e._layers[l]);else{if(e.on("mouseover mouseout",function(e){"function"==typeof e.target.setStyle&&e.target.setStyle({color:"mouseover"==e.type?"red":"blue"})}),e.addTo(this.editLayers),e._latlng)e.snapediting=new L.Handler.MarkerSnap(this._map,e);else{if(!e._latlngs)return;e.snapediting=new L.Handler.PolylineSnap(this._map,e)}e.options.editing={},e.snapediting.addGuideLayer(this.snapLayers),e.snapediting.enable(),e.on("deleted",function(){for(m in this.editToolbar._modes)this.editToolbar._modes[m].handler.disable()},this),e.on("created edit dragend deleted",function(){this._map.fire("draw:edited")},this),e.fire("created")}},_optimPoly:function(){var e=this.editLayers._layers;for(il1 in e){var t=e[il1]._latlngs;if(t&&!e[il1].options.fill){t[0].equals(t[t.length-1])&&(this.editLayers.removeLayer(e[il1]),this._map.fire("draw:created",{layer:new L.Polygon(t)}));for(il2 in e){var i=e[il2]._latlngs,o=null;i&&!e[il2].options.fill&&e[il1]._leaflet_id<e[il2]._leaflet_id&&(t[0].equals(i[0])?(t.reverse(),o=i):t[0].equals(i[i.length-1])?(t.reverse(),o=i.reverse()):t[t.length-1].equals(i[0])?o=i:t[t.length-1].equals(i[i.length-1])&&(o=i.reverse()),o&&(t.pop(),e[il1]._latlngs=t.concat(o),e[il1].editing._poly.redraw(),e[il1].snapediting.updateMarkers(),this.editLayers.removeLayer(e[il2].editing._poly),this._map.fire("draw:edited")))}}}}}),L.Edit.Poly.include({_cut:function(e){if(!e.target._index){var t,i;for(m in this._markers)this._markers[m]._middleRight&&this._markers[m]._middleRight._leaflet_id==e.target._leaflet_id?t=this._markers[m]:this._markers[m]._middleLeft&&this._markers[m]._middleLeft._leaflet_id==e.target._leaflet_id&&(i=this._markers[m]);if(this._poly.options.fill){for(var o=[],r=0;r<this._markers.length;r++)o.push(this._markers[(i._index+r)%this._markers.length]._latlng);this._poly._map.fire("draw:created",{layer:new L.Polyline(o)}),this._poly._map.removeLayer(this._poly)}else if(t._prev||i._next)if(t._prev)if(i._next){for(var o=[];m=this._markers[i._index];)o.push(m._latlng),this._onMarkerClick({target:m,remove:!0});this._poly._map.fire("draw:created",{layer:new L.Polyline(o,this._poly.options)})}else this._onMarkerClick({target:i,remove:!0});else this._onMarkerClick({target:t,remove:!0});else this._poly._map.removeLayer(this._poly)}}});
L.Control.GetGpxFile=L.Control.extend({statics:{TITLE:"Download to GPX file",LABEL:"&#128427;"},options:{position:"topleft"},initialize:function(t,e){L.Util.setOptions(this,e),this._layer=t},onAdd:function(t){var e="leaflet-control-filelayer leaflet-control-zoom",o="leaflet-bar",n=o+"-part",i=L.DomUtil.create("div",e+" "+o),l=L.DomUtil.create("a",e+"-in "+n,i);return l.innerHTML=L.Control.GetGpxFile.LABEL,l.href="#",l.title=L.Control.GetGpxFile.TITLE,L.DomEvent.disableClickPropagation(l),L.DomEvent.on(l,"click",function(t){this.download(prompt("Save as","track.gpx"),togpx(this._layer.toGeoJSON()).replace(/><([a-z])/gi,">\n<$1"))},this),i},download:function(t,e){var o=document.createElement("a");o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),o.setAttribute("download",t);var n=document.createEvent("MouseEvents");n.initEvent("click",!0,!0),o.dispatchEvent(n)}});
(navigator.language||"fr"==navigator.userLanguage)&&(L.Control.Zoom&&(L.Control.Zoom=L.Control.Zoom.extend({options:{zoomInTitle:"Rapprocher",zoomOutTitle:"Eloigner"}})),L.Control.Fullscreen&&(L.Control.Fullscreen=L.Control.Fullscreen.extend({options:{title:{"false":"Plein cran","true":"Sortir du plein cran"}}})),L.Control.Gps&&(L.Control.Gps=L.Control.Gps.extend({options:{title:"Afficher votre position GPS"}})),L.Control.FileLayerLoad&&(L.Control.FileLayerLoad=L.Control.FileLayerLoad.extend({statics:{TITLE:"Charger un fichier GPX, KML, GeoJSON",LABEL:"&#128194;"}})),L.Control.GetGpxFile&&(L.Control.GetGpxFile=L.Control.GetGpxFile.extend({statics:{TITLE:"Obtenir un fichier GPX, KML, GeoJSON"}})),L.Control.OSMGeocoder&&(L.Control.OSMGeocoder=L.Control.OSMGeocoder.extend({options:{text:"Chercher"}})),L.drawLocal={draw:{toolbar:{actions:{title:"Annuler le dessin",text:"Annuler"},undo:{title:"Supprimer le dernier point",text:"Supprimer le dernier point"},buttons:{polyline:"Tracer une ligne",polygon:"Tracer un polygone",rectangle:"Tracer un rectangle",circle:"Tracer un cercle",marker:"Placer un marqueur"}},handlers:{circle:{tooltip:{start:"Cliquer et glisser pour tracer un cercle"},radius:"Rayon"},marker:{tooltip:{start:"Cliquer sur la carte pour placer un marqueur"}},polygon:{tooltip:{start:"Cliquer pour commencer le dessin d'un polygone",cont:"Cliquer pour continuer le dessin d'un polygone",end:"Cliquer sur le premier point close le polygone"}},polyline:{error:"<strong>Erreur:</strong> Les contours de la forme ne peuvent pas se croiser !",tooltip:{start:"Cliquer pour commencer une ligne",cont:"Cliquer pour continuer le dessin de la ligne",end:"Cliquer sur le dernier point pour finir la ligne"}},rectangle:{tooltip:{start:"Cliquer et glisser pour tracer un rectangle"}},simpleshape:{tooltip:{end:"Relacher la souris pour finir le dessin"}}}},edit:{toolbar:{actions:{save:{title:"Finir les changements",text:"Finir"},cancel:{title:"Annuler les changements",text:"Annuler"}},buttons:{edit:"Editer les lments",editDisabled:"Pas d'lment",remove:"Supprimer un lment",removeDisabled:"Pas d'lment"}},handlers:{edit:{tooltip:{text:"Cliquer et glisser pour editer",subtext:"Cliquer annuler pour annuler les changements"}},remove:{tooltip:{text:"Cliquer sur un lment pour le supprimer"}}}}});
L.Icon.Default.imagePath=L.Icon.Default.imagePath.replace(/(dist\/src|dist|src)/g,"github.com/Leaflet/Leaflet/dist");