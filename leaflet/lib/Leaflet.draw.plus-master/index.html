<!DOCTYPE html>
<html lang="fr">
<head>
	<title>Leaflet.draw geometries editor</title>
	<meta charset="utf-8">
	<link href="http://leafletjs.com/docs/images/favicon.ico" rel="icon" type="image/png" />

	<?php if (0) { // Run index.html ?>
		<base href="https://dominique92.github.io/MyLeaflet/lib/Leaflet.draw.plus-master/" />

		<!-- Leaflet kernel -->
		<link  href="https://unpkg.com/leaflet@1.0.1/dist/leaflet.css" rel="stylesheet" />
		<script src="https://unpkg.com/leaflet@1.0.1/dist/leaflet.js"></script>

	<?php } else { /* Run index.php ?><!-- */
		// MyLeaflet individual source files loading for debug
		echo '<link  href="../Leaflet-master/dist/leaflet.css" rel="stylesheet" />'.PHP_EOL;
		echo '<script src="../Leaflet-master/build/deps.js" type="text/javascript"></script>'.PHP_EOL;
		echo '<script src="../Leaflet-1.0.3/debug/leaflet-include.js"></script>'.PHP_EOL;
	} ?>

	<!-- Draw plugin -->
	<link  href="../Leaflet.draw-master/dist/leaflet.draw-src.css" rel="stylesheet" />
	<script src="../Leaflet.draw-master/dist/leaflet.draw-src.js"></script>

	<!-- Snap plugin -->
	<script src="../Leaflet.GeometryUtil-master/src/leaflet.geometryutil.js"></script>
	<script src="../Leaflet.Snap-master/leaflet.snap.js"></script>

	<!-- Plugins to import GPX files -->
	<script src="../togeojson-master/togeojson.js"></script>
	<script src="../Leaflet.FileLayer-master/src/leaflet.filelayer.js"></script>

	<!-- This plugin -->
	<script src="src/Control.Draw.Plus.js"></script>

	<!-- Disable save if no PHP -->
	<style>
		#save {
			display: none;
		}
		.save-comment {
			color: red;
		}
	</style>
</head>

<body>
	<p>Leaflet extension for markers, polylines, polygons, ... creation & edition.</p>
	<p>This demo runs on Leaflet V<script>document.write(L.version)</script> and Draw V<script>document.write(L.drawVersion)</script><?=" on debug mode."?> &#10144; See <a href="v0.7">demo on Leaflet V0.7</a></p>

	<div id="map" style="width: 800px; height: 600px"></div>

	<form id="postform" method="post" action="//<?=$_SERVER['SERVER_NAME'].$_SERVER['PHP_SELF']?>#" enctype="multipart/form-data">
		<p><b>geoJson input/output</b></p>

		<textarea id="edit-json" name ="geom" rows="10" cols="120">
			<?=$json_sql?>
		</textarea>
		<div id="edit-changed" style="display:none"><i>Changé</i></div><!-- Editing status -->

		<p class="save-comment">Note: You need to run on a server supporting PHP &amp; MySQL to be able to save.</p>
		<input type="submit" name="post" id="save" value="Save" />
	</form>

	<div style="margin-left:30px; padding:0 10px; background-color:#eee">
		<p><u>Créer une ligne:</u> Cliquer sur le contrôle "Tracer une ligne" puis à l'emplacement du premier sommet...</p>
		<p><u>Ajouter un sommet:</u> Déplacer un marqueur au milieu d'un côté.</p>
		<p><u>Déplacer un sommet:</u> Le déplacer.
		Les sommets déplacés "collent" aux sommets des autres lignes et prennent exactement leur position.</p>
		<p><u>Supprimer un sommet:</u> Cliquer une fois dessus.</p>
		<p><u>Etendre une ligne:</u> Cliquer sur le contrôle "Tracer une ligne" puis sur l'extrémité à étendre...</p>
		<p><u>Fusionner deux lignes:</u> Joindre une extrémité de chacune.</p>
		<p><u>Supprimer une ligne:</u> Cliquer sur le contrôle "poubelle" puis sur un segment.</p>
		<p><u>Créer un polygone:</u> Cliquer sur le contrôle "polygone" puis à l'emplacement du premier sommet...</p>
		<p><u>Ajouter un sommet:</u> Déplacer un marqueur au milieu d'un côté.</p>
		<p><u>Déplacer un sommet:</u> Le déplacer.
		Les sommets déplacés "collent" aux sommets des autres massifs et prennent exactement leur position.</p>
		<p><u>Supprimer un sommet:</u> Cliquer une fois dessus.</p>
		<p><u>Supprimer un polygone:</u> Cliquer sur le contrôle "poubelle" puis sur un côté.</p>
		<p>Pour une édition plus complexe, vous pouvez transformer vos polygones en lignes brisées:</p>
		<p><u>Couper un polygone:</u> Cliquer une fois sur un marqueur au milieu d'un côté. On obtient une ligne.</p>
		<p><u>Fermer une ligne:</u> Joindre ses deux extrémités. On obtient un polygone.</p>
		<p><u>Importer un fichier GPX, KML geoJson:</u> Cliquer sur le contrôle "Flèche montante".</p>
	</div><br/>

	<!-- Doc & debug -->
	<p>See the code of this demo <a href="examples/index.js">here</a> and <a href="https://github.com/Dominique92/Leaflet.draw.plus">here</a></p>
	<p>To get a local demo, copy the html source of this page on a local .html file & call it from your brother (no PHP required).</p>
	<?php if (0) { // Init input when the file is .html ?>
		<p>This example run on a server without PHP & SQL services. If you want it to save your data on a database, you need to get the full package from <a href= "https://github.com/Dominique92/Leaflet.draw.plus">Github.com/Dominique92/Leaflet.draw.plus</a>, unzip & copy it in your own server and run Leaflet.draw.plus/test.</p>
	<?php } ?>
	<p>
		Depends on <a href= "https://github.com/Leaflet/Leaflet.draw">Leaflet/Leaflet.draw</a>
		and <a href= "https://github.com/makinacorpus/Leaflet.Snap">makinacorpus/Leaflet.Snap</a>
	</p>
	<p>See <a href="v0.7.html">demo</a> on Leaflet V0.7</p>
	<p>Visit my fully integrated <a href= "https://github.com/Dominique92/MyLeaflet">Dominique92/MyLeaflet</a> library</p>

	<a href="https://github.com/Dominique92/Leaflet.draw.plus"
	   style="position:absolute;top:0;right:0"
	   title="Sources & docs">
		<img src="../../examples/forkme.png" />
	</a>

	<?php if (0) { // Init input when the file is .html ?>
		<script>
			document.getElementById('edit-json').value =		'{"type":"FeatureCollection","features":[{"type":"Feature","geometry":{"type":"LineString","coordinates":[[2.5,46],[3,45],[4,45],[5,45.8]]}},{"type":"Feature","geometry":{"type":"Point","coordinates":[3.5,45.5]}}]}';
		</script>
	<?php } ?>

	<!-- Insert the javascript after all <div> are defined -->
	<script src="examples/index.js"></script>
</body>
</html>
