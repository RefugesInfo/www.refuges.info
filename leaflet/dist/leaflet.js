/*
 * Integrated by Dominique Cavailhez (c) 2016
 * https://github.com/Dominique92/MyLeaflet
 * Includes part of :
	https://github.com/Leaflet/Leaflet/tree/197f9d43b7bbc73c0492bf62cd666a5a98038098
	https://github.com/Leaflet/Leaflet.fullscreen/tree/f5e76270ad40bb573bd11595f9069c3f15f8f286
	https://github.com/MrMufflon/Leaflet.Coordinates/tree/09ffcfdfa2bee2a7cee24a9653baef0ec0abc660
	https://github.com/stefanocudini/leaflet-gps/tree/8e6ac4a551c7652c727d6cdd2f53626076fd2619
	https://github.com/k4r573n/leaflet-control-osm-geocoder/tree/f833500063e165506503ee8aae997928052c3c4a
	https://github.com/shramov/leaflet-plugins/tree/5a614ad23e47803f6ec4585a6fcc0e3096fc25cc
	https://github.com/kartena/Proj4Leaflet/tree/0a2a65bccbd8bce85917a4add1481da7aa9a4f59
	https://github.com/tyrasd/togpx/tree/21fb5d2c37be21335923e861cfceee386ac0e085
	https://github.com/rob-murray/os-leaflet/tree/7b53a09827a8bf90dba554232c4d94f23bf2c297
	https://github.com/makinacorpus/Leaflet.FileLayer/tree/685d1ed3cf239601ea00ea4822f0c198ffb7bb7a
	https://github.com/mapbox/togeojson/tree/9528221a163e16f1aae63ded2980714335b26aac
	https://github.com/erictheise/rrose/tree/04fac08b0b367e137b64fb4e5e08e2dd020955c6
	https://github.com/Leaflet/Leaflet.draw/tree/c3c9f7e5e9e04c4d734cb30dd47ec54cfc3d4b8b
	https://github.com/makinacorpus/Leaflet.GeometryUtil/tree/4097170a0e0b0f15c2029416dd589e0d6431e304
	https://github.com/makinacorpus/Leaflet.Snap/tree/e6b24835d8e8f08602bd5f5718507dd326ea2455
	https://github.com/phayes/geoPHP/tree/685562416ec6d22b9b3927e02ca0ddacf84ca646
	https://github.com/tubalmartin/YUI-CSS-compressor-PHP-port/tree/20f738889d6e55df59761b734d1638abe17c11eb
	https://github.com/nicolas-grekas/JSqueeze/tree/74203bf6f4f891f5741cf286c2e47ece120f8b3e
*/

;var oldL=window.L,L={};L.version='0.7.7';if(typeof module==='object'&&typeof module.exports==='object'){module.exports=L}
else if(typeof define==='function'&&define.amd){define(L)};L.noConflict=function(){window.L=oldL;return this};window.L=L;
;L.Util={extend:function(n){var i=Array.prototype.slice.call(arguments,1),e,r,o,t;for(r=0,o=i.length;r<o;r++){t=i[r]||{};for(e in t){if(t.hasOwnProperty(e)){n[e]=t[e]}}};return n},bind:function(n,t){var r=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return n.apply(t,r||arguments)}},stamp:(function(){var t=0,n='_leaflet_id';return function(r){r[n]=r[n]||++t;return r[n]}}()),invokeEach:function(n,t,r){var e,i;if(typeof n==='object'){i=Array.prototype.slice.call(arguments,3);for(e in n){t.apply(r,[e,n[e]].concat(i))};return!0};return!1},limitExecByInterval:function(n,t,r){var e,i;return function o(){var a=arguments;if(e){i=!0;return};e=!0;setTimeout(function(){e=!1;if(i){o.apply(r,a);i=!1}},t);n.apply(r,a)}},falseFn:function(){return!1},formatNum:function(n,t){var r=Math.pow(10,t||5);return Math.round(n*r)/r},trim:function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,'')},splitWords:function(n){return L.Util.trim(n).split(/\s+/)},setOptions:function(n,t){n.options=L.extend({},n.options,t);return n.options},getParamString:function(n,t,r){var i=[];for(var e in n){i.push(encodeURIComponent(r?e.toUpperCase():e)+'='+encodeURIComponent(n[e]))};return((!t||t.indexOf('?')===-1)?'?':'&')+i.join('&')},template:function(n,t){return n.replace(/\{ *([\w_]+) *\}/g,function(n,r){var e=t[r];if(e===undefined){throw new Error('No value provided for variable '+n)}
else if(typeof e==='function'){e=e(t)};return e})},isArray:Array.isArray||function(n){return(Object.prototype.toString.call(n)==='[object Array]')},emptyImageUrl:'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs='};(function(){function n(n){var t,r,e=['webkit','moz','o','ms'];for(t=0;t<e.length&&!r;t++){r=window[e[t]+n]};return r};var r=0;function t(n){var e=+new Date(),t=Math.max(0,16-(e-r));r=e+t;return window.setTimeout(n,t)};var e=window.requestAnimationFrame||n('RequestAnimationFrame')||t,i=window.cancelAnimationFrame||n('CancelAnimationFrame')||n('CancelRequestAnimationFrame')||function(n){window.clearTimeout(n)};L.Util.requestAnimFrame=function(n,r,i,o){n=L.bind(n,r);if(i&&e===t){n()}
else{return e.call(window,n,o)}};L.Util.cancelAnimFrame=function(n){if(n){i.call(window,n)}}}());L.extend=L.Util.extend;L.bind=L.Util.bind;L.stamp=L.Util.stamp;L.setOptions=L.Util.setOptions;
;L.Class=function(){};L.Class.extend=function(t){var o=function(){if(this.initialize){this.initialize.apply(this,arguments)};if(this._initHooks){this.callInitHooks()}},e=function(){};e.prototype=this.prototype;var i=new e();i.constructor=o;o.prototype=i;for(var s in this){if(this.hasOwnProperty(s)&&s!=='prototype'){o[s]=this[s]}};if(t.statics){L.extend(o,t.statics);delete t.statics};if(t.includes){L.Util.extend.apply(null,[i].concat(t.includes));delete t.includes};if(t.options&&i.options){t.options=L.extend({},i.options,t.options)};L.extend(i,t);i._initHooks=[];var n=this;o.__super__=n.prototype;i.callInitHooks=function(){if(this._initHooksCalled){return};if(n.prototype.callInitHooks){n.prototype.callInitHooks.call(this)};this._initHooksCalled=!0;for(var t=0,o=i._initHooks.length;t<o;t++){i._initHooks[t].call(this)}};return o};L.Class.include=function(t){L.extend(this.prototype,t)};L.Class.mergeOptions=function(t){L.extend(this.prototype.options,t)};L.Class.addInitHook=function(t){var o=Array.prototype.slice.call(arguments,1),i=typeof t==='function'?t:function(){this[t].apply(this,o)};this.prototype._initHooks=this.prototype._initHooks||[];this.prototype._initHooks.push(i)};
;var eventsKey='_leaflet_events';L.Mixin={};L.Mixin.Events={addEventListener:function(e,n,t){if(L.Util.invokeEach(e,this.addEventListener,this,n,t)){return this};var i=this[eventsKey]=this[eventsKey]||{},l=t&&t!==this&&L.stamp(t),h,f,a,s,r,o,v;e=L.Util.splitWords(e);for(h=0,f=e.length;h<f;h++){a={action:n,context:t||this};s=e[h];if(l){r=s+'_idx';o=r+'_len';v=i[r]=i[r]||{};if(!v[l]){v[l]=[];i[o]=(i[o]||0)+1};v[l].push(a)}
else{i[s]=i[s]||[];i[s].push(a)}};return this},hasEventListeners:function(e){var t=this[eventsKey];return!!t&&((e in t&&t[e].length>0)||(e+'_idx' in t&&t[e+'_idx_len']>0))},removeEventListener:function(e,s,t){if(!this[eventsKey]){return this};if(!e){return this.clearAllEventListeners()};if(L.Util.invokeEach(e,this.removeEventListener,this,s,t)){return this};var r=this[eventsKey],f=t&&t!==this&&L.stamp(t),o,d,l,i,n,h,a,v,E;e=L.Util.splitWords(e);for(o=0,d=e.length;o<d;o++){l=e[o];h=l+'_idx';a=h+'_len';v=r[h];if(!s){delete r[l];delete r[h];delete r[a]}
else{i=f&&v?v[f]:r[l];if(i){for(n=i.length-1;n>=0;n--){if((i[n].action===s)&&(!t||(i[n].context===t))){E=i.splice(n,1);E[0].action=L.Util.falseFn}};if(t&&v&&(i.length===0)){delete v[f];r[a]--}}}};return this},clearAllEventListeners:function(){delete this[eventsKey];return this},fireEvent:function(i,n){if(!this.hasEventListeners(i)){return this};var h=L.Util.extend({},n,{type:i,target:this});var r=this[eventsKey],t,e,s,v,l;if(r[i]){t=r[i].slice();for(e=0,s=t.length;e<s;e++){t[e].action.call(t[e].context,h)}};v=r[i+'_idx'];for(l in v){t=v[l].slice();if(t){for(e=0,s=t.length;e<s;e++){t[e].action.call(t[e].context,h)}}};return this},addOneTimeEventListener:function(e,i,t){if(L.Util.invokeEach(e,this.addOneTimeEventListener,this,i,t)){return this};var n=L.bind(function(){this.removeEventListener(e,i,t).removeEventListener(e,n,t)},this);return this.addEventListener(e,i,t).addEventListener(e,n,t)}};L.Mixin.Events.on=L.Mixin.Events.addEventListener;L.Mixin.Events.off=L.Mixin.Events.removeEventListener;L.Mixin.Events.once=L.Mixin.Events.addOneTimeEventListener;L.Mixin.Events.fire=L.Mixin.Events.fireEvent;
(function(){var e='ActiveXObject' in window,x=e&&!document.addEventListener,i=navigator.userAgent.toLowerCase(),o=i.indexOf('webkit')!==-1,l=i.indexOf('chrome')!==-1,u=i.indexOf('phantom')!==-1,p=i.indexOf('android')!==-1,s=i.search('android [23]')!==-1,O=i.indexOf('gecko')!==-1,n=typeof orientation!==undefined+'',c=!window.PointerEvent&&window.MSPointerEvent,m=(window.PointerEvent&&window.navigator.pointerEnabled)||c,v=('devicePixelRatio' in window&&window.devicePixelRatio>1)||('matchMedia' in window&&window.matchMedia('(min-resolution:144dpi)')&&window.matchMedia('(min-resolution:144dpi)').matches),t=document.documentElement,r=e&&('transition' in t.style),d=('WebKitCSSMatrix' in window)&&('m11' in new window.WebKitCSSMatrix())&&!s,a='MozPerspective' in t.style,w='OTransition' in t.style,b=!window.L_DISABLE_3D&&(r||d||a||w)&&!u,h=!window.L_NO_TOUCH&&!u&&(m||'ontouchstart' in window||(window.DocumentTouch&&document instanceof window.DocumentTouch));L.Browser={ie:e,ielt9:x,webkit:o,gecko:O&&!o&&!window.opera&&!e,android:p,android23:s,chrome:l,ie3d:r,webkit3d:d,gecko3d:a,opera3d:w,any3d:b,mobile:n,mobileWebkit:n&&o,mobileWebkit3d:n&&d,mobileOpera:n&&window.opera,touch:h,msPointer:c,pointer:m,retina:v}}());
;L.Point=function(t,i,n){this.x=(n?Math.round(t):t);this.y=(n?Math.round(i):i)};L.Point.prototype={clone:function(){return new L.Point(this.x,this.y)},add:function(t){return this.clone()._add(L.point(t))},_add:function(t){this.x+=t.x;this.y+=t.y;return this},subtract:function(t){return this.clone()._subtract(L.point(t))},_subtract:function(t){this.x-=t.x;this.y-=t.y;return this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){this.x/=t;this.y/=t;return this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){this.x*=t;this.y*=t;return this},round:function(){return this.clone()._round()},_round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},floor:function(){return this.clone()._floor()},_floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},distanceTo:function(t){t=L.point(t);var i=t.x-this.x,n=t.y-this.y;return Math.sqrt(i*i+n*n)},equals:function(t){t=L.point(t);return t.x===this.x&&t.y===this.y},contains:function(t){t=L.point(t);return Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return'Point('+L.Util.formatNum(this.x)+', '+L.Util.formatNum(this.y)+')'}};L.point=function(t,i,n){if(t instanceof L.Point){return t};if(L.Util.isArray(t)){return new L.Point(t[0],t[1])};if(t===undefined||t===null){return t};return new L.Point(t,i,n)};
;L.Bounds=function(t,i){if(!t){return};var s=i?[t,i]:t;for(var n=0,e=s.length;n<e;n++){this.extend(s[n])}};L.Bounds.prototype={extend:function(t){t=L.point(t);if(!this.min&&!this.max){this.min=t.clone();this.max=t.clone()}
else{this.min.x=Math.min(t.x,this.min.x);this.max.x=Math.max(t.x,this.max.x);this.min.y=Math.min(t.y,this.min.y);this.max.y=Math.max(t.y,this.max.y)};return this},getCenter:function(t){return new L.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new L.Point(this.min.x,this.max.y)},getTopRight:function(){return new L.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var i,n;if(typeof t[0]==='number'||t instanceof L.Point){t=L.point(t)}
else{t=L.bounds(t)};if(t instanceof L.Bounds){i=t.min;n=t.max}
else{i=n=t};return(i.x>=this.min.x)&&(n.x<=this.max.x)&&(i.y>=this.min.y)&&(n.y<=this.max.y)},intersects:function(t){t=L.bounds(t);var e=this.min,s=this.max,i=t.min,n=t.max,x=(n.x>=e.x)&&(i.x<=s.x),m=(n.y>=e.y)&&(i.y<=s.y);return x&&m},isValid:function(){return!!(this.min&&this.max)}};L.bounds=function(t,n){if(!t||t instanceof L.Bounds){return t};return new L.Bounds(t,n)};
;L.Transformation=function(t,n,s,i){this._a=t;this._b=n;this._c=s;this._d=i};L.Transformation.prototype={transform:function(n,t){return this._transform(n.clone(),t)},_transform:function(t,n){n=n||1;t.x=n*(this._a*t.x+this._b);t.y=n*(this._c*t.y+this._d);return t},untransform:function(n,t){t=t||1;return new L.Point((n.x/t-this._b)/this._a,(n.y/t-this._d)/this._c)}};
;L.DomUtil={get:function(t){return(typeof t==='string'?document.getElementById(t):t)},getStyle:function(t,e){var n=t.style[e];if(!n&&t.currentStyle){n=t.currentStyle[e]};if((!n||n==='auto')&&document.defaultView){var o=document.defaultView.getComputedStyle(t,null);n=o?o[e]:null};return n==='auto'?null:n},getViewportOffset:function(e){var o=0,n=0,t=e,l=document.body,s=document.documentElement,i;do{o+=t.offsetTop||0;n+=t.offsetLeft||0;o+=parseInt(L.DomUtil.getStyle(t,'borderTopWidth'),10)||0;n+=parseInt(L.DomUtil.getStyle(t,'borderLeftWidth'),10)||0;i=L.DomUtil.getStyle(t,'position');if(t.offsetParent===l&&i==='absolute'){break};if(i==='fixed'){o+=l.scrollTop||s.scrollTop||0;n+=l.scrollLeft||s.scrollLeft||0;break};if(i==='relative'&&!t.offsetLeft){var a=L.DomUtil.getStyle(t,'width'),c=L.DomUtil.getStyle(t,'max-width'),r=t.getBoundingClientRect();if(a!=='none'||c!=='none'){n+=r.left+t.clientLeft};o+=r.top+(l.scrollTop||s.scrollTop||0);break};t=t.offsetParent}
while(t);t=e;do{if(t===l){break};o-=t.scrollTop||0;n-=t.scrollLeft||0;t=t.parentNode}
while(t);return new L.Point(n,o)},documentIsLtr:function(){if(!L.DomUtil._docIsLtrCached){L.DomUtil._docIsLtrCached=!0;L.DomUtil._docIsLtr=L.DomUtil.getStyle(document.body,'direction')==='ltr'};return L.DomUtil._docIsLtr},create:function(t,e,o){var n=document.createElement(t);n.className=e;if(o){o.appendChild(n)};return n},hasClass:function(t,e){if(t.classList!==undefined){return t.classList.contains(e)};var n=L.DomUtil._getClass(t);return n.length>0&&new RegExp('(^|\\s)'+e+'(\\s|$)').test(n)},addClass:function(t,e){if(t.classList!==undefined){var o=L.Util.splitWords(e);for(var n=0,i=o.length;n<i;n++){t.classList.add(o[n])}}
else if(!L.DomUtil.hasClass(t,e)){var l=L.DomUtil._getClass(t);L.DomUtil._setClass(t,(l?l+' ':'')+e)}},removeClass:function(t,e){if(t.classList!==undefined){t.classList.remove(e)}
else{L.DomUtil._setClass(t,L.Util.trim((' '+L.DomUtil._getClass(t)+' ').replace(' '+e+' ',' ')))}},_setClass:function(t,e){if(t.className.baseVal===undefined){t.className=e}
else{t.className.baseVal=e}},_getClass:function(t){return t.className.baseVal===undefined?t.className:t.className.baseVal},setOpacity:function(t,e){if('opacity' in t.style){t.style.opacity=e}
else if('filter' in t.style){var n=!1,o='DXImageTransform.Microsoft.Alpha';try{n=t.filters.item(o)}catch(l){if(e===1){return}};e=Math.round(e*100);if(n){n.Enabled=(e!==100);n.Opacity=e}
else{t.style.filter+=' progid:'+o+'(opacity='+e+')'}}},testProp:function(t){var n=document.documentElement.style;for(var e=0;e<t.length;e++){if(t[e]in n){return t[e]}};return!1},getTranslateString:function(t){var e=L.Browser.webkit3d,o='translate'+(e?'3d':'')+'(',n=(e?',0':'')+')';return o+t.x+'px,'+t.y+'px'+n},getScaleString:function(t,e){var o=L.DomUtil.getTranslateString(e.add(e.multiplyBy(-1*t))),n=' scale('+t+') ';return o+n},setPosition:function(t,e,n){t._leaflet_pos=e;if(!n&&L.Browser.any3d){t.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(e)}
else{t.style.left=e.x+'px';t.style.top=e.y+'px'}},getPosition:function(t){return t._leaflet_pos}};L.DomUtil.TRANSFORM=L.DomUtil.testProp(['transform','WebkitTransform','OTransform','MozTransform','msTransform']);L.DomUtil.TRANSITION=L.DomUtil.testProp(['webkitTransition','transition','OTransition','MozTransition','msTransition']);L.DomUtil.TRANSITION_END=L.DomUtil.TRANSITION==='webkitTransition'||L.DomUtil.TRANSITION==='OTransition'?L.DomUtil.TRANSITION+'End':'transitionend';(function(){if('onselectstart' in document){L.extend(L.DomUtil,{disableTextSelection:function(){L.DomEvent.on(window,'selectstart',L.DomEvent.preventDefault)},enableTextSelection:function(){L.DomEvent.off(window,'selectstart',L.DomEvent.preventDefault)}})}
else{var t=L.DomUtil.testProp(['userSelect','WebkitUserSelect','OUserSelect','MozUserSelect','msUserSelect']);L.extend(L.DomUtil,{disableTextSelection:function(){if(t){var e=document.documentElement.style;this._userSelect=e[t];e[t]='none'}},enableTextSelection:function(){if(t){document.documentElement.style[t]=this._userSelect;delete this._userSelect}}})};L.extend(L.DomUtil,{disableImageDrag:function(){L.DomEvent.on(window,'dragstart',L.DomEvent.preventDefault)},enableImageDrag:function(){L.DomEvent.off(window,'dragstart',L.DomEvent.preventDefault)}})})();
;L.LatLng=function(t,n,a){t=parseFloat(t);n=parseFloat(n);if(isNaN(t)||isNaN(n)){throw new Error('Invalid LatLng object: ('+t+', '+n+')')};this.lat=t;this.lng=n;if(a!==undefined){this.alt=parseFloat(a)}};L.extend(L.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1.0E-9});L.LatLng.prototype={equals:function(t){if(!t){return!1};t=L.latLng(t);var n=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return n<=L.LatLng.MAX_MARGIN},toString:function(t){return'LatLng('+L.Util.formatNum(this.lat,t)+', '+L.Util.formatNum(this.lng,t)+')'},distanceTo:function(t){t=L.latLng(t);var s=6378137,n=L.LatLng.DEG_TO_RAD,u=(t.lat-this.lat)*n,e=(t.lng-this.lng)*n,o=this.lat*n,l=t.lat*n,a=Math.sin(u/2),r=Math.sin(e/2),i=a*a+r*r*Math.cos(o)*Math.cos(l);return s*2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))},wrap:function(t,n){var a=this.lng;t=t||-180;n=n||180;a=(a+n)%(n-t)+(a<t||a===n?n:t);return new L.LatLng(this.lat,a)}};L.latLng=function(t,n){if(t instanceof L.LatLng){return t};if(L.Util.isArray(t)){if(typeof t[0]==='number'||typeof t[0]==='string'){return new L.LatLng(t[0],t[1],t[2])}
else{return null}};if(t===undefined||t===null){return t};if(typeof t==='object'&&'lat' in t){return new L.LatLng(t.lat,'lng' in t?t.lng:t.lon)};if(n===undefined){return null};return new L.LatLng(t,n)};
;L.LatLngBounds=function(t,s){if(!t){return};var e=s?[t,s]:t;for(var n=0,h=e.length;n<h;n++){this.extend(e[n])}};L.LatLngBounds.prototype={extend:function(t){if(!t){return this};var n=L.latLng(t);if(n!==null){t=n}
else{t=L.latLngBounds(t)};if(t instanceof L.LatLng){if(!this._southWest&&!this._northEast){this._southWest=new L.LatLng(t.lat,t.lng);this._northEast=new L.LatLng(t.lat,t.lng)}
else{this._southWest.lat=Math.min(t.lat,this._southWest.lat);this._southWest.lng=Math.min(t.lng,this._southWest.lng);this._northEast.lat=Math.max(t.lat,this._northEast.lat);this._northEast.lng=Math.max(t.lng,this._northEast.lng)}}
else if(t instanceof L.LatLngBounds){this.extend(t._southWest);this.extend(t._northEast)};return this},pad:function(t){var s=this._southWest,n=this._northEast,h=Math.abs(s.lat-n.lat)*t,e=Math.abs(s.lng-n.lng)*t;return new L.LatLngBounds(new L.LatLng(s.lat-h,s.lng-e),new L.LatLng(n.lat+h,n.lng+e))},getCenter:function(){return new L.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new L.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new L.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){if(typeof t[0]==='number'||t instanceof L.LatLng){t=L.latLng(t)}
else{t=L.latLngBounds(t)};var h=this._southWest,e=this._northEast,s,n;if(t instanceof L.LatLngBounds){s=t.getSouthWest();n=t.getNorthEast()}
else{s=n=t};return(s.lat>=h.lat)&&(n.lat<=e.lat)&&(s.lng>=h.lng)&&(n.lng<=e.lng)},intersects:function(t){t=L.latLngBounds(t);var h=this._southWest,e=this._northEast,s=t.getSouthWest(),n=t.getNorthEast(),o=(n.lat>=h.lat)&&(s.lat<=e.lat),a=(n.lng>=h.lng)&&(s.lng<=e.lng);return o&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(',')},equals:function(t){if(!t){return!1};t=L.latLngBounds(t);return this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast())},isValid:function(){return!!(this._southWest&&this._northEast)}};L.latLngBounds=function(t,n){if(!t||t instanceof L.LatLngBounds){return t};return new L.LatLngBounds(t,n)};
;L.Projection={};
;L.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(a){var r=L.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,e=Math.max(Math.min(n,a.lat),-n),M=a.lng*r,t=e*r;t=Math.log(Math.tan((Math.PI/4)+(t/2)));return new L.Point(M,t)},unproject:function(t){var a=L.LatLng.RAD_TO_DEG,r=t.x*a,n=(2*Math.atan(Math.exp(t.y))-(Math.PI/2))*a;return new L.LatLng(n,r)}};
;L.Projection.LonLat={project:function(n){return new L.Point(n.lng,n.lat)},unproject:function(n){return new L.LatLng(n.y,n.x)}};
;L.CRS={latLngToPoint:function(t,n){var o=this.projection.project(t),r=this.scale(n);return this.transformation._transform(o,r)},pointToLatLng:function(t,n){var o=this.scale(n),r=this.transformation.untransform(t,o);return this.projection.unproject(r)},project:function(t){return this.projection.project(t)},scale:function(t){return 256*Math.pow(2,t)},getSize:function(t){var n=this.scale(t);return L.point(n,n)}};
;L.CRS.EPSG3857=L.extend({},L.CRS,{code:'EPSG:3857',projection:L.Projection.SphericalMercator,transformation:new L.Transformation(0.5/Math.PI,0.5,-0.5/Math.PI,0.5),project:function(r){var o=this.projection.project(r),t=6378137;return o.multiplyBy(t)}});L.CRS.EPSG900913=L.extend({},L.CRS.EPSG3857,{code:'EPSG:900913'});
;L.CRS.EPSG4326=L.extend({},L.CRS,{code:'EPSG:4326',projection:L.Projection.LonLat,transformation:new L.Transformation(1/360,0.5,-1/360,0.5)});
;L.Map=L.Class.extend({includes:L.Mixin.Events,options:{crs:L.CRS.EPSG3857,fadeAnimation:L.DomUtil.TRANSITION&&!L.Browser.android23,trackResize:!0,markerZoomAnimation:L.DomUtil.TRANSITION&&L.Browser.any3d},initialize:function(t,i){i=L.setOptions(this,i);this._initContainer(t);this._initLayout();this._onResize=L.bind(this._onResize,this);this._initEvents();if(i.maxBounds){this.setMaxBounds(i.maxBounds)};if(i.center&&i.zoom!==undefined){this.setView(L.latLng(i.center),i.zoom,{reset:!0})};this._handlers=[];this._layers={};this._zoomBoundLayers={};this._tileLayersNum=0;this.callInitHooks();this._addLayers(i.layers)},setView:function(t,i){i=i===undefined?this.getZoom():i;this._resetView(L.latLng(t),this._limitZoom(i));return this},setZoom:function(t,i){if(!this._loaded){this._zoom=this._limitZoom(t);return this};return this.setView(this.getCenter(),t,{zoom:i})},zoomIn:function(t,i){return this.setZoom(this._zoom+(t||1),i)},zoomOut:function(t,i){return this.setZoom(this._zoom-(t||1),i)},setZoomAround:function(t,i,e){var a=this.getZoomScale(i),n=this.getSize().divideBy(2),r=t instanceof L.Point?t:this.latLngToContainerPoint(t),s =r.subtract(n).multiplyBy(1-1/a),o=this.containerPointToLatLng(n.add(s));return this.setView(o,i,{zoom:e})},fitBounds:function(t,i){i=i||{};t=t.getBounds?t.getBounds():L.latLngBounds(t);var n=L.point(i.paddingTopLeft||i.padding||[0,0]),o=L.point(i.paddingBottomRight||i.padding||[0,0]),e=this.getBoundsZoom(t,!1,n.add(o));e=(i.maxZoom)?Math.min(i.maxZoom,e):e;var a =o.subtract(n).divideBy(2),r=this.project(t.getSouthWest(),e),s=this.project(t.getNorthEast(),e),h=this.unproject(r.add(s).divideBy(2).add(a),e);return this.setView(h,e,i)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,i){return this.setView(t,this._zoom,{pan:i})},panBy:function(t){this.fire('movestart');this._rawPanBy(L.point(t));this.fire('move');return this.fire('moveend')},setMaxBounds:function(t){t=L.latLngBounds(t);this.options.maxBounds=t;if(!t){return this.off('moveend',this._panInsideMaxBounds,this)};if(this._loaded){this._panInsideMaxBounds()};return this.on('moveend',this._panInsideMaxBounds,this)},panInsideBounds:function(t,i){var n=this.getCenter(),e=this._limitCenter(n,this._zoom,t);if(n.equals(e)){return this};return this.panTo(e,i)},addLayer:function(t){var i=L.stamp(t);if(this._layers[i]){return this};this._layers[i]=t;if(t.options&&(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))){this._zoomBoundLayers[i]=t;this._updateZoomLevels()};if(this.options.zoomAnimation&&L.TileLayer&&(t instanceof L.TileLayer)){this._tileLayersNum++;this._tileLayersToLoad++;t.on('load',this._onTileLayerLoad,this)};if(this._loaded){this._layerAdd(t)};return this},removeLayer:function(t){var i=L.stamp(t);if(!this._layers[i]){return this};if(this._loaded){t.onRemove(this)};delete this._layers[i];if(this._loaded){this.fire('layerremove',{layer:t})};if(this._zoomBoundLayers[i]){delete this._zoomBoundLayers[i];this._updateZoomLevels()};if(this.options.zoomAnimation&&L.TileLayer&&(t instanceof L.TileLayer)){this._tileLayersNum--;this._tileLayersToLoad--;t.off('load',this._onTileLayerLoad,this)};return this},hasLayer:function(t){if(!t){return!1};return(L.stamp(t)in this._layers)},eachLayer:function(t,i){for(var e in this._layers){t.call(i,this._layers[e])};return this},invalidateSize:function(t){if(!this._loaded){return this};t=L.extend({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0;this._initialCenter=null;var n=this.getSize(),o=e.divideBy(2).round(),s=n.divideBy(2).round(),i =o.subtract(s);if(!i.x&&!i.y){return this};if(t.animate&&t.pan){this.panBy(i)}
else{if(t.pan){this._rawPanBy(i)};this.fire('move');if(t.debounceMoveend){clearTimeout(this._sizeTimer);this._sizeTimer=setTimeout(L.bind(this.fire,this,'moveend'),200)}
else{this.fire('moveend')}};return this.fire('resize',{oldSize:e,newSize:n})},addHandler:function(t,i){if(!i){return this};var e=this[t]=new i(this);this._handlers.push(e);if(this.options[t]){e.enable()};return this},remove:function(){if(this._loaded){this.fire('unload')};this._initEvents('off');try{delete this._container._leaflet}catch(t){this._container._leaflet=undefined};this._clearPanes();if(this._clearControlPos){this._clearControlPos()};this._clearHandlers();return this},getCenter:function(){this._checkIfLoaded();if(this._initialCenter&&!this._moved()){return this._initialCenter};return this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new L.LatLngBounds(e,i)},getMinZoom:function(){return this.options.minZoom===undefined?(this._layersMinZoom===undefined?0:this._layersMinZoom):this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===undefined?(this._layersMaxZoom===undefined?Infinity:this._layersMaxZoom):this.options.maxZoom},getBoundsZoom:function(t,i,e){t=L.latLngBounds(t);var n=this.getMinZoom()-(i?1:0),r=this.getMaxZoom(),s=this.getSize(),h=t.getNorthWest(),u=t.getSouthEast(),a=!0,o;e=L.point(e||[0,0]);do{n++;o=this.project(u,n).subtract(this.project(h,n)).add(e);a=!i?s.contains(o):o.x<s.x||o.y<s.y}
while(a&&n<=r);if(a&&i){return null};return i?n:n-1},getSize:function(){if(!this._size||this._sizeChanged){this._size=new L.Point(this._container.clientWidth,this._container.clientHeight);this._sizeChanged=!1};return this._size.clone()},getPixelBounds:function(){var t=this._getTopLeftPoint();return new L.Bounds(t,t.add(this.getSize()))},getPixelOrigin:function(){this._checkIfLoaded();return this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t){var i=this.options.crs;return i.scale(t)/i.scale(this._zoom)},getScaleZoom:function(t){return this._zoom+(Math.log(t)/Math.LN2)},project:function(t,i){i=i===undefined?this._zoom:i;return this.options.crs.latLngToPoint(L.latLng(t),i)},unproject:function(t,i){i=i===undefined?this._zoom:i;return this.options.crs.pointToLatLng(L.point(t),i)},layerPointToLatLng:function(t){var i=L.point(t).add(this.getPixelOrigin());return this.unproject(i)},latLngToLayerPoint:function(t){var i=this.project(L.latLng(t))._round();return i._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(t){return L.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return L.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var i=this.containerPointToLayerPoint(L.point(t));return this.layerPointToLatLng(i)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(L.latLng(t)))},mouseEventToContainerPoint:function(t){return L.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var i=this._container=L.DomUtil.get(t);if(!i){throw new Error('Map container not found.')}
else if(i._leaflet){throw new Error('Map container is already initialized.')};i._leaflet=!0},_initLayout:function(){var t=this._container;L.DomUtil.addClass(t,'leaflet-container'+(L.Browser.touch?' leaflet-touch':'')+(L.Browser.retina?' leaflet-retina':'')+(L.Browser.ielt9?' leaflet-oldie':'')+(this.options.fadeAnimation?' leaflet-fade-anim':''));var i=L.DomUtil.getStyle(t,'position');if(i!=='absolute'&&i!=='relative'&&i!=='fixed'){t.style.position='relative'};this._initPanes();if(this._initControlPos){this._initControlPos()}},_initPanes:function(){var t=this._panes={};this._mapPane=t.mapPane=this._createPane('leaflet-map-pane',this._container);this._tilePane=t.tilePane=this._createPane('leaflet-tile-pane',this._mapPane);t.objectsPane=this._createPane('leaflet-objects-pane',this._mapPane);t.shadowPane=this._createPane('leaflet-shadow-pane');t.overlayPane=this._createPane('leaflet-overlay-pane');t.markerPane=this._createPane('leaflet-marker-pane');t.popupPane=this._createPane('leaflet-popup-pane');var i=' leaflet-zoom-hide';if(!this.options.markerZoomAnimation){L.DomUtil.addClass(t.markerPane,i);L.DomUtil.addClass(t.shadowPane,i);L.DomUtil.addClass(t.popupPane,i)}},_createPane:function(t,i){return L.DomUtil.create('div',t,i||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(t){t=t?(L.Util.isArray(t)?t:[t]):[];for(var i=0,e=t.length;i<e;i++){this.addLayer(t[i])}},_resetView:function(t,i,e,n){var o=(this._zoom!==i);if(!n){this.fire('movestart');if(o){this.fire('zoomstart')}};this._zoom=i;this._initialCenter=t;this._initialTopLeftPoint=this._getNewTopLeftPoint(t);if(!e){L.DomUtil.setPosition(this._mapPane,new L.Point(0,0))}
else{this._initialTopLeftPoint._add(this._getMapPanePos())};this._tileLayersToLoad=this._tileLayersNum;var s=!this._loaded;this._loaded=!0;this.fire('viewreset',{hard:!e});if(s){this.fire('load');this.eachLayer(this._layerAdd,this)};this.fire('move');if(o||n){this.fire('zoomend')};this.fire('moveend',{hard:!e})},_rawPanBy:function(t){L.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var n,e=Infinity,i=-Infinity,o=this._getZoomSpan();for(n in this._zoomBoundLayers){var t=this._zoomBoundLayers[n];if(!isNaN(t.options.minZoom)){e=Math.min(e,t.options.minZoom)};if(!isNaN(t.options.maxZoom)){i=Math.max(i,t.options.maxZoom)}};if(n===undefined){this._layersMaxZoom=this._layersMinZoom=undefined}
else{this._layersMaxZoom=i;this._layersMinZoom=e};if(o!==this._getZoomSpan()){this.fire('zoomlevelschange')}},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded){throw new Error('Set map center and zoom first.')}},_initEvents:function(t){if(!L.DomEvent){return};t=t||'on';L.DomEvent[t](this._container,'click',this._onMouseClick,this);var n=['dblclick','mousedown','mouseup','mouseenter','mouseleave','mousemove','contextmenu'],i,e;for(i=0,e=n.length;i<e;i++){L.DomEvent[t](this._container,n[i],this._fireMouseEvent,this)};if(this.options.trackResize){L.DomEvent[t](window,'resize',this._onResize,this)}},_onResize:function(){L.Util.cancelAnimFrame(this._resizeRequest);this._resizeRequest=L.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(t){if(!this._loaded||(!t._simulated&&((this.dragging&&this.dragging.moved())||(this.boxZoom&&this.boxZoom.moved())))||L.DomEvent._skipped(t)){return};this.fire('preclick');this._fireMouseEvent(t)},_fireMouseEvent:function(t){if(!this._loaded||L.DomEvent._skipped(t)){return};var i=t.type;i=(i==='mouseenter'?'mouseover':(i==='mouseleave'?'mouseout':i));if(!this.hasEventListeners(i)){return};if(i==='contextmenu'){L.DomEvent.preventDefault(t)};var n=this.mouseEventToContainerPoint(t),e=this.containerPointToLayerPoint(n),o=this.layerPointToLatLng(e);this.fire(i,{latlng:o,layerPoint:e,containerPoint:n,originalEvent:t})},_onTileLayerLoad:function(){this._tileLayersToLoad--;if(this._tileLayersNum&&!this._tileLayersToLoad){this.fire('tilelayersload')}},_clearHandlers:function(){for(var t=0,i=this._handlers.length;t<i;t++){this._handlers[t].disable()}},whenReady:function(t,i){if(this._loaded){t.call(i||this,this)}
else{this.on('load',t,i)};return this},_layerAdd:function(t){t.onAdd(this);this.fire('layeradd',{layer:t})},_getMapPanePos:function(){return L.DomUtil.getPosition(this._mapPane)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(t,i){var e=this.getSize()._divideBy(2);return this.project(t,i)._subtract(e)._round()},_latLngToNewLayerPoint:function(t,i,e){var n=this._getNewTopLeftPoint(e,i).add(this._getMapPanePos());return this.project(t,i)._subtract(n)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,i,e){if(!e){return t};var n=this.project(t,i),o=this.getSize().divideBy(2),a=new L.Bounds(n.subtract(o),n.add(o)),s =this._getBoundsOffset(a,e,i);return this.unproject(n.add(s),i)},_limitOffset:function(t,i){if(!i){return t};var e=this.getPixelBounds(),n=new L.Bounds(e.min.add(t),e.max.add(t));return t.add(this._getBoundsOffset(n,i))},_getBoundsOffset:function(t,i,e){var o =this.project(i.getNorthWest(),e).subtract(t.min),n =this.project(i.getSouthEast(),e).subtract(t.max),a=this._rebound(o.x,-n.x),s=this._rebound(o.y,-n.y);return new L.Point(a,s)},_rebound:function(t,i){return t+i>0?Math.round(t-i)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(i))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom();return Math.max(e,Math.min(i,t))}});L.map=function(t,i){return new L.Map(t,i)};
;L.TileLayer=L.Class.extend({includes:L.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:'abc',errorTileUrl:'',attribution:'',zoomOffset:0,opacity:1,unloadInvisibleTiles:L.Browser.mobile,updateWhenIdle:L.Browser.mobile},initialize:function(i,t){t=L.setOptions(this,t);if(t.detectRetina&&L.Browser.retina&&t.maxZoom>0){t.tileSize=Math.floor(t.tileSize/2);t.zoomOffset++;if(t.minZoom>0){t.minZoom--};this.options.maxZoom--};if(t.bounds){t.bounds=L.latLngBounds(t.bounds)};this._url=i;var e=this.options.subdomains;if(typeof e==='string'){this.options.subdomains=e.split('')}},onAdd:function(i){this._map=i;this._animated=i._zoomAnimated;this._initContainer();i.on({'viewreset':this._reset,'moveend':this._update},this);if(this._animated){i.on({'zoomanim':this._animateZoom,'zoomend':this._endZoomAnim},this)};if(!this.options.updateWhenIdle){this._limitedUpdate=L.Util.limitExecByInterval(this._update,150,this);i.on('move',this._limitedUpdate,this)};this._reset();this._update()},addTo:function(i){i.addLayer(this);return this},onRemove:function(i){this._container.parentNode.removeChild(this._container);i.off({'viewreset':this._reset,'moveend':this._update},this);if(this._animated){i.off({'zoomanim':this._animateZoom,'zoomend':this._endZoomAnim},this)};if(!this.options.updateWhenIdle){i.off('move',this._limitedUpdate,this)};this._container=null;this._map=null},bringToFront:function(){var i=this._map._panes.tilePane;if(this._container){i.appendChild(this._container);this._setAutoZIndex(i,Math.max)};return this},bringToBack:function(){var i=this._map._panes.tilePane;if(this._container){i.insertBefore(this._container,i.firstChild);this._setAutoZIndex(i,Math.min)};return this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(i){this.options.opacity=i;if(this._map){this._updateOpacity()};return this},setZIndex:function(i){this.options.zIndex=i;this._updateZIndex();return this},setUrl:function(i,t){this._url=i;if(!t){this.redraw()};return this},redraw:function(){if(this._map){this._reset({hard:!0});this._update()};return this},_updateZIndex:function(){if(this._container&&this.options.zIndex!==undefined){this._container.style.zIndex=this.options.zIndex}},_setAutoZIndex:function(i,t){var s=i.children,o=-t(Infinity,-Infinity),n,e,r;for(e=0,r=s.length;e<r;e++){if(s[e]!==this._container){n=parseInt(s[e].style.zIndex,10);if(!isNaN(n)){o=t(o,n)}}};this.options.zIndex=this._container.style.zIndex=(isFinite(o)?o:0)+t(1,-1)},_updateOpacity:function(){var t,i=this._tiles;if(L.Browser.ielt9){for(t in i){L.DomUtil.setOpacity(i[t],this.options.opacity)}}
else{L.DomUtil.setOpacity(this._container,this.options.opacity)}},_initContainer:function(){var t=this._map._panes.tilePane;if(!this._container){this._container=L.DomUtil.create('div','leaflet-layer');this._updateZIndex();if(this._animated){var i='leaflet-tile-container';this._bgBuffer=L.DomUtil.create('div',i,this._container);this._tileContainer=L.DomUtil.create('div',i,this._container)}
else{this._tileContainer=this._container};t.appendChild(this._container);if(this.options.opacity<1){this._updateOpacity()}}},_reset:function(i){for(var t in this._tiles){this.fire('tileunload',{tile:this._tiles[t]})};this._tiles={};this._tilesToLoad=0;if(this.options.reuseTiles){this._unusedTiles=[]};this._tileContainer.innerHTML='';if(this._animated&&i&&i.hard){this._clearBgBuffer()};this._initContainer()},_getTileSize:function(){var t=this._map,o=t.getZoom()+this.options.zoomOffset,i=this.options.maxNativeZoom,e=this.options.tileSize;if(i&&o>i){e=Math.round(t.getZoomScale(o)/t.getZoomScale(i)*e)};return e},_update:function(){if(!this._map){return};var o=this._map,e=o.getPixelBounds(),t=o.getZoom(),i=this._getTileSize();if(t>this.options.maxZoom||t<this.options.minZoom){return};var n=L.bounds(e.min.divideBy(i)._floor(),e.max.divideBy(i)._floor());this._addTilesFromCenterOut(n);if(this.options.unloadInvisibleTiles||this.options.reuseTiles){this._removeOtherTiles(n)}},_addTilesFromCenterOut:function(i){var o=[],r=i.getCenter(),e,t,n;for(e=i.min.y;e<=i.max.y;e++){for(t=i.min.x;t<=i.max.x;t++){n=new L.Point(t,e);if(this._tileShouldBeLoaded(n)){o.push(n)}}};var s=o.length;if(s===0){return};o.sort(function(i,t){return i.distanceTo(r)-t.distanceTo(r)});var a=document.createDocumentFragment();if(!this._tilesToLoad){this.fire('loading')};this._tilesToLoad+=s;for(t=0;t<s;t++){this._addTile(o[t],a)};this._tileContainer.appendChild(a)},_tileShouldBeLoaded:function(i){if((i.x+':'+i.y)in this._tiles){return!1};var t=this.options;if(!t.continuousWorld){var s=this._getWrapTileNum();if((t.noWrap&&(i.x<0||i.x>=s.x))||i.y<0||i.y>=s.y){return!1}};if(t.bounds){var n=this._getTileSize(),r=i.multiplyBy(n),a=r.add([n,n]),o=this._map.unproject(r),e=this._map.unproject(a);if(!t.continuousWorld&&!t.noWrap){o=o.wrap();e=e.wrap()};if(!t.bounds.intersects([o,e])){return!1}};return!0},_removeOtherTiles:function(i){var n,o,e,t;for(t in this._tiles){n=t.split(':');o=parseInt(n[0],10);e=parseInt(n[1],10);if(o<i.min.x||o>i.max.x||e<i.min.y||e>i.max.y){this._removeTile(t)}}},_removeTile:function(i){var t=this._tiles[i];this.fire('tileunload',{tile:t,url:t.src});if(this.options.reuseTiles){L.DomUtil.removeClass(t,'leaflet-tile-loaded');this._unusedTiles.push(t)}
else if(t.parentNode===this._tileContainer){this._tileContainer.removeChild(t)};if(!L.Browser.android){t.onload=null;t.src=L.Util.emptyImageUrl};delete this._tiles[i]},_addTile:function(i,t){var o=this._getTilePos(i),e=this._getTile();L.DomUtil.setPosition(e,o,L.Browser.chrome);this._tiles[i.x+':'+i.y]=e;this._loadTile(e,i);if(e.parentNode!==this._tileContainer){t.appendChild(e)}},_getZoomForUrl:function(){var t=this.options,i=this._map.getZoom();if(t.zoomReverse){i=t.maxZoom-i};i+=t.zoomOffset;return t.maxNativeZoom?Math.min(i,t.maxNativeZoom):i},_getTilePos:function(i){var e=this._map.getPixelOrigin(),t=this._getTileSize();return i.multiplyBy(t).subtract(e)},getTileUrl:function(i){return L.Util.template(this._url,L.extend({s:this._getSubdomain(i),z:i.z,x:i.x,y:i.y},this.options))},_getWrapTileNum:function(){var t=this._map.options.crs,i=t.getSize(this._map.getZoom());return i.divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(i){var t=this._getWrapTileNum();if(!this.options.continuousWorld&&!this.options.noWrap){i.x=((i.x%t.x)+t.x)%t.x};if(this.options.tms){i.y=t.y-i.y-1};i.z=this._getZoomForUrl()},_getSubdomain:function(i){var t=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[t]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var i=this._unusedTiles.pop();this._resetTile(i);return i};return this._createTile()},_resetTile:function(){},_createTile:function(){var i=L.DomUtil.create('img','leaflet-tile');i.style.width=i.style.height=this._getTileSize()+'px';i.galleryimg='no';i.onselectstart=i.onmousemove=L.Util.falseFn;if(L.Browser.ielt9&&this.options.opacity!==undefined){L.DomUtil.setOpacity(i,this.options.opacity)};if(L.Browser.mobileWebkit3d){i.style.WebkitBackfaceVisibility='hidden'};return i},_loadTile:function(i,t){i._layer=this;i.onload=this._tileOnLoad;i.onerror=this._tileOnError;this._adjustTilePoint(t);i.src=this.getTileUrl(t);this.fire('tileloadstart',{tile:i,url:i.src})},_tileLoaded:function(){this._tilesToLoad--;if(this._animated){L.DomUtil.addClass(this._tileContainer,'leaflet-zoom-animated')};if(!this._tilesToLoad){this.fire('load');if(this._animated){clearTimeout(this._clearBgBufferTimer);this._clearBgBufferTimer=setTimeout(L.bind(this._clearBgBuffer,this),500)}}},_tileOnLoad:function(){var i=this._layer;if(this.src!==L.Util.emptyImageUrl){L.DomUtil.addClass(this,'leaflet-tile-loaded');i.fire('tileload',{tile:this,url:this.src})};i._tileLoaded()},_tileOnError:function(){var i=this._layer;i.fire('tileerror',{tile:this,url:this.src});var t=i.options.errorTileUrl;if(t){this.src=t};i._tileLoaded()}});L.tileLayer=function(i,t){return new L.TileLayer(i,t)};
;L.TileLayer.WMS=L.TileLayer.extend({defaultWmsParams:{service:'WMS',request:'GetMap',version:'1.1.1',layers:'',styles:'',format:'image/jpeg',transparent:!1},initialize:function(i,t){this._url=i;var s=L.extend({},this.defaultWmsParams),r=t.tileSize||this.options.tileSize;if(t.detectRetina&&L.Browser.retina){s.width=s.height=r*2}
else{s.width=s.height=r};for(var e in t){if(!this.options.hasOwnProperty(e)&&e!=='crs'){s[e]=t[e]}};this.wmsParams=s;L.setOptions(this,t)},onAdd:function(t){this._crs=this.options.crs||t.options.crs;this._wmsVersion=parseFloat(this.wmsParams.version);var s=this._wmsVersion>=1.3?'crs':'srs';this.wmsParams[s]=this._crs.code;L.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var a=this._map,e=this.options.tileSize,r=t.multiplyBy(e),o=r.add([e,e]),s=this._crs.project(a.unproject(r,t.z)),i=this._crs.project(a.unproject(o,t.z)),h=this._wmsVersion>=1.3&&this._crs===L.CRS.EPSG4326?[i.y,s.x,s.y,i.x].join(','):[s.x,i.y,i.x,s.y].join(','),n=L.Util.template(this._url,{s:this._getSubdomain(t)});return n+L.Util.getParamString(this.wmsParams,n,!0)+'&BBOX='+h},setParams:function(t,s){L.extend(this.wmsParams,t);if(!s){this.redraw()};return this}});L.tileLayer.wms=function(t,s){return new L.TileLayer.WMS(t,s)};
;L.TileLayer.Canvas=L.TileLayer.extend({options:{async:!1},initialize:function(i){L.setOptions(this,i)},redraw:function(){if(this._map){this._reset({hard:!0});this._update()};for(var i in this._tiles){this._redrawTile(this._tiles[i])};return this},_redrawTile:function(i){this.drawTile(i,i._tilePoint,this._map._zoom)},_createTile:function(){var i=L.DomUtil.create('canvas','leaflet-tile');i.width=i.height=this.options.tileSize;i.onselectstart=i.onmousemove=L.Util.falseFn;return i},_loadTile:function(i,t){i._layer=this;i._tilePoint=t;this._redrawTile(i);if(!this.options.async){this.tileDrawn(i)}},drawTile:function(){},tileDrawn:function(i){this._tileOnLoad.call(i)}});L.tileLayer.canvas=function(i){return new L.TileLayer.Canvas(i)};
;L.ImageOverlay=L.Class.extend({includes:L.Mixin.Events,options:{opacity:1},initialize:function(t,e,i){this._url=t;this._bounds=L.latLngBounds(e);L.setOptions(this,i)},onAdd:function(t){this._map=t;if(!this._image){this._initImage()};t._panes.overlayPane.appendChild(this._image);t.on('viewreset',this._reset,this);if(t.options.zoomAnimation&&L.Browser.any3d){t.on('zoomanim',this._animateZoom,this)};this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._image);t.off('viewreset',this._reset,this);if(t.options.zoomAnimation){t.off('zoomanim',this._animateZoom,this)}},addTo:function(t){t.addLayer(this);return this},setOpacity:function(t){this.options.opacity=t;this._updateOpacity();return this},bringToFront:function(){if(this._image){this._map._panes.overlayPane.appendChild(this._image)};return this},bringToBack:function(){var t=this._map._panes.overlayPane;if(this._image){t.insertBefore(this._image,t.firstChild)};return this},setUrl:function(t){this._url=t;this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=L.DomUtil.create('img','leaflet-image-layer');if(this._map.options.zoomAnimation&&L.Browser.any3d){L.DomUtil.addClass(this._image,'leaflet-zoom-animated')}
else{L.DomUtil.addClass(this._image,'leaflet-zoom-hide')};this._updateOpacity();L.extend(this._image,{galleryimg:'no',onselectstart:L.Util.falseFn,onmousemove:L.Util.falseFn,onload:L.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(t){var i=this._map,h=this._image,e=i.getZoomScale(t.zoom),n=this._bounds.getNorthWest(),m=this._bounds.getSouthEast(),o=i._latLngToNewLayerPoint(n,t.zoom,t.center),a=i._latLngToNewLayerPoint(m,t.zoom,t.center)._subtract(o),s=o._add(a._multiplyBy((1/2)*(1-1/e)));h.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(s)+' scale('+e+') '},_reset:function(){var t=this._image,e=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),i=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(e);L.DomUtil.setPosition(t,e);t.style.width=i.x+'px';t.style.height=i.y+'px'},_onImageLoad:function(){this.fire('load')},_updateOpacity:function(){L.DomUtil.setOpacity(this._image,this.options.opacity)}});L.imageOverlay=function(t,e,i){return new L.ImageOverlay(t,e,i)};
;L.Icon=L.Class.extend({options:{className:''},initialize:function(t){L.setOptions(this,t)},createIcon:function(t){return this._createIcon('icon',t)},createShadow:function(t){return this._createIcon('shadow',t)},_createIcon:function(t,n){var i=this._getIconUrl(t);if(!i){if(t==='icon'){throw new Error('iconUrl not set in Icon options (see the docs).')};return null};var e;if(!n||n.tagName!=='IMG'){e=this._createImg(i)}
else{e=this._createImg(i,n)};this._setIconStyles(e,t);return e},_setIconStyles:function(t,o){var i=this.options,e=L.point(i[o+'Size']),n;if(o==='shadow'){n=L.point(i.shadowAnchor||i.iconAnchor)}
else{n=L.point(i.iconAnchor)};if(!n&&e){n=e.divideBy(2,!0)};t.className='leaflet-marker-'+o+' '+i.className;if(n){t.style.marginLeft=(-n.x)+'px';t.style.marginTop=(-n.y)+'px'};if(e){t.style.width=e.x+'px';t.style.height=e.y+'px'}},_createImg:function(t,n){n=n||document.createElement('img');n.src=t;return n},_getIconUrl:function(t){if(L.Browser.retina&&this.options[t+'RetinaUrl']){return this.options[t+'RetinaUrl']};return this.options[t+'Url']}});L.icon=function(t){return new L.Icon(t)};
;L.Icon.Default=L.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(t){var e=t+"Url";if(this.options[e]){return this.options[e]};if(L.Browser.retina&&t==="icon"){t+="-2x"};var n=L.Icon.Default.imagePath;if(!n){throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.")};return n+"/marker-"+t+".png"}});L.Icon.Default.imagePath=(function(){var a=document.getElementsByTagName("script"),i=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/,t,r,n,o,e;for(t=0,r=a.length;t<r;t++){n=a[t].src;o=n.match(i);if(o){e=n.split(i)[0];return(e?e+"/":"")+"images"}}}());
;L.Marker=L.Class.extend({includes:L.Mixin.Events,options:{icon:new L.Icon.Default(),title:'',alt:'',clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(t,i){L.setOptions(this,i);this._latlng=L.latLng(t)},onAdd:function(t){this._map=t;t.on('viewreset',this.update,this);this._initIcon();this.update();this.fire('add');if(t.options.zoomAnimation&&t.options.markerZoomAnimation){t.on('zoomanim',this._animateZoom,this)}},addTo:function(t){t.addLayer(this);return this},onRemove:function(t){if(this.dragging){this.dragging.disable()};this._removeIcon();this._removeShadow();this.fire('remove');t.off({'viewreset':this.update,'zoomanim':this._animateZoom},this);this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(t){this._latlng=L.latLng(t);this.update();return this.fire('move',{latlng:this._latlng})},setZIndexOffset:function(t){this.options.zIndexOffset =t;this.update();return this},setIcon:function(t){this.options.icon=t;if(this._map){this._initIcon();this.update()};if(this._popup){this.bindPopup(this._popup)};return this},update:function(){if(this._icon){this._setPos(this._map.latLngToLayerPoint(this._latlng).round())};return this},_initIcon:function(){var t=this.options,s=this._map,r=(s.options.zoomAnimation&&s.options.markerZoomAnimation),e=r?'leaflet-zoom-animated':'leaflet-zoom-hide',i=t.icon.createIcon(this._icon),o=!1;if(i!==this._icon){if(this._icon){this._removeIcon()};o=!0;if(t.title){i.title=t.title};if(t.alt){i.alt=t.alt}};L.DomUtil.addClass(i,e);if(t.keyboard){i.tabIndex='0'};this._icon=i;this._initInteraction();if(t.riseOnHover){L.DomEvent.on(i,'mouseover',this._bringToFront,this).on(i,'mouseout',this._resetZIndex,this)};var n=t.icon.createShadow(this._shadow),a=!1;if(n!==this._shadow){this._removeShadow();a=!0};if(n){L.DomUtil.addClass(n,e)};this._shadow=n;if(t.opacity<1){this._updateOpacity()};var h=this._map._panes;if(o){h.markerPane.appendChild(this._icon)};if(n&&a){h.shadowPane.appendChild(this._shadow)}},_removeIcon:function(){if(this.options.riseOnHover){L.DomEvent.off(this._icon,'mouseover',this._bringToFront).off(this._icon,'mouseout',this._resetZIndex)};this._map._panes.markerPane.removeChild(this._icon);this._icon=null},_removeShadow:function(){if(this._shadow){this._map._panes.shadowPane.removeChild(this._shadow)};this._shadow=null},_setPos:function(t){L.DomUtil.setPosition(this._icon,t);if(this._shadow){L.DomUtil.setPosition(this._shadow,t)};this._zIndex=t.y+this.options.zIndexOffset;this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(i)},_initInteraction:function(){if(!this.options.clickable){return};var t=this._icon,n=['dblclick','mousedown','mouseover','mouseout','contextmenu'];L.DomUtil.addClass(t,'leaflet-clickable');L.DomEvent.on(t,'click',this._onMouseClick,this);L.DomEvent.on(t,'keypress',this._onKeyPress,this);for(var i=0;i<n.length;i++){L.DomEvent.on(t,n[i],this._fireMouseEvent,this)};if(L.Handler.MarkerDrag){this.dragging=new L.Handler.MarkerDrag(this);if(this.options.draggable){this.dragging.enable()}}},_onMouseClick:function(t){var i=this.dragging&&this.dragging.moved();if(this.hasEventListeners(t.type)||i){L.DomEvent.stopPropagation(t)};if(i){return};if((!this.dragging||!this.dragging._enabled)&&this._map.dragging&&this._map.dragging.moved()){return};this.fire(t.type,{originalEvent:t,latlng:this._latlng})},_onKeyPress:function(t){if(t.keyCode===13){this.fire('click',{originalEvent:t,latlng:this._latlng})}},_fireMouseEvent:function(t){this.fire(t.type,{originalEvent:t,latlng:this._latlng});if(t.type==='contextmenu'&&this.hasEventListeners(t.type)){L.DomEvent.preventDefault(t)};if(t.type!=='mousedown'){L.DomEvent.stopPropagation(t)}
else{L.DomEvent.preventDefault(t)}},setOpacity:function(t){this.options.opacity=t;if(this._map){this._updateOpacity()};return this},_updateOpacity:function(){L.DomUtil.setOpacity(this._icon,this.options.opacity);if(this._shadow){L.DomUtil.setOpacity(this._shadow,this.options.opacity)}},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}});L.marker=function(t,i){return new L.Marker(t,i)};
;L.DivIcon=L.Icon.extend({options:{iconSize:[12,12],className:'leaflet-div-icon',html:!1},createIcon:function(t){var e=(t&&t.tagName==='DIV')?t:document.createElement('div'),n=this.options;if(n.html!==!1){e.innerHTML=n.html}
else{e.innerHTML=''};if(n.bgPos){e.style.backgroundPosition=(-n.bgPos.x)+'px '+(-n.bgPos.y)+'px'};this._setIconStyles(e,'icon');return e},createShadow:function(){return null}});L.divIcon=function(n){return new L.DivIcon(n)};
;L.Map.mergeOptions({closePopupOnClick:!0});L.Popup=L.Class.extend({includes:L.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:'',zoomAnimation:!0},initialize:function(t,i){L.setOptions(this,t);this._source=i;this._animated=L.Browser.any3d&&this.options.zoomAnimation;this._isOpen=!1},onAdd:function(t){this._map=t;if(!this._container){this._initLayout()};var i=t.options.fadeAnimation;if(i){L.DomUtil.setOpacity(this._container,0)};t._panes.popupPane.appendChild(this._container);t.on(this._getEvents(),this);this.update();if(i){L.DomUtil.setOpacity(this._container,1)};this.fire('open');t.fire('popupopen',{popup:this});if(this._source){this._source.fire('popupopen',{popup:this})}},addTo:function(t){t.addLayer(this);return this},openOn:function(t){t.openPopup(this);return this},onRemove:function(t){t._panes.popupPane.removeChild(this._container);L.Util.falseFn(this._container.offsetWidth);t.off(this._getEvents(),this);if(t.options.fadeAnimation){L.DomUtil.setOpacity(this._container,0)};this._map=null;this.fire('close');t.fire('popupclose',{popup:this});if(this._source){this._source.fire('popupclose',{popup:this})}},getLatLng:function(){return this._latlng},setLatLng:function(t){this._latlng=L.latLng(t);if(this._map){this._updatePosition();this._adjustPan()};return this},getContent:function(){return this._content},setContent:function(t){this._content=t;this.update();return this},update:function(){if(!this._map){return};this._container.style.visibility='hidden';this._updateContent();this._updateLayout();this._updatePosition();this._container.style.visibility='';this._adjustPan()},_getEvents:function(){var t={viewreset:this._updatePosition};if(this._animated){t.zoomanim=this._zoomAnimation};if('closeOnClick' in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick){t.preclick=this._close};if(this.options.keepInView){t.moveend=this._adjustPan};return t},_close:function(){if(this._map){this._map.closePopup(this)}},_initLayout:function(){var t='leaflet-popup',e=t+' '+this.options.className+' leaflet-zoom-'+(this._animated?'animated':'hide'),n=this._container=L.DomUtil.create('div',e),i;if(this.options.closeButton){i=this._closeButton=L.DomUtil.create('a',t+'-close-button',n);i.href='#close';i.innerHTML='&#215;';L.DomEvent.disableClickPropagation(i);L.DomEvent.on(i,'click',this._onCloseButtonClick,this)};var o=this._wrapper=L.DomUtil.create('div',t+'-content-wrapper',n);L.DomEvent.disableClickPropagation(o);this._contentNode=L.DomUtil.create('div',t+'-content',o);L.DomEvent.disableScrollPropagation(this._contentNode);L.DomEvent.on(o,'contextmenu',L.DomEvent.stopPropagation);this._tipContainer=L.DomUtil.create('div',t+'-tip-container',n);this._tip=L.DomUtil.create('div',t+'-tip',this._tipContainer)},_updateContent:function(){if(!this._content){return};if(typeof this._content==='string'){this._contentNode.innerHTML=this._content}
else{while(this._contentNode.hasChildNodes()){this._contentNode.removeChild(this._contentNode.firstChild)};this._contentNode.appendChild(this._content)};this.fire('contentupdate')},_updateLayout:function(){var i=this._contentNode,t=i.style;t.width='';t.whiteSpace='nowrap';var n=i.offsetWidth;n=Math.min(n,this.options.maxWidth);n=Math.max(n,this.options.minWidth);t.width=(n+1)+'px';t.whiteSpace='';t.height='';var s=i.offsetHeight,o=this.options.maxHeight,e='leaflet-popup-scrolled';if(o&&s>o){t.height=o+'px';L.DomUtil.addClass(i,e)}
else{L.DomUtil.removeClass(i,e)};this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(!this._map){return};var t=this._map.latLngToLayerPoint(this._latlng),i=this._animated,n =L.point(this.options.offset);if(i){L.DomUtil.setPosition(this._container,t)};this._containerBottom=-n.y-(i?0:t.y);this._containerLeft=-Math.round(this._containerWidth/2)+n.x+(i?0:t.x);this._container.style.bottom=this._containerBottom+'px';this._container.style.left=this._containerLeft+'px'},_zoomAnimation:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);L.DomUtil.setPosition(this._container,i)},_adjustPan:function(){if(!this.options.autoPan){return};var p=this._map,a=this._container.offsetHeight,c=this._containerWidth,h=new L.Point(this._containerLeft,-a-this._containerBottom);if(this._animated){h._add(L.DomUtil.getPosition(this._container))};var t=p.layerPointToContainerPoint(h),r=L.point(this.options.autoPanPadding),e=L.point(this.options.autoPanPaddingTopLeft||r),o=L.point(this.options.autoPanPaddingBottomRight||r),s=p.getSize(),n=0,i=0;if(t.x+c+o.x>s.x){n=t.x+c-s.x+o.x};if(t.x-n-e.x<0){n=t.x-e.x};if(t.y+a+o.y>s.y){i=t.y+a-s.y+o.y};if(t.y-i-e.y<0){i=t.y-e.y};if(n||i){p.fire('autopanstart').panBy([n,i])}},_onCloseButtonClick:function(t){this._close();L.DomEvent.stop(t)}});L.popup=function(t,i){return new L.Popup(t,i)};L.Map.include({openPopup:function(t,i,o){this.closePopup();if(!(t instanceof L.Popup)){var n=t;t=new L.Popup(o).setLatLng(i).setContent(n)};t._isOpen=!0;this._popup=t;return this.addLayer(t)},closePopup:function(t){if(!t||t===this._popup){t=this._popup;this._popup=null};if(t){this.removeLayer(t);t._isOpen=!1};return this}});
;L.LayerGroup=L.Class.extend({initialize:function(e){this._layers={};var r,t;if(e){for(r=0,t=e.length;r<t;r++){this.addLayer(e[r])}}},addLayer:function(e){var r=this.getLayerId(e);this._layers[r]=e;if(this._map){this._map.addLayer(e)};return this},removeLayer:function(e){var r=e in this._layers?e:this.getLayerId(e);if(this._map&&this._layers[r]){this._map.removeLayer(this._layers[r])};delete this._layers[r];return this},hasLayer:function(e){if(!e){return!1};return(e in this._layers||this.getLayerId(e)in this._layers)},clearLayers:function(){this.eachLayer(this.removeLayer,this);return this},invoke:function(e){var a=Array.prototype.slice.call(arguments,1),t,r;for(t in this._layers){r=this._layers[t];if(r[e]){r[e].apply(r,a)}};return this},onAdd:function(e){this._map=e;this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e);this._map=null},addTo:function(e){e.addLayer(this);return this},eachLayer:function(e,t){for(var r in this._layers){e.call(t,this._layers[r])};return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];for(var r in this._layers){e.push(this._layers[r])};return e},setZIndex:function(e){return this.invoke('setZIndex',e)},getLayerId:function(e){return L.stamp(e)}});L.layerGroup=function(e){return new L.LayerGroup(e)};
;L.FeatureGroup=L.LayerGroup.extend({includes:L.Mixin.Events,statics:{EVENTS:'click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose'},addLayer:function(t){if(this.hasLayer(t)){return this};if('on' in t){t.on(L.FeatureGroup.EVENTS,this._propagateEvent,this)};L.LayerGroup.prototype.addLayer.call(this,t);if(this._popupContent&&t.bindPopup){t.bindPopup(this._popupContent,this._popupOptions)};return this.fire('layeradd',{layer:t})},removeLayer:function(t){if(!this.hasLayer(t)){return this};if(t in this._layers){t=this._layers[t]};if('off' in t){t.off(L.FeatureGroup.EVENTS,this._propagateEvent,this)};L.LayerGroup.prototype.removeLayer.call(this,t);if(this._popupContent){this.invoke('unbindPopup')};return this.fire('layerremove',{layer:t})},bindPopup:function(t,e){this._popupContent=t;this._popupOptions=e;return this.invoke('bindPopup',t,e)},openPopup:function(t){for(var e in this._layers){this._layers[e].openPopup(t);break};return this},setStyle:function(t){return this.invoke('setStyle',t)},bringToFront:function(){return this.invoke('bringToFront')},bringToBack:function(){return this.invoke('bringToBack')},getBounds:function(){var t=new L.LatLngBounds();this.eachLayer(function(e){t.extend(e instanceof L.Marker?e.getLatLng():e.getBounds())});return t},_propagateEvent:function(t){t=L.extend({layer:t.target,target:this},t);this.fire(t.type,t)}});L.featureGroup=function(t){return new L.FeatureGroup(t)};
;L.Path=L.Class.extend({includes:[L.Mixin.Events],statics:{CLIP_PADDING:(function(){var i=L.Browser.mobile?1280:2000,t =(i/Math.max(window.outerWidth,window.outerHeight)-1)/2;return Math.max(0,Math.min(0.5,t))})()},options:{stroke:!0,color:'#0033ff',dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:0.5,fill:!1,fillColor:null,fillOpacity:0.2,clickable:!0},initialize:function(t){L.setOptions(this,t)},onAdd:function(t){this._map=t;if(!this._container){this._initElements();this._initEvents()};this.projectLatlngs();this._updatePath();if(this._container){this._map._pathRoot.appendChild(this._container)};this.fire('add');t.on({'viewreset':this.projectLatlngs,'moveend':this._updatePath},this)},addTo:function(t){t.addLayer(this);return this},onRemove:function(t){t._pathRoot.removeChild(this._container);this.fire('remove');this._map=null;if(L.Browser.vml){this._container=null;this._stroke=null;this._fill=null};t.off({'viewreset':this.projectLatlngs,'moveend':this._updatePath},this)},projectLatlngs:function(){},setStyle:function(t){L.setOptions(this,t);if(this._container){this._updateStyle()};return this},redraw:function(){if(this._map){this.projectLatlngs();this._updatePath()};return this}});L.Map.include({_updatePathViewport:function(){var i=L.Path.CLIP_PADDING,n=this.getSize(),s=L.DomUtil.getPosition(this._mapPane),t=s.multiplyBy(-1)._subtract(n.multiplyBy(i)._round()),e=t.add(n.multiplyBy(1+i*2)._round());this._pathViewport=new L.Bounds(t,e)}});
;L.Path.SVG_NS='http://www.w3.org/2000/svg';L.Browser.svg=!!(document.createElementNS&&document.createElementNS(L.Path.SVG_NS,'svg').createSVGRect);L.Path=L.Path.extend({statics:{SVG:L.Browser.svg},bringToFront:function(){var i=this._map._pathRoot,t=this._container;if(t&&i.lastChild!==t){i.appendChild(t)};return this},bringToBack:function(){var e=this._map._pathRoot,t=this._container,i=e.firstChild;if(t&&i!==t){e.insertBefore(t,i)};return this},getPathString:function(){},_createElement:function(t){return document.createElementNS(L.Path.SVG_NS,t)},_initElements:function(){this._map._initPathRoot();this._initPath();this._initStyle()},_initPath:function(){this._container=this._createElement('g');this._path=this._createElement('path');if(this.options.className){L.DomUtil.addClass(this._path,this.options.className)};this._container.appendChild(this._path)},_initStyle:function(){if(this.options.stroke){this._path.setAttribute('stroke-linejoin','round');this._path.setAttribute('stroke-linecap','round')};if(this.options.fill){this._path.setAttribute('fill-rule','evenodd')};if(this.options.pointerEvents){this._path.setAttribute('pointer-events',this.options.pointerEvents)};if(!this.options.clickable&&!this.options.pointerEvents){this._path.setAttribute('pointer-events','none')};this._updateStyle()},_updateStyle:function(){if(this.options.stroke){this._path.setAttribute('stroke',this.options.color);this._path.setAttribute('stroke-opacity',this.options.opacity);this._path.setAttribute('stroke-width',this.options.weight);if(this.options.dashArray){this._path.setAttribute('stroke-dasharray',this.options.dashArray)}
else{this._path.removeAttribute('stroke-dasharray')};if(this.options.lineCap){this._path.setAttribute('stroke-linecap',this.options.lineCap)};if(this.options.lineJoin){this._path.setAttribute('stroke-linejoin',this.options.lineJoin)}}
else{this._path.setAttribute('stroke','none')};if(this.options.fill){this._path.setAttribute('fill',this.options.fillColor||this.options.color);this._path.setAttribute('fill-opacity',this.options.fillOpacity)}
else{this._path.setAttribute('fill','none')}},_updatePath:function(){var t=this.getPathString();if(!t){t='M0 0'};this._path.setAttribute('d',t)},_initEvents:function(){if(this.options.clickable){if(L.Browser.svg||!L.Browser.vml){L.DomUtil.addClass(this._path,'leaflet-clickable')};L.DomEvent.on(this._container,'click',this._onMouseClick,this);var i=['dblclick','mousedown','mouseover','mouseout','mousemove','contextmenu'];for(var t=0;t<i.length;t++){L.DomEvent.on(this._container,i[t],this._fireMouseEvent,this)}}},_onMouseClick:function(t){if(this._map.dragging&&this._map.dragging.moved()){return};this._fireMouseEvent(t)},_fireMouseEvent:function(t){if(!this._map||!this.hasEventListeners(t.type)){return};var i=this._map,o=i.mouseEventToContainerPoint(t),e=i.containerPointToLayerPoint(o),s=i.layerPointToLatLng(e);this.fire(t.type,{latlng:s,layerPoint:e,containerPoint:o,originalEvent:t});if(t.type==='contextmenu'){L.DomEvent.preventDefault(t)};if(t.type!=='mousemove'){L.DomEvent.stopPropagation(t)}}});L.Map.include({_initPathRoot:function(){if(!this._pathRoot){this._pathRoot=L.Path.prototype._createElement('svg');this._panes.overlayPane.appendChild(this._pathRoot);if(this.options.zoomAnimation&&L.Browser.any3d){L.DomUtil.addClass(this._pathRoot,'leaflet-zoom-animated');this.on({'zoomanim':this._animatePathZoom,'zoomend':this._endPathZoom})}
else{L.DomUtil.addClass(this._pathRoot,'leaflet-zoom-hide')};this.on('moveend',this._updateSvgViewport);this._updateSvgViewport()}},_animatePathZoom:function(t){var i=this.getZoomScale(t.zoom),e =this._getCenterOffset(t.center)._multiplyBy(-i)._add(this._pathViewport.min);this._pathRoot.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(e)+' scale('+i+') ';this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(this._pathZooming){return};this._updatePathViewport();var a=this._pathViewport,i=a.min,n=a.max,s=n.x-i.x,e=n.y-i.y,t=this._pathRoot,o=this._panes.overlayPane;if(L.Browser.mobileWebkit){o.removeChild(t)};L.DomUtil.setPosition(t,i);t.setAttribute('width',s);t.setAttribute('height',e);t.setAttribute('viewBox',[i.x,i.y,s,e].join(' '));if(L.Browser.mobileWebkit){o.appendChild(t)}}});
;L.Browser.canvas=(function(){return!!document.createElement('canvas').getContext}());L.Path=(L.Path.SVG&&!window.L_PREFER_CANVAS)||!L.Browser.canvas?L.Path:L.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){if(this._map){this.projectLatlngs();this._requestUpdate()};return this},setStyle:function(t){L.setOptions(this,t);if(this._map){this._updateStyle();this._requestUpdate()};return this},onRemove:function(t){t.off('viewreset',this.projectLatlngs,this).off('moveend',this._updatePath,this);if(this.options.clickable){this._map.off('click',this._onClick,this);this._map.off('mousemove',this._onMouseMove,this)};this._requestUpdate();this.fire('remove');this._map=null},_requestUpdate:function(){if(this._map&&!L.Path._updateRequest){L.Path._updateRequest=L.Util.requestAnimFrame(this._fireMapMoveEnd,this._map)}},_fireMapMoveEnd:function(){L.Path._updateRequest=null;this.fire('moveend')},_initElements:function(){this._map._initPathRoot();this._ctx=this._map._canvasCtx},_updateStyle:function(){var t=this.options;if(t.stroke){this._ctx.lineWidth=t.weight;this._ctx.strokeStyle=t.color};if(t.fill){this._ctx.fillStyle=t.fillColor||t.color};if(t.lineCap){this._ctx.lineCap=t.lineCap};if(t.lineJoin){this._ctx.lineJoin=t.lineJoin}},_drawPath:function(){var t,i,o,n,e,s;this._ctx.beginPath();for(t=0,o=this._parts.length;t<o;t++){for(i=0,n=this._parts[t].length;i<n;i++){e=this._parts[t][i];s=(i===0?'move':'line')+'To';this._ctx[s](e.x,e.y)};if(this instanceof L.Polygon){this._ctx.closePath()}}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(this._checkIfEmpty()){return};var t=this._ctx,i=this.options;this._drawPath();t.save();this._updateStyle();if(i.fill){t.globalAlpha=i.fillOpacity;t.fill(i.fillRule||'evenodd')};if(i.stroke){t.globalAlpha=i.opacity;t.stroke()};t.restore()},_initEvents:function(){if(this.options.clickable){this._map.on('mousemove',this._onMouseMove,this);this._map.on('click dblclick contextmenu',this._fireMouseEvent,this)}},_fireMouseEvent:function(t){if(this._containsPoint(t.layerPoint)){this.fire(t.type,t)}},_onMouseMove:function(t){if(!this._map||this._map._animatingZoom){return};if(this._containsPoint(t.layerPoint)){this._ctx.canvas.style.cursor='pointer';this._mouseInside=!0;this.fire('mouseover',t)}
else if(this._mouseInside){this._ctx.canvas.style.cursor='';this._mouseInside=!1;this.fire('mouseout',t)}}});L.Map.include((L.Path.SVG&&!window.L_PREFER_CANVAS)||!L.Browser.canvas?{}:{_initPathRoot:function(){var t=this._pathRoot,i;if(!t){t=this._pathRoot=document.createElement('canvas');t.style.position='absolute';i=this._canvasCtx=t.getContext('2d');i.lineCap='round';i.lineJoin='round';this._panes.overlayPane.appendChild(t);if(this.options.zoomAnimation){this._pathRoot.className='leaflet-zoom-animated';this.on('zoomanim',this._animatePathZoom);this.on('zoomend',this._endPathZoom)};this.on('moveend',this._updateCanvasViewport);this._updateCanvasViewport()}},_updateCanvasViewport:function(){if(this._pathZooming){return};this._updatePathViewport();var e=this._pathViewport,i=e.min,s=e.max.subtract(i),t=this._pathRoot;L.DomUtil.setPosition(t,i);t.width=s.x;t.height=s.y;t.getContext('2d').translate(-i.x,-i.y)}});
;L.LineUtil={simplify:function(t,e){if(!e||!t.length){return t.slice()};var i=e*e;t=this._reducePoints(t,i);t=this._simplifyDP(t,i);return t},pointToSegmentDistance:function(t,e,i){return Math.sqrt(this._sqClosestPointOnSegment(t,e,i,!0))},closestPointOnSegment:function(t,e,i){return this._sqClosestPointOnSegment(t,e,i)},_simplifyDP:function(t,e){var n=t.length,f=typeof Uint8Array!==undefined+''?Uint8Array:Array,s=new f(n);s[0]=s[n-1]=1;this._simplifyDPStep(t,s,e,0,n-1);var i,r=[];for(i=0;i<n;i++){if(s[i]){r.push(t[i])}};return r},_simplifyDPStep:function(t,e,i,n,o){var u=0,r,s,f;for(s=n+1;s<=o-1;s++){f=this._sqClosestPointOnSegment(t[s],t[n],t[o],!0);if(f>u){r=s;u=f}};if(u>i){e[r]=1;this._simplifyDPStep(t,e,i,n,r);this._simplifyDPStep(t,e,i,r,o)}},_reducePoints:function(t,e){var n=[t[0]];for(var i=1,r=0,s=t.length;i<s;i++){if(this._sqDist(t[i],t[r])>e){n.push(t[i]);r=i}};if(r<s-1){n.push(t[s-1])};return n},clipSegment:function(t,e,i,f){var s=f?this._lastCode:this._getBitCode(t,i),n=this._getBitCode(e,i),u,r,o;this._lastCode=n;while(!0){if(!(s|n)){return[t,e]}
else if(s&n){return!1}
else{u=s||n;r=this._getEdgeIntersection(t,e,u,i);o=this._getBitCode(r,i);if(u===s){t=r;s=o}
else{e=r;n=o}}}},_getEdgeIntersection:function(t,e,i,n){var o=e.x-t.x,f=e.y-t.y,r=n.min,s=n.max;if(i&8){return new L.Point(t.x+o*(s.y-t.y)/f,s.y)}
else if(i&4){return new L.Point(t.x+o*(r.y-t.y)/f,r.y)}
else if(i&2){return new L.Point(s.x,t.y+f*(s.x-t.x)/o)}
else if(i&1){return new L.Point(r.x,t.y+f*(r.x-t.x)/o)}},_getBitCode:function(t,e){var i=0;if(t.x<e.min.x){i|=1}
else if(t.x>e.max.x){i|=2};if(t.y<e.min.y){i|=4}
else if(t.y>e.max.y){i|=8};return i},_sqDist:function(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i},_sqClosestPointOnSegment:function(t,e,i,u){var r=e.x,f=e.y,n=i.x-r,s=i.y-f,y=n*n+s*s,o;if(y>0){o=((t.x-r)*n+(t.y-f)*s)/y;if(o>1){r=i.x;f=i.y}
else if(o>0){r+=n*o;f+=s*o}};n=t.x-r;s=t.y-f;return u?n*n+s*s:new L.Point(r,f)}};
;L.Polyline=L.Path.extend({initialize:function(t,n){L.Path.prototype.initialize.call(this,n);this._latlngs=this._convertLatLngs(t)},options:{smoothFactor:1.0,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var t=0,n=this._latlngs.length;t<n;t++){this._originalPoints[t]=this._map.latLngToLayerPoint(this._latlngs[t])}},getPathString:function(){for(var t=0,i=this._parts.length,n='';t<i;t++){n+=this._getPathPartStr(this._parts[t])};return n},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){this._latlngs=this._convertLatLngs(t);return this.redraw()},addLatLng:function(t){this._latlngs.push(L.latLng(t));return this.redraw()},spliceLatLngs:function(){var t=[].splice.apply(this._latlngs,arguments);this._convertLatLngs(this._latlngs,!0);this.redraw();return t},closestLayerPoint:function(t){var a=Infinity,l=this._parts,s,r,i=null;for(var o=0,g=l.length;o<g;o++){var e=l[o];for(var n=1,u=e.length;n<u;n++){s=e[n-1];r=e[n];var h=L.LineUtil._sqClosestPointOnSegment(t,s,r,!0);if(h<a){a=h;i=L.LineUtil._sqClosestPointOnSegment(t,s,r)}}};if(i){i.distance=Math.sqrt(a)};return i},getBounds:function(){return new L.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(t,i){var n,r,s =i?t:[];for(n=0,r=t.length;n<r;n++){if(L.Util.isArray(t[n])&&typeof t[n][0]!=='number'){return};s[n]=L.latLng(t[n])};return s},_initEvents:function(){L.Path.prototype._initEvents.call(this)},_getPathPartStr:function(t){var r=L.Path.VML;for(var i=0,a=t.length,s='',n;i<a;i++){n=t[i];if(r){n._round()};s+=(i?'L':'M')+n.x+' '+n.y};return s},_clipPoints:function(){var s=this._originalPoints,a=s.length,t,n,i;if(this.options.noClip){this._parts=[s];return};this._parts=[];var r=this._parts,o=this._map._pathViewport,e=L.LineUtil;for(t=0,n=0;t<a-1;t++){i=e.clipSegment(s[t],s[t+1],o,t);if(!i){continue};r[n]=r[n]||[];r[n].push(i[0]);if((i[1]!==s[t+1])||(t===a-2)){r[n].push(i[1]);n++}}},_simplifyPoints:function(){var n=this._parts,i=L.LineUtil;for(var t=0,s=n.length;t<s;t++){n[t]=i.simplify(n[t],this.options.smoothFactor)}},_updatePath:function(){if(!this._map){return};this._clipPoints();this._simplifyPoints();L.Path.prototype._updatePath.call(this)}});L.polyline=function(t,n){return new L.Polyline(t,n)};
;L.PolyUtil={};L.PolyUtil.clipPolygon=function(o,g){var c,u=[1,4,2,8],e,s,f,l,d,n,i,t,r=L.LineUtil;for(e=0,n=o.length;e<n;e++){o[e]._code=r._getBitCode(o[e],g)};for(f=0;f<4;f++){i=u[f];c=[];for(e=0,n=o.length,s=n-1;e<n;s=e++){l=o[e];d=o[s];if(!(l._code&i)){if(d._code&i){t=r._getEdgeIntersection(d,l,i,g);t._code=r._getBitCode(t,g);c.push(t)};c.push(l)}
else if(!(d._code&i)){t=r._getEdgeIntersection(d,l,i,g);t._code=r._getBitCode(t,g);c.push(t)}};o=c};return o};
;L.Polygon=L.Polyline.extend({options:{fill:!0},initialize:function(t,i){L.Polyline.prototype.initialize.call(this,t,i);this._initWithHoles(t)},_initWithHoles:function(t){var s,o,i;if(t&&L.Util.isArray(t[0])&&(typeof t[0][0]!=='number')){this._latlngs=this._convertLatLngs(t[0]);this._holes=t.slice(1);for(s=0,o=this._holes.length;s<o;s++){i=this._holes[s]=this._convertLatLngs(this._holes[s]);if(i[0].equals(i[i.length-1])){i.pop()}}};t=this._latlngs;if(t.length>=2&&t[0].equals(t[t.length-1])){t.pop()}},projectLatlngs:function(){L.Polyline.prototype.projectLatlngs.call(this);this._holePoints=[];if(!this._holes){return};var t,i,o,s;for(t=0,o=this._holes.length;t<o;t++){this._holePoints[t]=[];for(i=0,s=this._holes[t].length;i<s;i++){this._holePoints[t][i]=this._map.latLngToLayerPoint(this._holes[t][i])}}},setLatLngs:function(t){if(t&&L.Util.isArray(t[0])&&(typeof t[0][0]!=='number')){this._initWithHoles(t);return this.redraw()}
else{return L.Polyline.prototype.setLatLngs.call(this,t)}},_clipPoints:function(){var n=this._originalPoints,s=[];this._parts=[n].concat(this._holePoints);if(this.options.noClip){return};for(var t=0,o=this._parts.length;t<o;t++){var i=L.PolyUtil.clipPolygon(this._parts[t],this._map._pathViewport);if(i.length){s.push(i)}};this._parts=s},_getPathPartStr:function(t){var i=L.Polyline.prototype._getPathPartStr.call(this,t);return i+(L.Browser.svg?'z':'x')}});L.polygon=function(t,i){return new L.Polygon(t,i)};
(function(){function t(t){return L.FeatureGroup.extend({initialize:function(t,n){this._layers={};this._options=n;this.setLatLngs(t)},setLatLngs:function(n){var i=0,e=n.length;this.eachLayer(function(t){if(i<e){t.setLatLngs(n[i++])}
else{this.removeLayer(t)}},this);while(i<e){this.addLayer(new t(n[i++],this._options))};return this},getLatLngs:function(){var t=[];this.eachLayer(function(n){t.push(n.getLatLngs())});return t}})};L.MultiPolyline=t(L.Polyline);L.MultiPolygon=t(L.Polygon);L.multiPolyline=function(t,n){return new L.MultiPolyline(t,n)};L.multiPolygon=function(t,n){return new L.MultiPolygon(t,n)}}());
;L.Circle=L.Path.extend({initialize:function(t,n,i){L.Path.prototype.initialize.call(this,i);this._latlng=L.latLng(t);this._mRadius=n},options:{fill:!0},setLatLng:function(t){this._latlng=L.latLng(t);return this.redraw()},setRadius:function(t){this._mRadius=t;return this.redraw()},projectLatlngs:function(){var n=this._getLngRadius(),t=this._latlng,i=this._map.latLngToLayerPoint([t.lat,t.lng-n]);this._point=this._map.latLngToLayerPoint(t);this._radius=Math.max(this._point.x-i.x,1)},getBounds:function(){var n=this._getLngRadius(),i=(this._mRadius/40075017)*360,t=this._latlng;return new L.LatLngBounds([t.lat-i,t.lng-n],[t.lat+i,t.lng+n])},getLatLng:function(){return this._latlng},getPathString:function(){var i=this._point,t=this._radius;if(this._checkIfEmpty()){return''};if(L.Browser.svg){return'M'+i.x+','+(i.y-t)+'A'+t+','+t+',0,1,1,'+(i.x-0.1)+','+(i.y-t)+' z'}
else{i._round();t=Math.round(t);return'AL '+i.x+','+i.y+' '+t+','+t+' 0,'+(65535*360)}},getRadius:function(){return this._mRadius},_getLatRadius:function(){return(this._mRadius/40075017)*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(L.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map){return!1};var n=this._map._pathViewport,i=this._radius,t=this._point;return t.x-i>n.max.x||t.y-i>n.max.y||t.x+i<n.min.x||t.y+i<n.min.y}});L.circle=function(t,n,i){return new L.Circle(t,n,i)};
;L.CircleMarker=L.Circle.extend({options:{radius:10,weight:2},initialize:function(t,i){L.Circle.prototype.initialize.call(this,t,null,i);this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){L.Circle.prototype._updateStyle.call(this);this.setRadius(this.options.radius)},setLatLng:function(t){L.Circle.prototype.setLatLng.call(this,t);if(this._popup&&this._popup._isOpen){this._popup.setLatLng(t)};return this},setRadius:function(t){this.options.radius=this._radius=t;return this.redraw()},getRadius:function(){return this._radius}});L.circleMarker=function(t,i){return new L.CircleMarker(t,i)};
;L.Polyline.include(!L.Path.CANVAS?{}:{_containsPoint:function(a,c){var n,t,e,s,o,h,i,r=this.options.weight/2;if(L.Browser.touch){r+=10};for(n=0,s=this._parts.length;n<s;n++){i=this._parts[n];for(t=0,o=i.length,e=o-1;t<o;e=t++){if(!c&&(t===0)){continue};h=L.LineUtil.pointToSegmentDistance(a,i[e],i[t]);if(h<=r){return!0}}};return!1}});
;L.GeoJSON=L.FeatureGroup.extend({initialize:function(e,t){L.setOptions(this,t);this._layers={};if(e){this.addData(e)}},addData:function(e){var i=L.Util.isArray(e)?e:e.features,r,s,n;if(i){for(r=0,s=i.length;r<s;r++){n=i[r];if(n.geometries||n.geometry||n.features||n.coordinates){this.addData(i[r])}};return this};var t=this.options;if(t.filter&&!t.filter(e)){return};var o=L.GeoJSON.geometryToLayer(e,t.pointToLayer,t.coordsToLatLng,t);o.feature=L.GeoJSON.asFeature(e);o.defaultOptions=o.options;this.resetStyle(o);if(t.onEachFeature){t.onEachFeature(e,o)};return this.addLayer(o)},resetStyle:function(e){var t=this.options.style;if(t){L.Util.extend(e.options,e.defaultOptions);this._setLayerStyle(e,t)}},setStyle:function(e){this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){if(typeof t==='function'){t=t(e.feature)};if(e.setStyle){e.setStyle(t)}}});L.extend(L.GeoJSON,{geometryToLayer:function(e,o,t,a){var c=e.type==='Feature'?e.geometry:e,r=c.coordinates,l=[],s,i,n,u;t=t||this.coordsToLatLng;switch(c.type){case'Point':s=t(r);return o?o(e,s):new L.Marker(s);case'MultiPoint':for(n=0,u=r.length;n<u;n++){s=t(r[n]);l.push(o?o(e,s):new L.Marker(s))};return new L.FeatureGroup(l);case'LineString':i=this.coordsToLatLngs(r,0,t);return new L.Polyline(i,a);case'Polygon':if(r.length===2&&!r[1].length){throw new Error('Invalid GeoJSON object.')};i=this.coordsToLatLngs(r,1,t);return new L.Polygon(i,a);case'MultiLineString':i=this.coordsToLatLngs(r,1,t);return new L.MultiPolyline(i,a);case'MultiPolygon':i=this.coordsToLatLngs(r,2,t);return new L.MultiPolygon(i,a);case'GeometryCollection':for(n=0,u=c.geometries.length;n<u;n++){l.push(this.geometryToLayer({geometry:c.geometries[n],type:'Feature',properties:e.properties},o,t,a))};return new L.FeatureGroup(l);default:throw new Error('Invalid GeoJSON object.')}},coordsToLatLng:function(e){return new L.LatLng(e[1],e[0],e[2])},coordsToLatLngs:function(e,t,r){var i,o,s,n=[];for(o=0,s=e.length;o<s;o++){i=t?this.coordsToLatLngs(e[o],t-1,r):(r||this.coordsToLatLng)(e[o]);n.push(i)};return n},latLngToCoords:function(e){var t=[e.lng,e.lat];if(e.alt!==undefined){t.push(e.alt)};return t},latLngsToCoords:function(e){var o=[];for(var t=0,r=e.length;t<r;t++){o.push(L.GeoJSON.latLngToCoords(e[t]))};return o},getFeature:function(e,t){return e.feature?L.extend({},e.feature,{geometry:t}):L.GeoJSON.asFeature(t)},asFeature:function(e){if(e.type==='Feature'){return e};return{type:'Feature',properties:{},geometry:e}}});var PointToGeoJSON={toGeoJSON:function(){return L.GeoJSON.getFeature(this,{type:'Point',coordinates:L.GeoJSON.latLngToCoords(this.getLatLng())})}};L.Marker.include(PointToGeoJSON);L.Circle.include(PointToGeoJSON);L.CircleMarker.include(PointToGeoJSON);L.Polyline.include({toGeoJSON:function(){return L.GeoJSON.getFeature(this,{type:'LineString',coordinates:L.GeoJSON.latLngsToCoords(this.getLatLngs())})}});L.Polygon.include({toGeoJSON:function(){var o=[L.GeoJSON.latLngsToCoords(this.getLatLngs())],t,r,e;o[0].push(o[0][0]);if(this._holes){for(t=0,r=this._holes.length;t<r;t++){e=L.GeoJSON.latLngsToCoords(this._holes[t]);e.push(e[0]);o.push(e)}};return L.GeoJSON.getFeature(this,{type:'Polygon',coordinates:o})}});(function(){function e(e){return function(){var t=[];this.eachLayer(function(e){t.push(e.toGeoJSON().geometry.coordinates)});return L.GeoJSON.getFeature(this,{type:e,coordinates:t})}};L.MultiPolyline.include({toGeoJSON:e('MultiLineString')});L.MultiPolygon.include({toGeoJSON:e('MultiPolygon')});L.LayerGroup.include({toGeoJSON:function(){var t=this.feature&&this.feature.geometry,r=[],o;if(t&&t.type==='MultiPoint'){return e('MultiPoint').call(this)};var n=t&&t.type==='GeometryCollection';this.eachLayer(function(e){if(e.toGeoJSON){o=e.toGeoJSON();r.push(n?o.geometry:L.GeoJSON.asFeature(o))}});if(n){return L.GeoJSON.getFeature(this,{geometries:r,type:'GeometryCollection'})};return{type:'FeatureCollection',features:r}}})}());L.geoJson=function(e,t){return new L.GeoJSON(e,t)};
;L.DomEvent={addListener:function(e,t,i,a){var o=L.stamp(i),s='_leaflet_'+t+o,n,r,l;if(e[s]){return this};n=function(t){return i.call(a||e,t||L.DomEvent._getEvent())};if(L.Browser.pointer&&t.indexOf('touch')===0){return this.addPointerListener(e,t,n,o)};if(L.Browser.touch&&(t==='dblclick')&&this.addDoubleTapListener){this.addDoubleTapListener(e,n,o)};if('addEventListener' in e){if(t==='mousewheel'){e.addEventListener('DOMMouseScroll',n,!1);e.addEventListener(t,n,!1)}
else if((t==='mouseenter')||(t==='mouseleave')){r=n;l=(t==='mouseenter'?'mouseover':'mouseout');n=function(t){if(!L.DomEvent._checkMouse(e,t)){return};return r(t)};e.addEventListener(l,n,!1)}
else if(t==='click'&&L.Browser.android){r=n;n=function(e){return L.DomEvent._filterClick(e,r)};e.addEventListener(t,n,!1)}
else{e.addEventListener(t,n,!1)}}
else if('attachEvent' in e){e.attachEvent('on'+t,n)};e[s]=n;return this},removeListener:function(e,t,o){var r=L.stamp(o),i='_leaflet_'+t+r,n=e[i];if(!n){return this};if(L.Browser.pointer&&t.indexOf('touch')===0){this.removePointerListener(e,t,r)}
else if(L.Browser.touch&&(t==='dblclick')&&this.removeDoubleTapListener){this.removeDoubleTapListener(e,r)}
else if('removeEventListener' in e){if(t==='mousewheel'){e.removeEventListener('DOMMouseScroll',n,!1);e.removeEventListener(t,n,!1)}
else if((t==='mouseenter')||(t==='mouseleave')){e.removeEventListener((t==='mouseenter'?'mouseover':'mouseout'),n,!1)}
else{e.removeEventListener(t,n,!1)}}
else if('detachEvent' in e){e.detachEvent('on'+t,n)};e[i]=null;return this},stopPropagation:function(e){if(e.stopPropagation){e.stopPropagation()}
else{e.cancelBubble=!0};L.DomEvent._skipped(e);return this},disableScrollPropagation:function(e){var t=L.DomEvent.stopPropagation;return L.DomEvent.on(e,'mousewheel',t).on(e,'MozMousePixelScroll',t)},disableClickPropagation:function(e){var n=L.DomEvent.stopPropagation;for(var t=L.Draggable.START.length-1;t>=0;t--){L.DomEvent.on(e,L.Draggable.START[t],n)};return L.DomEvent.on(e,'click',L.DomEvent._fakeStop).on(e,'dblclick',n)},preventDefault:function(e){if(e.preventDefault){e.preventDefault()}
else{e.returnValue=!1};return this},stop:function(e){return L.DomEvent.preventDefault(e).stopPropagation(e)},getMousePosition:function(e,t){if(!t){return new L.Point(e.clientX,e.clientY)};var n=t.getBoundingClientRect();return new L.Point(e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop)},getWheelDelta:function(e){var t=0;if(e.wheelDelta){t=e.wheelDelta/120};if(e.detail){t=-e.detail/3};return t},_skipEvents:{},_fakeStop:function(e){L.DomEvent._skipEvents[e.type]=!0},_skipped:function(e){var t=this._skipEvents[e.type];this._skipEvents[e.type]=!1;return t},_checkMouse:function(e,n){var t=n.relatedTarget;if(!t){return!0};try{while(t&&(t!==e)){t=t.parentNode}}catch(r){return!1};return(t!==e)},_getEvent:function(){var e=window.event;if(!e){var t=arguments.callee.caller;while(t){e=t['arguments'][0];if(e&&window.Event===e.constructor){break};t=t.caller}};return e},_filterClick:function(e,t){var r=(e.timeStamp||e.originalEvent.timeStamp),n=L.DomEvent._lastClick&&(r-L.DomEvent._lastClick);if((n&&n>100&&n<500)||(e.target._simulatedClick&&!e._simulated)){L.DomEvent.stop(e);return};L.DomEvent._lastClick=r;return t(e)}};L.DomEvent.on=L.DomEvent.addListener;L.DomEvent.off=L.DomEvent.removeListener;
;L.Draggable=L.Class.extend({includes:L.Mixin.Events,statics:{START:L.Browser.touch?['touchstart','mousedown']:['mousedown'],END:{mousedown:'mouseup',touchstart:'touchend',pointerdown:'touchend',MSPointerDown:'touchend'},MOVE:{mousedown:'mousemove',touchstart:'touchmove',pointerdown:'touchmove',MSPointerDown:'touchmove'}},initialize:function(t,e){this._element=t;this._dragStartTarget =e ||t},enable:function(){if(this._enabled){return};for(var t=L.Draggable.START.length-1;t>=0;t--){L.DomEvent.on(this._dragStartTarget,L.Draggable.START[t],this._onDown,this)};this._enabled=!0},disable:function(){if(!this._enabled){return};for(var t=L.Draggable.START.length-1;t>=0;t--){L.DomEvent.off(this._dragStartTarget,L.Draggable.START[t],this._onDown,this)};this._enabled=!1;this._moved=!1},_onDown:function(t){this._moved=!1;if(t.shiftKey||((t.which!==1)&&(t.button!==1)&&!t.touches)){return};L.DomEvent.stopPropagation(t);if(L.Draggable._disabled){return};L.DomUtil.disableImageDrag();L.DomUtil.disableTextSelection();if(this._moving){return};var e=t.touches?t.touches[0]:t;this._startPoint=new L.Point(e.clientX,e.clientY);this._startPos=this._newPos=L.DomUtil.getPosition(this._element);L.DomEvent.on(document,L.Draggable.MOVE[t.type],this._onMove,this).on(document,L.Draggable.END[t.type],this._onUp,this)},_onMove:function(t){if(t.touches&&t.touches.length>1){this._moved=!0;return};var i=(t.touches&&t.touches.length===1?t.touches[0]:t),o=new L.Point(i.clientX,i.clientY),e =o.subtract(this._startPoint);if(!e.x&&!e.y){return};if(L.Browser.touch&&Math.abs(e.x)+Math.abs(e.y)<3){return};L.DomEvent.preventDefault(t);if(!this._moved){this.fire('dragstart');this._moved=!0;this._startPos=L.DomUtil.getPosition(this._element).subtract(e);L.DomUtil.addClass(document.body,'leaflet-dragging');this._lastTarget =t.target ||t.srcElement;L.DomUtil.addClass(this._lastTarget,'leaflet-drag-target')};this._newPos=this._startPos.add(e);this._moving=!0;L.Util.cancelAnimFrame(this._animRequest);this._animRequest=L.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)},_updatePosition:function(){this.fire('predrag');L.DomUtil.setPosition(this._element,this._newPos);this.fire('drag')},_onUp:function(){L.DomUtil.removeClass(document.body,'leaflet-dragging');if(this._lastTarget){L.DomUtil.removeClass(this._lastTarget,'leaflet-drag-target');this._lastTarget =null};for(var t in L.Draggable.MOVE){L.DomEvent.off(document,L.Draggable.MOVE[t],this._onMove).off(document,L.Draggable.END[t],this._onUp)};L.DomUtil.enableImageDrag();L.DomUtil.enableTextSelection();if(this._moved&&this._moving){L.Util.cancelAnimFrame(this._animRequest);this.fire('dragend',{distance:this._newPos.distanceTo(this._startPos)})};this._moving=!1}});
;L.Handler=L.Class.extend({initialize:function(e){this._map=e},enable:function(){if(this._enabled){return};this._enabled=!0;this.addHooks()},disable:function(){if(!this._enabled){return};this._enabled=!1;this.removeHooks()},enabled:function(){return!!this._enabled}});
;L.Map.mergeOptions({dragging:!0,inertia:!L.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:Infinity,inertiaThreshold:L.Browser.touch?32:18,easeLinearity:0.25,worldCopyJump:!1});L.Map.Drag=L.Handler.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new L.Draggable(i._mapPane,i._container);this._draggable.on({'dragstart':this._onDragStart,'drag':this._onDrag,'dragend':this._onDragEnd},this);if(i.options.worldCopyJump){this._draggable.on('predrag',this._onPreDrag,this);i.on('viewreset',this._onViewReset,this);i.whenReady(this._onViewReset,this)}};this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var i=this._map;if(i._panAnim){i._panAnim.stop()};i.fire('movestart').fire('dragstart');if(i.options.inertia){this._positions=[];this._times=[]}},_onDrag:function(){if(this._map.options.inertia){var i=this._lastTime=+new Date(),t=this._lastPos=this._draggable._newPos;this._positions.push(t);this._times.push(i);if(i-this._times[0]>200){this._positions.shift();this._times.shift()}};this._map.fire('move').fire('drag')},_onViewReset:function(){var t=this._map.getSize()._divideBy(2),i=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset =i.subtract(t).x;this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var a=this._worldWidth,t=Math.round(a/2),i=this._initialWorldOffset,s=this._draggable._newPos.x,n=(s-t+i)%a+t-i,e=(s+t+i)%a-t-i,r=Math.abs(n+i)<Math.abs(e+i)?n:e;this._draggable._newPos.x=r},_onDragEnd:function(m){var i=this._map,a=i.options,s=+new Date()-this._lastTime,d=!a.inertia||s>a.inertiaThreshold||!this._positions[0];i.fire('dragend',m);if(d){i.fire('moveend')}
else{var g=this._lastPos.subtract(this._positions[0]),l=(this._lastTime+s-this._times[0])/1000,e=a.easeLinearity,h=g.multiplyBy(e/l),o=h.distanceTo([0,0]),r=Math.min(a.inertiaMaxSpeed,o),p=h.multiplyBy(r/o),n=r/(a.inertiaDeceleration*e),t =p.multiplyBy(-n/2).round();if(!t.x||!t.y){i.fire('moveend')}
else{t =i._limitOffset(t,i.options.maxBounds);L.Util.requestAnimFrame(function(){i.panBy(t,{duration:n,easeLinearity:e,noMoveStart:!0})})}}}});L.Map.addInitHook('addHandler','dragging',L.Map.Drag);
;L.Map.mergeOptions({scrollWheelZoom:!0});L.Map.ScrollWheelZoom=L.Handler.extend({addHooks:function(){L.DomEvent.on(this._map._container,'mousewheel',this._onWheelScroll,this);L.DomEvent.on(this._map._container,'MozMousePixelScroll',L.DomEvent.preventDefault);this._delta=0},removeHooks:function(){L.DomEvent.off(this._map._container,'mousewheel',this._onWheelScroll);L.DomEvent.off(this._map._container,'MozMousePixelScroll',L.DomEvent.preventDefault)},_onWheelScroll:function(e){var o=L.DomEvent.getWheelDelta(e);this._delta+=o;this._lastMousePos=this._map.mouseEventToContainerPoint(e);if(!this._startTime){this._startTime=+new Date()};var t=Math.max(40-(+new Date()-this._startTime),0);clearTimeout(this._timer);this._timer=setTimeout(L.bind(this._performZoom,this),t);L.DomEvent.preventDefault(e);L.DomEvent.stopPropagation(e)},_performZoom:function(){var o=this._map,e=this._delta,t=o.getZoom();e=e>0?Math.ceil(e):Math.floor(e);e=Math.max(Math.min(e,4),-4);e=o._limitZoom(t+e)-t;this._delta=0;this._startTime=null;if(!e){return};if(o.options.scrollWheelZoom==='center'){o.setZoom(t+e)}
else{o.setZoomAround(this._lastMousePos,t+e)}}});L.Map.addInitHook('addHandler','scrollWheelZoom',L.Map.ScrollWheelZoom);
;L.extend(L.DomEvent,{POINTER_DOWN:L.Browser.msPointer?'MSPointerDown':'pointerdown',POINTER_MOVE:L.Browser.msPointer?'MSPointerMove':'pointermove',POINTER_UP:L.Browser.msPointer?'MSPointerUp':'pointerup',POINTER_CANCEL:L.Browser.msPointer?'MSPointerCancel':'pointercancel',_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(e,t,n,r){switch(t){case'touchstart':return this.addPointerListenerStart(e,t,n,r);case'touchend':return this.addPointerListenerEnd(e,t,n,r);case'touchmove':return this.addPointerListenerMove(e,t,n,r);default:throw'Unknown touch event type'}},addPointerListenerStart:function(e,i,n,r){var a='_leaflet_',t=this._pointers,s=function(e){if(e.pointerType!=='mouse'&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE){L.DomEvent.preventDefault(e)};var i=!1;for(var r=0;r<t.length;r++){if(t[r].pointerId===e.pointerId){i=!0;break}};if(!i){t.push(e)};e.touches=t.slice();e.changedTouches=[e];n(e)};e[a+'touchstart'+r]=s;e.addEventListener(this.POINTER_DOWN,s,!1);if(!this._pointerDocumentListener){var o=function(e){for(var n=0;n<t.length;n++){if(t[n].pointerId===e.pointerId){t.splice(n,1);break}}};document.documentElement.addEventListener(this.POINTER_UP,o,!1);document.documentElement.addEventListener(this.POINTER_CANCEL,o,!1);this._pointerDocumentListener=!0};return this},addPointerListenerMove:function(e,i,t,r){var s='_leaflet_',n=this._pointers;function o(e){if((e.pointerType===e.MSPOINTER_TYPE_MOUSE||e.pointerType==='mouse')&&e.buttons===0){return};for(var r=0;r<n.length;r++){if(n[r].pointerId===e.pointerId){n[r]=e;break}};e.touches=n.slice();e.changedTouches=[e];t(e)};e[s+'touchmove'+r]=o;e.addEventListener(this.POINTER_MOVE,o,!1);return this},addPointerListenerEnd:function(e,i,t,r){var s='_leaflet_',n=this._pointers,o=function(e){for(var r=0;r<n.length;r++){if(n[r].pointerId===e.pointerId){n.splice(r,1);break}};e.touches=n.slice();e.changedTouches=[e];t(e)};e[s+'touchend'+r]=o;e.addEventListener(this.POINTER_UP,o,!1);e.addEventListener(this.POINTER_CANCEL,o,!1);return this},removePointerListener:function(e,t,n){var i='_leaflet_',r=e[i+t+n];switch(t){case'touchstart':e.removeEventListener(this.POINTER_DOWN,r,!1);break;case'touchmove':e.removeEventListener(this.POINTER_MOVE,r,!1);break;case'touchend':e.removeEventListener(this.POINTER_UP,r,!1);e.removeEventListener(this.POINTER_CANCEL,r,!1);break};return this}});
;L.Map.mergeOptions({touchZoom:L.Browser.touch&&!L.Browser.android23,bounceAtZoomLimits:!0});L.Map.TouchZoom=L.Handler.extend({addHooks:function(){L.DomEvent.on(this._map._container,'touchstart',this._onTouchStart,this)},removeHooks:function(){L.DomEvent.off(this._map._container,'touchstart',this._onTouchStart,this)},_onTouchStart:function(o){var t=this._map;if(!o.touches||o.touches.length!==2||t._animatingZoom||this._zooming){return};var i=t.mouseEventToLayerPoint(o.touches[0]),e=t.mouseEventToLayerPoint(o.touches[1]),n=t._getCenterLayerPoint();this._startCenter=i.add(e)._divideBy(2);this._startDist=i.distanceTo(e);this._moved=!1;this._zooming=!0;this._centerOffset =n.subtract(this._startCenter);if(t._panAnim){t._panAnim.stop()};L.DomEvent.on(document,'touchmove',this._onTouchMove,this).on(document,'touchend',this._onTouchEnd,this);L.DomEvent.preventDefault(o)},_onTouchMove:function(o){var t=this._map;if(!o.touches||o.touches.length!==2||!this._zooming){return};var e=t.mouseEventToLayerPoint(o.touches[0]),i=t.mouseEventToLayerPoint(o.touches[1]);this._scale=e.distanceTo(i)/this._startDist;this._delta=e._add(i)._divideBy(2)._subtract(this._startCenter);if(this._scale===1){return};if(!t.options.bounceAtZoomLimits){if((t.getZoom()===t.getMinZoom()&&this._scale<1)||(t.getZoom()===t.getMaxZoom()&&this._scale>1)){return}};if(!this._moved){L.DomUtil.addClass(t._mapPane,'leaflet-touching');t.fire('movestart').fire('zoomstart');this._moved=!0};L.Util.cancelAnimFrame(this._animRequest);this._animRequest=L.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container);L.DomEvent.preventDefault(o)},_updateOnMove:function(){var t=this._map,e=this._getScaleOrigin(),i=t.layerPointToLatLng(e),o=t.getScaleZoom(this._scale);t._animateZoom(i,o,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return};var t=this._map;this._zooming=!1;L.DomUtil.removeClass(t._mapPane,'leaflet-touching');L.Util.cancelAnimFrame(this._animRequest);L.DomEvent.off(document,'touchmove',this._onTouchMove).off(document,'touchend',this._onTouchEnd);var n=this._getScaleOrigin(),s=t.layerPointToLatLng(n),i=t.getZoom(),o=t.getScaleZoom(this._scale)-i,a=(o>0?Math.ceil(o):Math.floor(o)),e=t._limitZoom(i+a),h=t.getZoomScale(e)/this._scale;t._animateZoom(s,e,n,h)},_getScaleOrigin:function(){var t =this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(t)}});L.Map.addInitHook('addHandler','touchZoom',L.Map.TouchZoom);
;L.Handler.MarkerDrag=L.Handler.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;if(!this._draggable){this._draggable=new L.Draggable(a,a)};this._draggable.on('dragstart',this._onDragStart,this).on('drag',this._onDrag,this).on('dragend',this._onDragEnd,this);this._draggable.enable();L.DomUtil.addClass(this._marker._icon,'leaflet-marker-draggable')},removeHooks:function(){this._draggable.off('dragstart',this._onDragStart,this).off('drag',this._onDrag,this).off('dragend',this._onDragEnd,this);this._draggable.disable();L.DomUtil.removeClass(this._marker._icon,'leaflet-marker-draggable')},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire('movestart').fire('dragstart')},_onDrag:function(){var a=this._marker,t=a._shadow,i=L.DomUtil.getPosition(a._icon),r=a._map.layerPointToLatLng(i);if(t){L.DomUtil.setPosition(t,i)};a._latlng=r;a.fire('move',{latlng:r}).fire('drag')},_onDragEnd:function(a){this._marker.fire('moveend').fire('dragend',a)}});
;L.Control=L.Class.extend({options:{position:'topright'},initialize:function(t){L.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var o=this._map;if(o){o.removeControl(this)};this.options.position=t;if(o){o.addControl(this)};return this},getContainer:function(){return this._container},addTo:function(t){this._map=t;var i=this._container=this.onAdd(t),n=this.getPosition(),o=t._controlCorners[n];L.DomUtil.addClass(i,'leaflet-control');if(n.indexOf('bottom')!==-1){o.insertBefore(i,o.firstChild)}
else{o.appendChild(i)};return this},removeFrom:function(t){var i=this.getPosition(),o=t._controlCorners[i];o.removeChild(this._container);this._map=null;if(this.onRemove){this.onRemove(t)};return this},_refocusOnMap:function(){if(this._map){this._map.getContainer().focus()}}});L.control=function(t){return new L.Control(t)};L.Map.include({addControl:function(t){t.addTo(this);return this},removeControl:function(t){t.removeFrom(this);return this},_initControlPos:function(){var i=this._controlCorners={},o='leaflet-',n=this._controlContainer=L.DomUtil.create('div',o+'control-container',this._container);function t(t,r){var e=o+t+' '+o+r;i[t+r]=L.DomUtil.create('div',e,n)};t('top','left');t('top','right');t('bottom','left');t('bottom','right')},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}});
;L.Control.Zoom=L.Control.extend({options:{position:'topleft',zoomInText:'+',zoomInTitle:'Zoom in',zoomOutText:'-',zoomOutTitle:'Zoom out'},onAdd:function(o){var n='leaflet-control-zoom',t=L.DomUtil.create('div',n+' leaflet-bar');this._map=o;this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,n+'-in',t,this._zoomIn,this);this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,n+'-out',t,this._zoomOut,this);this._updateDisabled();o.on('zoomend zoomlevelschange',this._updateDisabled,this);return t},onRemove:function(o){o.off('zoomend zoomlevelschange',this._updateDisabled,this)},_zoomIn:function(o){this._map.zoomIn(o.shiftKey?3:1)},_zoomOut:function(o){this._map.zoomOut(o.shiftKey?3:1)},_createButton:function(t,s,m,e,l,i){var o=L.DomUtil.create('a',m,e);o.innerHTML=t;o.href='#';o.title=s;var n=L.DomEvent.stopPropagation;L.DomEvent.on(o,'click',n).on(o,'mousedown',n).on(o,'dblclick',n).on(o,'click',L.DomEvent.preventDefault).on(o,'click',l,i).on(o,'click',this._refocusOnMap,i);return o},_updateDisabled:function(){var t=this._map,o='leaflet-disabled';L.DomUtil.removeClass(this._zoomInButton,o);L.DomUtil.removeClass(this._zoomOutButton,o);if(t._zoom===t.getMinZoom()){L.DomUtil.addClass(this._zoomOutButton,o)};if(t._zoom===t.getMaxZoom()){L.DomUtil.addClass(this._zoomInButton,o)}}});L.Map.mergeOptions({zoomControl:!0});L.Map.addInitHook(function(){if(this.options.zoomControl){this.zoomControl=new L.Control.Zoom();this.addControl(this.zoomControl)}});L.control.zoom=function(o){return new L.Control.Zoom(o)};
;L.Control.Attribution=L.Control.extend({options:{position:'bottomright',prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){L.setOptions(this,t);this._attributions={}},onAdd:function(t){this._container=L.DomUtil.create('div','leaflet-control-attribution');L.DomEvent.disableClickPropagation(this._container);for(var i in t._layers){if(t._layers[i].getAttribution){this.addAttribution(t._layers[i].getAttribution())}};t.on('layeradd',this._onLayerAdd,this).on('layerremove',this._onLayerRemove,this);this._update();return this._container},onRemove:function(t){t.off('layeradd',this._onLayerAdd).off('layerremove',this._onLayerRemove)},setPrefix:function(t){this.options.prefix=t;this._update();return this},addAttribution:function(t){if(!t){return};if(!this._attributions[t]){this._attributions[t]=0};this._attributions[t]++;this._update();return this},removeAttribution:function(t){if(!t){return};if(this._attributions[t]){this._attributions[t]--;this._update()};return this},_update:function(){if(!this._map){return};var i=[];for(var o in this._attributions){if(this._attributions[o]){i.push(o)}};var t=[];if(this.options.prefix){t.push(this.options.prefix)};if(i.length){t.push(i.join(', '))};this._container.innerHTML=t.join(' | ')},_onLayerAdd:function(t){if(t.layer.getAttribution){this.addAttribution(t.layer.getAttribution())}},_onLayerRemove:function(t){if(t.layer.getAttribution){this.removeAttribution(t.layer.getAttribution())}}});L.Map.mergeOptions({attributionControl:!0});L.Map.addInitHook(function(){if(this.options.attributionControl){this.attributionControl=(new L.Control.Attribution()).addTo(this)}});L.control.attribution=function(t){return new L.Control.Attribution(t)};
;L.Control.Scale=L.Control.extend({options:{position:'bottomleft',maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(t){this._map=t;var i='leaflet-control-scale',n=L.DomUtil.create('div',i),e=this.options;this._addScales(e,i,n);t.on(e.updateWhenIdle?'moveend':'move',this._update,this);t.whenReady(this._update,this);return n},onRemove:function(t){t.off(this.options.updateWhenIdle?'moveend':'move',this._update,this)},_addScales:function(t,e,i){if(t.metric){this._mScale=L.DomUtil.create('div',e+'-line',i)};if(t.imperial){this._iScale=L.DomUtil.create('div',e+'-line',i)}},_update:function(){var t=this._map.getBounds(),o=t.getCenter().lat,h=6378137*Math.PI*Math.cos(o*Math.PI/180),a=h*(t.getNorthEast().lng-t.getSouthWest().lng)/180,n=this._map.getSize(),e=this.options,i=0;if(n.x>0){i=a*(e.maxWidth/n.x)};this._updateScales(e,i)},_updateScales:function(t,e){if(t.metric&&e){this._updateMetric(e)};if(t.imperial&&e){this._updateImperial(e)}},_updateMetric:function(t){var e=this._getRoundNum(t);this._mScale.style.width=this._getScaleWidth(e/t)+'px';this._mScale.innerHTML=e<1000?e+' m':(e/1000)+' km'},_updateImperial:function(t){var i=t*3.2808399,e=this._iScale,a,o,n;if(i>5280){a=i/5280;o=this._getRoundNum(a);e.style.width=this._getScaleWidth(o/a)+'px';e.innerHTML=o+' mi'}
else{n=this._getRoundNum(i);e.style.width=this._getScaleWidth(n/i)+'px';e.innerHTML=n+' ft'}},_getScaleWidth:function(t){return Math.round(this.options.maxWidth*t)-10},_getRoundNum:function(t){var i=Math.pow(10,(Math.floor(t)+'').length-1),e=t/i;e=e>=10?10:e>=5?5:e>=3?3:e>=2?2:1;return i*e}});L.control.scale=function(t){return new L.Control.Scale(t)};
;L.Control.Layers=L.Control.extend({options:{collapsed:!0,position:'topright',autoZIndex:!0},initialize:function(e,t,i){L.setOptions(this,i);this._layers={};this._lastZIndex=0;this._handlingClick=!1;for(var a in e){this._addLayer(e[a],a)};for(a in t){this._addLayer(t[a],a,!0)}},onAdd:function(e){this._initLayout();this._update();e.on('layeradd',this._onLayerChange,this).on('layerremove',this._onLayerChange,this);return this._container},onRemove:function(e){e.off('layeradd',this._onLayerChange,this).off('layerremove',this._onLayerChange,this)},addBaseLayer:function(e,t){this._addLayer(e,t);this._update();return this},addOverlay:function(e,t){this._addLayer(e,t,!0);this._update();return this},removeLayer:function(e){var t=L.stamp(e);delete this._layers[t];this._update();return this},_initLayout:function(){var t='leaflet-control-layers',e=this._container=L.DomUtil.create('div',t);e.setAttribute('aria-haspopup',!0);if(!L.Browser.touch){L.DomEvent.disableClickPropagation(e).disableScrollPropagation(e)}
else{L.DomEvent.on(e,'click',L.DomEvent.stopPropagation)};var a=this._form=L.DomUtil.create('form',t+'-list');if(this.options.collapsed){if(!L.Browser.android){L.DomEvent.on(e,'mouseover',this._expand,this).on(e,'mouseout',this._collapse,this)};var i=this._layersLink=L.DomUtil.create('a',t+'-toggle',e);i.href='#';i.title='Layers';if(L.Browser.touch){L.DomEvent.on(i,'click',L.DomEvent.stop).on(i,'click',this._expand,this)}
else{L.DomEvent.on(i,'focus',this._expand,this)};L.DomEvent.on(a,'click',function(){setTimeout(L.bind(this._onInputClick,this),0)},this);this._map.on('click',this._collapse,this)}
else{this._expand()};this._baseLayersList=L.DomUtil.create('div',t+'-base',a);this._separator=L.DomUtil.create('div',t+'-separator',a);this._overlaysList=L.DomUtil.create('div',t+'-overlays',a);e.appendChild(a)},_addLayer:function(e,t,a){var i=L.stamp(e);this._layers[i]={layer:e,name:t,overlay:a};if(this.options.autoZIndex&&e.setZIndex){this._lastZIndex++;e.setZIndex(this._lastZIndex)}},_update:function(){if(!this._container){return};this._baseLayersList.innerHTML='';this._overlaysList.innerHTML='';var a=!1,t=!1,i,e;for(i in this._layers){e=this._layers[i];this._addItem(e);t=t||e.overlay;a=a||!e.overlay};this._separator.style.display=t&&a?'':'none'},_onLayerChange:function(e){var t=this._layers[L.stamp(e.layer)];if(!t){return};if(!this._handlingClick){this._update()};var a=t.overlay?(e.type==='layeradd'?'overlayadd':'overlayremove'):(e.type==='layeradd'?'baselayerchange':null);if(a){this._map.fire(a,t)}},_createRadioElement:function(e,t){var a='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"';if(t){a+=' checked="checked"'};a+='/>';var i=document.createElement('div');i.innerHTML=a;return i.firstChild},_addItem:function(e){var a=document.createElement('label'),t,i=this._map.hasLayer(e.layer);if(e.overlay){t=document.createElement('input');t.type='checkbox';t.className='leaflet-control-layers-selector';t.defaultChecked=i}
else{t=this._createRadioElement('leaflet-base-layers',i)};t.layerId=L.stamp(e.layer);L.DomEvent.on(t,'click',this._onInputClick,this);var s=document.createElement('span');s.innerHTML=' '+e.name;a.appendChild(t);a.appendChild(s);var n=e.overlay?this._overlaysList:this._baseLayersList;n.appendChild(a);return a},_onInputClick:function(){var a,t,e,i=this._form.getElementsByTagName('input'),s=i.length;this._handlingClick=!0;for(a=0;a<s;a++){t=i[a];e=this._layers[t.layerId];if(t.checked&&!this._map.hasLayer(e.layer)){this._map.addLayer(e.layer)}
else if(!t.checked&&this._map.hasLayer(e.layer)){this._map.removeLayer(e.layer)}};this._handlingClick=!1;this._refocusOnMap()},_expand:function(){L.DomUtil.addClass(this._container,'leaflet-control-layers-expanded')},_collapse:function(){this._container.className=this._container.className.replace(' leaflet-control-layers-expanded','')}});L.control.layers=function(e,t,a){return new L.Control.Layers(e,t,a)};
;L.Control.Layers.autoHeight=L.Control.Layers.extend({onAdd:function(t){L.Control.Layers.prototype.onAdd.call(this,t);t.on('resize',this._autoHeight,this);this._autoHeight();return this._container},_autoHeight:function(){this._baseLayersList.style.maxHeight=(this._map._container.offsetHeight-86)+'px';this._baseLayersList.style.overflow='auto'}});
;L.PosAnimation=L.Class.extend({includes:L.Mixin.Events,run:function(t,i,e,s){this.stop();this._el=t;this._inProgress=!0;this._newPos=i;this.fire('start');t.style[L.DomUtil.TRANSITION]='all '+(e||0.25)+'s cubic-bezier(0,0,'+(s||0.5)+',1)';L.DomEvent.on(t,L.DomUtil.TRANSITION_END,this._onTransitionEnd,this);L.DomUtil.setPosition(t,i);L.Util.falseFn(t.offsetWidth);this._stepTimer=setInterval(L.bind(this._onStep,this),50)},stop:function(){if(!this._inProgress){return};L.DomUtil.setPosition(this._el,this._getPos());this._onTransitionEnd();L.Util.falseFn(this._el.offsetWidth)},_onStep:function(){var t=this._getPos();if(!t){this._onTransitionEnd();return};this._el._leaflet_pos=t;this.fire('step')},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var s,e,t,n=this._el,i=window.getComputedStyle(n);if(L.Browser.any3d){t=i[L.DomUtil.TRANSFORM].match(this._transformRe);if(!t){return};s=parseFloat(t[1]);e=parseFloat(t[2])}
else{s=parseFloat(i.left);e=parseFloat(i.top)};return new L.Point(s,e,!0)},_onTransitionEnd:function(){L.DomEvent.off(this._el,L.DomUtil.TRANSITION_END,this._onTransitionEnd,this);if(!this._inProgress){return};this._inProgress=!1;this._el.style[L.DomUtil.TRANSITION]='';this._el._leaflet_pos=this._newPos;clearInterval(this._stepTimer);this.fire('step').fire('end')}});
;L.Map.include({setView:function(n,t,i){t=t===undefined?this._zoom:this._limitZoom(t);n=this._limitCenter(L.latLng(n),t,this.options.maxBounds);i=i||{};if(this._panAnim){this._panAnim.stop()};if(this._loaded&&!i.reset &&i!==!0){if(i.animate!==undefined){i.zoom=L.extend({animate:i.animate},i.zoom);i.pan=L.extend({animate:i.animate},i.pan)};var e=(this._zoom!==t)?this._tryAnimatedZoom&&this._tryAnimatedZoom(n,t,i.zoom):this._tryAnimatedPan(n,i.pan);if(e){clearTimeout(this._sizeTimer);return this}};this._resetView(n,t);return this},panBy:function(i,t){i =L.point(i).round();t=t||{};if(!i.x&&!i.y){return this};if(!this._panAnim){this._panAnim=new L.PosAnimation();this._panAnim.on({'step':this._onPanTransitionStep,'end':this._onPanTransitionEnd},this)};if(!t.noMoveStart){this.fire('movestart')};if(t.animate!==!1){L.DomUtil.addClass(this._mapPane,'leaflet-pan-anim');var n=this._getMapPanePos().subtract(i);this._panAnim.run(this._mapPane,n,t.duration||0.25,t.easeLinearity)}
else{this._rawPanBy(i);this.fire('move').fire('moveend')};return this},_onPanTransitionStep:function(){this.fire('move')},_onPanTransitionEnd:function(){L.DomUtil.removeClass(this._mapPane,'leaflet-pan-anim');this.fire('moveend')},_tryAnimatedPan:function(t,i){var n =this._getCenterOffset(t)._floor();if((i&&i.animate)!==!0&&!this.getSize().contains(n)){return!1};this.panBy(n,i);return!0}});
;L.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4});if(L.DomUtil.TRANSITION){L.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&L.DomUtil.TRANSITION&&L.Browser.any3d&&!L.Browser.android23&&!L.Browser.mobileOpera;if(this._zoomAnimated){L.DomEvent.on(this._mapPane,L.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}})};L.Map.include(!L.DomUtil.TRANSITION?{}:{_catchTransitionEnd:function(i){if(this._animatingZoom&&i.propertyName.indexOf('transform')>=0){this._onZoomTransitionEnd()}},_nothingToAnimate:function(){return!this._container.getElementsByClassName('leaflet-zoom-animated').length},_tryAnimatedZoom:function(o,t,i){if(this._animatingZoom){return!0};i=i||{};if(!this._zoomAnimated||i.animate===!1||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold){return!1};var a=this.getZoomScale(t),n =this._getCenterOffset(o)._divideBy(1-1/a),e=this._getCenterLayerPoint()._add(n);if(i.animate!==!0&&!this.getSize().contains(n)){return!1};this.fire('movestart').fire('zoomstart');this._animateZoom(o,t,e,a,null,!0);return!0},_animateZoom:function(i,t,o,e,m,a,n){if(!n){this._animatingZoom=!0};L.DomUtil.addClass(this._mapPane,'leaflet-zoom-anim');this._animateToCenter=i;this._animateToZoom=t;if(L.Draggable){L.Draggable._disabled=!0};L.Util.requestAnimFrame(function(){this.fire('zoomanim',{center:i,zoom:t,origin:o,scale:e,delta:m,backwards:a});setTimeout(L.bind(this._onZoomTransitionEnd,this),250)},this)},_onZoomTransitionEnd:function(){if(!this._animatingZoom){return};this._animatingZoom=!1;L.DomUtil.removeClass(this._mapPane,'leaflet-zoom-anim');L.Util.requestAnimFrame(function(){this._resetView(this._animateToCenter,this._animateToZoom,!0,!0);if(L.Draggable){L.Draggable._disabled=!1}},this)}});
;L.TileLayer.include({_animateZoom:function(e){if(!this._animating){this._animating=!0;this._prepareBgBuffer()};var n=this._bgBuffer,a=L.DomUtil.TRANSFORM,t=e.delta?L.DomUtil.getTranslateString(e.delta):n.style[a],i=L.DomUtil.getScaleString(e.scale,e.origin);n.style[a]=e.backwards?i+' '+t:t+' '+i},_endZoomAnim:function(){var e=this._tileContainer,t=this._bgBuffer;e.style.visibility='';e.parentNode.appendChild(e);L.Util.falseFn(t.offsetWidth);var i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom){this._clearBgBuffer()};this._animating=!1},_clearBgBuffer:function(){var e=this._map;if(e&&!e._animatingZoom&&!e.touchZoom._zooming){this._bgBuffer.innerHTML='';this._bgBuffer.style[L.DomUtil.TRANSFORM]=''}},_prepareBgBuffer:function(){var i=this._tileContainer,e=this._bgBuffer,a=this._getLoadedTilesPercentage(e),t=this._getLoadedTilesPercentage(i);if(e&&a>0.5&&t<0.5){i.style.visibility='hidden';this._stopLoadingImages(i);return};e.style.visibility='hidden';e.style[L.DomUtil.TRANSFORM]='';this._tileContainer=e;e=this._bgBuffer=i;this._stopLoadingImages(e);clearTimeout(this._clearBgBufferTimer)},_getLoadedTilesPercentage:function(t){var n=t.getElementsByTagName('img'),e,i,a=0;for(e=0,i=n.length;e<i;e++){if(n[e].complete){a++}};return a/i},_stopLoadingImages:function(t){var a=Array.prototype.slice.call(t.getElementsByTagName('img')),i,n,e;for(i=0,n=a.length;i<n;i++){e=a[i];if(!e.complete){e.onload=L.Util.falseFn;e.onerror=L.Util.falseFn;e.src=L.Util.emptyImageUrl;e.parentNode.removeChild(e)}}}});
;L.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:Infinity,timeout:10000,maximumAge:0,enableHighAccuracy:!1},locate:function(o){o=this._locateOptions=L.extend(this._defaultLocateOptions,o);if(!navigator.geolocation){this._handleGeolocationError({code:0,message:'Geolocation not supported.'});return this};var i=L.bind(this._handleGeolocationResponse,this),t=L.bind(this._handleGeolocationError,this);if(o.watch){this._locationWatchId=navigator.geolocation.watchPosition(i,t,o)}
else{navigator.geolocation.getCurrentPosition(i,t,o)};return this},stopLocate:function(){if(navigator.geolocation){navigator.geolocation.clearWatch(this._locationWatchId)};if(this._locateOptions){this._locateOptions.setView=!1};return this},_handleGeolocationError:function(o){var t=o.code,i=o.message||(t===1?'permission denied':(t===2?'position unavailable':'timeout'));if(this._locateOptions.setView&&!this._loaded){this.fitWorld()};this.fire('locationerror',{code:t,message:'Geolocation error: '+i+'.'})},_handleGeolocationResponse:function(o){var t=o.coords.latitude,e=o.coords.longitude,r=new L.LatLng(t,e),i=180*o.coords.accuracy/40075017,s=i/Math.cos(L.LatLng.DEG_TO_RAD*t),n=L.latLngBounds([t-i,e-s],[t+i,e+s]),l=this._locateOptions;if(l.setView){var h=Math.min(this.getBoundsZoom(n),l.maxZoom);this.setView(r,h)};var c={latlng:r,bounds:n,timestamp:o.timestamp};for(var a in o.coords){if(typeof o.coords[a]==='number'){c[a]=o.coords[a]}};this.fire('locationfound',c)}});
;L.Control.Fullscreen=L.Control.extend({options:{position:'topleft',title:{'false':'View Fullscreen','true':'Exit Fullscreen'}},onAdd:function(e){var l=L.DomUtil.create('div','leaflet-control-fullscreen leaflet-bar leaflet-control');this.link=L.DomUtil.create('a','leaflet-control-fullscreen-button leaflet-bar-part',l);this.link.href='#';this._map=e;this._map.on('fullscreenchange',this._toggleTitle,this);this._toggleTitle();L.DomEvent.on(this.link,'click',this._click,this);return l},_click:function(e){L.DomEvent.stopPropagation(e);L.DomEvent.preventDefault(e);this._map.toggleFullscreen(this.options)},_toggleTitle:function(){this.link.title=this.options.title[this._map.isFullscreen()]}});L.Map.include({isFullscreen:function(){return this._isFullscreen||!1},toggleFullscreen:function(l){var e=this.getContainer();if(this.isFullscreen()){if(l&&l.pseudoFullscreen){this._disablePseudoFullscreen(e)}
else if(document.exitFullscreen){document.exitFullscreen()}
else if(document.mozCancelFullScreen){document.mozCancelFullScreen()}
else if(document.webkitCancelFullScreen){document.webkitCancelFullScreen()}
else if(document.msExitFullscreen){document.msExitFullscreen()}
else{this._disablePseudoFullscreen(e)}}
else{if(l&&l.pseudoFullscreen){this._enablePseudoFullscreen(e)}
else if(e.requestFullscreen){e.requestFullscreen()}
else if(e.mozRequestFullScreen){e.mozRequestFullScreen()}
else if(e.webkitRequestFullscreen){e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}
else if(e.msRequestFullscreen){e.msRequestFullscreen()}
else{this._enablePseudoFullscreen(e)}}},_enablePseudoFullscreen:function(e){L.DomUtil.addClass(e,'leaflet-pseudo-fullscreen');this._setFullscreen(!0);this.invalidateSize();this.fire('fullscreenchange')},_disablePseudoFullscreen:function(e){L.DomUtil.removeClass(e,'leaflet-pseudo-fullscreen');this._setFullscreen(!1);this.invalidateSize();this.fire('fullscreenchange')},_setFullscreen:function(e){this._isFullscreen=e;var l=this.getContainer();if(e){L.DomUtil.addClass(l,'leaflet-fullscreen-on')}
else{L.DomUtil.removeClass(l,'leaflet-fullscreen-on')}},_onFullscreenChange:function(e){var l=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;if(l===this.getContainer()&&!this._isFullscreen){this._setFullscreen(!0);this.fire('fullscreenchange')}
else if(l!==this.getContainer()&&this._isFullscreen){this._setFullscreen(!1);this.fire('fullscreenchange')}}});L.Map.mergeOptions({fullscreenControl:!1});L.Map.addInitHook(function(){if(this.options.fullscreenControl){this.fullscreenControl=new L.Control.Fullscreen(this.options.fullscreenControl);this.addControl(this.fullscreenControl)};var e;if('onfullscreenchange' in document){e='fullscreenchange'}
else if('onmozfullscreenchange' in document){e='mozfullscreenchange'}
else if('onwebkitfullscreenchange' in document){e='webkitfullscreenchange'}
else if('onmsfullscreenchange' in document){e='MSFullscreenChange'};if(e){var l=L.bind(this._onFullscreenChange,this);this.whenReady(function(){L.DomEvent.on(document,e,l)});this.on('unload',function(){L.DomEvent.off(document,e,l)})}});L.control.fullscreen=function(e){return new L.Control.Fullscreen(e)};
;L.NumberFormatter={round:function(n,e,a){var t=L.Util.formatNum(n,e)+"",r=t.split(".");if(r[1]){var i=e-r[1].length;for(;i>0;i--){r[1]+="0"};t=r.join(a||".")};return t},toDMS:function(n){var e=Math.floor(Math.abs(n)),i=(Math.abs(n)-e)*60,r=Math.floor(i),u=(i-r)*60,t=Math.round(u);if(t==60){r++;t="00"};if(r==60){e++;r="00"};if(t<10){t="0"+t};if(r<10){r="0"+r};var a="";if(n<0){a="-"};return(""+a+e+"&deg; "+r+"' "+t+"''")},createValidNumber:function(r,n){if(r&&r.length>0){var e=r.split(n||".");try{var t=Number(e.join("."));if(isNaN(t)){return undefined};return t}catch(i){return undefined}};return undefined}};
;L.Control.Coordinates=L.Control.extend({options:{position:'bottomright',decimals:4,decimalSeperator:'.',labelTemplateLat:'Lat: {y}',labelTemplateLng:'Lng: {x}',labelFormatterLat:undefined,labelFormatterLng:undefined,enableUserInput:!0,useDMS:!1,useLatLngOrder:!1,centerUserCoordinates:!1,markerType:L.marker,markerProps:{}},onAdd:function(t){this._map=t;var o='leaflet-control-coordinates',i=this._container=L.DomUtil.create('div',o),e=this.options;this._labelcontainer=L.DomUtil.create('div','uiElement label',i);this._label=L.DomUtil.create('span','labelFirst',this._labelcontainer);this._inputcontainer=L.DomUtil.create('div','uiElement input uiHidden',i);var a,n;if(e.useLatLngOrder){n=L.DomUtil.create('span','',this._inputcontainer);this._inputY=this._createInput('inputY',this._inputcontainer);a=L.DomUtil.create('span','',this._inputcontainer);this._inputX=this._createInput('inputX',this._inputcontainer)}
else{a=L.DomUtil.create('span','',this._inputcontainer);this._inputX=this._createInput('inputX',this._inputcontainer);n=L.DomUtil.create('span','',this._inputcontainer);this._inputY=this._createInput('inputY',this._inputcontainer)};a.innerHTML=e.labelTemplateLng.replace('{x}','');n.innerHTML=e.labelTemplateLat.replace('{y}','');L.DomEvent.on(this._inputX,'keyup',this._handleKeypress,this);L.DomEvent.on(this._inputY,'keyup',this._handleKeypress,this);t.on('mousemove',this._update,this);t.on('dragstart',this.collapse,this);t.whenReady(this._update,this);this._showsCoordinates=!0;if(e.enableUserInput){L.DomEvent.addListener(this._container,'click',this._switchUI,this)};return i},_createInput:function(t,i){var e=L.DomUtil.create('input',t,i);e.type='text';L.DomEvent.disableClickPropagation(e);return e},_clearMarker:function(){this._map.removeLayer(this._marker)},_handleKeypress:function(t){switch(t.keyCode){case 27:this.collapse();break;case 13:this._handleSubmit();this.collapse();break;default:this._handleSubmit();break}},_handleSubmit:function(){var i=L.NumberFormatter.createValidNumber(this._inputX.value,this.options.decimalSeperator),e=L.NumberFormatter.createValidNumber(this._inputY.value,this.options.decimalSeperator);if(i!==undefined&&e!==undefined){var t=this._marker;if(!t){t=this._marker=this._createNewMarker();t.on('click',this._clearMarker,this)};var n=new L.LatLng(e,i);t.setLatLng(n);t.addTo(this._map);if(this.options.centerUserCoordinates){this._map.setView(n,this._map.getZoom())}}},expand:function(){this._showsCoordinates=!1;this._map.off('mousemove',this._update,this);L.DomEvent.addListener(this._container,'mousemove',L.DomEvent.stop);L.DomEvent.removeListener(this._container,'click',this._switchUI,this);L.DomUtil.addClass(this._labelcontainer,'uiHidden');L.DomUtil.removeClass(this._inputcontainer,'uiHidden')},_createCoordinateLabel:function(t){var e=this.options,n,i;if(e.customLabelFcn){return e.customLabelFcn(t,e)};if(e.labelLng){n=e.labelFormatterLng(t.lng)}
else{n=L.Util.template(e.labelTemplateLng,{x:this._getNumber(t.lng,e)})};if(e.labelFormatterLat){i=e.labelFormatterLat(t.lat)}
else{i=L.Util.template(e.labelTemplateLat,{y:this._getNumber(t.lat,e)})};if(e.useLatLngOrder){return i+' '+n};return n+' '+i},_getNumber:function(t,e){var i;if(e.useDMS){i=L.NumberFormatter.toDMS(t)}
else{i=L.NumberFormatter.round(t,e.decimals,e.decimalSeperator)};return i},collapse:function(){if(!this._showsCoordinates){this._map.on('mousemove',this._update,this);this._showsCoordinates=!0;var r=this.options;L.DomEvent.addListener(this._container,'click',this._switchUI,this);L.DomEvent.removeListener(this._container,'mousemove',L.DomEvent.stop);L.DomUtil.addClass(this._inputcontainer,'uiHidden');L.DomUtil.removeClass(this._labelcontainer,'uiHidden');if(this._marker){var e=this._createNewMarker(),a=this._marker.getLatLng();e.setLatLng(a);var n=L.DomUtil.create('div',''),o=L.DomUtil.create('div','',n);o.innerHTML=this._ordinateLabel(a);var t=L.DomUtil.create('a','',n);t.innerHTML='Remove';t.href='#';var i=L.DomEvent.stopPropagation;L.DomEvent.on(t,'click',i).on(t,'mousedown',i).on(t,'dblclick',i).on(t,'click',L.DomEvent.preventDefault).on(t,'click',function(){this._map.removeLayer(e)},this);e.bindPopup(n);e.addTo(this._map);this._map.removeLayer(this._marker);this._marker=null}}},_switchUI:function(t){L.DomEvent.stop(t);L.DomEvent.stopPropagation(t);L.DomEvent.preventDefault(t);if(this._showsCoordinates){this.expand()}
else{this.collapse()}},onRemove:function(t){t.off('mousemove',this._update,this)},_update:function(t){var e=t.latlng,i=this.options;if(e){e=e.wrap();this._currentPos=e;this._inputY.value=L.NumberFormatter.round(e.lat,i.decimals,i.decimalSeperator);this._inputX.value=L.NumberFormatter.round(e.lng,i.decimals,i.decimalSeperator);this._label.innerHTML=this._createCoordinateLabel(e)}},_createNewMarker:function(){return this.options.markerType(null,this.options.markerProps)}});L.control.coordinates=function(t){return new L.Control.Coordinates(t)};L.Map.mergeOptions({coordinateControl:!1});L.Map.addInitHook(function(){if(this.options.coordinateControl){this.coordinateControl=new L.Control.Coordinates();this.addControl(this.coordinateControl)}});
(function(){L.Control.Gps=L.Control.extend({includes:L.Mixin.Events,options:{autoActive:!1,autoCenter:!1,maxZoom:null,textErr:null,callErr:null,style:{radius:5,weight:2,color:'#c20',opacity:1,fillColor:'#f23',fillOpacity:1},marker:null,accuracy:!0,title:'Center map on your location',position:'topleft',transform:function(t){return t},setView:!1},initialize:function(t){if(t&&t.style)t.style=L.Util.extend({},this.options.style,t.style);L.Util.setOptions(this,t);this._errorFunc=this.options.callErr||this.showAlert;this._isActive=!1;this._firstMoved=!1;this._currentLocation=null},onAdd:function(t){this._map=t;var i=L.DomUtil.create('div','leaflet-control-gps');this._button=L.DomUtil.create('a','gps-button',i);this._button.href='#';this._button.title=this.options.title;L.DomEvent.on(this._button,'click',L.DomEvent.stop,this).on(this._button,'click',this._switchGps,this);this._alert=L.DomUtil.create('div','gps-alert',i);this._alert.style.display='none';this._gpsMarker=this.options.marker?this.options.marker:new L.CircleMarker([0,0],this.options.style);this._map.on('locationfound',this._drawGps,this).on('locationerror',this._errorGps,this);if(this.options.autoActive)this.activate();return i},onRemove:function(t){this.deactivate()},_switchGps:function(){if(this._isActive)this.deactivate();else this.activate()},getLocation:function(){return this._currentLocation},activate:function(){this._isActive=!0;this._map.addLayer(this._gpsMarker);this._map.locate({enableHighAccuracy:!0,watch:!0,setView:this.options.setView,maxZoom:this.options.maxZoom})},deactivate:function(){this._isActive=!1;this._firstMoved=!1;this._map.stopLocate();L.DomUtil.removeClass(this._button,'active');this._map.removeLayer(this._gpsMarker);this.fire('gpsdisabled')},_drawGps:function(t){this._currentLocation=this.options.transform(t.latlng);this._gpsMarker.setLatLng(this._currentLocation);if(this._isActive&&(!this._firstMoved||this.options.autoCenter))this._moveTo(this._currentLocation);this.fire('gpslocated',{latlng:this._currentLocation,marker:this._gpsMarker});L.DomUtil.addClass(this._button,'active')},_moveTo:function(t){this._firstMoved=!0;if(this.options.maxZoom)this._map.setView(t,Math.min(this._map.getZoom(),this.options.maxZoom));else this._map.panTo(t)},_errorGps:function(t){this.deactivate();this._errorFunc.call(this,this.options.textErr||t.message)},showAlert:function(t){this._alert.style.display='block';this._alert.innerHTML=t;var i=this;clearTimeout(this.timerAlert);this.timerAlert=setTimeout(function(){i._alert.style.display='none'},2000)}});L.control.gps=function(t){return new L.Control.Gps(t)}}).call(this);
;if(typeof console=="undefined"){this.console={log:function(t){}}};L.Control.OSMGeocoder=L.Control.extend({options:{collapsed:!0,position:"topright",text:"Locate",bounds:null,email:null,callback:function(t){if(t.length==0){console.log("ERROR: didn't find a result");return};var e=t[0].boundingbox,n=new L.LatLng(e[0],e[2]),i=new L.LatLng(e[1],e[3]),o=new L.LatLngBounds([n,i]);this._map.fitBounds(o)}},_callbackId:0,initialize:function(t){L.Util.setOptions(this,t)},onAdd:function(t){this._map=t;var n="leaflet-control-geocoder",e=this._container=L.DomUtil.create("div",n);L.DomEvent.disableClickPropagation(e);var o=this._form=L.DomUtil.create("form",n+"-form"),a=this._input=document.createElement("input");a.type="text";var i=document.createElement("input");i.type="submit";i.value=this.options.text;o.appendChild(a);o.appendChild(i);L.DomEvent.addListener(o,"submit",this._geocode,this);if(this.options.collapsed){L.DomEvent.addListener(e,"mouseover",this._expand,this);L.DomEvent.addListener(e,"mouseout",this._collapse,this);var s=this._layersLink=L.DomUtil.create("a",n+"-toggle",e);s.href="#";s.title="Nominatim Geocoder";L.DomEvent.addListener(s,L.Browser.touch?"click":"focus",this._expand,this);this._map.on("movestart",this._collapse,this)}
else{this._expand()};e.appendChild(o);return e},_createSearchResult:function(t,o){var n=0.005,e=[];e[0]={};e[0]["boundingbox"]=[parseFloat(t)-n,parseFloat(t)+n,parseFloat(o)-n,parseFloat(o)+n];e[0]["class"]="boundary";e[0]["display_name"]="Position: "+t+" "+o;e[0]["lat"]=t;e[0]["lon"]=o;return e},_isLatLon:function(t){var o=/(-?\d+\.\d+)\s(-?\d+\.\d+)/,e=o.exec(t);if(e!=undefined)return e;o=/lat\D*(-?\d+\.\d+)\D*lon\D*(-?\d+\.\d+)/;e=o.exec(t);if(e!=undefined)return e;else return null},_isLatLon_decMin:function(t){console.log("is LatLon?: "+t);re=/([ns])\s*(\d+)\D*(\d+\.\d+).?\s*([ew])\s*(\d+)\D*(\d+\.\d+)/i;m=re.exec(t.toLowerCase());if((m!=undefined))return m;else return null},_geocode:function(e){L.DomEvent.preventDefault(e);var n=this._input.value;if(this._isLatLon(n)!=null){var t=this._isLatLon(n);console.log("LatLon: "+t[1]+" "+t[2]);this.options.callback.call(this,this._createSearchResult(t[1],t[2]));return}
else if(this._isLatLon_decMin(n)!=null){var t=this._isLatLon_decMin(n),o=[];o["n"]=1;o["s"]=-1;o["e"]=1;o["w"]=-1;this.options.callback.call(this,this._createSearchResult(o[t[1]]*(Number(t[2])+t[3]/60),o[t[4]]*(Number(t[5])+t[6]/60)));return};console.log(this._callbackId);window[("_l_osmgeocoder_"+this._callbackId)]=L.Util.bind(this.options.callback,this);var s={q:this._input.value,json_callback:("_l_osmgeocoder_"+this._callbackId++),format:"json"};if(this.options.bounds&&this.options.bounds!=null){if(this.options.bounds instanceof L.LatLngBounds){s.viewbox=this.options.bounds.toBBoxString();s.bounded=1}
else{console.log("bounds must be of type L.LatLngBounds");return}};if(this.options.email&&this.options.email!=null){if(typeof this.options.email=="string"){s.email=this.options.email}
else{console.log("email must be a string")}};var a=location.protocol,l=a+"//nominatim.openstreetmap.org/search"+L.Util.getParamString(s),i=document.createElement("script");i.type="text/javascript";i.src=l;i.id=this._callbackId;document.getElementsByTagName("head")[0].appendChild(i)},_expand:function(){L.DomUtil.addClass(this._container,"leaflet-control-geocoder-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-geocoder-expanded","")}});
;L.Control.Permalink=L.Control.extend({includes:L.Mixin.Events,options:{position:'bottomleft',useAnchor:!0,useLocation:!1,text:'Permalink'},initialize:function(t){L.Util.setOptions(this,t);this._params={};this._set_urlvars();this.on('update',this._set_center,this);for(var i in this){if(typeof(i)==='string'&&i.indexOf('initialize_')===0)this[i]()}},onAdd:function(t){this._container=L.DomUtil.create('div','leaflet-control-attribution leaflet-control-permalink');L.DomEvent.disableClickPropagation(this._container);this._map=t;this._href=L.DomUtil.create('a',null,this._container);this._href.innerHTML=this.options.text;t.on('moveend',this._update_center,this);this.fire('update',{params:this._params});this._update_center();if(this.options.useAnchor&&'onhashchange' in window){var e=this,i=window.onhashchange;window.onhashchange=function(){e._set_urlvars();if(i)return i()}};this.fire('add',{map:t});return this._container},_update_center:function(){if(!this._map)return;var t=this._round_point(this._map.getCenter());this._update({zoom:String(this._map.getZoom()),lat:String(t.lat),lon:String(t.lng)})},_update_href:function(){var i=L.Util.getParamString(this._params),t='?';if(this.options.useAnchor)t='#';var e=this._url_base+t+i.slice(1);if(this._href)this._href.setAttribute('href',e);if(this.options.useLocation)location.replace('#'+i.slice(1));return e},_round_point:function(t){var r=this._map.getBounds(),n=this._map.getSize(),a=r.getNorthEast(),e=r.getSouthWest(),i=function(t,i){if(i===0)return t;var e=1;while(i<1&&i>-1){t*=10;i*=10;e*=10};return Math.floor(t)/e};t.lat=i(t.lat,(a.lat-e.lat)/n.y);t.lng=i(t.lng,(a.lng-e.lng)/n.x);return t},_update:function(t){for(var i in t){if(!t.hasOwnProperty(i))continue;if(t[i]!==null&&t[i]!==undefined)this._params[i]=t[i];else delete this._params[i]};this._update_href()},_set_urlvars:function(){var t;if(this.options.useAnchor){t=L.UrlUtil.queryParse(L.UrlUtil.hash());this._url_base=window.location.href.split('#')[0]}
else{t=L.UrlUtil.queryParse(L.UrlUtil.query());this._url_base=window.location.href.split('#')[0].split('?')[0]};function i(t,e){for(var i in t)if(t.hasOwnProperty(i)&&t[i]!==e[i])return!1;return!0};if(i(t,this._params)&&i(this._params,t))return;this._params=t;this._update_href();this.fire('update',{params:this._params})},_set_center:function(t){var i=t.params;if(i.zoom===undefined||i.lat===undefined||i.lon===undefined)return;this._map.setView(new L.LatLng(i.lat,i.lon),i.zoom)}});L.UrlUtil={queryParse:function(t){var n={};var a='&';if(t.search('&amp;')!==-1)a='&amp;';var r=t.split(a);for(var i=0;i<r.length;i++){var e=r[i].split('=');if(e.length!==2)continue;n[e[0]]=decodeURI(e[1])};return n},query:function(){var i=window.location.href.split('#')[0],t=i.indexOf('?');if(t<0)return'';return i.slice(t+1)},hash:function(){return window.location.hash.slice(1)},updateParamString:function(t,i){var n=L.UrlUtil.queryParse(t);for(var e in i){if(i.hasOwnProperty(e))n[e]=i[e]};return L.Util.getParamString(n).slice(1)}};
;L.Control.Permalink.include({initialize_layer:function(){this.on('update',this._set_layer,this);this.on('add',this._onadd_layer,this)},_onadd_layer:function(){this._map.on('layeradd',this._update_layer,this);this._map.on('layerremove',this._update_layer,this);this._update_layer()},_update_layer:function(){if(!this.options.layers)return;var a=this.options.layers.currentBaseLayer();if(a)this._update({layer:a.name})},_set_layer:function(e){var a=e.params;if(!this.options.layers||!a.layer)return;this.options.layers.chooseBaseLayer(a.layer)}});L.Control.Layers.include({chooseBaseLayer:function(i){var e,a;for(var r in this._layers){if(!this._layers.hasOwnProperty(r))continue;a=this._layers[r];if(!a.overlay&&a.name===i)e=a.layer};if(!e||this._map.hasLayer(e))return;for(var t in this._layers){if(!this._layers.hasOwnProperty(t))continue;a=this._layers[t];if(!a.overlay&&this._map.hasLayer(a.layer))this._map.removeLayer(a.layer)};this._map.addLayer(e);this._update()},currentBaseLayer:function(){for(var e in this._layers){if(!this._layers.hasOwnProperty(e))continue;var a=this._layers[e];if(a.overlay)continue;if(!a.overlay&&this._map.hasLayer(a.layer))return a}}});
;L.Control.Permalink.Cookies=L.Control.Permalink.extend({options:{useAnchor:!1,move:!0},onAdd:function(t){var o=document.cookie.match(/permalink=([^;]+)/);if(o&&!this._params.zoom)this._params=L.UrlUtil.queryParse(o[1]);return L.Control.Permalink.prototype.onAdd.call(this,t)},_set_center:function(o){var t=o.params;if(t.zoom&&t.lat&&t.lon&&this.options.move)this._map.setView(new L.LatLng(t.lat,t.lon),t.zoom,{reset:!0})},_set_layer:function(t){if(this.options.move)L.Control.Permalink.prototype._set_layer.call(this,t)},_update_href:function(){document.cookie='permalink='+L.Util.getParamString(this._params).substring(1)+';path=/';return L.Control.Permalink.prototype._update_href.call(this)}});
;L.Map.addInitHook(function(){if(!this._container.innerHeight){this.autoHeight();L.DomEvent['on'](window,'resize',this.autoHeight,this)}});L.Map.include({autoHeight:function(){this._container.style.height=Math.min(this._container.offsetWidth,window.innerHeight-20)+'px';this._onResize()}});
;if(navigator.userAgent.search(/arach|archiver|bot|crawl|curl|factory|index|partner|rss|seek|search|semantic|scoot|spider|spyder|yandex/i)!=-1)L.Map.prototype.addLayer=function(){};
!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var s;"undefined"!=typeof window?s=window:"undefined"!=typeof global?s=global:"undefined"!=typeof self&&(s=self),s.proj4=t()}}(function(){var i,n,s;return(function t(s,n,i){function a(o,r){if(!n[o]){if(!s[o]){var m=typeof require=="function"&&require;if(!r&&m)return m(o,!0);if(e)return e(o,!0);throw new Error("Cannot find module '"+o+"'")};var h=n[o]={exports:{}};s[o][0].call(h.exports,function(t){var n=s[o][1][t];return a(n?n:t)},h,h.exports,t,s,n,i)};return n[o].exports};var e=typeof require=="function"&&require;for(var o=0;o<i.length;o++)a(i[o]);return a})({1:[function(t,s,n){},{"mgrs":66}],2:[function(t,s,n){var e=t("./parseCode"),a=t("./extend"),r=t("./projections"),o=t("./deriveConstants");function i(t,s){if(!(this instanceof i)){return new i(t)};s=s||function(t){if(t){throw t}};var n=e(t);if(typeof n!=="object"){s(t);return};var r=o(n),h=i.projections.get(r.projName);if(h){a(this,r);a(this,h);this.init();s(null,this)}
else{s(t)}};i.projections=r;i.projections.start();s.exports=i},{"./deriveConstants":32,"./extend":33,"./parseCode":36,"./projections":38}],3:[function(t,s,n){},{}],4:[function(t,s,n){},{"./sign":21}],5:[function(t,s,n){var a=Math.PI*2,i=t("./sign");s.exports=function(t){return(Math.abs(t)<Math.PI)?t:(t-(i(t)*a))}},{"./sign":21}],6:[function(t,s,n){},{}],7:[function(t,s,n){s.exports=function(t){return(1-0.25*t*(1+t/16*(3+1.25*t)))}},{}],8:[function(t,s,n){s.exports=function(t){return(0.375*t*(1+0.25*t*(1+0.46875*t)))}},{}],9:[function(t,s,n){s.exports=function(t){return(0.05859375*t*t*(1+0.75*t))}},{}],10:[function(t,s,n){s.exports=function(t){return(t*t*t*(35/3072))}},{}],11:[function(t,s,n){},{}],12:[function(t,s,n){},{}],13:[function(t,s,n){},{}],14:[function(t,s,n){s.exports=function(t,s,n,a,i){return(t*i-s*Math.sin(2*i)+n*Math.sin(4*i)-a*Math.sin(6*i))}},{}],15:[function(t,s,n){s.exports=function(t,s,n){var i=t*s;return n/(Math.sqrt(1-i*i))}},{}],16:[function(t,s,n){var i=Math.PI/2;s.exports=function(t,s){var r=0.5*t,a,o,n=i-2*Math.atan(s);for(var e=0;e<=15;e++){a=t*Math.sin(n);o=i-2*Math.atan(s*(Math.pow(((1-a)/(1+a)),r)))-n;n+=o;if(Math.abs(o)<=0.0000000001){return n}};return-9999}},{}],17:[function(t,s,n){},{}],18:[function(t,s,n){},{"./pj_mlfn":19}],19:[function(t,s,n){},{}],20:[function(t,s,n){},{}],21:[function(t,s,n){},{}],22:[function(t,s,n){},{}],23:[function(t,s,n){s.exports=function(t){var s={x:t[0],y:t[1]};if(t.length>2){s.z=t[2]};if(t.length>3){s.m=t[3]};return s}},{}],24:[function(t,s,n){var i=Math.PI/2;s.exports=function(t,s,n){var a=t*n,o=0.5*t;a=Math.pow(((1-a)/(1+a)),o);return(Math.tan(0.5*(i-s))/a)}},{}],25:[function(t,s,n){n.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"}},{}],26:[function(t,s,n){n.airy={a:6377563.396,b:6356256.910,ellipseName:"Airy 1830"};n.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"};n.WGS84={a:6378137.0,rf:298.257223563,ellipseName:"WGS 84"};n.sphere={a:6370997.0,b:6370997.0,ellipseName:"Normal Sphere (r=6370997)"}},{}],27:[function(t,s,n){},{}],28:[function(t,s,n){var i=t("./Proj"),e=t("./transform"),r=i("WGS84");function a(t,s,n){var i;if(Array.isArray(n)){i=e(t,s,n);if(n.length===3){return[i.x,i.y,i.z]}
else{return[i.x,i.y]}}
else{return e(t,s,n)}};function o(t){if(t instanceof i){return t};if(t.oProj){return t.oProj};return i(t)};function h(t,s,n){t=o(t);var e=!1,i;if(typeof s==="undefined"){s=t;t=r;e=!0}
else if(typeof s.x!=="undefined"||Array.isArray(s)){n=s;s=t;t=r;e=!0};s=o(s);if(n){return a(t,s,n)}
else{i={forward:function(n){return a(t,s,n)},inverse:function(n){return a(s,t,n)}};if(e){i.oProj=s};return i}};s.exports=h},{"./Proj":2,"./transform":64}],29:[function(t,s,n){var i=Math.PI/2,e=1,r=2,o=3,c=4,m=5,h=4.84813681109535993589914102357e-6,u=1.0026000,f=0.38268343236508977,a=function(t){if(!(this instanceof a)){return new a(t)};this.datum_type=c;if(!t){return};if(t.datumCode&&t.datumCode==="none"){this.datum_type=m};if(t.datum_params){for(var s=0;s<t.datum_params.length;s++){t.datum_params[s]=parseFloat(t.datum_params[s])};if(t.datum_params[0]!==0||t.datum_params[1]!==0||t.datum_params[2]!==0){this.datum_type=e};if(t.datum_params.length>3){if(t.datum_params[3]!==0||t.datum_params[4]!==0||t.datum_params[5]!==0||t.datum_params[6]!==0){this.datum_type=r;t.datum_params[3]*=h;t.datum_params[4]*=h;t.datum_params[5]*=h;t.datum_params[6]=(t.datum_params[6]/1000000.0)+1.0}}};this.datum_type=t.grids?o:this.datum_type;this.a=t.a;this.b=t.b;this.es=t.es;this.ep2=t.ep2;this.datum_params=t.datum_params;if(this.datum_type===o){this.grids=t.grids}};a.prototype={compare_datums:function(t){if(this.datum_type!==t.datum_type){return!1}
else if(this.a!==t.a||Math.abs(this.es-t.es)>0.000000000050){return!1}
else if(this.datum_type===e){return(this.datum_params[0]===t.datum_params[0]&&this.datum_params[1]===t.datum_params[1]&&this.datum_params[2]===t.datum_params[2])}
else if(this.datum_type===r){return(this.datum_params[0]===t.datum_params[0]&&this.datum_params[1]===t.datum_params[1]&&this.datum_params[2]===t.datum_params[2]&&this.datum_params[3]===t.datum_params[3]&&this.datum_params[4]===t.datum_params[4]&&this.datum_params[5]===t.datum_params[5]&&this.datum_params[6]===t.datum_params[6])}
else if(this.datum_type===o||t.datum_type===o){return this.nadgrids===t.nadgrids}
else{return!0}},geodetic_to_geocentric:function(t){var o=t.x,s=t.y,e=t.z?t.z:0,c,m,u,f=0,a,n,h,r;if(s<-i&&s>-1.001*i){s=-i}
else if(s>i&&s<1.001*i){s=i}
else if((s<-i)||(s>i)){return null};if(o>Math.PI){o-=(2*Math.PI)};n=Math.sin(s);r=Math.cos(s);h=n*n;a=this.a/(Math.sqrt(1.0e0-this.es*h));c=(a+e)*r*Math.cos(o);m=(a+e)*r*Math.sin(o);u=((a*(1-this.es))+e)*n;t.x=c;t.y=m;t.z=u;return f},geocentric_to_geodetic:function(t){var d=1e-12,w=(d*d),P=30,l,p,b,n,a,M,f,u,s,c,m,x,v,y,o=t.x,e=t.y,h=t.z?t.z:0.0,j,g,r;v=!1;l=Math.sqrt(o*o+e*e);p=Math.sqrt(o*o+e*e+h*h);if(l/this.a<d){v=!0;j=0.0;if(p/this.a<d){g=i;r=-this.b;return}}
else{j=Math.atan2(e,o)};b=h/p;n=l/p;a=1.0/Math.sqrt(1.0-this.es*(2.0-this.es)*n*n);u=n*(1.0-this.es)*a;s=b*a;y=0;do{y++;f=this.a/Math.sqrt(1.0-this.es*s*s);r=l*u+h*s-f*(1.0-this.es*s*s);M=this.es*f/(f+r);a=1.0/Math.sqrt(1.0-M*(2.0-M)*n*n);c=n*(1.0-M)*a;m=b*a;x=m*u-c*s;u=c;s=m}
while(x*x>w&&y<P);g=Math.atan(m/Math.abs(c));t.x=j;t.y=g;t.z=r;return t},geocentric_to_wgs84:function(t){if(this.datum_type===e){t.x+=this.datum_params[0];t.y+=this.datum_params[1];t.z+=this.datum_params[2]}
else if(this.datum_type===r){var c=this.datum_params[0],u=this.datum_params[1],f=this.datum_params[2],n=this.datum_params[3],a=this.datum_params[4],i=this.datum_params[5],s=this.datum_params[6],m=s*(t.x-i*t.y+a*t.z)+c,o=s*(i*t.x+t.y-n*t.z)+u,h=s*(-a*t.x+n*t.y+t.z)+f;t.x=m;t.y=o;t.z=h}},geocentric_from_wgs84:function(t){if(this.datum_type===e){t.x-=this.datum_params[0];t.y-=this.datum_params[1];t.z-=this.datum_params[2]}
else if(this.datum_type===r){var c=this.datum_params[0],f=this.datum_params[1],u=this.datum_params[2],m=this.datum_params[3],h=this.datum_params[4],o=this.datum_params[5],s=this.datum_params[6],n=(t.x-c)/s,i=(t.y-f)/s,a=(t.z-u)/s;t.x=n+o*i-h*a;t.y=-o*n+i+m*a;t.z=h*n-m*i+a}}};s.exports=a},{}],30:[function(t,s,n){var r=1,e=2,i=3,h=5,a=6378137,o=0.006694379990141316;s.exports=function(t,s,n){var l,u,p;function c(t){return(t===r||t===e)};if(t.compare_datums(s)){return n};if(t.datum_type===h||s.datum_type===h){return n};var f=t.a,M=t.es,d=s.a,g=s.es,m=t.datum_type;if(m===i){if(this.apply_gridshift(t,0,n)===0){t.a=a;t.es=o}
else{if(!t.datum_params){t.a=f;t.es=t.es;return n};l=1;for(u=0,p=t.datum_params.length;u<p;u++){l*=t.datum_params[u]};if(l===0){t.a=f;t.es=t.es;return n};if(t.datum_params.length>3){m=e}
else{m=r}}};if(s.datum_type===i){s.a=a;s.es=o};if(t.es!==s.es||t.a!==s.a||c(m)||c(s.datum_type)){t.geodetic_to_geocentric(n);if(c(t.datum_type)){t.geocentric_to_wgs84(n)};if(c(s.datum_type)){s.geocentric_from_wgs84(n)};s.geocentric_to_geodetic(n)};if(s.datum_type===i){this.apply_gridshift(s,1,n)};t.a=f;t.es=M;s.a=d;s.es=g;return n}},{}],31:[function(t,s,n){var o=t("./global"),e=t("./projString"),a=t("./wkt");function i(t){var n=this;if(arguments.length===2){var s=arguments[1];if(typeof s==="string"){if(s[0]==="+"){i[t]=e(arguments[1])}
else{i[t]=a(arguments[1])}}
else{i[t]=s}}
else if(arguments.length===1){if(Array.isArray(t)){return t.map(function(t){if(Array.isArray(t)){i.apply(n,t)}
else{i(t)}})}
else if(typeof t==="string"){if(t in i){return i[t]}}
else if("EPSG" in t){i["EPSG:"+t.EPSG]=t}
else if("ESRI" in t){i["ESRI:"+t.ESRI]=t}
else if("IAU2000" in t){i["IAU2000:"+t.IAU2000]=t}
else{console.log(t)};return}};o(i);s.exports=i},{"./global":34,"./projString":37,"./wkt":65}],32:[function(t,s,n){var h=t("./constants/Datum"),i=t("./constants/Ellipsoid"),r=t("./extend"),m=t("./datum"),c=1.0e-10,e=0.1666666666666666667,a=0.04722222222222222222,o=0.02215608465608465608;s.exports=function(t){if(t.datumCode&&t.datumCode!=="none"){var s=h[t.datumCode];if(s){t.datum_params=s.towgs84?s.towgs84.split(","):null;t.ellps=s.ellipse;t.datumName=s.datumName?s.datumName:t.datumCode}};if(!t.a){var n=i[t.ellps]?i[t.ellps]:i.WGS84;r(t,n)};if(t.rf&&!t.b){t.b=(1.0-1.0/t.rf)*t.a};if(t.rf===0||Math.abs(t.a-t.b)<c){t.sphere=!0;t.b=t.a};t.a2=t.a*t.a;t.b2=t.b*t.b;t.es=(t.a2-t.b2)/t.a2;t.e=Math.sqrt(t.es);if(t.R_A){t.a*=1-t.es*(e+t.es*(a+t.es*o));t.a2=t.a*t.a;t.b2=t.b*t.b;t.es=0};t.ep2=(t.a2-t.b2)/t.b2;if(!t.k0){t.k0=1.0};if(!t.axis){t.axis="enu"};t.datum=m(t);return t}},{"./constants/Datum":25,"./constants/Ellipsoid":26,"./datum":29,"./extend":33}],33:[function(t,s,n){s.exports=function(t,s){t=t||{};var i,n;if(!s){return t};for(n in s){i=s[n];if(i!==undefined){t[n]=i}};return t}},{}],34:[function(t,s,n){s.exports=function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees");t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees");t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");t.WGS84=t["EPSG:4326"];t["EPSG:3785"]=t["EPSG:3857"];t.GOOGLE=t["EPSG:3857"];t["EPSG:900913"]=t["EPSG:3857"];t["EPSG:102113"]=t["EPSG:3857"]}},{}],35:[function(t,s,n){var i=t("./core");i.defaultDatum="WGS84";i.Proj=t("./Proj");i.WGS84=new i.Proj("WGS84");i.Point=t("./Point");i.toPoint=t("./common/toPoint");i.defs=t("./defs");i.transform=t("./transform");i.mgrs=t("mgrs");i.version=t("../package.json").version;t("./includedProjections")(i);s.exports=i},{"../package.json":67,"./Point":1,"./Proj":2,"./common/toPoint":23,"./core":28,"./defs":31,"./includedProjections":"gWUPNW","./transform":64,"mgrs":66}],36:[function(t,s,n){var i=t("./defs"),h=t("./wkt"),r=t("./projString");function m(t){return typeof t==="string"};function c(t){return t in i};function o(t){var s=["GEOGCS","GEOCCS","PROJCS","LOCAL_CS"];return s.reduce(function(s,n){return s+1+t.indexOf(n)},0)};function a(t){return t[0]==="+"};function e(t){if(m(t)){if(c(t)){return i[t]}
else if(o(t)){return h(t)}
else if(a(t)){return r(t)}}
else{return t}};s.exports=e},{"./defs":31,"./projString":37,"./wkt":65}],37:[function(t,s,n){var i=0.01745329251994329577,a=t("./constants/PrimeMeridian");s.exports=function(t){var s={};var r={};t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).forEach(function(t){var s=t.split("=");s.push(!0);r[s[0].toLowerCase()]=s[1]});var n,e,o,h={proj:"projName",datum:"datumCode",rf:function(t){s.rf=parseFloat(t,10)},lat_0:function(t){s.lat0=t*i},lat_1:function(t){s.lat1=t*i},lat_2:function(t){s.lat2=t*i},lat_ts:function(t){s.lat_ts=t*i},lon_0:function(t){s.long0=t*i},lon_1:function(t){s.long1=t*i},lon_2:function(t){s.long2=t*i},alpha:function(t){s.alpha=parseFloat(t)*i},lonc:function(t){s.longc=t*i},x_0:function(t){s.x0=parseFloat(t,10)},y_0:function(t){s.y0=parseFloat(t,10)},k_0:function(t){s.k0=parseFloat(t,10)},k:function(t){s.k0=parseFloat(t,10)},r_a:function(){s.R_A=!0},zone:function(t){s.zone=parseInt(t,10)},south:function(){s.utmSouth=!0},towgs84:function(t){s.datum_params=t.split(",").map(function(t){return parseFloat(t,10)})},to_meter:function(t){s.to_meter=parseFloat(t,10)},from_greenwich:function(t){s.from_greenwich=t*i},pm:function(t){s.from_greenwich=(a[t]?a[t]:parseFloat(t,10))*i},nadgrids:function(t){if(t==="@null"){s.datumCode="none"}
else{s.nadgrids=t}},axis:function(t){var n="ewnsud";if(t.length===3&&n.indexOf(t.substr(0,1))!==-1&&n.indexOf(t.substr(1,1))!==-1&&n.indexOf(t.substr(2,1))!==-1){s.axis=t}}};for(n in r){e=r[n];if(n in h){o=h[n];if(typeof o==="function"){o(e)}
else{s[o]=e}}
else{s[n]=e}};if(typeof s.datumCode==="string"&&s.datumCode!=="WGS84"){s.datumCode=s.datumCode.toLowerCase()};return s}},{"./constants/PrimeMeridian":27}],38:[function(t,s,n){var e=[t("./projections/merc"),t("./projections/longlat")],i={};var a=[];function o(t,s){var n=a.length;if(!t.names){return!0};a[n]=t;t.names.forEach(function(t){i[t.toLowerCase()]=n});return this};n.add=o;n.get =function(t){if(!t){return!1};var s=t.toLowerCase();if(typeof i[s]!=="undefined"&&a[i[s]]){return a[i[s]]}};n.start=function(){e.forEach(o)}},{"./projections/longlat":50,"./projections/merc":51}],39:[function(t,s,n){var o=1.0e-10,e=t("../common/msfnz"),i=t("../common/qsfnz"),a=t("../common/adjust_lon"),r=t("../common/asinz");n.init=function(){if(Math.abs(this.lat1+this.lat2)<o){return};this.temp=this.b/this.a;this.es=1-Math.pow(this.temp,2);this.e3=Math.sqrt(this.es);this.sin_po=Math.sin(this.lat1);this.cos_po=Math.cos(this.lat1);this.t1=this.sin_po;this.con=this.sin_po;this.ms1=e(this.e3,this.sin_po,this.cos_po);this.qs1=i(this.e3,this.sin_po,this.cos_po);this.sin_po=Math.sin(this.lat2);this.cos_po=Math.cos(this.lat2);this.t2=this.sin_po;this.ms2=e(this.e3,this.sin_po,this.cos_po);this.qs2=i(this.e3,this.sin_po,this.cos_po);this.sin_po=Math.sin(this.lat0);this.cos_po=Math.cos(this.lat0);this.t3=this.sin_po;this.qs0=i(this.e3,this.sin_po,this.cos_po);if(Math.abs(this.lat1-this.lat2)>o){this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1)}
else{this.ns0=this.con};this.c=this.ms1*this.ms1+this.ns0*this.qs1;this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0};n.forward=function(t){var r=t.x,s=t.y;this.sin_phi=Math.sin(s);this.cos_phi=Math.cos(s);var e=i(this.e3,this.sin_phi,this.cos_phi),o=this.a*Math.sqrt(this.c-this.ns0*e)/this.ns0,n=this.ns0*a(r-this.long0),m=o*Math.sin(n)+this.x0,h=this.rh-o*Math.cos(n)+this.y0;t.x=m;t.y=h;return t};n.inverse=function(t){var n,e,s,o,r,i;t.x-=this.x0;t.y=this.rh-t.y+this.y0;if(this.ns0>=0){n=Math.sqrt(t.x*t.x+t.y*t.y);s=1}
else{n=-Math.sqrt(t.x*t.x+t.y*t.y);s=-1};o=0;if(n!==0){o=Math.atan2(s*t.x,s*t.y)};s=n*this.ns0/this.a;if(this.sphere){i=Math.asin((this.c-s*s)/(2*this.ns0))}
else{e=(this.c-s*s)/this.ns0;i=this.phi1z(this.e3,e)};r=a(o/this.ns0+this.long0);t.x=r;t.y=i;return t};n.names=["Albers_Conic_Equal_Area","Albers","aea"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/msfnz":15,"../common/qsfnz":20}],40:[function(t,s,n){var m=t("../common/adjust_lon"),c=Math.PI/2,u=1.0e-10,h=t("../common/mlfn"),f=t("../common/e0fn"),l=t("../common/e1fn"),e=t("../common/e2fn"),a=t("../common/e3fn"),i=t("../common/gN"),r=t("../common/asinz"),o=t("../common/imlfn");n.init=function(){this.sin_p12=Math.sin(this.lat0);this.cos_p12=Math.cos(this.lat0)};n.names=["Azimuthal_Equidistant","aeqd"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/imlfn":12,"../common/mlfn":14}],41:[function(t,s,n){var r=t("../common/mlfn"),e=t("../common/e0fn"),i=t("../common/e1fn"),o=t("../common/e2fn"),a=t("../common/e3fn"),f=t("../common/gN"),u=t("../common/adjust_lon"),l=t("../common/adjust_lat"),c=t("../common/imlfn"),h=Math.PI/2,m=1.0e-10;n.init=function(){if(!this.sphere){this.e0=e(this.es);this.e1=i(this.es);this.e2=o(this.es);this.e3=a(this.es);this.ml0=this.a*r(this.e0,this.e1,this.e2,this.e3,this.lat0)}};n.names=["Cassini","Cassini_Soldner","cass"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/imlfn":12,"../common/mlfn":14}],42:[function(t,s,n){var o=t("../common/adjust_lon"),e=t("../common/qsfnz"),i=t("../common/msfnz"),a=t("../common/iqsfnz");n.init=function(){if(!this.sphere){this.k0=i(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))}};n.names=["cea"]},{"../common/adjust_lon":5,"../common/iqsfnz":13,"../common/msfnz":15,"../common/qsfnz":20}],43:[function(t,s,n){},{"../common/adjust_lat":4,"../common/adjust_lon":5}],44:[function(t,s,n){},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/imlfn":12,"../common/mlfn":14,"../common/msfnz":15}],45:[function(t,s,n){},{"../common/srat":22}],46:[function(t,s,n){},{"../common/adjust_lon":5,"../common/asinz":6}],47:[function(t,s,n){},{"../common/adjust_lon":5}],48:[function(t,s,n){},{"../common/adjust_lon":5,"../common/qsfnz":20}],49:[function(t,s,n){var i=1.0e-10,r=t("../common/msfnz"),a=t("../common/tsfnz"),o=Math.PI/2,m=t("../common/sign"),e=t("../common/adjust_lon"),h=t("../common/phi2z");n.init=function(){if(!this.lat2){this.lat2=this.lat1};if(!this.k0){this.k0=1};this.x0=this.x0||0;this.y0=this.y0||0;if(Math.abs(this.lat1+this.lat2)<i){return};var s=this.b/this.a;this.e=Math.sqrt(1-s*s);var t=Math.sin(this.lat1),h=Math.cos(this.lat1),e=r(this.e,t,h),n=a(this.e,this.lat1,t),o=Math.sin(this.lat2),u=Math.cos(this.lat2),c=r(this.e,o,u),f=a(this.e,this.lat2,o),m=a(this.e,this.lat0,Math.sin(this.lat0));if(Math.abs(this.lat1-this.lat2)>i){this.ns=Math.log(e/c)/Math.log(n/f)}
else{this.ns=t};if(isNaN(this.ns)){this.ns=t};this.f0=e/(this.ns*Math.pow(n,this.ns));this.rh=this.a*this.f0*Math.pow(m,this.ns);if(!this.title){this.title="Lambert Conformal Conic"}};n.forward=function(t){var u=t.x,s=t.y;if(Math.abs(2*Math.abs(s)-Math.PI)<=i){s=m(s)*(o-2*i)};var r=Math.abs(Math.abs(s)-o),h,n;if(r>i){h=a(this.e,s,Math.sin(s));n=this.a*this.f0*Math.pow(h,this.ns)}
else{r=s*this.ns;if(r<=0){return null};n=0};var c=this.ns*e(u-this.long0);t.x=this.k0*(n*Math.sin(c))+this.x0;t.y=this.k0*(this.rh-n*Math.cos(c))+this.y0;return t};n.inverse=function(t){var n,s,m,r,u,i=(t.x-this.x0)/this.k0,a=(this.rh-(t.y-this.y0)/this.k0);if(this.ns>0){n=Math.sqrt(i*i+a*a);s=1}
else{n=-Math.sqrt(i*i+a*a);s=-1};var c=0;if(n!==0){c=Math.atan2((s*i),(s*a))};if((n!==0)||(this.ns>0)){s=1/this.ns;m=Math.pow((n/(this.a*this.f0)),s);r=h(this.e,m);if(r===-9999){return null}}
else{r=-o};u=e(c/this.ns+this.long0);t.x=u;t.y=r;return t};n.names=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/sign":21,"../common/tsfnz":24}],50:[function(t,s,n){n.init=function(){};function i(t){return t};n.forward=i;n.inverse=i;n.names=["longlat","identity"]},{}],51:[function(t,s,n){},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/tsfnz":24}],52:[function(t,s,n){},{"../common/adjust_lon":5}],53:[function(t,s,n){},{"../common/adjust_lon":5}],54:[function(t,s,n){},{}],55:[function(t,s,n){},{"../common/adjust_lon":5,"../common/phi2z":16,"../common/tsfnz":24}],56:[function(t,s,n){},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/mlfn":14}],57:[function(t,s,n){},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/asinz":6,"../common/pj_enfn":17,"../common/pj_inv_mlfn":18,"../common/pj_mlfn":19}],58:[function(t,s,n){n.init=function(){var i=this.lat0;this.lambda0=this.long0;var s=Math.sin(i),o=this.a,m=this.rf,a=1/m,t=2*a-Math.pow(a,2),n=this.e=Math.sqrt(t);this.R=this.k0*o*Math.sqrt(1-t)/(1-t*Math.pow(s,2));this.alpha=Math.sqrt(1+t/(1-t)*Math.pow(Math.cos(i),4));this.b0=Math.asin(s/this.alpha);var h=Math.log(Math.tan(Math.PI/4+this.b0/2)),e=Math.log(Math.tan(Math.PI/4+i/2)),r=Math.log((1+n*s)/(1-n*s));this.K=h-this.alpha*e+this.alpha*n/2*r};n.forward=function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),o=-this.alpha*(e+r)+this.K,n=2*(Math.atan(Math.exp(o))-Math.PI/4),s=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(n)+Math.cos(this.b0)*Math.cos(s))),i=Math.asin(Math.cos(this.b0)*Math.sin(n)-Math.sin(this.b0)*Math.cos(n)*Math.cos(s));t.y=this.R/2*Math.log((1+Math.sin(i))/(1-Math.sin(i)))+this.y0;t.x=this.R*a+this.x0;return t};n.inverse=function(t){var h=t.x-this.x0,m=t.y-this.y0,i=h/this.R,n=2*(Math.atan(Math.exp(m/this.R))-Math.PI/4),e=Math.asin(Math.cos(this.b0)*Math.sin(n)+Math.sin(this.b0)*Math.cos(n)*Math.cos(i)),c=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(n))),u=this.lambda0+c/this.alpha,o=0,s=e,a=-1000,r=0;while(Math.abs(s-a)>0.0000001){if(++r>20){return};o=1/this.alpha*(Math.log(Math.tan(Math.PI/4+e/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(s))/2));a=s;s=2*Math.atan(Math.exp(o))-Math.PI/2};t.x=u;t.y=s;return t};n.names=["somerc"]},{}],59:[function(t,s,n){},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/sign":21,"../common/tsfnz":24}],60:[function(t,s,n){},{"../common/adjust_lon":5,"./gauss":45}],61:[function(t,s,n){var c=t("../common/e0fn"),u=t("../common/e1fn"),f=t("../common/e2fn"),m=t("../common/e3fn"),a=t("../common/mlfn"),i=t("../common/adjust_lon"),o=Math.PI/2,h=1.0e-10,e=t("../common/sign"),r=t("../common/asinz");n.init=function(){this.e0=c(this.es);this.e1=u(this.es);this.e2=f(this.es);this.e3=m(this.es);this.ml0=this.a*a(this.e0,this.e1,this.e2,this.e3,this.lat0)};n.forward=function(t){var j=t.x,o=t.y,f=i(j-this.long0),n,u,c,M=Math.sin(o),m=Math.cos(o);if(this.sphere){var r=m*Math.sin(f);if((Math.abs(Math.abs(r)-1))<0.0000000001){return(93)}
else{u=0.5*this.a*this.k0*Math.log((1+r)/(1-r));n=Math.acos(m*Math.cos(f)/Math.sqrt(1-r*r));if(o<0){n=-n};c=this.a*this.k0*(n-this.lat0)}}
else{var l=m*f,h=Math.pow(l,2),e=this.ep2*Math.pow(m,2),p=Math.tan(o),s=Math.pow(p,2);n=1-this.es*Math.pow(M,2);var d=this.a/Math.sqrt(n),g=this.a*a(this.e0,this.e1,this.e2,this.e3,o);u=this.k0*d*l*(1+h/6*(1-s+e+h/20*(5-18*s+Math.pow(s,2)+72*e-58*this.ep2)))+this.x0;c=this.k0*(g-this.ml0+d*p*(h*(0.5+h/24*(5-s+9*e+4*Math.pow(e,2)+h/30*(61-58*s+Math.pow(s,2)+600*e-330*this.ep2)))))+this.y0};t.x=u;t.y=c;return t};n.inverse=function(t){var n,s,M,j,q=6,a,u;if(this.sphere){var P=Math.exp(t.x/(this.a*this.k0)),l=0.5*(P-1/P),y=this.lat0+t.y/(this.a*this.k0),p=Math.cos(y);n=Math.sqrt((1-p*p)/(1+l*l));a=r(n);if(y<0){a=-a};if((l===0)&&(p===0)){u=this.long0}
else{u=i(Math.atan2(l,p)+this.long0)}}
else{var S=t.x-this.x0,b=t.y-this.y0;n=(this.ml0+b/this.k0)/this.a;s=n;for(j=0;!0;j++){M=((n+this.e1*Math.sin(2*s)-this.e2*Math.sin(4*s)+this.e3*Math.sin(6*s))/this.e0)-s;s+=M;if(Math.abs(M)<=h){break};if(j>=q){return(95)}};if(Math.abs(s)<o){var k=Math.sin(s),z=Math.cos(s),x=Math.tan(s),m=this.ep2*Math.pow(z,2),g=Math.pow(m,2),c=Math.pow(x,2),v=Math.pow(c,2);n=1-this.es*Math.pow(k,2);var d=this.a/Math.sqrt(n),C=d*(1-this.es)/n,w=S/(d*this.k0),f=Math.pow(w,2);a=s-(d*x*f/C)*(0.5-f/24*(5+3*c+10*m-4*g-9*this.ep2-f/30*(61+90*c+298*m+45*v-252*this.ep2-3*g)));u=i(this.long0+(w*(1-f/6*(1+2*c+m-f/20*(5-2*m+28*c-3*g+8*this.ep2+24*v)))/z))}
else{a=o*e(b);u=this.long0}};t.x=u;t.y=a;return t};n.names=["Transverse_Mercator","Transverse Mercator","tmerc"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/mlfn":14,"../common/sign":21}],62:[function(t,s,n){var a=0.01745329251994329577,i=t("./tmerc");n.dependsOn="tmerc";n.init=function(){if(!this.zone){return};this.lat0=0;this.long0=((6*Math.abs(this.zone))-183)*a;this.x0=500000;this.y0=this.utmSouth?10000000:0;this.k0=0.9996;i.init.apply(this);this.forward=i.forward;this.inverse=i.inverse};n.names=["Universal Transverse Mercator System","utm"]},{"./tmerc":61}],63:[function(t,s,n){},{"../common/adjust_lon":5,"../common/asinz":6}],64:[function(t,s,n){var a=0.01745329251994329577,i=57.29577951308232088,h=1,c=2,m=t("./datum_transform"),o=t("./adjust_axis"),e=t("./Proj"),r=t("./common/toPoint");s.exports=function u(t,n,s){var f;if(Array.isArray(s)){s=r(s)};function l(t,s){return((t.datum.datum_type===h||t.datum.datum_type===c)&&s.datumCode!=="WGS84")};if(t.datum&&n.datum&&(l(t,n)||l(n,t))){f=new e("WGS84");u(t,f,s);t=f};if(t.axis!=="enu"){o(t,!1,s)};if(t.projName==="longlat"){s.x*=a;s.y*=a}
else{if(t.to_meter){s.x*=t.to_meter;s.y*=t.to_meter};t.inverse(s)};if(t.from_greenwich){s.x+=t.from_greenwich};s=m(t.datum,n.datum,s);if(n.from_greenwich){s.x-=n.from_greenwich};if(n.projName==="longlat"){s.x*=i;s.y*=i}
else{n.forward(s);if(n.to_meter){s.x/=n.to_meter;s.y/=n.to_meter}};if(n.axis!=="enu"){o(n,!0,s)};return s}},{"./Proj":2,"./adjust_axis":3,"./common/toPoint":23,"./datum_transform":30}],65:[function(t,s,n){},{"./extend":33}],66:[function(t,s,n){},{}],67:[function(t,s,n){},{}],"./includedProjections":[function(t,s,n){},{}],"gWUPNW":[function(t,s,n){var i=[t("./lib/projections/tmerc"),t("./lib/projections/utm"),t("./lib/projections/sterea"),t("./lib/projections/stere"),t("./lib/projections/somerc"),t("./lib/projections/omerc"),t("./lib/projections/lcc"),t("./lib/projections/krovak"),t("./lib/projections/cass"),t("./lib/projections/laea"),t("./lib/projections/aea"),t("./lib/projections/gnom"),t("./lib/projections/cea"),t("./lib/projections/eqc"),t("./lib/projections/poly"),t("./lib/projections/nzmg"),t("./lib/projections/mill"),t("./lib/projections/sinu"),t("./lib/projections/moll"),t("./lib/projections/eqdc"),t("./lib/projections/vandg"),t("./lib/projections/aeqd")];s.exports=function(t){i.forEach(function(s){t.Proj.projections.add(s)})}},{"./lib/projections/aea":39,"./lib/projections/aeqd":40,"./lib/projections/cass":41,"./lib/projections/cea":42,"./lib/projections/eqc":43,"./lib/projections/eqdc":44,"./lib/projections/gnom":46,"./lib/projections/krovak":47,"./lib/projections/laea":48,"./lib/projections/lcc":49,"./lib/projections/mill":52,"./lib/projections/moll":53,"./lib/projections/nzmg":54,"./lib/projections/omerc":55,"./lib/projections/poly":56,"./lib/projections/sinu":57,"./lib/projections/somerc":58,"./lib/projections/stere":59,"./lib/projections/sterea":60,"./lib/projections/tmerc":61,"./lib/projections/utm":62,"./lib/projections/vandg":63}]},{},[35])(35)});
(function(t){var o,i;if(typeof define==='function'&&define.amd){define(['leaflet','proj4'],t)}
else if(typeof module==='object'&&typeof module.exports==='object'){o=require('leaflet');i=require('proj4');module.exports=t(o,i)}
else{if(typeof window.L==='undefined'||typeof window.proj4==='undefined')throw'Leaflet and proj4 must be loaded first';t(window.L,window.proj4)}}(function(t,i){t.Proj={};t.Proj._isProj4Obj=function(t){return(typeof t.inverse!=='undefined'&&typeof t.forward!=='undefined')};t.Proj.ScaleDependantTransformation=function(t){this.scaleTransforms=t};t.Proj.ScaleDependantTransformation.prototype.transform=function(t,i){return this.scaleTransforms[i].transform(t,i)};t.Proj.ScaleDependantTransformation.prototype.untransform=function(t,i){return this.scaleTransforms[i].untransform(t,i)};t.Proj.Projection=t.Class.extend({initialize:function(o,e){if(t.Proj._isProj4Obj(o)){this._proj=o}
else{var n=o;if(e){i.defs(n,e)}
else if(i.defs[n]===undefined){var s=n.split(':');if(s.length>3){n=s[s.length-3]+':'+s[s.length-1]};if(i.defs[n]===undefined){throw'No projection definition for code '+n}};this._proj=i(n)}},project:function(i){var o=this._proj.forward([i.lng,i.lat]);return new t.Point(o[0],o[1])},unproject:function(i,o){var e=this._proj.inverse([i.x,i.y]);return new t.LatLng(e[1],e[0],o)}});t.Proj.CRS=t.Class.extend({includes:t.CRS,options:{transformation:new t.Transformation(1,0,-1,0)},initialize:function(i,o,e){var s,a,l,r;if(t.Proj._isProj4Obj(i)){a=i;s=a.srsCode;r=o||{};this.projection=new t.Proj.Projection(a)}
else{s=i;l=o;r=e||{};this.projection=new t.Proj.Projection(s,l)};t.Util.setOptions(this,r);this.code=s;this.transformation=this.options.transformation;if(this.options.origin){this.transformation=new t.Transformation(1,-this.options.origin[0],-1,this.options.origin[1])};if(this.options.scales){this._scales=this.options.scales}
else if(this.options.resolutions){this._scales=[];for(var n=this.options.resolutions.length-1;n>=0;n--){if(this.options.resolutions[n]){this._scales[n]=1/this.options.resolutions[n]}}}},scale:function(t){var i=Math.floor(t),o,s,n,e;if(t===i){return this._scales[t]}
else{o=this._scales[i];s=this._scales[i+1];n=s-o;e=(t-i);return o+n*e}},getSize:function(i){var s=this.options.bounds,o,n,e;if(s){o=this.scale(i);n=this.transformation.transform(s.min,o);e=this.transformation.transform(s.max,o);return t.point(Math.abs(e.x-n.x),Math.abs(e.y-n.y))}
else{o=256*Math.pow(2,i);return t.point(o,o)}}});t.Proj.CRS.TMS=t.Proj.CRS.extend({options:{tileSize:256},initialize:function(i,o,e,l){var a,c,r,n,s;if(t.Proj._isProj4Obj(i)){r=i;n=o;s=e||{};s.origin=[n[0],n[3]];t.Proj.CRS.prototype.initialize.call(this,r,s)}
else{a=i;c=o;n=e;s=l||{};s.origin=[n[0],n[3]];t.Proj.CRS.prototype.initialize.call(this,a,c,s)};this.projectedBounds=n;this._sizes=this._calculateSizes()},_calculateSizes:function(){var r=[],e=this.projectedBounds,o,i,s,n;for(i=this._scales.length-1;i>=0;i--){if(this._scales[i]){o=this.options.tileSize/this._scales[i];s=Math.ceil(parseFloat((e[2]-e[0])/o).toPrecision(3))*o*this._scales[i];n=Math.ceil(parseFloat((e[3]-e[1])/o).toPrecision(3))*o*this._scales[i];r[i]=t.point(s,n)}};return r},getSize:function(t){return this._sizes[t]}});t.Proj.TileLayer={};t.Proj.TileLayer.TMS=t.TileLayer.extend({options:{continuousWorld:!0},initialize:function(i,o,s){var r=!0,a,c,n,e;if(!(o instanceof t.Proj.CRS.TMS)){throw'CRS is not L.Proj.CRS.TMS.'};t.TileLayer.prototype.initialize.call(this,i,s);this.options.tms=!1;this.crs=o;n=this.crs.projectedBounds;for(e=this.options.minZoom;e<this.options.maxZoom&&r;e++){var l=(n[3]-n[1])/this._projectedTileSize(e);r=Math.abs(l-Math.round(l))>1e-3};if(!r){a={};for(e=this.options.minZoom;e<this.options.maxZoom;e++){c=n[1]+Math.ceil((n[3]-n[1])/this._projectedTileSize(e))*this._projectedTileSize(e);a[this.crs.scale(e)]=new t.Transformation(1,-n[0],-1,c)};this.crs=new t.Proj.CRS.TMS(this.crs.projection._proj,n,this.crs.options);this.crs.transformation=new t.Proj.ScaleDependantTransformation(a)}},getTileUrl:function(i){var e=this._map.getZoom(),o=Math.ceil((this.crs.projectedBounds[3]-this.crs.projectedBounds[1])/this._projectedTileSize(e));return t.Util.template(this._url,t.Util.extend({s:this._getSubdomain(i),z:this._getZoomForUrl(),x:i.x,y:o-i.y-1},this.options))},_projectedTileSize:function(t){return(this.options.tileSize/this.crs.scale(t))}});t.Proj.GeoJSON=t.GeoJSON.extend({initialize:function(i,o){this._callLevel=0;t.GeoJSON.prototype.initialize.call(this,null,o);if(i){this.addData(i)}},addData:function(i){var o;if(i){if(i.crs&&i.crs.type==='name'){o=new t.Proj.CRS(i.crs.properties.name)}
else if(i.crs&&i.crs.type){o=new t.Proj.CRS(i.crs.type+':'+i.crs.properties.code)};if(o!==undefined){this.options.coordsToLatLng=function(i){var e=t.point(i[0],i[1]);return o.projection.unproject(e)}}};this._callLevel++;try{t.GeoJSON.prototype.addData.call(this,i)}finally{this._callLevel--;if(this._callLevel===0){delete this.options.coordsToLatLng}}}});t.Proj.geoJson=function(i,o){return new t.Proj.GeoJSON(i,o)};t.Proj.ImageOverlay=t.ImageOverlay.extend({initialize:function(i,o,e){t.ImageOverlay.prototype.initialize.call(this,i,null,e);this._projBounds=o},_animateZoom:function(i){var r=t.point(this._projBounds.min.x,this._projBounds.max.y),s=t.point(this._projBounds.max.x,this._projBounds.min.y),o=this._projectedToNewLayerPoint(r,i.zoom,i.center),n=this._projectedToNewLayerPoint(s,i.zoom,i.center).subtract(o),e=o.add(n._multiplyBy((1-1/i.scale)/2));this._image.style[t.DomUtil.TRANSFORM]=t.DomUtil.getTranslateString(e)+' scale('+this._map.getZoomScale(i.zoom)+') '},_reset:function(){var s=this._map.getZoom(),n=this._map.getPixelOrigin(),e=t.bounds(this._transform(this._projBounds.min,s)._subtract(n),this._transform(this._projBounds.max,s)._subtract(n)),o=e.getSize(),i=this._image;t.DomUtil.setPosition(i,e.min);i.style.width=o.x+'px';i.style.height=o.y+'px'},_projectedToNewLayerPoint:function(t,i,o){var e=this._map._getNewTopLeftPoint(o,i).add(this._map._getMapPanePos());return this._transform(t,i)._subtract(e)},_transform:function(t,i){var o=this._map.options.crs,n=o.transformation,e=o.scale(i);return n.transform(t,e)}});t.Proj.imageOverlay=function(i,o,e){return new t.Proj.ImageOverlay(i,o,e)};if(typeof t.CRS!=='undefined'){t.CRS.proj4js=(function(){return function(i,o,e,n){n=n||{};if(e){n.transformation=e};return new t.Proj.CRS(i,o,n)}}())};return t.Proj}));
;L.Map.addInitHook(function(){this.on('layeradd',function(t){if(t.layer.options){var s=t.layer.options.crs||L.CRS.EPSG3857;if(t.layer.options.tileSize&&this.options.crs!=s){var o=this.getBounds(),n=this.getCenter();this.options.crs=s;var h=o.getNorthWest(),a=o.getSouthEast(),c=this.getSize().distanceTo(L.point(0,0)),e=Infinity;for(z=0;z<this.getMaxZoom();z++){var r=this.project(a,z).distanceTo(this.project(h,z)),i=Math.abs(r-c);if(i<e){e=i;closestZoom=z}};this._resetView(n,closestZoom)}}},this)});
!function(e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):"undefined"!=typeof window?window.togpx=e():"undefined"!=typeof global?global.togpx=e():"undefined"!=typeof self&&(self.togpx=e())}(function(){var n,r,t;return(function e(t,r,n){function o(i,f){if(!r[i]){if(!t[i]){var s=typeof require=="function"&&require;if(!f&&s)return s(i,!0);if(a)return a(i,!0);throw new Error("Cannot find module '"+i+"'")};var u=r[i]={exports:{}};t[i][0].call(u.exports,function(e){var r=t[i][1][e];return o(r?r:e)},u,u.exports,e,t,r,n)};return r[i].exports};var a=typeof require=="function"&&require;for(var i=0;i<n.length;i++)o(n[i]);return o})({1:[function(e,t,r){var i=e("jxon");function n(e,t){t=(function(e,t){for(var r in e){if(t.hasOwnProperty(r))e[r]=t[r]};return e})({creator:"togpx",metadata:undefined,featureTitle:u,featureDescription:f,featureLink:undefined},t||{});function u(e){if(typeof e.tags==="object"){var t=u(e.tags);if(t!=="")return t};if(e.name)return e.name;if(e.ref)return e.ref;if(e.id)return e.id;return""};function f(e){if(typeof e.tags==="object")return f(e.tags);var t="";for(var r in e){if(typeof e[r]==="object")continue;t+=r+"="+e[r]+"\n"};return t.substr(0,t.length-1)};function a(e,r){if(t.featureLink)e.link={"@href":t.featureLink(r.properties)}};var r={"gpx":{"@xmlns":"http://www.topografix.com/GPX/1/1","@xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","@xsi:schemaLocation":"http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd","@version":"1.1","wpt":[],"trk":[],}};if(t.creator)r.gpx["@creator"]=t.creator;if(t.metadata)r.gpx["metadata"]=t.metadata;var n;if(e.type==="FeatureCollection")n=e.features;else if(e.type==="Feature")n=[e];else n=[{type:"Feature",properties:{},geometry:e}];n.forEach(function s(e){switch(e.geometry.type){case"Point":case"MultiPoint":var n=e.geometry.coordinates;if(e.geometry.type=="Point")n=[n];n.forEach(function(n){o={"@lat":n[1],"@lon":n[0],"name":t.featureTitle(e.properties),"desc":t.featureDescription(e.properties)};if(n[2]!==undefined){o.ele=n[2]};a(o,e);r.gpx.wpt.push(o)});break;case"LineString":case"MultiLineString":var n=e.geometry.coordinates;if(e.geometry.type=="LineString")n=[n];o={"name":t.featureTitle(e.properties),"desc":t.featureDescription(e.properties)};a(o,e);o.trkseg=[];n.forEach(function(e){var t={trkpt:[]};e.forEach(function(e){var r={"@lat":e[1],"@lon":e[0]};if(e[2]!==undefined){r.ele=e[2]};t.trkpt.push(r)});o.trkseg.push(t)});r.gpx.trk.push(o);break;case"Polygon":case"MultiPolygon":o={"name":t.featureTitle(e.properties),"desc":t.featureDescription(e.properties)};a(o,e);o.trkseg=[];var n=e.geometry.coordinates;if(e.geometry.type=="Polygon")n=[n];n.forEach(function(e){e.forEach(function(e){var t={trkpt:[]};e.forEach(function(e){var r={"@lat":e[1],"@lon":e[0]};if(e[2]!==undefined){r.ele=e[2]};t.trkpt.push(r)});o.trkseg.push(t)})});r.gpx.trk.push(o);break;case"GeometryCollection":e.geometry.geometries.forEach(function(t){var r={"properties":e.properties,"geometry":t};s(r)});break;default:console.log("warning: unsupported geometry type: "+e.geometry.type)}});gpx_str=i.stringify(r);return gpx_str};t.exports=n},{"jxon":2}],2:[function(e,t,r){if(typeof XMLSerializer==="undefined"){XMLSerializer=e("xmldom").XMLSerializer;document={};document.implementation=new(e("xmldom").DOMImplementation)()};var n=new(function(){var a="keyValue",f="keyAttributes",o="@",e=[],c=/^\s*$/,s=/^(?:true|false)$/i;function i(e){if(c.test(e)){return null};if(s.test(e)){return e.toLowerCase()==="true"};if(isFinite(e)){return parseFloat(e)};if(isFinite(Date.parse(e))){return new Date(e)};return e};function t(){};t.prototype.toString=function(){return"null"};t.prototype.valueOf=function(){return null};function p(e){return e===null?new t():e instanceof Object?e:new e.constructor(e)};function u(t,r,s,m){var C=e.length,T=t.hasChildNodes(),E=t.hasAttributes(),h=Boolean(r&2),l,v,d=0,g="",n=h?{}:!0;if(T){for(var c,x=0;x<t.childNodes.length;x++){c=t.childNodes.item(x);if(c.nodeType===4){g+=c.nodeValue}
else if(c.nodeType===3){g+=c.nodeValue.trim()}
else if(c.nodeType===1&&!c.prefix){e.push(c)}}};var P=e.length,w=i(g);if(!h&&(T||E)){n=r===0?p(w):{}};for(var y=C;y<P;y++){l=e[y].nodeName.toLowerCase();v=u(e[y],r,s,m);if(n.hasOwnProperty(l)){if(n[l].constructor!==Array){n[l]=[n[l]]};n[l].push(v)}
else{n[l]=v;d++}};if(E){var L=t.attributes.length,M=m?"":o,S=m?{}:n;for(var b,k=0;k<L;d++,k++){b=t.attributes.item(k);S[M+b.name.toLowerCase()]=i(b.value.trim())};if(m){if(s){Object.freeze(S)};n[f]=S;d-=L-1}};if(r===3||(r===2||r===1&&d>0)&&g){n[a]=w}
else if(!h&&d===0&&g){n=w};if(s&&(h||d>0)){Object.freeze(n)};e.length=C;return n};function r(e,n,i){var t,s;if(i instanceof String||i instanceof Number||i instanceof Boolean){n.appendChild(e.createTextNode(i.toString()))}
else if(i.constructor===Date){n.appendChild(e.createTextNode(i.toGMTString()))};for(var u in i){t=i[u];if(isFinite(u)||t instanceof Function){continue};if(u===a){if(t!==null&&t!==!0){n.appendChild(e.createTextNode(t.constructor===Date?t.toGMTString():String(t)))}}
else if(u===f){for(var p in t){n.setAttribute(p,t[p])}}
else if(u.charAt(0)===o){n.setAttribute(u.slice(1),t)}
else if(t.constructor===Array){for(var c=0;c<t.length;c++){s=e.createElement(u);r(e,s,t[c]);n.appendChild(s)}}
else{s=e.createElement(u);if(t instanceof Object){r(e,s,t)}
else if(t!==null&&t!==!0){s.appendChild(e.createTextNode(t.toString()))};n.appendChild(s)}}};this.build=function(e,t,r,o){var n=arguments.length>1&&typeof t==="number"?t&3:1;return u(e,n,r||!1,arguments.length>3?o:n===3)};this.unbuild=function(e){var t=document.implementation.createDocument("","",null);r(t,t,e);return t};this.stringify=function(e){return(new XMLSerializer()).serializeToString(n.unbuild(e))}})();t.exports=n},{"xmldom":3}],3:[function(e,t,r){},{}]},{},[1])(1)});
;L.extend(L.CRS,{title:{lng:"Longitude",lat:"Latitude"},format:function(e){if(e<1000)return Math.round(e);var t=Math.floor(e/1000000),n=Math.floor((e-t*1000000)/1000),a=Math.round(e-t*1000000-n*1000);if(a>=1000){n++;a-=1000};if(n>=1000){t++;n-=1000};return(t===0?"":t+" ")+(t+n===0?"":(n<100?"0":"")+(n<10?"0":"")+n+" ")+(a<100?"0":"")+(a<10?"0":"")+a},unformat:function(e){if(!e)return 0;else return e.replace(/\s/g,"").replace(/,/g,".")}});L.CRS.decimal=L.extend({},L.CRS.EPSG4326,{name:"Degrs dcimaux",format:function(e){return Math.round(e*100000)/100000}});L.CRS.degminsec=L.extend({},L.CRS.decimal,{name:"Deg Min Sec",format:function(e){var a=Math.floor(Math.abs(e)),r=(Math.abs(e)-a)*60,n=Math.floor(r),t=Math.round((r-n)*600)/10;if(t>=60){n++;t-=60};if(n>=60){a++;n-=60};return(e<0?"-":"")+a+""+(n<10?"0":"")+n+"'"+(t<10?"0":"")+t+"\""},unformat:function(e){va="0"+e.replace(/\s/g,"").replace(/,/g,".").replace(/-/g,"")+"0";vs=va.replace(/'|"/g,"").split("");return(e[0]=="-"?-1:1)*(parseFloat(vs[0])+parseFloat(0+vs[1])/60+parseFloat(0+vs[2])/3600)}});L.CRS.degmin=L.extend({},L.CRS.degminsec,{name:"Deg Min",format:function(e){var t=Math.floor(Math.abs(e)),n=Math.round((Math.abs(e)-t)*60*1000)/1000;if(n>=60){t++;n-=60};return(e<0?"-":"")+t+""+(n<10?"0":"")+n+"'"}});for(var u=28;u<=35;u++)L.CRS["EPSG326"+u]=L.extend(new L.Proj.CRS("EPSG:326"+u,"+proj=utm +zone="+u+" +ellps=WGS84 +datum=WGS84 +units=m +no_defs"),{bounds:L.bounds([6*u-186,0],[6*u-180,84]),name:"UTM "+u+"N"});L.CRS.EPSG32630.name+=" (France ouest)";L.CRS.EPSG32631.name+=" (France centre)";L.CRS.EPSG32632.name+=" (France est)";L.CRS.EPSG32633.name+=" (Autriche)";L.CRS.EPSG27571=L.extend(new L.Proj.CRS("EPSG:27571","+title=Lambert zone 1 , LCC +proj=lcc +lat_1=49.5 +lat_0=49.5 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs"),{bounds:L.bounds([-5.2,48.15],[8.23,51.1]),name:"Lambert I (Nord)"});L.CRS.EPSG27572=L.extend({},L.CRS.EPSG27571,new L.Proj.CRS("EPSG:27572","+title=Lambert 2 tendue, LCC +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs"),{bounds:L.bounds([-5.2,42.25],[8.23,51.1]),name:"Lambert II (Centre)"});L.CRS.EPSG27573=L.extend({},L.CRS.EPSG27571,new L.Proj.CRS("EPSG:27573","+title=Lambert zone 3, LCC +proj=lcc +lat_1=44.1 +lat_0=44.1 +lon_0=0 +k_0=0.999877499 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs"),{bounds:L.bounds([-1.76,42.33],[7.77,45.45]),name:"Lambert III (Sud)"});L.CRS.EPSG27574=L.extend({},L.CRS.EPSG27571,new L.Proj.CRS("EPSG:27574","+title=Lambert zone 4, +proj=lcc +lat_1=42.165 +lat_0=42.165 +lon_0=0 +k_0=0.99994471 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs"),{bounds:L.bounds([8.5,41.33],[9.6,43.05]),name:"Lambert IV (Corse)"});
;L.Marker.include({coordinates:function(o){this._elCoordinate=o;var t=document.getElementById(o+'-json'),e;if(t){try{e=JSON.parse(t.innerHTML||t.value).coordinates}catch(n){};if(e)this.setLatLng([e[1],e[0]])};this._displayCoord();this.on('move',this._displayCoord,this);return this},_displayCoord:function(){var a=this,t=a._latlng,r='decimal',e=document.getElementById(this._elCoordinate+'-select');if(e){if(e.value)r=e.value;while(e.hasChildNodes())e.removeChild(e.firstChild);for(c in L.CRS)if(L.CRS[c]&&L.CRS[c].name&&typeof L.CRS[c]=='object'&&(!L.CRS[c].bounds||L.CRS[c].bounds.contains([t.lng,t.lat]))){var i=document.createElement('option');i.value=c;if(c==r)i.selected='selected';i.appendChild(document.createTextNode(L.CRS[c].name));e.appendChild(i)};e.onchange=function(){a._displayCoord()}};var o=L.extend({},L.CRS,L.CRS[r]);var u=L.Projection.LonLat.unproject(o.projection.project(t));for(l in t){var s={title:o.title[l],deg:t[l],proj:o.format(u[l]),json:JSON.stringify(this.toGeoJSON().geometry)};for(v in s){var n=document.getElementById([this._elCoordinate,v,l].join('-'))||document.getElementById([this._elCoordinate,v].join('-'));if(n){var d=typeof n.value!='undefined'?'value':'innerHTML';n[d]=s[v];n.onchange=function(){var e={};for(l in t){var n=this.id.split('-');n[2]=l;var i=document.getElementById(n.join('-'));if(i)e[l]=o.unformat(i[d])};var r=o.projection.unproject(L.Projection.LonLat.project(e));a.setLatLng(r);a._map.panTo(r)}}}}}});
;L.TileLayer.OSM=L.TileLayer.extend({options:{url:'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a>'},initialize:function(t){if(this.options.subAttribution)this.options.attribution+=' | '+this.options.subAttribution;L.TileLayer.prototype.initialize.call(this,this.options.url,t)}});L.TileLayer.OSM.FR=L.TileLayer.OSM.extend({options:{url:'http://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png'}});L.TileLayer.OSM.MRI=L.TileLayer.OSM.extend({options:{url:'http://maps.refuges.info/hiking/{z}/{x}/{y}.png',subAttribution:'<a href="http://wiki.openstreetmap.org/wiki/Hiking/mri">MRI</a>'}});L.TileLayer.Kompass=L.TileLayer.OSM.extend({options:{l:'Touristik',url:'http://ec{s}.cdn.ecmaps.de/WmsGateway.ashx.jpg?Experience=kompass&MapStyle=KOMPASS%20{l}&TileX={x}&TileY={y}&ZoomLevel={z}',maxZoom:15,subdomains:'0123',subAttribution:'<a href="http://www.kompass.de/livemap/">KOMPASS</a>'}});L.TileLayer.OSM.hikebike=L.TileLayer.OSM.extend({options:{url:'http://{s}.tiles.wmflabs.org/hikebike/{z}/{x}/{y}.png',subdomains:'abc',maxZoom:20,subAttribution:'<a href="http://www.hikebikemap.org/">hikebikemap.org</a>'}});L.TileLayer.OSM.hill=L.TileLayer.OSM.extend({options:{url:'http://{s}.tiles.wmflabs.org/hillshading/{z}/{x}/{y}.png',subdomains:'abc',maxZoom:15,subAttribution:'<a href="https://wikitech.wikimedia.org">Wikimedia Tool Labs</a>'}});var ft=['Landscape','Outdoors','Cycle','Transport'];for(m in ft)L.TileLayer.OSM[ft[m]]=L.TileLayer.OSM.extend({options:{url:'http://{s}.tile.thunderforest.com/'+ft[m].toLowerCase()+'/{z}/{x}/{y}.png',subAttribution:'<a href="http://www.thunderforest.com">Thunderforest '+ft[m]+'</a>'}});
;L.TileLayer.IGN=L.TileLayer.extend({options:{l:'GEOGRAPHICALGRIDSYSTEMS.MAPS',attribution:'&copy; <a href="http://www.ign.fr/">IGN</a>'},initialize:function(i){L.TileLayer.prototype.initialize.call(this,'http://gpp3-wxs.ign.fr/{k}/wmts?LAYER={l}&FORMAT=image/jpeg&SERVICE=WMTS&VERSION=1.0.0&REQUEST=GetTile&STYLE=normal&TILEMATRIXSET=PM&TILEMATRIX={z}&TILECOL={x}&TILEROW={y}',i)}});
;L.TileLayer.WMS.IGM=L.TileLayer.WMS.extend({initialize:function(){L.TileLayer.WMS.prototype.initialize.call(this,'http://129.206.228.72/cached/osm?',{crs:L.CRS.EPSG900913,tileSize:512})},onAdd:function(t){L.TileLayer.WMS.prototype.onAdd.call(this,t);t.on('zoomend',this._onZoom,this);this._onZoom()},_onZoom:function(){if(!this._map)return;var t={url:'http://wms.pcn.minambiente.it/ogc?map=/ms_ogc/WMS_v1.3/raster/',urlExt:'',attribution:'&copy; <a href="http://www.pcn.minambiente.it/viewer">IGM</a>'};if(this._map._zoom<11){t.url='http://129.206.228.72/cached/osm?';t.layers='osm_auto:all';t.attribution='&copy; <a href="http://www.osm-wms.de/">OSM</a>'}
else if(this._map._zoom<13){t.urlExt='IGM_250000.map';t.layers='CB.IGM250000'}
else if(this._map._zoom<15){t.urlExt='IGM_100000.map';t.layers='MB.IGM100000'}
else if(this._map._zoom<16){t.urlExt='IGM_25000.map';t.layers='CB.IGM25000'};if(this.wmsParams.layers!=t.layers){this._url=t.url+t.urlExt;this.wmsParams.layers=t.layers;this.redraw();this.options.attribution=t.attribution;this._map.attributionControl._attributions=[];this._map.attributionControl.addAttribution(t.attribution)}}});
;L.TileLayer.WMS.IDEE=L.TileLayer.WMS.extend({options:{url:'http://www.idee.es/wms/MTN-Raster/MTN-Raster',layer:'mtn_rasterizado',crs:L.CRS.EPSG3857,attribution:'&copy; <a href="http://www.idee.es/">IDEE</a>'},initialize:function(t){L.TileLayer.WMS.prototype.initialize.call(this,this.options.url,{layers:this.options.layer,attribution:this.options.attribution},t)}});L.TileLayer.WMS.IDEE.Photo=L.TileLayer.WMS.IDEE.extend({options:{url:'http://www.ign.es/wms-inspire/pnoa-ma',layer:'OI.OrthoimageCoverage',attribution:'&copy; <a href="http://www.ign.es/PNOA/">PNOA</a>'}});
;L.CRS.EPSG21781=L.extend(new L.Proj.CRS('EPSG:21781','+proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +k_0=1 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs',{resolutions:[4000,3750,3500,3250,3000,2750,2500,2250,2000,1750,1500,1250,1000,750,650,500,250,100,50,20,10,5,2.5,2,1.5,1,0.5],origin:[420000,350000]}),{bounds:L.bounds([5.97,45.83],[10.49,47.81]),name:'Coordonnes suisses',title:{lng:'X',lat:'Y'},distance:function(o,t){return L.CRS.Earth.distance(o,t)}});L.TileLayer.SwissTopo=L.TileLayer.extend({options:{l:'ch.swisstopo.pixelkarte-farbe',subdomains:'56789',t:20151231,crs:L.CRS.EPSG21781,maxZoom:L.CRS.EPSG21781.options.resolutions.length-1,minZoom:0,attribution:'&copy; <a href="http://www.swisstopo.admin.ch/internet/swisstopo/fr/home.html">swisstopo, BAFU</a>'},initialize:function(o){L.TileLayer.prototype.initialize.call(this,'http://wmts{s}.geo.admin.ch/1.0.0/{l}/default/{t}/21781/{z}/{y}/{x}.jpeg',o)}});
;L.TileLayer.Google=L.TileLayer.extend({options:{l:'m',maxZoom:20,subdomains:['mt0','mt1','mt2','mt3'],attribution:'&copy; <a href="https://www.google.com/maps">Google Maps</a>'},initialize:function(o){L.TileLayer.prototype.initialize.call(this,'http://{s}.google.com/vt/lyrs={l}&x={x}&y={y}&z={z}',o)}});
(function(e,t){if(typeof define==='function'&&define.amd){define(['leaflet','proj4leaflet'],t)}
else if(typeof exports==='object'){var i=require('leaflet');require('proj4leaflet');module.exports=t(i)}
else{if(typeof window.L==='undefined'){throw'Leaflet missing'};e.returnExports=t(e.L)}}(this,function(e){e.OSOpenSpace=e.Class.extend({statics:{RESOLUTIONS:[2500,1000,500,200,100,50,25,10,5,2.5],_OSGB36:{EPSG:'EPSG:27700',DEF:'+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy+towgs84=446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894 +units=m +no_defs no_defs',EXTENT:[1393.0196,13494.9764,671196.3657,1230275.0454],PROJ_EXTENT:[0,0,700000,1300000]},getCrsAsString:function(){return e.OSOpenSpace._OSGB36.DEF},getCRS:function(){var t=e.OSOpenSpace,i=new e.Proj.CRS(t._OSGB36.EPSG,t._OSGB36.DEF,{resolutions:t.RESOLUTIONS,bounds:e.bounds([t._OSGB36.PROJ_EXTENT[3],t._OSGB36.PROJ_EXTENT[0]],[t._OSGB36.PROJ_EXTENT[2],t._OSGB36.PROJ_EXTENT[1]])});return i}}});e.TileLayer.OSOpenSpace=e.TileLayer.WMS.extend({defaultWmsParams:{SERVICE:'WMS',REQUEST:'GetMap',VERSION:'1.1.1',FORMAT:'image/png'},defaultLayerOptions:{maxZoom:null,minZoom:0,crs:e.OSOpenSpace.getCRS(),continuousWorld:!0,worldCopyJump:!1,tms:!0,attribution:' Crown copyright and database rights 2015 Ordnance Survey.',detectRetina:!1},resolutions:[],_url:'https://openspace.ordnancesurvey.co.uk/osmapapi/ts',debug:!1,initialize:function(t,n){if(!t){throw'OSOpenSpace layer requires an API Key parameter to function.'};var r=200,s={'KEY':t,'URL':'file:///'};this.options.tileSize=r;this.resolutions=e.OSOpenSpace.RESOLUTIONS;this.defaultLayerOptions.maxZoom=e.OSOpenSpace.RESOLUTIONS.length-1;var o=e.extend(s,this.defaultWmsParams);o.width=o.height=r;for(var i in n){if(!this.options.hasOwnProperty(i)&&i!=='crs'){o[i]=n[i]};if(i==='debug'){this.debug=n[i]}};this.wmsParams=o;e.setOptions(this,this.defaultLayerOptions)},getTileUrl:function(t){if(this.debug){console.log('>>tilePoint: ',t.toString())};var i=this.options.tileSize,r=t.z,o=this.resolutions[r],n=i*o,l=n*t.x,a=n*t.y;if(this.debug){console.log('>>tileSizePixels: '+i+', zoom: '+r+', resolutionMpp: '+o+', tileSizeMetres: '+n)};var s=[l,a,0,0].join(','),S=e.Util.template(this._url,{});if(this.debug){console.log('>>Bbox: ',s)};return S+e.Util.getParamString(this.wmsParams)+'&BBOX='+s+'&WIDTH='+i+'&HEIGHT='+i+'&LAYERS='+o}});e.tileLayer.OSOpenSpace=function(t,i){return new e.TileLayer.OSOpenSpace(t,i)};return e.tileLayer.OSOpenSpace}));
;L.BingLayer=L.TileLayer.extend({options:{subdomains:[0,1,2,3],type:'Aerial',attribution:'Bing',culture:''},initialize:function(t,i){L.Util.setOptions(this,i);this._key=t;this._url=null;this._providers=[];this.metaRequested=!1},tile2quad:function(t,r,n){var e='';for(var i=n;i>0;i--){var o=0,a=1<<(i-1);if((t&a)!==0)o+=1;if((r&a)!==0)o+=2;e=e+o};return e},getTileUrl:function(t){var e=this._getZoomForUrl(),o=this.options.subdomains,i=this.options.subdomains[Math.abs((t.x+t.y)%o.length)];return this._url.replace('{subdomain}',i).replace('{quadkey}',this.tile2quad(t.x,t.y,e)).replace('{culture}',this.options.culture)},loadMetadata:function(){if(this.metaRequested)return;this.metaRequested=!0;var r=this,t='_bing_metadata_'+L.Util.stamp(this);window[t]=function(i){window[t]=undefined;var e=document.getElementById(t);e.parentNode.removeChild(e);if(i.errorDetails){return};r.initMetadata(i)};var e=(document.location.protocol==='file:')?'http':document.location.protocol.slice(0,-1),o=e+'://dev.virtualearth.net/REST/v1/Imagery/Metadata/'+this.options.type+'?include=ImageryProviders&jsonp='+t+'&key='+this._key+'&UriScheme='+e,i=document.createElement('script');i.type='text/javascript';i.src=o;i.id=t;document.getElementsByTagName('head')[0].appendChild(i)},initMetadata:function(t){var e=t.resourceSets[0].resources[0];this.options.subdomains=e.imageUrlSubdomains;this._url=e.imageUrl;if(e.imageryProviders){for(var o=0;o<e.imageryProviders.length;o++){var r=e.imageryProviders[o];for(var n=0;n<r.coverageAreas.length;n++){var i=r.coverageAreas[n],a={zoomMin:i.zoomMin,zoomMax:i.zoomMax,active:!1};var s=new L.LatLngBounds(new L.LatLng(i.bbox[0]+0.01,i.bbox[1]+0.01),new L.LatLng(i.bbox[2]-0.01,i.bbox[3]-0.01));a.bounds=s;a.attrib=r.attribution;this._providers.push(a)}}};this._update()},_update:function(){if(this._url===null||!this._map)return;this._update_attribution();L.TileLayer.prototype._update.apply(this,[])},_update_attribution:function(){var o=this._map.getBounds(),e=this._map.getZoom();for(var i=0;i<this._providers.length;i++){var t=this._providers[i];if((e<=t.zoomMax&&e>=t.zoomMin)&&o.intersects(t.bounds)){if(!t.active&&this._map.attributionControl)this._map.attributionControl.addAttribution(t.attrib);t.active=!0}
else{if(t.active&&this._map.attributionControl)this._map.attributionControl.removeAttribution(t.attrib);t.active=!1}}},onAdd:function(t){this.loadMetadata();L.TileLayer.prototype.onAdd.apply(this,[t])},onRemove:function(t){for(var i=0;i<this._providers.length;i++){var e=this._providers[i];if(e.active&&this._map.attributionControl){this._map.attributionControl.removeAttribution(e.attrib);e.active=!1}};L.TileLayer.prototype.onRemove.apply(this,[t])}});L.bingLayer=function(t,i){return new L.BingLayer(t,i)};
;L.TileLayer.collection=function(i){if(typeof this._col=='undefined'){this._col={'OSM':new L.TileLayer.OSM(),'OSM-FR':new L.TileLayer.OSM.FR(),'Maps.Refuges.Info':new L.TileLayer.OSM.MRI(),'Hike & Bike':new L.TileLayer.OSM.hikebike()};var e=['Landscape','Outdoors','Cycle','Transport'];for(m in e)if(typeof L.TileLayer.OSM[e[m]]!='undefined')this._col['OSM-'+e[m]]=new L.TileLayer.OSM[e[m]]();if(typeof L.TileLayer.IGN!='undefined'&&typeof key!='undefined'&&typeof key.ign!='undefined')L.Util.extend(this._col,{'IGN':new L.TileLayer.IGN({k:key.ign,l:'GEOGRAPHICALGRIDSYSTEMS.MAPS'}),'IGN Photo':new L.TileLayer.IGN({k:key.ign,l:'ORTHOIMAGERY.ORTHOPHOTOS'}),'IGN Topo':new L.TileLayer.IGN({k:key.ign,l:'GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.STANDARD'}),'IGN Classique':new L.TileLayer.IGN({k:key.ign,l:'GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.CLASSIQUE'}),'IGN Cadastre':new L.TileLayer.IGN({k:key.ign,l:'CADASTRALPARCELS.PARCELS'})});if(typeof L.TileLayer.WMS.IDEE!='undefined')L.Util.extend(this._col,{'Espagne':new L.TileLayer.WMS.IDEE(),'Espagne photo':new L.TileLayer.WMS.IDEE.Photo()});if(typeof L.TileLayer.WMS.IGM!='undefined')this._col.Italie=new L.TileLayer.WMS.IGM();if(typeof L.TileLayer.SwissTopo!='undefined')L.Util.extend(this._col,{'SwissTopo':new L.TileLayer.SwissTopo({l:'ch.swisstopo.pixelkarte-farbe'}),'Swiss Image':new L.TileLayer.SwissTopo({l:'ch.swisstopo.swissimage'})});if(typeof L.TileLayer.Kompass!='undefined')L.Util.extend(this._col,{'Autriche':new L.TileLayer.Kompass({l:'Touristik'}),'Kompass':new L.TileLayer.Kompass({l:'OSM'})});if(typeof key!='undefined'&&typeof key.os!='undefined'){if(typeof L.TileLayer.OSOpenSpace!='undefined')this._col['OS-Great Britain']=new L.TileLayer.OSOpenSpace(key.os,{});else if(typeof L.TileLayer.WMS.OS!='undefined')this._col['OS Great Britain']=new L.TileLayer.WMS.OS({k:key.os})};if(typeof L.BingLayer!='undefined'&&typeof key!='undefined'&&typeof key.bing!='undefined')L.Util.extend(this._col,{'Bing Road':new L.BingLayer(key.bing,{type:'Road'}),'Bing Photo':new L.BingLayer(key.bing,{type:'Aerial'}),'Bing Hybrid':new L.BingLayer(key.bing,{type:'AerialWithLabels'})});if(typeof L.TileLayer.Google!='undefined')L.Util.extend(this._col,{'Google Road':new L.TileLayer.Google({l:'m'}),'Google Terrain':new L.TileLayer.Google({l:'p'}),'Google Photo':new L.TileLayer.Google({l:'s'}),'Google Hybride':new L.TileLayer.Google({l:'s,h'})})};return typeof this._col[i]!='undefined'?this._col[i]:this._col};
;var FileLoader=L.Class.extend({includes:L.Mixin.Events,options:{layerOptions:{},fileSizeLimit:1024},initialize:function(e,t){this._map=e;L.Util.setOptions(this,t);this._parsers={'geojson':this._loadGeoJSON,'gpx':this._convertToGeoJSON,'kml':this._convertToGeoJSON}},load:function(e){var o=(e.size/1024).toFixed(4);if(o>this.options.fileSizeLimit){this.fire('data:error',{error:new Error('File size exceeds limit ('+o+' > '+this.options.fileSizeLimit+'kb)')});return};var t=e.name.split('.').pop(),n=this._parsers[t];if(!n){this.fire('data:error',{error:new Error('Unsupported file type '+e.type+'('+t+')')});return};var i=new FileReader();i.onload=L.Util.bind(function(i){try{this.fire('data:loading',{filename:e.name,format:t});var r=n.call(this,i.target.result,t);this.fire('data:loaded',{layer:r,filename:e.name,format:t})}catch(o){this.fire('data:error',{error:o})}},this);i.readAsText(e);return i},_loadGeoJSON:function(e){if(typeof e=='string'){e=JSON.parse(e)};var t=L.geoJson(e,this.options.layerOptions);if(t.getLayers().length===0){throw new Error('GeoJSON has no valid layers.')};if(this.options.addToMap){t.addTo(this._map)};return t},_convertToGeoJSON:function(e,t){if(typeof e=='string'){e=(new window.DOMParser()).parseFromString(e,'text/xml')};var i=toGeoJSON[t](e);return this._loadGeoJSON(i)}});L.Control.FileLayerLoad=L.Control.extend({statics:{TITLE:'Load local file (GPX, KML, GeoJSON)',LABEL:'&#8965;'},options:{position:'topleft',fitBounds:!0,layerOptions:{},addToMap:!0,fileSizeLimit:1024},initialize:function(e){L.Util.setOptions(this,e);this.loader=null},onAdd:function(e){this.loader=new FileLoader(e,this.options);this.loader.on('data:loaded',function(t){if(this.options.fitBounds){window.setTimeout(function(){e.fitBounds(t.layer.getBounds())},500)}},this);this._initDragAndDrop(e);return this._initContainer()},_initDragAndDrop:function(e){var o=this.loader,n=e._container,i={dragenter:function(){e.scrollWheelZoom.disable()},dragleave:function(){e.scrollWheelZoom.enable()},dragover:function(e){e.stopPropagation();e.preventDefault()},drop:function(t){t.stopPropagation();t.preventDefault();var i=Array.prototype.slice.apply(t.dataTransfer.files),n=i.length;setTimeout(function(){o.load(i.shift());if(i.length>0){setTimeout(arguments.callee,25)}},25);e.scrollWheelZoom.enable()}};for(var t in i)n.addEventListener(t,i[t],!1)},_initContainer:function(){var n='leaflet-control-filelayer leaflet-control-zoom',o='leaflet-bar',a=o+'-part',i=L.DomUtil.create('div',n+' '+o),t=L.DomUtil.create('a',n+'-in '+a,i);t.innerHTML=L.Control.FileLayerLoad.LABEL;t.href='#';t.title=L.Control.FileLayerLoad.TITLE;var e=L.DomUtil.create('input','hidden',i);e.type='file';if(!this.options.formats){e.accept='.gpx,.kml,.geojson'}
else{e.accept=this.options.formats.join(',')};e.style.display='none';var r=this.loader;e.addEventListener('change',function(e){r.load(this.files[0]);this.value=''},!1);L.DomEvent.disableClickPropagation(t);L.DomEvent.on(t,'click',function(t){e.click();t.preventDefault()});return i}});L.Control.fileLayerLoad=function(e){return new L.Control.FileLayerLoad(e)};
;var toGeoJSON=(function(){'use strict';var h=/\s*/g,y=/^\s*|\s*$/g,m=/\s+/;function f(e){if(!e||!e.length)return 0;for(var r=0,t=0;r<e.length;r++){t=((t<<5)-t)+e.charCodeAt(r)|0};return t};function r(e,t){return e.getElementsByTagName(t)};function i(e,t){return e.getAttribute(t)};function l(e,t){return parseFloat(i(e,t))};function e(e,t){var i=r(e,t);return i.length?i[0]:null};function d(e){if(e.normalize){e.normalize()};return e};function s(e){for(var t=0,r=[];t<e.length;t++){r[t]=parseFloat(e[t])};return r};function v(e){var r={};for(var t in e){if(e[t]){r[t]=e[t]}};return r};function t(e){if(e){d(e)};return(e&&e.textContent)||''};function a(e){return s(e.replace(h,'').split(','))};function o(e){var i=e.replace(y,'').split(m),r=[];for(var t=0;t<i.length;t++){r.push(a(i[t]))};return r};function g(r){var a=[l(r,'lon'),l(r,'lat')],o=e(r,'ele'),s=e(r,'gpxtpx:hr')||e(r,'hr'),n=e(r,'time'),i;if(o){i=parseFloat(t(o));if(!isNaN(i)){a.push(i)}};return{coordinates:a,time:n?t(n):null,heartRate:s?parseFloat(t(s)):null}};function c(){return{type:'FeatureCollection',features:[]}};var n;if(typeof XMLSerializer!=='undefined'){n=new XMLSerializer()}
else if(typeof exports==='object'&&typeof process==='object'&&!process.browser){n=new(require('xmldom').XMLSerializer)()};function u(e){if(e.xml!==undefined)return e.xml;return n.serializeToString(e)};var p={kml:function(n){var x=c(),y={},L={},m={},l=['Polygon','LineString','Point','Track','gx:Track'],N=r(n,'Placemark'),d=r(n,'Style'),p=r(n,'StyleMap');for(var h=0;h<d.length;h++){var M=f(u(d[h])).toString(16);y['#'+i(d[h],'id')]=M;L[M]=d[h]};for(var g=0;g<p.length;g++){y['#'+i(p[g],'id')]=f(u(p[g])).toString(16);var T=r(p[g],'Pair'),P={};for(var v=0;v<T.length;v++){P[t(e(T[v],'key'))]=t(e(T[v],'styleUrl'))};m['#'+i(p[g],'id')]=P};for(var k=0;k<N.length;k++){x.features=x.features.concat(F(N[k]))};function b(e){var r,t;e=e||'';if(e.substr(0,1)==='#'){e=e.substr(1)};if(e.length===6||e.length===3){r=e};if(e.length===8){t=parseInt(e.substr(0,2),16)/255;r='#'+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)};return[r,isNaN(t)?undefined:t]};function R(e){return s(e.split(' '))};function w(e){var i=r(e,'coord','gx'),s=[],a=[];if(i.length===0)i=r(e,'gx:coord');for(var n=0;n<i.length;n++)s.push(R(t(i[n])));var l=r(e,'when');for(var o=0;o<l.length;o++)a.push(t(l[o]));return{coords:s,times:a}};function S(i){var f,g,n,c,u,s=[],h=[];if(e(i,'MultiGeometry')){return S(e(i,'MultiGeometry'))};if(e(i,'MultiTrack')){return S(e(i,'MultiTrack'))};if(e(i,'gx:MultiTrack')){return S(e(i,'gx:MultiTrack'))};for(n=0;n<l.length;n++){g=r(i,l[n]);if(g){for(c=0;c<g.length;c++){f=g[c];if(l[n]==='Point'){s.push({type:'Point',coordinates:a(t(e(f,'coordinates')))})}
else if(l[n]==='LineString'){s.push({type:'LineString',coordinates:o(t(e(f,'coordinates')))})}
else if(l[n]==='Polygon'){var y=r(f,'LinearRing'),m=[];for(u=0;u<y.length;u++){m.push(o(t(e(y[u],'coordinates'))))};s.push({type:'Polygon',coordinates:m})}
else if(l[n]==='Track'||l[n]==='gx:Track'){var p=w(f);s.push({type:'LineString',coordinates:p.coords});if(p.times.length)h.push(p.times)}}}};return{geoms:s,coordTimes:h}};function F(n){var l=S(n),s,o={},k=t(e(n,'name')),a=t(e(n,'styleUrl')),v=t(e(n,'description')),c=e(n,'TimeSpan'),h=e(n,'ExtendedData'),u=e(n,'LineStyle'),f=e(n,'PolyStyle'),H=e(n,'visibility');if(!l.geoms.length)return[];if(k)o.name=k;if(a){if(a[0]!=='#'){a='#'+a};o.styleUrl=a;if(y[a]){o.styleHash=y[a]};if(m[a]){o.styleMapHash=m[a];o.styleHash=y[m[a].normal]};var d=L[o.styleHash];if(d){if(!u)u=e(d,'LineStyle');if(!f)f=e(d,'PolyStyle')}};if(v)o.description=v;if(c){var C=t(e(c,'begin')),A=t(e(c,'end'));o.timespan={begin:C,end:A}};if(u){var G=b(t(e(u,'color'))),z=G[0],w=G[1],T=parseFloat(t(e(u,'width')));if(z)o.stroke=z;if(!isNaN(w))o['stroke-opacity']=w;if(!isNaN(T))o['stroke-width']=T};if(f){var M=b(t(e(f,'color'))),N=M[0],x=M[1],F=t(e(f,'fill')),R=t(e(f,'outline'));if(N)o.fill=N;if(!isNaN(x))o['fill-opacity']=x;if(F)o['fill-opacity']=F==='1'?o['fill-opacity']||1:0;if(R)o['stroke-opacity']=R==='1'?o['stroke-opacity']||1:0};if(h){var g=r(h,'Data'),p=r(h,'SimpleData');for(s=0;s<g.length;s++){o[g[s].getAttribute('name')]=t(e(g[s],'value'))};for(s=0;s<p.length;s++){o[p[s].getAttribute('name')]=t(p[s])}};if(H){o.visibility=t(H)};if(l.coordTimes.length){o.coordTimes=(l.coordTimes.length===1)?l.coordTimes[0]:l.coordTimes};var P={type:'Feature',geometry:(l.geoms.length===1)?l.geoms[0]:{type:'GeometryCollection',geometries:l.geoms},properties:o};if(i(n,'id'))P.id=i(n,'id');return[P]};return x},gpx:function(i){var n,u=r(i,'trk'),p=r(i,'rte'),l=r(i,'wpt'),a=c(),o;for(n=0;n<u.length;n++){o=m(u[n]);if(o)a.features.push(o)};for(n=0;n<p.length;n++){o=y(p[n]);if(o)a.features.push(o)};for(n=0;n<l.length;n++){a.features.push(h(l[n]))};function f(e,i){var s=r(e,i),l=[],f=[],a=[],o=s.length;if(o<2)return{};for(var n=0;n<o;n++){var t=g(s[n]);l.push(t.coordinates);if(t.time)f.push(t.time);if(t.heartRate)a.push(t.heartRate)};return{line:l,times:f,heartRates:a}};function m(e){var u=r(e,'trkseg'),i=[],o=[],n=[],t;for(var a=0;a<u.length;a++){t=f(u[a],'trkpt');if(t.line)i.push(t.line);if(t.times&&t.times.length)o.push(t.times);if(t.heartRates&&t.heartRates.length)n.push(t.heartRates)};if(i.length===0)return;var l=s(e);if(o.length)l.coordTimes=i.length===1?o[0]:o;if(n.length)l.heartRates=i.length===1?n[0]:n;return{type:'Feature',properties:l,geometry:{type:i.length===1?'LineString':'MultiLineString',coordinates:i.length===1?i[0]:i}}};function y(e){var t=f(e,'rtept');if(!t.line)return;var r={type:'Feature',properties:s(e),geometry:{type:'LineString',coordinates:t.line}};return r};function h(r){var i=s(r);i.sym=t(e(r,'sym'));return{type:'Feature',properties:i,geometry:{type:'Point',coordinates:g(r).coordinates}}};function s(r){var n=['name','desc','author','copyright','link','time','keywords'],o={},i;for(i=0;i<n.length;i++){o[n[i]]=t(e(r,n[i]))};return v(o)};return a}};return p})();if(typeof module!=='undefined')module.exports=toGeoJSON;
;L.Rrose=L.Popup.extend({_initLayout:function(){var t='leaflet-rrose',i=this._container=L.DomUtil.create('div',t+' '+this.options.className+' leaflet-zoom-animated'),n,o;if(this.options.closeButton){n=this._closeButton=L.DomUtil.create('a',t+'-close-button',i);n.href='#close';n.innerHTML='&#215;';L.DomEvent.on(n,'click',this._onCloseButtonClick,this)};var s=80,a=80;this.options.position='n';var p=a-this._map.latLngToContainerPoint(this._latlng).y;if(p>0){this.options.position='s'};var e=this._map.latLngToContainerPoint(this._latlng).x-(this._map.getSize().x-s);if(e>0){this.options.position+='w'}
else{e=s-this._map.latLngToContainerPoint(this._latlng).x;if(e>0){this.options.position+='e'}};if(/s/.test(this.options.position)){if(this.options.position==='s'){this._tipContainer=L.DomUtil.create('div',t+'-tip-container',i);o=this._wrapper=L.DomUtil.create('div',t+'-content-wrapper',i)}
else{this._tipContainer=L.DomUtil.create('div',t+'-tip-container '+t+'-tip-container-'+this.options.position,i);o=this._wrapper=L.DomUtil.create('div',t+'-content-wrapper '+t+'-content-wrapper-'+this.options.position,i)};this._tip=L.DomUtil.create('div',t+'-tip '+t+'-tip-'+this.options.position,this._tipContainer);L.DomEvent.disableClickPropagation(o);this._contentNode=L.DomUtil.create('div',t+'-content',o);L.DomEvent.on(this._contentNode,'mousewheel',L.DomEvent.stopPropagation)}
else{if(this.options.position==='n'){o=this._wrapper=L.DomUtil.create('div',t+'-content-wrapper',i);this._tipContainer=L.DomUtil.create('div',t+'-tip-container',i)}
else{o=this._wrapper=L.DomUtil.create('div',t+'-content-wrapper '+t+'-content-wrapper-'+this.options.position,i);this._tipContainer=L.DomUtil.create('div',t+'-tip-container '+t+'-tip-container-'+this.options.position,i)};L.DomEvent.disableClickPropagation(o);this._contentNode=L.DomUtil.create('div',t+'-content',o);L.DomEvent.on(this._contentNode,'mousewheel',L.DomEvent.stopPropagation);this._tip=L.DomUtil.create('div',t+'-tip '+t+'-tip-'+this.options.position,this._tipContainer)}},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng),i=L.Browser.any3d,o =this.options.offset;if(i){L.DomUtil.setPosition(this._container,t)};if(/s/.test(this.options.position)){this._containerBottom=-this._container.offsetHeight+o.y-(i?0:t.y)}
else{this._containerBottom=-o.y-(i?0:t.y)};if(/e/.test(this.options.position)){this._containerLeft=o.x+(i?0:t.x)}
else if(/w/.test(this.options.position)){this._containerLeft=-Math.round(this._containerWidth)+o.x+(i?0:t.x)}
else{this._containerLeft=-Math.round(this._containerWidth/2)+o.x+(i?0:t.x)};this._container.style.bottom=this._containerBottom+'px';this._container.style.left=this._containerLeft+'px'}});
;L.GeoJSON.Style=L.GeoJSON.extend({_setLayerStyle:function(t,a){var e=L.extend({},t.feature.properties,typeof a=="function"?a.call(this,t.feature):a);if(e.iconUrl)t.setIcon(L.icon(e));if(e.popup)t.on("click",function(a){t.off("mouseout",this._closePopup);var s=L.popup({className:e.popupClass?e.popupClass:""}).setLatLng(a.latlng).setContent(e.popup).openOn(this._map)});if(e.url)t.on("click",function(t){if(t.originalEvent.shiftKey||t.originalEvent.ctrlKey)window.open(e.url);else document.location.href=e.url});t.on("mouseover mousemove",function(a){if(e.degroup)this._degroup(t,e.degroup);if(e.title){var s=e.popupAnchor||[0,-2];new(L.Rrose||L.Popup)({offset:new L.Point(s[0],s[1]),className:e.labelClass?e.labelClass:"",closeButton:!1,autoPan:!1}).setContent(e.title).setLatLng(a.latlng).openOn(this._map);if(!e.remanent){t.off("mouseout",this._closePopup);t.on("mouseout",this._closePopup)}}},this);L.GeoJSON.prototype._setLayerStyle.call(this,t,e)},_closePopup:function(){if(this._map)this._map.closePopup()},_degroup:function(t,a){var s=t._latlng;if(s){var n=this._map.latLngToLayerPoint(s);for(l in this._layers){var e=this._layers[l];if(!e._lli)e._lli=e._latlng;if(e._latlng&&t._leaflet_id!=e._leaflet_id){var i=this._map.latLngToLayerPoint(e._lli),o=i.distanceTo(n);if(!o)e.setLatLng(this._map.layerPointToLatLng(i.add([a,0])));else e.setLatLng(o>a?e._lli:[s.lat+(e._lli.lat-s.lat)*a/o,s.lng+(e._lli.lng-s.lng)*a/o])}}}}});L.GeoJSON.Ajax=L.GeoJSON.Style.extend({ajaxRequest:null,options:{urlGeoJSON:null,argsGeoJSON:{},idAjaxStatus:null},initialize:function(t,e){if(typeof t=="string")this.options.urlGeoJSON=t;else e=e||t;L.GeoJSON.prototype.initialize.call(this,null,e);this.elAjaxStatus=document.getElementById(this.options.idAjaxStatus)||document.createElement("div");if(window.XMLHttpRequest)this.ajaxRequest=new XMLHttpRequest();else if(window.ActiveXObject)this.ajaxRequest=new ActiveXObject("Microsoft.XMLHTTP");else{alert("Your browser doesn't support AJAX requests.");exit};this.ajaxRequest.context=this;this.ajaxRequest.onreadystatechange=this._onreadystatechange},onAdd:function(t){L.GeoJSON.prototype.onAdd.call(this,t);this.reload();if(this.options.bbox)this._map.on("moveend",this.reload,this)},onRemove:function(t){this.elAjaxStatus.className="";this._map.off("moveend",this.reload,this);L.GeoJSON.prototype.onRemove.call(this,t)},_getUrl:function(){var t=typeof this.options.argsGeoJSON=="function"?this.options.argsGeoJSON.call(this,this):this.options.argsGeoJSON;if(this.options.bbox&&this._map)t.bbox=this._map.getBounds().toBBoxString();return this.options.urlGeoJSON+L.Util.getParamString(t)},reload:function(){this.ajaxRequest.open("GET",this._getUrl(),!0);if(this.options.disabled){this.redraw();this.elAjaxStatus.className="ajax-none";return};if(this._map){var t=this._map.getBounds();if(t._northEast.lng-t._southWest.lng>this.options.maxLatAperture){this.elAjaxStatus.className="ajax-zoom";this.redraw();return}};this.ajaxRequest.send(null);this.elAjaxStatus.className="ajax-wait"},_onreadystatechange:function(t){if(t.target.readyState<4);else if(t.target.status==200)t.target.context.redraw(t.target.responseText);else if(typeof t.target.context["error"+t.target.status]=="function")t.target.context["error"+t.target.status].call(t.target.context);else if(t.target.status)alert("ajaxRequest error status = "+t.target.status+" calling "+t.target.context._getUrl())},redraw:function(t){for(l in this._layers)if(this._map)this._map.removeLayer(this._layers[l]);this._layers=[];if(t){try{var e=JSON.parse(t)}catch(a){alert("Json syntax error on "+this._getUrl()+" :\n"+t);this.elAjaxStatus.className="ajax-error";return};e=this._tradJson.call(this,e);this.addData(e);if(this.elAjaxStatus.className=="ajax-wait")this.elAjaxStatus.className=e.length||(e.features&&e.features.length)?"ajax-some":"ajax-zero"}},_tradJson:function(t){return t}});
;L.GeoJSON.Ajax.OSM=L.GeoJSON.Ajax.extend({options:{urlGeoJSON:'http://overpass-api.de/api/interpreter',bbox:!0,maxLatAperture:0.25,timeout:25,maxPoints:500,services:{},icons:{},language:{min:''},argsGeoJSON:function(){var e=document.getElementsByName('osm-categories[]');if(e.length){this.options.services={};for(var t=0;t<e.length;t++)if(e[t].checked)this.options.services[e[t].id]=e[t].value};this.options.disabled=!Object.keys(this.options.services).length;var i='[out:json][timeout:'+this.options.timeout+'];(\n',s=this._map.getBounds(),n=s._southWest.lat+','+s._southWest.lng+','+s._northEast.lat+','+s._northEast.lng;for(var a in this.options.services){var o=this.options.services[a]+'('+n+');\n';i+='node'+o+'way'+o};return{data:i+');out center;>;'}}},label:function(t){var e=t.tags;return{name:'<b>'+e.name+'</b>',description:[t.icon,'*'.repeat(e.stars),e.rooms?e.rooms+' rooms':'',e.place?e.place+' places':'',e.capacity?e.capacity+' places':'','<a href="http://www.openstreetmap.org/'+(t.center?'way':'node')+'/'+t.id+'">&copy;</a>'],phone:'<a href="tel:'+e.phone.replace(/[^0-9\+]+/ig,'')+'">'+e.phone+'</a>',email:'<a href="mailto:'+e.email+'">'+e.email+'</a>',address:[e['addr:housenumber'],e['addr:street'],e['addr:postcode'],e['addr:city']],website:'<a href="'+e.website+'>'+e.website+'</a>'}},_tradJson:function(o){if(o.remark)this.elAjaxStatus.className='ajax-zoom';var p=[];if(o.elements.length>this.options.maxPoints)this.elAjaxStatus.className='ajax-too';else for(var c in o.elements){var t=o.elements[c],e=t.tags,a=null;for(s in this.options.services)for(ti in e)if(this.options.services[s].indexOf(ti)!=-1&&e[ti]&&this.options.services[s].indexOf(e[ti])!=-1){t.icon=a=s;t.tag=e[ti]};if(!e.phone)e.phone=e['contact:phone']||'';delete e['contact:phone'];if(e.website&&e.website.search('http'))e.website='http://'+e.website;var i=typeof this.options.label=='function'?i=this.options.label(t,i):this.label(t),r=this.options.language,n=i.description.join(' ').replace(new RegExp(Object.keys(r).join('|'),'gi'),function(e){return r[e.toLowerCase()]}),l=[e.name?i.name:'',n.charAt(0).toUpperCase()+n.substr(1),e.ele?i.altitude:'',e.phone?i.phone:'',e.email?i.email:'',e['addr:street']?i.address.join(' '):'',e.website?i.website:'',e.ext1,e.ext2,e.ext3];if(t.center)Object.assign(t,t.center);if(t.type&&t.lon&&t.lat)p.push({type:'Feature',id:t.id,properties:{icon:a,title:'<p>'+l.join('</p><p>').replace('<p></p>','')+'</p>'},geometry:{type:'Point',coordinates:[t.lon,t.lat]}})};return p},error429:function(){this.elAjaxStatus.className='ajax-zoom'},error504:function(){this.elAjaxStatus.className='ajax-zoom'}});
;L.Toolbar=L.Class.extend({includes:[L.Mixin.Events],initialize:function(t){L.setOptions(this,t);this._modes={};this._actionButtons=[];this._activeMode=null},enabled:function(){return this._activeMode!==null},disable:function(){if(!this.enabled()){return};this._activeMode.handler.disable()},addToolbar:function(t){var n=L.DomUtil.create('div','leaflet-draw-section'),i=0,a=this._toolbarClass||'',e=this.getModeHandlers(t),o;this._toolbarContainer=L.DomUtil.create('div','leaflet-draw-toolbar leaflet-bar');this._map=t;for(o=0;o<e.length;o++){if(e[o].enabled){this._initModeHandler(e[o].handler,this._toolbarContainer,i++,a,e[o].title)}};if(!i){return};this._lastButtonIndex=--i;this._actionsContainer=L.DomUtil.create('ul','leaflet-draw-actions');n.appendChild(this._toolbarContainer);n.appendChild(this._actionsContainer);return n},removeToolbar:function(){for(var t in this._modes){if(this._modes.hasOwnProperty(t)){this._disposeButton(this._modes[t].button,this._modes[t].handler.enable,this._modes[t].handler);this._modes[t].handler.disable();this._modes[t].handler.off('enabled',this._handlerActivated,this).off('disabled',this._handlerDeactivated,this)}};this._modes={};for(var o=0,e=this._actionButtons.length;o<e;o++){this._disposeButton(this._actionButtons[o].button,this._actionButtons[o].callback,this)};this._actionButtons=[];this._actionsContainer=null},_initModeHandler:function(o,e,n,a,i){var t=o.type;this._modes[t]={};this._modes[t].handler=o;this._modes[t].button=this._createButton({title:i,className:a+'-'+t,container:e,callback:this._modes[t].handler.enable,context:this._modes[t].handler});this._modes[t].buttonIndex=n;this._modes[t].handler.on('enabled',this._handlerActivated,this).on('disabled',this._handlerDeactivated,this)},_createButton:function(t){var o=L.DomUtil.create('a',t.className||'',t.container);o.href='#';if(t.text){o.innerHTML=t.text};if(t.title){o.title=t.title};L.DomEvent.on(o,'click',L.DomEvent.stopPropagation).on(o,'mousedown',L.DomEvent.stopPropagation).on(o,'dblclick',L.DomEvent.stopPropagation).on(o,'click',L.DomEvent.preventDefault).on(o,'click',t.callback,t.context);return o},_disposeButton:function(t,o){L.DomEvent.off(t,'click',L.DomEvent.stopPropagation).off(t,'mousedown',L.DomEvent.stopPropagation).off(t,'dblclick',L.DomEvent.stopPropagation).off(t,'click',L.DomEvent.preventDefault).off(t,'click',o)},_handlerActivated:function(t){this.disable();this._activeMode=this._modes[t.handler];L.DomUtil.addClass(this._activeMode.button,'leaflet-draw-toolbar-button-enabled');this._showActionsToolbar();this.fire('enable')},_handlerDeactivated:function(){this._hideActionsToolbar();L.DomUtil.removeClass(this._activeMode.button,'leaflet-draw-toolbar-button-enabled');this._activeMode=null;this.fire('disable')},_createActions:function(e){var n=this._actionsContainer,o=this.getActions(e),r=o.length,s,i,a,l;for(i=0,a=this._actionButtons.length;i<a;i++){this._disposeButton(this._actionButtons[i].button,this._actionButtons[i].callback)};this._actionButtons=[];while(n.firstChild){n.removeChild(n.firstChild)};for(var t=0;t<r;t++){if('enabled' in o[t]&&!o[t].enabled){continue};s=L.DomUtil.create('li','',n);l=this._createButton({title:o[t].title,text:o[t].text,container:s,callback:o[t].callback,context:o[t].context});this._actionButtons.push({button:l,callback:o[t].callback})}},_showActionsToolbar:function(){var t=this._activeMode.buttonIndex,e=this._lastButtonIndex,o=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler);this._actionsContainer.style.top=o+'px';if(t===0){L.DomUtil.addClass(this._toolbarContainer,'leaflet-draw-toolbar-notop');L.DomUtil.addClass(this._actionsContainer,'leaflet-draw-actions-top')};if(t===e){L.DomUtil.addClass(this._toolbarContainer,'leaflet-draw-toolbar-nobottom');L.DomUtil.addClass(this._actionsContainer,'leaflet-draw-actions-bottom')};this._actionsContainer.style.display='block'},_hideActionsToolbar:function(){this._actionsContainer.style.display='none';L.DomUtil.removeClass(this._toolbarContainer,'leaflet-draw-toolbar-notop');L.DomUtil.removeClass(this._toolbarContainer,'leaflet-draw-toolbar-nobottom');L.DomUtil.removeClass(this._actionsContainer,'leaflet-draw-actions-top');L.DomUtil.removeClass(this._actionsContainer,'leaflet-draw-actions-bottom')}});
;L.Tooltip=L.Class.extend({initialize:function(t){this._map=t;this._popupPane=t._panes.popupPane;this._container=t.options.drawControlTooltips?L.DomUtil.create('div','leaflet-draw-tooltip',this._popupPane):null;this._singleLineLabel=!1},dispose:function(){if(this._container){this._popupPane.removeChild(this._container);this._container=null}},updateContent:function(t){if(!this._container){return this};t.subtext=t.subtext||'';if(t.subtext.length===0&&!this._singleLineLabel){L.DomUtil.addClass(this._container,'leaflet-draw-tooltip-single');this._singleLineLabel=!0}
else if(t.subtext.length>0&&this._singleLineLabel){L.DomUtil.removeClass(this._container,'leaflet-draw-tooltip-single');this._singleLineLabel=!1};this._container.innerHTML=(t.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+t.subtext+'</span><br />':'')+'<span>'+t.text+'</span>';return this},updatePosition:function(t){var e=this._map.latLngToLayerPoint(t),i=this._container;if(this._container){i.style.visibility='inherit';L.DomUtil.setPosition(i,e)};return this},showAsError:function(){if(this._container){L.DomUtil.addClass(this._container,'leaflet-error-draw-tooltip')};return this},removeError:function(){if(this._container){L.DomUtil.removeClass(this._container,'leaflet-error-draw-tooltip')};return this}});
;
;L.LatLngUtil={cloneLatLngs:function(n){var L=[];for(var t=0,a=n.length;t<a;t++){L.push(this.cloneLatLng(n[t]))};return L},cloneLatLng:function(n){return L.latLng(n.lat,n.lng)}};
;L.Util.extend(L.LineUtil,{segmentsIntersect:function(t,c,e,n){return this._checkCounterclockwise(t,e,n)!==this._checkCounterclockwise(c,e,n)&&this._checkCounterclockwise(t,c,e)!==this._checkCounterclockwise(t,c,n)},_checkCounterclockwise:function(e,t,c){return(c.y-e.y)*(t.x-e.x)>(t.y-e.y)*(c.x-e.x)}});
;L.Polygon.include({intersects:function(){var s,t=this._originalPoints,n,r,i,e;if(this._tooFewPointsForIntersection()){return!1};s=L.Polyline.prototype.intersects.call(this);if(s){return!0};n=t.length;r=t[0];i=t[n-1];e=n-2;return this._lineSegmentsIntersectsRange(i,r,e,1)}});
;L.Polyline.include({intersects:function(){var n=this._originalPoints,r=n?n.length:0,t,i,e;if(this._tooFewPointsForIntersection()){return!1};for(t=r-1;t>=3;t--){i=n[t-1];e=n[t];if(this._lineSegmentsIntersectsRange(i,e,t-2)){return!0}};return!1},newLatLngIntersects:function(t,n){if(!this._map){return!1};return this.newPointIntersects(this._map.latLngToLayerPoint(t),n)},newPointIntersects:function(t,e){var n=this._originalPoints,i=n?n.length:0,s=n?n[i-1]:null,r=i-2;if(this._tooFewPointsForIntersection(1)){return!1};return this._lineSegmentsIntersectsRange(s,t,r,e?1:0)},_tooFewPointsForIntersection:function(t){var e=this._originalPoints,n=e?e.length:0;n+=t||0;return!this._originalPoints||n<=3},_lineSegmentsIntersectsRange:function(n,i,l,e){var o=this._originalPoints,s,r;e=e||0;for(var t=l;t>e;t--){s=o[t-1];r=o[t];if(L.LineUtil.segmentsIntersect(n,i,s,r)){return!0}};return!1}});
;L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:'draw'},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{}},initialize:function(t){for(var o in this.options){if(this.options.hasOwnProperty(o)){if(t[o]){t[o]=L.extend({},this.options[o],t[o])}}};this._toolbarClass='leaflet-draw-draw';L.Toolbar.prototype.initialize.call(this,t)},getModeHandlers:function(t){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(t,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(t,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(t,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(t,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(t,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker}]},getActions:function(t){return[{enabled:t.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:t.deleteLastVertex,context:t},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(t){L.setOptions(this,t);for(var o in this._modes){if(this._modes.hasOwnProperty(o)&&t.hasOwnProperty(o)){this._modes[o].handler.setOptions(t[o])}}}});
;L.Draw={};L.Draw.Feature=L.Handler.extend({includes:L.Mixin.Events,initialize:function(e,t){this._map=e;this._container=e._container;this._overlayPane=e._panes.overlayPane;this._popupPane=e._panes.popupPane;if(t&&t.shapeOptions){t.shapeOptions=L.Util.extend({},this.options.shapeOptions,t.shapeOptions)};L.setOptions(this,t)},enable:function(){if(this._enabled){return};L.Handler.prototype.enable.call(this);this.fire('enabled',{handler:this.type});this._map.fire('draw:drawstart',{layerType:this.type})},disable:function(){if(!this._enabled){return};L.Handler.prototype.disable.call(this);this._map.fire('draw:drawstop',{layerType:this.type});this.fire('disabled',{handler:this.type})},addHooks:function(){var e=this._map;if(e){L.DomUtil.disableTextSelection();e.getContainer().focus();this._tooltip=new L.Tooltip(this._map);L.DomEvent.on(this._container,'keyup',this._cancelDrawing,this)}},removeHooks:function(){if(this._map){L.DomUtil.enableTextSelection();this._tooltip.dispose();this._tooltip=null;L.DomEvent.off(this._container,'keyup',this._cancelDrawing,this)}},setOptions:function(e){L.setOptions(this,e)},_fireCreatedEvent:function(e){this._map.fire('draw:created',{layer:e,layerType:this.type})},_cancelDrawing:function(e){if(e.keyCode===27){this.disable()}}});
;L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:'polyline'},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:'#b00b00',timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:'leaflet-div-icon leaflet-editing-icon'}),guidelineDistance:20,maxGuideLineLength:4000,shapeOptions:{stroke:!0,color:'#f06eaa',weight:4,opacity:0.5,fill:!1,clickable:!0},metric:!0,showLength:!0,zIndexOffset:2000},initialize:function(t,e){this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error;if(e&&e.drawError){e.drawError=L.Util.extend({},this.options.drawError,e.drawError)};this.type=L.Draw.Polyline.TYPE;L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this);if(this._map){this._markers=[];this._markerGroup=new L.LayerGroup();this._map.addLayer(this._markerGroup);this._poly=new L.Polyline([],this.options.shapeOptions);this._tooltip.updateContent(this._getTooltipText());if(!this._mouseMarker){this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:'leaflet-mouse-marker',iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset })};this._mouseMarker.on('mousedown',this._onMouseDown,this).addTo(this._map);this._map.on('mousemove',this._onMouseMove,this).on('mouseup',this._onMouseUp,this).on('zoomend',this._onZoomEnd,this)}},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this);this._clearHideErrorTimeout();this._cleanUpShape();this._map.removeLayer(this._markerGroup);delete this._markerGroup;delete this._markers;this._map.removeLayer(this._poly);delete this._poly;this._mouseMarker.off('mousedown',this._onMouseDown,this).off('mouseup',this._onMouseUp,this);this._map.removeLayer(this._mouseMarker);delete this._mouseMarker;this._clearGuides();this._map.off('mousemove',this._onMouseMove,this).off('zoomend',this._onZoomEnd,this)},deleteLastVertex:function(){if(this._markers.length<=1){return};var i=this._markers.pop(),t=this._poly,e=this._poly.spliceLatLngs(t.getLatLngs().length-1,1)[0];this._markerGroup.removeLayer(i);if(t.getLatLngs().length<2){this._map.removeLayer(t)};this._vertexChanged(e,!1)},addVertex:function(t){var e=this._markers.length;if(e>0&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(t)){this._showErrorTooltip();return}
else if(this._errorShown){this._hideErrorTooltip()};this._markers.push(this._createMarker(t));this._poly.addLatLng(t);if(this._poly.getLatLngs().length===2){this._map.addLayer(this._poly)};this._vertexChanged(t,!0)},_finishShape:function(){var t=this._poly.newLatLngIntersects(this._poly.getLatLngs()[0],!0);if((!this.options.allowIntersection&&t)||!this._shapeIsValid()){this._showErrorTooltip();return};this._fireCreatedEvent();this.disable();if(this.options.repeatMode){this.enable()}},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._updateGuide()},_onMouseMove:function(t){var i=t.layerPoint,e=t.latlng;this._currentLatLng=e;this._updateTooltip(e);this._updateGuide(i);this._mouseMarker.setLatLng(e);L.DomEvent.preventDefault(t.originalEvent)},_vertexChanged:function(t,e){this._updateFinishHandler();this._updateRunningMeasure(t,e);this._clearGuides();this._updateTooltip()},_onMouseDown:function(t){var e=t.originalEvent;this._mouseDownOrigin=L.point(e.clientX,e.clientY)},_onMouseUp:function(t){if(this._mouseDownOrigin){var e=L.point(t.originalEvent.clientX,t.originalEvent.clientY).distanceTo(this._mouseDownOrigin);if(Math.abs(e)<9*(window.devicePixelRatio||1)){this.addVertex(t.latlng)}};this._mouseDownOrigin=null},_updateFinishHandler:function(){var t=this._markers.length;if(t>1){this._markers[t-1].on('click',this._finishShape,this)};if(t>2){this._markers[t-2].off('click',this._finishShape,this)}},_createMarker:function(t){var e=new L.Marker(t,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset *2});this._markerGroup.addLayer(e);return e},_updateGuide:function(t){var e=this._markers.length;if(e>0){t=t||this._map.latLngToLayerPoint(this._currentLatLng);this._clearGuides();this._drawGuide(this._map.latLngToLayerPoint(this._markers[e-1].getLatLng()),t)}},_updateTooltip:function(t){var e=this._getTooltipText();if(t){this._tooltip.updatePosition(t)};if(!this._errorShown){this._tooltip.updateContent(e)}},_drawGuide:function(t,e){var o=Math.floor(Math.sqrt(Math.pow((e.x-t.x),2)+Math.pow((e.y-t.y),2))),h=this.options.guidelineDistance,a=this.options.maxGuideLineLength,r=o>a?o-a:h,i,n,s;if(!this._guidesContainer){this._guidesContainer=L.DomUtil.create('div','leaflet-draw-guides',this._overlayPane)};for(;r<o;r+=this.options.guidelineDistance){i=r/o;n={x:Math.floor((t.x*(1-i))+(i*e.x)),y:Math.floor((t.y*(1-i))+(i*e.y))};s=L.DomUtil.create('div','leaflet-draw-guide-dash',this._guidesContainer);s.style.backgroundColor=!this._errorShown?this.options.shapeOptions.color:this.options.drawError.color;L.DomUtil.setPosition(s,n)}},_updateGuideColor:function(t){if(this._guidesContainer){for(var e=0,i=this._guidesContainer.childNodes.length;e<i;e++){this._guidesContainer.childNodes[e].style.backgroundColor=t}}},_clearGuides:function(){if(this._guidesContainer){while(this._guidesContainer.firstChild){this._guidesContainer.removeChild(this._guidesContainer.firstChild)}}},_getTooltipText:function(){var i=this.options.showLength,t,e;if(this._markers.length===0){t={text:L.drawLocal.draw.handlers.polyline.tooltip.start}}
else{e=i?this._getMeasurementString():'';if(this._markers.length===1){t={text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:e}}
else{t={text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:e}}};return t},_updateRunningMeasure:function(t,e){var r=this._markers.length,i,o;if(this._markers.length===1){this._measurementRunningTotal=0}
else{i=r-(e?2:1);o=t.distanceTo(this._markers[i].getLatLng());this._measurementRunningTotal+=o*(e?1:-1)}},_getMeasurementString:function(){var i=this._currentLatLng,e=this._markers[this._markers.length-1].getLatLng(),t;t=this._measurementRunningTotal+i.distanceTo(e);return L.GeometryUtil.readableDistance(t,this.options.metric)},_showErrorTooltip:function(){this._errorShown=!0;this._tooltip.showAsError().updateContent({text:this.options.drawError.message});this._updateGuideColor(this.options.drawError.color);this._poly.setStyle({color:this.options.drawError.color});this._clearHideErrorTimeout();this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1;this._clearHideErrorTimeout();this._tooltip.removeError().updateContent(this._getTooltipText());this._updateGuideColor(this.options.shapeOptions.color);this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){if(this._hideErrorTimeout){clearTimeout(this._hideErrorTimeout);this._hideErrorTimeout=null}},_cleanUpShape:function(){if(this._markers.length>1){this._markers[this._markers.length-1].off('click',this._finishShape,this)}},_fireCreatedEvent:function(){var t=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}});
;L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:'marker'},options:{icon:new L.Icon.Default(),repeatMode:!1,zIndexOffset:2000},initialize:function(e,t){this.type=L.Draw.Marker.TYPE;L.Draw.Feature.prototype.initialize.call(this,e,t)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this);if(this._map){this._tooltip.updateContent({text:L.drawLocal.draw.handlers.marker.tooltip.start});if(!this._mouseMarker){this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:'leaflet-mouse-marker',iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset })};this._mouseMarker.on('click',this._onClick,this).addTo(this._map);this._map.on('mousemove',this._onMouseMove,this)}},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this);if(this._map){if(this._marker){this._marker.off('click',this._onClick,this);this._map.off('click',this._onClick,this).removeLayer(this._marker);delete this._marker};this._mouseMarker.off('click',this._onClick,this);this._map.removeLayer(this._mouseMarker);delete this._mouseMarker;this._map.off('mousemove',this._onMouseMove,this)}},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e);this._mouseMarker.setLatLng(e);if(!this._marker){this._marker=new L.Marker(e,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset });this._marker.on('click',this._onClick,this);this._map.on('click',this._onClick,this).addLayer(this._marker)}
else{e=this._mouseMarker.getLatLng();this._marker.setLatLng(e)}},_onClick:function(){this._fireCreatedEvent();this.disable();if(this.options.repeatMode){this.enable()}},_fireCreatedEvent:function(){var e=new L.Marker(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,e)}});
;L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:'polygon'},Poly:L.Polygon,options:{showArea:!1,shapeOptions:{stroke:!0,color:'#f06eaa',weight:4,opacity:0.5,fill:!0,fillColor:null,fillOpacity:0.2,clickable:!0}},initialize:function(t,i){L.Draw.Polyline.prototype.initialize.call(this,t,i);this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var i=this._markers.length;if(i===1){this._markers[0].on('click',this._finishShape,this)};if(i>2){this._markers[i-1].on('dblclick',this._finishShape,this);if(i>3){this._markers[i-2].off('dblclick',this._finishShape,this)}}},_getTooltipText:function(){var i,t;if(this._markers.length===0){i=L.drawLocal.draw.handlers.polygon.tooltip.start}
else if(this._markers.length<3){i=L.drawLocal.draw.handlers.polygon.tooltip.cont}
else{i=L.drawLocal.draw.handlers.polygon.tooltip.end;t=this._getMeasurementString()};return{text:i,subtext:t}},_getMeasurementString:function(){var i=this._area;if(!i){return null};return L.GeometryUtil.readableArea(i,this.options.metric)},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(e,t){var i;if(!this.options.allowIntersection&&this.options.showArea){i=this._poly.getLatLngs();this._area=L.GeometryUtil.geodesicArea(i)};L.Draw.Polyline.prototype._vertexChanged.call(this,e,t)},_cleanUpShape:function(){var i=this._markers.length;if(i>0){this._markers[0].off('click',this._finishShape,this);if(i>2){this._markers[i-1].off('dblclick',this._finishShape,this)}}}});
;L.EditToolbar=L.Toolbar.extend({statics:{TYPE:'edit'},options:{edit:{selectedPathOptions:{color:'#fe57a1',opacity:0.6,dashArray:'10, 10',fill:!0,fillColor:'#fe57a1',fillOpacity:0.1,maintainColor:!1}},remove:{},featureGroup:null},initialize:function(t){if(t.edit){if(typeof t.edit.selectedPathOptions==='undefined'){t.edit.selectedPathOptions=this.options.edit.selectedPathOptions};t.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,t.edit.selectedPathOptions)};if(t.remove){t.remove=L.extend({},this.options.remove,t.remove)};this._toolbarClass='leaflet-draw-edit';L.Toolbar.prototype.initialize.call(this,t);this._selectedFeatureCount=0},getModeHandlers:function(t){var e=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(t,{featureGroup:e,selectedPathOptions:this.options.edit.selectedPathOptions}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(t,{featureGroup:e}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(){return[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}]},addToolbar:function(t){var e=L.Toolbar.prototype.addToolbar.call(this,t);this._checkDisabled();this.options.featureGroup.on('layeradd layerremove',this._checkDisabled,this);return e},removeToolbar:function(){this.options.featureGroup.off('layeradd layerremove',this._checkDisabled,this);L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){if(!this.enabled()){return};this._activeMode.handler.revertLayers();L.Toolbar.prototype.disable.call(this)},_save:function(){this._activeMode.handler.save();this._activeMode.handler.disable()},_checkDisabled:function(){var o=this.options.featureGroup,e=o.getLayers().length!==0,t;if(this.options.edit){t=this._modes[L.EditToolbar.Edit.TYPE].button;if(e){L.DomUtil.removeClass(t,'leaflet-disabled')}
else{L.DomUtil.addClass(t,'leaflet-disabled')};t.setAttribute('title',e?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)};if(this.options.remove){t=this._modes[L.EditToolbar.Delete.TYPE].button;if(e){L.DomUtil.removeClass(t,'leaflet-disabled')}
else{L.DomUtil.addClass(t,'leaflet-disabled')};t.setAttribute('title',e?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled)}}});
;L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:'edit'},includes:L.Mixin.Events,initialize:function(e,t){L.Handler.prototype.initialize.call(this,e);L.setOptions(this,t);this._featureGroup=t.featureGroup;if(!(this._featureGroup instanceof L.FeatureGroup)){throw new Error('options.featureGroup must be a L.FeatureGroup')};this._uneditedLayerProps={};this.type=L.EditToolbar.Edit.TYPE},enable:function(){if(this._enabled||!this._hasAvailableLayers()){return};this.fire('enabled',{handler:this.type});this._map.fire('draw:editstart',{handler:this.type});L.Handler.prototype.enable.call(this);this._featureGroup.on('layeradd',this._enableLayerEdit,this).on('layerremove',this._disableLayerEdit,this)},disable:function(){if(!this._enabled){return};this._featureGroup.off('layeradd',this._enableLayerEdit,this).off('layerremove',this._disableLayerEdit,this);L.Handler.prototype.disable.call(this);this._map.fire('draw:editstop',{handler:this.type});this.fire('disabled',{handler:this.type})},addHooks:function(){var e=this._map;if(e){e.getContainer().focus();this._featureGroup.eachLayer(this._enableLayerEdit,this);this._tooltip=new L.Tooltip(this._map);this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext});this._map.on('mousemove',this._onMouseMove,this)}},removeHooks:function(){if(this._map){this._featureGroup.eachLayer(this._disableLayerEdit,this);this._uneditedLayerProps={};this._tooltip.dispose();this._tooltip=null;this._map.off('mousemove',this._onMouseMove,this)}},revertLayers:function(){this._featureGroup.eachLayer(function(e){this._revertLayer(e)},this)},save:function(){var e=new L.LayerGroup();this._featureGroup.eachLayer(function(t){if(t.edited){e.addLayer(t);t.edited=!1}});this._map.fire('draw:edited',{layers:e})},_backupLayer:function(e){var t=L.Util.stamp(e);if(!this._uneditedLayerProps[t]){if(e instanceof L.Polyline||e instanceof L.Polygon||e instanceof L.Rectangle){this._uneditedLayerProps[t]={latlngs:L.LatLngUtil.cloneLatLngs(e.getLatLngs())}}
else if(e instanceof L.Circle){this._uneditedLayerProps[t]={latlng:L.LatLngUtil.cloneLatLng(e.getLatLng()),radius:e.getRadius()}}
else if(e instanceof L.Marker){this._uneditedLayerProps[t]={latlng:L.LatLngUtil.cloneLatLng(e.getLatLng())}}}},_revertLayer:function(e){var t=L.Util.stamp(e);e.edited=!1;if(this._uneditedLayerProps.hasOwnProperty(t)){if(e instanceof L.Polyline||e instanceof L.Polygon||e instanceof L.Rectangle){e.setLatLngs(this._uneditedLayerProps[t].latlngs)}
else if(e instanceof L.Circle){e.setLatLng(this._uneditedLayerProps[t].latlng);e.setRadius(this._uneditedLayerProps[t].radius)}
else if(e instanceof L.Marker){e.setLatLng(this._uneditedLayerProps[t].latlng)};e.fire('revert-edited',{layer:e})}},_enableLayerEdit:function(e){var t=e.layer||e.target ||e,i;this._backupLayer(t);if(this.options.selectedPathOptions){i=L.Util.extend({},this.options.selectedPathOptions);if(i.maintainColor){i.color=t.options.color;i.fillColor=t.options.fillColor};t.options.original=L.extend({},t.options);t.options.editing=i};t.editing.enable()},_disableLayerEdit:function(e){var t=e.layer||e.target ||e;t.edited=!1;t.editing.disable();delete t.options.editing;delete t.options.original},_onMouseMove:function(e){this._tooltip.updatePosition(e.latlng)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}});
;L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:'remove'},includes:L.Mixin.Events,initialize:function(e,t){L.Handler.prototype.initialize.call(this,e);L.Util.setOptions(this,t);this._deletableLayers=this.options.featureGroup;if(!(this._deletableLayers instanceof L.FeatureGroup)){throw new Error('options.featureGroup must be a L.FeatureGroup')};this.type=L.EditToolbar.Delete.TYPE},enable:function(){if(this._enabled||!this._hasAvailableLayers()){return};this.fire('enabled',{handler:this.type});this._map.fire('draw:deletestart',{handler:this.type});L.Handler.prototype.enable.call(this);this._deletableLayers.on('layeradd',this._enableLayerDelete,this).on('layerremove',this._disableLayerDelete,this)},disable:function(){if(!this._enabled){return};this._deletableLayers.off('layeradd',this._enableLayerDelete,this).off('layerremove',this._disableLayerDelete,this);L.Handler.prototype.disable.call(this);this._map.fire('draw:deletestop',{handler:this.type});this.fire('disabled',{handler:this.type})},addHooks:function(){var e=this._map;if(e){e.getContainer().focus();this._deletableLayers.eachLayer(this._enableLayerDelete,this);this._deletedLayers=new L.LayerGroup();this._tooltip=new L.Tooltip(this._map);this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text});this._map.on('mousemove',this._onMouseMove,this)}},removeHooks:function(){if(this._map){this._deletableLayers.eachLayer(this._disableLayerDelete,this);this._deletedLayers=null;this._tooltip.dispose();this._tooltip=null;this._map.off('mousemove',this._onMouseMove,this)}},revertLayers:function(){this._deletedLayers.eachLayer(function(e){this._deletableLayers.addLayer(e);e.fire('revert-deleted',{layer:e})},this)},save:function(){this._map.fire('draw:deleted',{layers:this._deletedLayers})},_enableLayerDelete:function(e){var t=e.layer||e.target ||e;t.on('click',this._removeLayer,this)},_disableLayerDelete:function(e){var t=e.layer||e.target ||e;t.off('click',this._removeLayer,this);this._deletedLayers.removeLayer(t)},_removeLayer:function(e){var t=e.layer||e.target ||e;this._deletableLayers.removeLayer(t);this._deletedLayers.addLayer(t);t.fire('deleted')},_onMouseMove:function(e){this._tooltip.updatePosition(e.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}});
;L.Control.Draw=L.Control.extend({options:{position:'topleft',draw:{},edit:!1},initialize:function(t){if(L.version<'0.7'){throw new Error('Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/')};L.Control.prototype.initialize.call(this,t);var o;this._toolbars={};if(L.DrawToolbar&&this.options.draw){o=new L.DrawToolbar(this.options.draw);this._toolbars[L.DrawToolbar.TYPE]=o;this._toolbars[L.DrawToolbar.TYPE].on('enable',this._toolbarEnabled,this)};if(L.EditToolbar&&this.options.edit){o=new L.EditToolbar(this.options.edit);this._toolbars[L.EditToolbar.TYPE]=o;this._toolbars[L.EditToolbar.TYPE].on('enable',this._toolbarEnabled,this)}},onAdd:function(t){var r=L.DomUtil.create('div','leaflet-draw'),s=!1,i='leaflet-draw-toolbar-top',o;for(var a in this._toolbars){if(this._toolbars.hasOwnProperty(a)){o=this._toolbars[a].addToolbar(t);if(o){if(!s){if(!L.DomUtil.hasClass(o,i)){L.DomUtil.addClass(o.childNodes[0],i)};s=!0};r.appendChild(o)}}};return r},onRemove:function(){for(var o in this._toolbars){if(this._toolbars.hasOwnProperty(o)){this._toolbars[o].removeToolbar()}}},setDrawingOptions:function(o){for(var t in this._toolbars){if(this._toolbars[t]instanceof L.DrawToolbar){this._toolbars[t].setOptions(o)}}},_toolbarEnabled:function(o){var i=o.target;for(var t in this._toolbars){if(this._toolbars[t]!==i){this._toolbars[t].disable()}}}});L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1});L.Map.addInitHook(function(){if(this.options.drawControl){this.drawControl=new L.Control.Draw();this.addControl(this.drawControl)}});
;L.Edit=L.Edit||{};L.Edit.Poly=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:'leaflet-div-icon leaflet-editing-icon'})},initialize:function(i,e){this._poly=i;L.setOptions(this,e)},addHooks:function(){var i=this._poly;if(!(i instanceof L.Polygon)){i.options.editing.fill=!1};i.setStyle(i.options.editing);if(this._poly._map){if(!this._markerGroup){this._initMarkers()};this._poly._map.addLayer(this._markerGroup)}},removeHooks:function(){var i=this._poly;i.setStyle(i.options.original);if(i._map){i._map.removeLayer(this._markerGroup);delete this._markerGroup;delete this._markers}},updateMarkers:function(){this._markerGroup.clearLayers();this._initMarkers()},_initMarkers:function(){if(!this._markerGroup){this._markerGroup=new L.LayerGroup()};this._markers=[];var s=this._poly._latlngs,i,r,e,t;for(i=0,e=s.length;i<e;i++){t=this._createMarker(s[i],i);t.on('click',this._onMarkerClick,this);this._markers.push(t)};var n,a;for(i=0,r=e-1;i<e;r=i++){if(i===0&&!(L.Polygon&&(this._poly instanceof L.Polygon))){continue};n=this._markers[r];a=this._markers[i];this._createMiddleMarker(n,a);this._updatePrevNext(n,a)}},_createMarker:function(i,t){var e=new L.Marker(i,{draggable:!0,icon:this.options.icon});e._origLatLng=i;e._index=t;e.on('drag',this._onMarkerDrag,this);e.on('dragend',this._fireEdit,this);this._markerGroup.addLayer(e);return e},_removeMarker:function(i){var e=i._index;this._markerGroup.removeLayer(i);this._markers.splice(e,1);this._poly.spliceLatLngs(e,1);this._updateIndexes(e,-1);i.off('drag',this._onMarkerDrag,this).off('dragend',this._fireEdit,this).off('click',this._onMarkerClick,this)},_fireEdit:function(){this._poly.edited=!0;this._poly.fire('edit')},_onMarkerDrag:function(e){var i=e.target;L.extend(i._origLatLng,i._latlng);if(i._middleLeft){i._middleLeft.setLatLng(this._getMiddleLatLng(i._prev,i))};if(i._middleRight){i._middleRight.setLatLng(this._getMiddleLatLng(i,i._next))};this._poly.redraw()},_onMarkerClick:function(e){var t=L.Polygon&&(this._poly instanceof L.Polygon)?4:3,i=e.target;if(this._poly._latlngs.length<t){return};this._removeMarker(i);this._updatePrevNext(i._prev,i._next);if(i._middleLeft){this._markerGroup.removeLayer(i._middleLeft)};if(i._middleRight){this._markerGroup.removeLayer(i._middleRight)};if(i._prev&&i._next){this._createMiddleMarker(i._prev,i._next)}
else if(!i._prev){i._next._middleLeft=null}
else if(!i._next){i._prev._middleRight=null};this._fireEdit()},_updateIndexes:function(i,e){this._markerGroup.eachLayer(function(t){if(t._index>i){t._index+=e}})},_createMiddleMarker:function(e,t){var n=this._getMiddleLatLng(e,t),i=this._createMarker(n),s,r,a;i.setOpacity(0.6);e._middleRight=t._middleLeft=i;r=function(){var r=t._index;i._index=r;i.off('click',s,this).on('click',this._onMarkerClick,this);n.lat=i.getLatLng().lat;n.lng=i.getLatLng().lng;this._poly.spliceLatLngs(r,0,n);this._markers.splice(r,0,i);i.setOpacity(1);this._updateIndexes(r,1);t._index++;this._updatePrevNext(e,i);this._updatePrevNext(i,t);this._poly.fire('editstart')};a=function(){i.off('dragstart',r,this);i.off('dragend',a,this);this._createMiddleMarker(e,i);this._createMiddleMarker(i,t)};s=function(){r.call(this);a.call(this);this._fireEdit()};i.on('click',this._cut,this).on('dragstart',r,this).on('dragend',a,this);this._markerGroup.addLayer(i)},_updatePrevNext:function(i,e){if(i){i._next=e};if(e){e._prev=i}},_getMiddleLatLng:function(i,e){var t=this._poly._map,n=t.project(i.getLatLng()),r=t.project(e.getLatLng());return t.unproject(n._add(r)._divideBy(2))}});L.Polyline.addInitHook(function(){if(this.editing){return};if(L.Edit.Poly){this.editing=new L.Edit.Poly(this);if(this.options.editable){this.editing.enable()}};this.on('add',function(){if(this.editing&&this.editing.enabled()){this.editing.addHooks()}});this.on('remove',function(){if(this.editing&&this.editing.enabled()){this.editing.removeHooks()}})});
;L.Edit=L.Edit||{};L.Edit.Marker=L.Handler.extend({initialize:function(e,t){this._marker=e;L.setOptions(this,t)},addHooks:function(){var e=this._marker;e.dragging.enable();e.on('dragend',this._onDragEnd,e);this._toggleMarkerHighlight()},removeHooks:function(){var e=this._marker;e.dragging.disable();e.off('dragend',this._onDragEnd,e);this._toggleMarkerHighlight()},_onDragEnd:function(e){var t=e.target;t.edited=!0},_toggleMarkerHighlight:function(){if(!this._icon){return};var e=this._icon;e.style.display='none';if(L.DomUtil.hasClass(e,'leaflet-edit-marker-selected')){L.DomUtil.removeClass(e,'leaflet-edit-marker-selected');this._offsetMarker(e,-4)}
else{L.DomUtil.addClass(e,'leaflet-edit-marker-selected');this._offsetMarker(e,4)};e.style.display=''},_offsetMarker:function(e,t){var r=parseInt(e.style.marginTop,10)-t,i=parseInt(e.style.marginLeft,10)-t;e.style.marginTop=r+'px';e.style.marginLeft=i+'px'}});L.Marker.addInitHook(function(){if(L.Edit.Marker){this.editing=new L.Edit.Marker(this);if(this.options.editable){this.editing.enable()}}});
;L.Marker.include({closePopup:function(){return this}});L.Rectangle=L.Polygon.extend({});L.Draw.Rectangle=L.Class.extend({});L.Draw.Circle=L.Class.extend({});L.drawLocal={edit:{handlers:{},toolbar:{buttons:{}}}};
(function(t){var e;if(typeof define==='function'&&define.amd){define(['leaflet'],t)}
else if(typeof module!=='undefined'){e=require('leaflet');module.exports=t(e)}
else{if(typeof window.L==='undefined')throw'Leaflet must be loaded first';t(window.L)}}(function(t){'use strict';t.GeometryUtil=t.extend(t.GeometryUtil||{},{distance:function(t,e,n){return t.latLngToLayerPoint(e).distanceTo(t.latLngToLayerPoint(n))},distanceSegment:function(e,n,r,i){var l=e.latLngToLayerPoint(n),o=e.latLngToLayerPoint(r),a=e.latLngToLayerPoint(i);return t.LineUtil.pointToSegmentDistance(l,o,a)},readableDistance:function(t,e){var r=(e!=='imperial'),n;if(r){if(t>1000){n=(t/1000).toFixed(2)+' km'}
else{n=Math.ceil(t)+' m'}}
else{t*=1.09361;if(t>1760){n=(t/1760).toFixed(2)+' miles'}
else{n=Math.ceil(t)+' yd'}};return n},belongsSegment:function(t,e,n,r){r=r===undefined?0.2:r;var i=e.distanceTo(n),a=e.distanceTo(t)+t.distanceTo(n)-i;return a/i<r},length:function(e){var n=t.GeometryUtil.accumulatedLengths(e);return n.length>0?n[n.length-1]:0},accumulatedLengths:function(t){if(typeof t.getLatLngs=='function'){t=t.getLatLngs()};if(t.length===0)return[];var n=0,r=[0];for(var e=0,i=t.length-1;e<i;e++){n+=t[e].distanceTo(t[e+1]);r.push(n)};return r},closestOnSegment:function(e,n,r,i){var a=e.getMaxZoom();if(a===Infinity)a=e.getZoom();var l=e.project(n,a),s=e.project(r,a),c=e.project(i,a),o=t.LineUtil.closestPointOnSegment(l,s,c);return e.unproject(o,a)},closest:function(e,n,r,o){if(typeof n.getLatLngs!='function')n=t.polyline(n);var l=n.getLatLngs().slice(0),c=Infinity,s=null,i,f,a;if(o){for(i=0,f=l.length;i<f;i++){var u=l[i];a=t.GeometryUtil.distance(e,r,u);if(a<c){c=a;s=u;s.distance=a}};return s};if(n instanceof t.Polygon){l.push(l[0])};for(i=0,f=l.length;i<f-1;i++){var g=l[i],L=l[i+1];a=t.GeometryUtil.distanceSegment(e,r,g,L);if(a<=c){c=a;s=t.GeometryUtil.closestOnSegment(e,r,g,L);s.distance=a}};return s},closestLayer:function(e,n,r){var c=Infinity,s=null,i=null,a=Infinity;for(var l=0,f=n.length;l<f;l++){var o=n[l];if(typeof o.getLatLng=='function'){i=o.getLatLng();a=t.GeometryUtil.distance(e,r,i)}
else{i=t.GeometryUtil.closest(e,o,r);if(i)a=i.distance};if(a<c){c=a;s={layer:o,latlng:i,distance:a}}};return s},closestLayerSnap:function(e,n,r,i,o){i=typeof i=='number'?i:Infinity;o=typeof o=='boolean'?o:!0;var a=t.GeometryUtil.closestLayer(e,n,r);if(!a||a.distance>i)return null;if(o&&typeof a.layer.getLatLngs=='function'){var l=t.GeometryUtil.closest(e,a.layer,a.latlng,!0);if(l.distance<i){a.latlng=l;a.distance=t.GeometryUtil.distance(e,l,r)}};return a},interpolateOnPointSegment:function(e,n,r){return t.point((e.x*(1-r))+(r*n.x),(e.y*(1-r))+(r*n.y))},interpolateOnLine:function(n,e,r){e=(e instanceof t.Polyline)?e.getLatLngs():e;var g=e.length;if(g<2){return null};r=Math.max(Math.min(r,1),0);if(r===0){return{latLng:e[0]instanceof t.LatLng?e[0]:t.latLng(e[0]),predecessor:-1}};if(r==1){return{latLng:e[e.length-1]instanceof t.LatLng?e[e.length-1]:t.latLng(e[e.length-1]),predecessor:e.length-2}};var c=n.getMaxZoom();if(c===Infinity)c=n.getZoom();var a=[],L=0;for(var i=0;i<g;i++){a[i]=n.project(e[i],c);if(i>0)L+=a[i-1].distanceTo(a[i])};var y=L*r,s=a[0],l=a[1],u=0,o=s.distanceTo(l),f=1;for(;f<g&&o<y;f++){s=l;u=o;l=a[f];o+=s.distanceTo(l)};var m=((o-u)!==0)?((y-u)/(o-u)):0,h=t.GeometryUtil.interpolateOnPointSegment(s,l,m);return{latLng:n.unproject(h,c),predecessor:f-2}},locateOnLine:function(e,n,r){var i=n.getLatLngs();if(r.equals(i[0]))return 0.0;if(r.equals(i[i.length-1]))return 1.0;var f=t.GeometryUtil.closest(e,n,r,!1),o=t.GeometryUtil.accumulatedLengths(i),L=o[o.length-1],l=0,s=!1;for(var a=0,u=i.length-1;a<u;a++){var c=i[a],g=i[a+1];l=o[a];if(t.GeometryUtil.belongsSegment(f,c,g)){l+=c.distanceTo(f);s=!0;break}};if(!s){throw'Could not interpolate '+r.toString()+' within '+n.toString()};return l/L},reverse:function(e){return t.polyline(e.getLatLngs().slice(0).reverse())},extract:function(e,n,r,i){if(r>i){return t.GeometryUtil.extract(e,t.GeometryUtil.reverse(n),1.0-r,1.0-i)};r=Math.max(Math.min(r,1),0);i=Math.max(Math.min(i,1),0);var c=n.getLatLngs(),o=t.GeometryUtil.interpolateOnLine(e,n,r),a=t.GeometryUtil.interpolateOnLine(e,n,i);if(r==i){var s=t.GeometryUtil.interpolateOnLine(e,n,i);return[s.latLng]};if(o.predecessor==-1)o.predecessor=0;if(a.predecessor==-1)a.predecessor=0;var l=c.slice(o.predecessor+1,a.predecessor+1);l.unshift(o.latLng);l.push(a.latLng);return l},isBefore:function(t,e){if(!e)return!1;var n=t.getLatLngs(),r=e.getLatLngs();return(n[n.length-1]).equals(r[0])},isAfter:function(t,e){if(!e)return!1;var r=t.getLatLngs(),n=e.getLatLngs();return(r[0]).equals(n[n.length-1])},startsAtExtremity:function(t,e){if(!e)return!1;var i=t.getLatLngs(),n=e.getLatLngs(),r=i[0];return r.equals(n[0])||r.equals(n[n.length-1])},computeAngle:function(t,e){return(Math.atan2(e.y-t.y,e.x-t.x)*180/Math.PI)},computeSlope:function(t,e){var n=(e.y-t.y)/(e.x-t.x),r=t.y-(n*t.x);return{'a':n,'b':r}},rotatePoint:function(e,n,r,i){var o=e.getMaxZoom();if(o===Infinity)o=e.getZoom();var l=r*Math.PI/180,s=e.project(n,o),a=e.project(i,o),f=Math.cos(l)*(s.x-a.x)-Math.sin(l)*(s.y-a.y)+a.x,c=Math.sin(l)*(s.x-a.x)+Math.cos(l)*(s.y-a.y)+a.y;return e.unproject(new t.Point(f,c),o)},bearing:function(t,e){var n=Math.PI/180,l=t.lat*n,i=e.lat*n,a=t.lng*n,o=e.lng*n,s=Math.sin(o-a)*Math.cos(i),c=Math.cos(l)*Math.sin(i)-Math.sin(l)*Math.cos(i)*Math.cos(o-a),r=((Math.atan2(s,c)*180/Math.PI)+360)%360;return r>=180?r-360:r},destination:function(e,n,r){n=(n+360)%360;var a=Math.PI/180,y=180/Math.PI,u=6378137,h=e.lng*a,f=e.lat*a,L=n*a,g=Math.sin(f),c=Math.cos(f),o=Math.cos(r/u),l=Math.sin(r/u),s=Math.asin(g*o+c*l*Math.cos(L)),i=h+Math.atan2(Math.sin(L)*l*c,o-g*Math.sin(s));i=i*y;i=i>180?i-360:i<-180?i+360:i;return t.latLng([s*y,i])}});return t.GeometryUtil}));
(function(){L.Handler.MarkerSnap=L.Handler.extend({options:{snapDistance:15,snapVertices:!0},initialize:function(i,n,t){L.Handler.prototype.initialize.call(this,i);this._markers=[];this._guides=[];if(arguments.length==2){if(!(n instanceof L.Class)){t=n;n=null}};L.Util.setOptions(this,t||{});if(n){if(!n.dragging)n.dragging=new L.Handler.MarkerDrag(n);n.dragging.enable();this.watchMarker(n)};function a(){this._buffer=i.layerPointToLatLng(new L.Point(0,0)).lat-i.layerPointToLatLng(new L.Point(this.options.snapDistance,0)).lat};i.on('zoomend',a,this);i.whenReady(a,this);a.call(this)},enable:function(){this.disable();for(var i=0;i<this._markers.length;i++){this.watchMarker(this._markers[i])}},disable:function(){for(var i=0;i<this._markers.length;i++){this.unwatchMarker(this._markers[i])}},watchMarker:function(i){if(this._markers.indexOf(i)==-1)this._markers.push(i);i.on('move',this._snapMarker,this)},unwatchMarker:function(i){i.off('move',this._snapMarker,this);delete i['snap']},addGuideLayer:function(i){for(var n=0,t=this._guides.length;n<t;n++)if(L.stamp(i)===L.stamp(this._guides[n]))return;this._guides.push(i)},_snapMarker:function(i){var n=i.target,e=n.getLatLng(),a=[];function r(i){if(n._leaflet_id==i._leaflet_id)return;if((i._layers!==undefined)&&(typeof i.searchBuffer!=='function')){for(var t in i._layers){r(i._layers[t])}}
else if(typeof i.searchBuffer==='function'){a=a.concat(i.searchBuffer(e,this._buffer))}
else if(!n._poly||n._poly._poly!=i){a.push(i)}};for(var s=0,p=this._guides.length;s<p;s++){var l=this._guides[s];r.call(this,l)};var t=this._findClosestLayerSnap(this._map,a,e,this.options.snapDistance,this.options.snapVertices);if(!t&&n._poly){var o=new L.Polyline(n._poly._poly._latlngs,n._poly._poly.options);o._latlngs.splice(n._index,1);var t=this._findClosestLayerSnap(this._map,[o],e,this.options.snapDistance,!0);if(t)t.layer=n._poly};t=t||{layer:null,latlng:null};this._updateSnap(n,t.layer,t.latlng)},_findClosestLayerSnap:function(i,n,t,e,a){return L.GeometryUtil.closestLayerSnap(i,n,t,e,a)},_updateSnap:function(i,n,t){if(n&&t){i._latlng=L.latLng(t);i.update();if(i.snap!=n){i.snap=n;if(i._icon)L.DomUtil.addClass(i._icon,'marker-snapped');i.fire('snap',{layer:n,latlng:t})}}
else{if(i.snap){if(i._icon)L.DomUtil.removeClass(i._icon,'marker-snapped');i.fire('unsnap',{layer:i.snap})};delete i['snap']}}});if(!L.Edit){return};L.Handler.PolylineSnap=L.Edit.Poly.extend({initialize:function(i,n,t){var a=this;L.Edit.Poly.prototype.initialize.call(this,n,t);this._snapper=new L.Handler.MarkerSnap(i,t);n.on('remove',function(){a.disable()})},addGuideLayer:function(i){this._snapper.addGuideLayer(i)},_createMarker:function(i,n){var t=L.Edit.Poly.prototype._createMarker.call(this,i,n);t._poly=this;var a=n===undefined;if(a){t.on('dragstart',function(){this._snapper.watchMarker(t)},this)}
else{this._snapper.watchMarker(t)};return t}});L.Draw.Feature.SnapMixin={_snap_initialize:function(){this.on('enabled',this._snap_on_enabled,this);this.on('disabled',this._snap_on_disabled,this)},_snap_on_enabled:function(){if(!this.options.guideLayers){return};if(!this._mouseMarker){this._map.on('layeradd',this._snap_on_enabled,this);return}
else{this._map.off('layeradd',this._snap_on_enabled,this)};if(!this._snapper){this._snapper=new L.Handler.MarkerSnap(this._map);if(this.options.snapDistance){this._snapper.options.snapDistance=this.options.snapDistance};if(this.options.snapVertices){this._snapper.options.snapVertices=this.options.snapVertices}};for(var n=0,t=this.options.guideLayers.length;n<t;n++)this._snapper.addGuideLayer(this.options.guideLayers[n]);var i=this._mouseMarker;this._snapper.watchMarker(i);var a=i.options.icon;i.on('snap',function(n){i.setIcon(this.options.icon);i.setOpacity(1)},this).on('unsnap',function(n){i.setIcon(a);i.setOpacity(0)},this);i.on('click',this._snap_on_click,this)},_snap_on_click:function(i){if(this._markers){var a=this._markers.length,n=this._markers[a-1];if(this._mouseMarker.snap){if(i){n.setLatLng(i.target._latlng);if(this._poly){var t=this._poly._latlngs.length;this._poly._latlngs[t-1]=i.target._latlng;this._poly.redraw()}};L.DomUtil.addClass(n._icon,'marker-snapped')}}},_snap_on_disabled:function(){delete this._snapper}};L.Draw.Feature.include(L.Draw.Feature.SnapMixin);L.Draw.Feature.addInitHook('_snap_initialize')})();
;L.Util.extend(L.Polyline.prototype.options,{weight:4,opacity:1});L.Util.extend(L.Draw.Polyline.prototype.options.shapeOptions,L.Polyline.prototype.options);L.Util.extend(L.Draw.Polygon.prototype.options.shapeOptions,L.Polygon.prototype.options);L.Draw.Polyline.prototype.options.shapeOptions.color='red';L.Draw.Polygon.prototype.options.shapeOptions.color='red';L.Control.Draw.Plus=L.Control.Draw.extend({snapLayers:new L.FeatureGroup(),editLayers:new L.FeatureGroup(),options:{draw:{marker:!1,polyline:!1,polygon:!1,rectangle:!1,circle:!1},edit:{edit:!1,remove:!1},entry:'edit-json',jsonOptions:{},editType:null,changed:'edit-changed'},initialize:function(e){e.edit=L.extend(this.options.edit,e.edit);e.draw=L.extend(this.options.draw,e.draw);for(o in e.draw)if(e.draw[o])e.draw[o]={guideLayers:[this.snapLayers]};L.Control.Draw.prototype.initialize.call(this,e)},onAdd:function(e){this.editToolbar=this._toolbars[Object.keys(this._toolbars)[1]];this.editToolbar.options.featureGroup=this.editLayers;this.editLayers.addTo(this.snapLayers);this.snapLayers.addTo(e);e.on('draw:created',function(e){e.layer.options.color='blue';this.addLayer(e.layer)},this);e.on('draw:edited draw:deleted',this._optimPoly,this);var t=document.getElementById(this.options.entry),r=document.getElementById(this.options.changed);if(t){var i=typeof t.value!='undefined'?'value':'innerHTML',o=new L.GeoJSON(JSON.parse(t[i]||'{"type":"FeatureCollection","features":[]}'),this.options.jsonOptions)._layers;for(l in o)o[l].addTo(this);e.on('draw:edited',function(){if(!this.options.editType)t[i]=JSON.stringify(this.editLayers.toGeoJSON());else{var e=[];this.editLayers.eachLayer(function(t){if(this.options.editType=='Marker'){if(t._latlng)e=t._latlng}
else if(t._latlngs){if(this.options.editType.substring(0,5)=='Multi')e.push(t._latlngs);else e=t._latlngs}},this);t[i]=JSON.stringify(new L[this.options.editType](e).toGeoJSON().geometry)};if(r)r.style.display=''},this)};return L.Control.Draw.prototype.onAdd.call(this,e)},addLayer:function(e){if(e._layers){for(l in e._layers)this.addLayer(e._layers[l]);return};e.on('mouseover mouseout',function(e){if(typeof e.target.setStyle=='function')e.target.setStyle({color:e.type=='mouseover'?'red':'blue'})});e.addTo(this.editLayers);if(e._latlng)e.snapediting=new L.Handler.MarkerSnap(this._map,e);else if(e._latlngs)e.snapediting=new L.Handler.PolylineSnap(this._map,e);else return;e.options.editing={};e.snapediting.addGuideLayer(this.snapLayers);e.snapediting.enable();e.on('deleted',function(){for(m in this.editToolbar._modes)this.editToolbar._modes[m].handler.disable()},this);e.on('created edit dragend deleted',function(){this._map.fire('draw:edited')},this);e.fire('created')},_optimPoly:function(){var t=this.editLayers._layers;for(il1 in t){var e=t[il1]._latlngs;if(e&&!t[il1].options.fill){if(e[0].equals(e[e.length-1])){this.editLayers.removeLayer(t[il1]);this._map.fire('draw:created',{layer:new L.Polygon(e)})};for(il2 in t){var i=t[il2]._latlngs,r=null;if(i&&!t[il2].options.fill&&t[il1]._leaflet_id<t[il2]._leaflet_id){if(e[0].equals(i[0])){e.reverse();r=i}
else if(e[0].equals(i[i.length-1])){e.reverse();r=i.reverse()}
else if(e[e.length-1].equals(i[0])){r=i}
else if(e[e.length-1].equals(i[i.length-1])){r=i.reverse()};if(r){e.pop();t[il1]._latlngs=e.concat(r);t[il1].editing._poly.redraw();t[il1].snapediting.updateMarkers();this.editLayers.removeLayer(t[il2].editing._poly);this._map.fire('draw:edited')}}}}}}});L.Edit.Poly.include({_cut:function(e){if(e.target._index)return;var r,t;for(m in this._markers)if(this._markers[m]._middleRight&&this._markers[m]._middleRight._leaflet_id==e.target._leaflet_id)r=this._markers[m];else if(this._markers[m]._middleLeft&&this._markers[m]._middleLeft._leaflet_id==e.target._leaflet_id)t=this._markers[m];if(this._poly.options.fill){var i=[];for(var o=0;o<this._markers.length;o++)i.push(this._markers[(t._index+o)%this._markers.length]._latlng);this._poly._map.fire('draw:created',{layer:new L.Polyline(i)});this._poly._map.removeLayer(this._poly)}
else{if(!r._prev&&!t._next)this._poly._map.removeLayer(this._poly);else if(!r._prev)this._onMarkerClick({target:r,remove:!0});else if(!t._next)this._onMarkerClick({target:t,remove:!0});else{var i=[];while(m=this._markers[t._index]){i.push(m._latlng);this._onMarkerClick({target:m,remove:!0})};this._poly._map.fire('draw:created',{layer:new L.Polyline(i,this._poly.options)})}}}});
;L.myLeafletVersion="0.2";L.Control.Scale.prototype.options.imperial=!1;if(navigator.language||navigator.userLanguage=="fr"){if(L.Control.Zoom)L.Control.Zoom=L.Control.Zoom.extend({options:{zoomInTitle:"Rapprocher",zoomOutTitle:"Eloigner"}});if(L.Control.Fullscreen)L.Control.Fullscreen=L.Control.Fullscreen.extend({options:{title:{"false":"Plein cran","true":"Sortir du plein cran"}}});if(L.Control.Gps)L.Control.Gps=L.Control.Gps.extend({options:{title:"Afficher votre position GPS"}});if(L.Control.FileLayerLoad)L.Control.FileLayerLoad=L.Control.FileLayerLoad.extend({statics:{TITLE:"Charger un fichier GPX, KML, GeoJSON",LABEL:"&#8657;"}});if(L.Control.GetGpxFile)L.Control.GetGpxFile=L.Control.GetGpxFile.extend({statics:{TITLE:"Obtenir un fichier GPX, KML, GeoJSON"}});if(L.Control.OSMGeocoder)L.Control.OSMGeocoder=L.Control.OSMGeocoder.extend({options:{text:"Chercher"}});L.drawLocal={draw:{toolbar:{actions:{title:"Annuler le dessin",text:"Annuler"},finish:{title:"Finir le dessin",text:"Finir"},undo:{title:"Supprimer le dernier point",text:"Supprimer le dernier point"},buttons:{polyline:"Tracer une ligne",polygon:"Tracer un polygone",rectangle:"Tracer un rectangle",circle:"Tracer un cercle",marker:"Placer un marqueur"}},handlers:{circle:{tooltip:{start:"Cliquer et glisser pour tracer un cercle"},radius:"Rayon"},marker:{tooltip:{start:"Cliquer sur la carte pour placer un marqueur"}},polygon:{tooltip:{start:"Cliquer pour commencer le dessin d'un polygone",cont:"Cliquer pour continuer le dessin d'un polygone",end:"Cliquer sur le premier point clt le polygone"}},polyline:{error:"<strong>Erreur:</strong> Les contours de la forme ne peuvent pas se croiser !",tooltip:{start:"Cliquer pour commencer une ligne",cont:"Cliquer pour continuer le dessin de la ligne",end:"Cliquer sur le dernier point pour finir la ligne"}},rectangle:{tooltip:{start:"Cliquer et glisser pour tracer un rectangle"}},simpleshape:{tooltip:{end:"Relacher la souris pour finir le dessin"}}}},edit:{toolbar:{actions:{save:{title:"Finir les changements",text:"Finir"},cancel:{title:"Annuler les changements",text:"Annuler"}},buttons:{edit:"Editer les lments",editDisabled:"Pas d'lment",remove:"Supprimer un lment",removeDisabled:"Pas d'lment"}},handlers:{edit:{tooltip:{text:"Cliquer et glisser pour editer",subtext:"Cliquer annuler pour annuler les changements"}},remove:{tooltip:{text:"Cliquer sur un lment pour le supprimer"}}}}}};
L.Icon.Default.imagePath=L.Icon.Default.imagePath.replace(/(dist\/src|dist|src)/g,"github.com/Leaflet/Leaflet/dist");