/*
 * Integrated by Dominique Cavailhez (c) 2016
 * https://github.com/Dominique92/MyLeaflet
 * Includes part of :
	https://github.com/Dominique92/Leaflet.GeoJSON.Ajax
	https://github.com/Dominique92/Leaflet.Map.MultiVendors
	https://github.com/Dominique92/Leaflet.Marker.coordinates
	https://github.com/Dominique92/Leaflet.Permalink.Cookies
	https://github.com/Dominique92/Leaflet.draw.plus
	https://github.com/Leaflet/Leaflet.draw/commit/123f2f8f9b412ad3bf87e38e582e0d24cb5e7289
	https://github.com/Leaflet/Leaflet.fullscreen/commit/f5e76270ad40bb573bd11595f9069c3f15f8f286
	https://github.com/Leaflet/Leaflet/commit/188362098b715998b60f9f90500290da81565492
	https://github.com/MrMufflon/Leaflet.Coordinates/commit/09ffcfdfa2bee2a7cee24a9653baef0ec0abc660
	https://github.com/erictheise/rrose/commit/04fac08b0b367e137b64fb4e5e08e2dd020955c6
	https://github.com/k4r573n/leaflet-control-osm-geocoder/commit/f833500063e165506503ee8aae997928052c3c4a
	https://github.com/kartena/Proj4Leaflet/commit/3019d278b5d3e42a72b65142db2d5f0b06039b53
	https://github.com/makinacorpus/Leaflet.FileLayer/commit/ef4f3ef0d4b7cff7aaadf2ae2141a286f2f45916
	https://github.com/makinacorpus/Leaflet.GeometryUtil/commit/0d23b1db73b9416165673f44a07c064fd4584749
	https://github.com/makinacorpus/Leaflet.Snap/commit/43fbe4f6a7cd2b275912294d7d27e1034639e519
	https://github.com/mapbox/togeojson/commit/82dd5197823211a3898675b53843a27b46c42d7a
	https://github.com/rob-murray/os-leaflet/commit/fcc5333069cfa20dc29df104449f567eeab0e4e5
	https://github.com/rowanwins/leaflet-easyPrint/commit/e58ac06ced046695685d21686b9de8d902f25959
	https://github.com/shramov/leaflet-plugins/commit/0d639aad6a2618d2be3527964236c0a24091c540
	https://github.com/stefanocudini/leaflet-gps/commit/e90fbee2af3e62f9203c301d844557d1e873a32c
*/

;var L={version:'1.0.2'};function expose(){var e=window.L;L.noConflict=function(){window.L=e;return this};window.L=L};if(typeof module==='object'&&typeof module.exports==='object'){module.exports=L}
else if(typeof define==='function'&&define.amd){define(L)};if(typeof window!=='undefined'){expose()};
;L.Util={extend:function(n){var e,t,i,r;for(t=1,i=arguments.length;t<i;t++){r=arguments[t];for(e in r){n[e]=r[e]}};return n},create:Object.create||(function(){function n(){};return function(t){n.prototype=t;return new n()}})(),bind:function(n,t){var e=Array.prototype.slice;if(n.bind){return n.bind.apply(n,e.call(arguments,1))};var r=e.call(arguments,2);return function(){return n.apply(t,r.length?r.concat(e.call(arguments)):arguments)}},stamp:function(n){n._leaflet_id=n._leaflet_id||++L.Util.lastId;return n._leaflet_id},lastId:0,throttle:function(n,t,e){var i,r,o,a;a=function(){i=!1;if(r){o.apply(e,r);r=!1}};o=function(){if(i){r=arguments}
else{n.apply(e,arguments);setTimeout(a,t);i=!0}};return o},wrapNum:function(n,t,e){var o=t[1],r=t[0],i=o-r;return n===o&&e?n:((n-r)%i+i)%i+r},falseFn:function(){return!1},formatNum:function(n,t){var e=Math.pow(10,t||5);return Math.round(n*e)/e},trim:function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,'')},splitWords:function(n){return L.Util.trim(n).split(/\s+/)},setOptions:function(n,t){if(!n.hasOwnProperty('options')){n.options=n.options?L.Util.create(n.options):{}};for(var e in t){n.options[e]=t[e]};return n.options},getParamString:function(n,t,e){var i=[];for(var r in n){i.push(encodeURIComponent(e?r.toUpperCase():r)+'='+encodeURIComponent(n[r]))};return((!t||t.indexOf('?')===-1)?'?':'&')+i.join('&')},template:function(n,t){return n.replace(L.Util.templateRe,function(n,e){var r=t[e];if(r===undefined){throw new Error('No value provided for variable '+n)}
else if(typeof r==='function'){r=r(t)};return r})},templateRe:/\{ *([\w_\-]+) *\}/g,isArray:Array.isArray||function(n){return(Object.prototype.toString.call(n)==='[object Array]')},indexOf:function(n,t){for(var e=0;e<n.length;e++){if(n[e]===t){return e}};return-1},emptyImageUrl:'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs='};(function(){function n(n){return window['webkit'+n]||window['moz'+n]||window['ms'+n]};var e=0;function r(n){var t=+new Date(),r=Math.max(0,16-(t-e));e=t+r;return window.setTimeout(n,r)};var t=window.requestAnimationFrame||n('RequestAnimationFrame')||r,i=window.cancelAnimationFrame||n('CancelAnimationFrame')||n('CancelRequestAnimationFrame')||function(n){window.clearTimeout(n)};L.Util.requestAnimFrame=function(n,e,i){if(i&&t===r){n.call(e)}
else{return t.call(window,L.bind(n,e))}};L.Util.cancelAnimFrame=function(n){if(n){i.call(window,n)}}})();L.extend=L.Util.extend;L.bind=L.Util.bind;L.stamp=L.Util.stamp;L.setOptions=L.Util.setOptions;
;L.Class=function(){};L.Class.extend=function(t){var o=function(){if(this.initialize){this.initialize.apply(this,arguments)};this.callInitHooks()},n=o.__super__=this.prototype,i=L.Util.create(n);i.constructor=o;o.prototype=i;for(var s in this){if(this.hasOwnProperty(s)&&s!=='prototype'){o[s]=this[s]}};if(t.statics){L.extend(o,t.statics);delete t.statics};if(t.includes){L.Util.extend.apply(null,[i].concat(t.includes));delete t.includes};if(i.options){t.options=L.Util.extend(L.Util.create(i.options),t.options)};L.extend(i,t);i._initHooks=[];i.callInitHooks=function(){if(this._initHooksCalled){return};if(n.callInitHooks){n.callInitHooks.call(this)};this._initHooksCalled=!0;for(var t=0,o=i._initHooks.length;t<o;t++){i._initHooks[t].call(this)}};return o};L.Class.include=function(t){L.extend(this.prototype,t);return this};L.Class.mergeOptions=function(t){L.extend(this.prototype.options,t);return this};L.Class.addInitHook=function(t){var i=Array.prototype.slice.call(arguments,1),o=typeof t==='function'?t:function(){this[t].apply(this,i)};this.prototype._initHooks=this.prototype._initHooks||[];this.prototype._initHooks.push(o);return this};
;L.Evented=L.Class.extend({on:function(t,e,n){if(typeof t==='object'){for(var r in t){this._on(r,t[r],e)}}
else{t=L.Util.splitWords(t);for(var i=0,s=t.length;i<s;i++){this._on(t[i],e,n)}};return this},off:function(t,e,n){if(!t){delete this._events}
else if(typeof t==='object'){for(var r in t){this._off(r,t[r],e)}}
else{t=L.Util.splitWords(t);for(var i=0,s=t.length;i<s;i++){this._off(t[i],e,n)}};return this},_on:function(t,n,e){this._events=this._events||{};var i=this._events[t];if(!i){i=[];this._events[t]=i};if(e===this){e=undefined};var f={fn:n,ctx:e},s=i;for(var r=0,o=s.length;r<o;r++){if(s[r].fn===n&&s[r].ctx===e){return}};s.push(f);i.count++},_off:function(t,i,r){var e,n,s;if(!this._events){return};e=this._events[t];if(!e){return};if(!i){for(n=0,s=e.length;n<s;n++){e[n].fn=L.Util.falseFn};delete this._events[t];return};if(r===this){r=undefined};if(e){for(n=0,s=e.length;n<s;n++){var o=e[n];if(o.ctx!==r){continue};if(o.fn===i){o.fn=L.Util.falseFn;if(this._firingCount){this._events[t]=e=e.slice()};e.splice(n,1);return}}}},fire:function(t,e,n){if(!this.listens(t,n)){return this};var o=L.Util.extend({},e,{type:t,target:this});if(this._events){var r=this._events[t];if(r){this._firingCount=(this._firingCount+1)||1;for(var i=0,f=r.length;i<f;i++){var s=r[i];s.fn.call(s.ctx||this,o)};this._firingCount--}};if(n){this._propagateEvent(o)};return this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length){return!0};if(e){for(var i in this._eventParents){if(this._eventParents[i].listens(t,e)){return!0}}};return!1},once:function(t,e,n){if(typeof t==='object'){for(var r in t){this.once(r,t[r],e)};return this};var i=L.bind(function(){this.off(t,e,n).off(t,i,n)},this);return this.on(t,e,n).on(t,i,n)},addEventParent:function(t){this._eventParents=this._eventParents||{};this._eventParents[L.stamp(t)]=t;return this},removeEventParent:function(t){if(this._eventParents){delete this._eventParents[L.stamp(t)]};return this},_propagateEvent:function(t){for(var e in this._eventParents){this._eventParents[e].fire(t.type,L.extend({layer:t.target},t),!0)}}});var proto=L.Evented.prototype;proto.addEventListener=proto.on;proto.removeEventListener=proto.clearAllEventListeners=proto.off;proto.addOneTimeEventListener=proto.once;proto.fireEvent=proto.fire;proto.hasEventListeners=proto.listens;L.Mixin={Events:proto};
(function(){var e=navigator.userAgent.toLowerCase(),o=document.documentElement,n='ActiveXObject' in window,t=e.indexOf('webkit')!==-1,l=e.indexOf('phantom')!==-1,r=e.search('android [23]')!==-1,w=e.indexOf('chrome')!==-1,a=e.indexOf('gecko')!==-1&&!t&&!window.opera&&!n,b=navigator.platform.indexOf('Win')===0,i=typeof orientation!=='undefined'||e.indexOf('mobile')!==-1,c=!window.PointerEvent&&window.MSPointerEvent,m=window.PointerEvent||c,s=n&&('transition' in o.style),d=('WebKitCSSMatrix' in window)&&('m11' in new window.WebKitCSSMatrix())&&!r,u='MozPerspective' in o.style,f='OTransition' in o.style,O=!window.L_NO_TOUCH&&(m||'ontouchstart' in window||(window.DocumentTouch&&document instanceof window.DocumentTouch));L.Browser={ie:n,ielt9:n&&!document.addEventListener,edge:'msLaunchUri' in navigator&&!('documentMode' in document),webkit:t,gecko:a,android:e.indexOf('android')!==-1,android23:r,chrome:w,safari:!w&&e.indexOf('safari')!==-1,win:b,ie3d:s,webkit3d:d,gecko3d:u,opera12:f,any3d:!window.L_DISABLE_3D&&(s||d||u)&&!f&&!l,mobile:i,mobileWebkit:i&&t,mobileWebkit3d:i&&d,mobileOpera:i&&window.opera,mobileGecko:i&&a,touch:!!O,msPointer:!!c,pointer:!!m,retina:(window.devicePixelRatio||(window.screen.deviceXDPI/window.screen.logicalXDPI))>1}}());
;L.Point=function(t,n,i){this.x=(i?Math.round(t):t);this.y=(i?Math.round(n):n)};L.Point.prototype={clone:function(){return new L.Point(this.x,this.y)},add:function(t){return this.clone()._add(L.point(t))},_add:function(t){this.x+=t.x;this.y+=t.y;return this},subtract:function(t){return this.clone()._subtract(L.point(t))},_subtract:function(t){this.x-=t.x;this.y-=t.y;return this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){this.x/=t;this.y/=t;return this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){this.x*=t;this.y*=t;return this},scaleBy:function(t){return new L.Point(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new L.Point(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},floor:function(){return this.clone()._floor()},_floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){return this.clone()._ceil()},_ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},distanceTo:function(t){t=L.point(t);var n=t.x-this.x,i=t.y-this.y;return Math.sqrt(n*n+i*i)},equals:function(t){t=L.point(t);return t.x===this.x&&t.y===this.y},contains:function(t){t=L.point(t);return Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return'Point('+L.Util.formatNum(this.x)+', '+L.Util.formatNum(this.y)+')'}};L.point=function(t,n,i){if(t instanceof L.Point){return t};if(L.Util.isArray(t)){return new L.Point(t[0],t[1])};if(t===undefined||t===null){return t};if(typeof t==='object'&&'x' in t&&'y' in t){return new L.Point(t.x,t.y)};return new L.Point(t,n,i)};
;L.Bounds=function(n,t){if(!n){return};var s=t?[n,t]:n;for(var i=0,e=s.length;i<e;i++){this.extend(s[i])}};L.Bounds.prototype={extend:function(n){n=L.point(n);if(!this.min&&!this.max){this.min=n.clone();this.max=n.clone()}
else{this.min.x=Math.min(n.x,this.min.x);this.max.x=Math.max(n.x,this.max.x);this.min.y=Math.min(n.y,this.min.y);this.max.y=Math.max(n.y,this.max.y)};return this},getCenter:function(n){return new L.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,n)},getBottomLeft:function(){return new L.Point(this.min.x,this.max.y)},getTopRight:function(){return new L.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(n){var t,i;if(typeof n[0]==='number'||n instanceof L.Point){n=L.point(n)}
else{n=L.bounds(n)};if(n instanceof L.Bounds){t=n.min;i=n.max}
else{t=i=n};return(t.x>=this.min.x)&&(i.x<=this.max.x)&&(t.y>=this.min.y)&&(i.y<=this.max.y)},intersects:function(n){n=L.bounds(n);var t=this.min,i=this.max,s=n.min,e=n.max,x=(e.x>=t.x)&&(s.x<=i.x),m=(e.y>=t.y)&&(s.y<=i.y);return x&&m},overlaps:function(n){n=L.bounds(n);var t=this.min,i=this.max,s=n.min,e=n.max,x=(e.x>t.x)&&(s.x<i.x),m=(e.y>t.y)&&(s.y<i.y);return x&&m},isValid:function(){return!!(this.min&&this.max)}};L.bounds=function(n,t){if(!n||n instanceof L.Bounds){return n};return new L.Bounds(n,t)};
;L.Transformation=function(t,n,i,r){this._a=t;this._b=n;this._c=i;this._d=r};L.Transformation.prototype={transform:function(t,n){return this._transform(t.clone(),n)},_transform:function(t,n){n=n||1;t.x=n*(this._a*t.x+this._b);t.y=n*(this._c*t.y+this._d);return t},untransform:function(n,t){t=t||1;return new L.Point((n.x/t-this._b)/this._a,(n.y/t-this._d)/this._c)}};
;L.DomUtil={get:function(e){return typeof e==='string'?document.getElementById(e):e},getStyle:function(e,t){var n=e.style[t]||(e.currentStyle&&e.currentStyle[t]);if((!n||n==='auto')&&document.defaultView){var i=document.defaultView.getComputedStyle(e,null);n=i?i[t]:null};return n==='auto'?null:n},create:function(e,t,n){var i=document.createElement(e);i.className=t||'';if(n){n.appendChild(i)};return i},remove:function(e){var t=e.parentNode;if(t){t.removeChild(e)}},empty:function(e){while(e.firstChild){e.removeChild(e.firstChild)}},toFront:function(e){e.parentNode.appendChild(e)},toBack:function(e){var t=e.parentNode;t.insertBefore(e,t.firstChild)},hasClass:function(e,t){if(e.classList!==undefined){return e.classList.contains(t)};var n=L.DomUtil.getClass(e);return n.length>0&&new RegExp('(^|\\s)'+t+'(\\s|$)').test(n)},addClass:function(e,t){if(e.classList!==undefined){var l=L.Util.splitWords(t);for(var n=0,o=l.length;n<o;n++){e.classList.add(l[n])}}
else if(!L.DomUtil.hasClass(e,t)){var i=L.DomUtil.getClass(e);L.DomUtil.setClass(e,(i?i+' ':'')+t)}},removeClass:function(e,t){if(e.classList!==undefined){e.classList.remove(t)}
else{L.DomUtil.setClass(e,L.Util.trim((' '+L.DomUtil.getClass(e)+' ').replace(' '+t+' ',' ')))}},setClass:function(e,t){if(e.className.baseVal===undefined){e.className=t}
else{e.className.baseVal=t}},getClass:function(e){return e.className.baseVal===undefined?e.className:e.className.baseVal},setOpacity:function(e,t){if('opacity' in e.style){e.style.opacity=t}
else if('filter' in e.style){L.DomUtil._setOpacityIE(e,t)}},_setOpacityIE:function(e,t){var n=!1,i='DXImageTransform.Microsoft.Alpha';try{n=e.filters.item(i)}catch(l){if(t===1){return}};t=Math.round(t*100);if(n){n.Enabled=(t!==100);n.Opacity=t}
else{e.style.filter+=' progid:'+i+'(opacity='+t+')'}},testProp:function(e){var n=document.documentElement.style;for(var t=0;t<e.length;t++){if(e[t]in n){return e[t]}};return!1},setTransform:function(e,t,i){var n=t||new L.Point(0,0);e.style[L.DomUtil.TRANSFORM]=(L.Browser.ie3d?'translate('+n.x+'px,'+n.y+'px)':'translate3d('+n.x+'px,'+n.y+'px,0)')+(i?' scale('+i+')':'')},setPosition:function(e,t){e._leaflet_pos=t;if(L.Browser.any3d){L.DomUtil.setTransform(e,t)}
else{e.style.left=t.x+'px';e.style.top=t.y+'px'}},getPosition:function(e){return e._leaflet_pos||new L.Point(0,0)}};(function(){L.DomUtil.TRANSFORM=L.DomUtil.testProp(['transform','WebkitTransform','OTransform','MozTransform','msTransform']);var t=L.DomUtil.TRANSITION=L.DomUtil.testProp(['webkitTransition','transition','OTransition','MozTransition','msTransition']);L.DomUtil.TRANSITION_END=t==='webkitTransition'||t==='OTransition'?t+'End':'transitionend';if('onselectstart' in document){L.DomUtil.disableTextSelection=function(){L.DomEvent.on(window,'selectstart',L.DomEvent.preventDefault)};L.DomUtil.enableTextSelection=function(){L.DomEvent.off(window,'selectstart',L.DomEvent.preventDefault)}}
else{var e=L.DomUtil.testProp(['userSelect','WebkitUserSelect','OUserSelect','MozUserSelect','msUserSelect']);L.DomUtil.disableTextSelection=function(){if(e){var t=document.documentElement.style;this._userSelect=t[e];t[e]='none'}};L.DomUtil.enableTextSelection=function(){if(e){document.documentElement.style[e]=this._userSelect;delete this._userSelect}}};L.DomUtil.disableImageDrag=function(){L.DomEvent.on(window,'dragstart',L.DomEvent.preventDefault)};L.DomUtil.enableImageDrag=function(){L.DomEvent.off(window,'dragstart',L.DomEvent.preventDefault)};L.DomUtil.preventOutline=function(e){while(e.tabIndex===-1){e=e.parentNode};if(!e||!e.style){return};L.DomUtil.restoreOutline();this._outlineElement=e;this._outlineStyle=e.style.outline;e.style.outline='none';L.DomEvent.on(window,'keydown',L.DomUtil.restoreOutline,this)};L.DomUtil.restoreOutline=function(){if(!this._outlineElement){return};this._outlineElement.style.outline=this._outlineStyle;delete this._outlineElement;delete this._outlineStyle;L.DomEvent.off(window,'keydown',L.DomUtil.restoreOutline,this)}})();
;L.LatLng=function(t,n,a){if(isNaN(t)||isNaN(n)){throw new Error('Invalid LatLng object: ('+t+', '+n+')')};this.lat=+t;this.lng=+n;if(a!==undefined){this.alt=+a}};L.LatLng.prototype={equals:function(t,n){if(!t){return!1};t=L.latLng(t);var a=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return a<=(n===undefined?1.0E-9:n)},toString:function(t){return'LatLng('+L.Util.formatNum(this.lat,t)+', '+L.Util.formatNum(this.lng,t)+')'},distanceTo:function(t){return L.CRS.Earth.distance(this,L.latLng(t))},wrap:function(){return L.CRS.Earth.wrapLatLng(this)},toBounds:function(t){var n=180*t/40075017,a=n/Math.cos((Math.PI/180)*this.lat);return L.latLngBounds([this.lat-n,this.lng-a],[this.lat+n,this.lng+a])},clone:function(){return new L.LatLng(this.lat,this.lng,this.alt)}};L.latLng=function(t,n,a){if(t instanceof L.LatLng){return t};if(L.Util.isArray(t)&&typeof t[0]!=='object'){if(t.length===3){return new L.LatLng(t[0],t[1],t[2])};if(t.length===2){return new L.LatLng(t[0],t[1])};return null};if(t===undefined||t===null){return t};if(typeof t==='object'&&'lat' in t){return new L.LatLng(t.lat,'lng' in t?t.lng:t.lon,t.alt)};if(n===undefined){return null};return new L.LatLng(t,n,a)};
;L.LatLngBounds=function(t,n){if(!t){return};var e=n?[t,n]:t;for(var s=0,a=e.length;s<a;s++){this.extend(e[s])}};L.LatLngBounds.prototype={extend:function(t){var e=this._southWest,a=this._northEast,n,s;if(t instanceof L.LatLng){n=t;s=t}
else if(t instanceof L.LatLngBounds){n=t._southWest;s=t._northEast;if(!n||!s){return this}}
else{return t?this.extend(L.latLng(t)||L.latLngBounds(t)):this};if(!e&&!a){this._southWest=new L.LatLng(n.lat,n.lng);this._northEast=new L.LatLng(s.lat,s.lng)}
else{e.lat=Math.min(n.lat,e.lat);e.lng=Math.min(n.lng,e.lng);a.lat=Math.max(s.lat,a.lat);a.lng=Math.max(s.lng,a.lng)};return this},pad:function(t){var n=this._southWest,s=this._northEast,e=Math.abs(n.lat-s.lat)*t,a=Math.abs(n.lng-s.lng)*t;return new L.LatLngBounds(new L.LatLng(n.lat-e,n.lng-a),new L.LatLng(s.lat+e,s.lng+a))},getCenter:function(){return new L.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new L.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new L.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){if(typeof t[0]==='number'||t instanceof L.LatLng||'lat' in t){t=L.latLng(t)}
else{t=L.latLngBounds(t)};var e=this._southWest,a=this._northEast,n,s;if(t instanceof L.LatLngBounds){n=t.getSouthWest();s=t.getNorthEast()}
else{n=s=t};return(n.lat>=e.lat)&&(s.lat<=a.lat)&&(n.lng>=e.lng)&&(s.lng<=a.lng)},intersects:function(t){t=L.latLngBounds(t);var n=this._southWest,s=this._northEast,e=t.getSouthWest(),a=t.getNorthEast(),h=(a.lat>=n.lat)&&(e.lat<=s.lat),o=(a.lng>=n.lng)&&(e.lng<=s.lng);return h&&o},overlaps:function(t){t=L.latLngBounds(t);var n=this._southWest,s=this._northEast,e=t.getSouthWest(),a=t.getNorthEast(),h=(a.lat>n.lat)&&(e.lat<s.lat),o=(a.lng>n.lng)&&(e.lng<s.lng);return h&&o},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(',')},equals:function(t){if(!t){return!1};t=L.latLngBounds(t);return this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast())},isValid:function(){return!!(this._southWest&&this._northEast)}};L.latLngBounds=function(t,n){if(t instanceof L.LatLngBounds){return t};return new L.LatLngBounds(t,n)};
;L.Projection={};L.Projection.LonLat={project:function(n){return new L.Point(n.lng,n.lat)},unproject:function(n){return new L.LatLng(n.y,n.x)},bounds:L.bounds([-180,-90],[180,90])};
;L.Projection.SphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var n=Math.PI/180,a=this.MAX_LATITUDE,r=Math.max(Math.min(a,t.lat),-a),h=Math.sin(r*n);return new L.Point(this.R*t.lng*n,this.R*Math.log((1+h)/(1-h))/2)},unproject:function(t){var n=180/Math.PI;return new L.LatLng((2*Math.atan(Math.exp(t.y/this.R))-(Math.PI/2))*n,t.x*n/this.R)},bounds:(function(){var t=6378137*Math.PI;return L.bounds([-t,-t],[t,t])})()};
;L.CRS={latLngToPoint:function(t,n){var r=this.projection.project(t),o=this.scale(n);return this.transformation._transform(r,o)},pointToLatLng:function(t,n){var r=this.scale(n),o=this.transformation.untransform(t,r);return this.projection.unproject(o)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite){return null};var n=this.projection.bounds,r=this.scale(t),o=this.transformation.transform(n.min,r),i=this.transformation.transform(n.max,r);return L.bounds(o,i)},infinite:!1,wrapLatLng:function(t){var n=this.wrapLng?L.Util.wrapNum(t.lng,this.wrapLng,!0):t.lng,r=this.wrapLat?L.Util.wrapNum(t.lat,this.wrapLat,!0):t.lat,o=t.alt;return L.latLng(r,n,o)}};
;L.CRS.Earth=L.extend({},L.CRS,{wrapLng:[-180,180],R:6371000,distance:function(a,n){var t=Math.PI/180,h=a.lat*t,M=n.lat*t,s=Math.sin(h)*Math.sin(M)+Math.cos(h)*Math.cos(M)*Math.cos((n.lng-a.lng)*t);return this.R*Math.acos(Math.min(s,1))}});
;L.CRS.EPSG3857=L.extend({},L.CRS.Earth,{code:'EPSG:3857',projection:L.Projection.SphericalMercator,transformation:(function(){var r=0.5/(Math.PI*L.Projection.SphericalMercator.R);return new L.Transformation(r,0.5,-r,0.5)}())});L.CRS.EPSG900913=L.extend({},L.CRS.EPSG3857,{code:'EPSG:900913'});
;L.CRS.EPSG4326=L.extend({},L.CRS.Earth,{code:'EPSG:4326',projection:L.Projection.LonLat,transformation:new L.Transformation(1/180,1,-1/180,0.5)});
;L.Map=L.Evented.extend({options:{crs:L.CRS.EPSG3857,center:undefined,zoom:undefined,minZoom:undefined,maxZoom:undefined,layers:[],maxBounds:undefined,renderer:undefined,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,i){i=L.setOptions(this,i);this._initContainer(t);this._initLayout();this._onResize=L.bind(this._onResize,this);this._initEvents();if(i.maxBounds){this.setMaxBounds(i.maxBounds)};if(i.zoom!==undefined){this._zoom=this._limitZoom(i.zoom)};if(i.center&&i.zoom!==undefined){this.setView(L.latLng(i.center),i.zoom,{reset:!0})};this._handlers=[];this._layers={};this._zoomBoundLayers={};this._sizeChanged=!0;this.callInitHooks();this._zoomAnimated=L.DomUtil.TRANSITION&&L.Browser.any3d&&!L.Browser.mobileOpera&&this.options.zoomAnimation;if(this._zoomAnimated){this._createAnimProxy();L.DomEvent.on(this._proxy,L.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)};this._addLayers(this.options.layers)},setView:function(t,i,e){i=i===undefined?this._zoom:this._limitZoom(i);t=this._limitCenter(L.latLng(t),i,this.options.maxBounds);e=e||{};this._stop();if(this._loaded&&!e.reset&&e!==!0){if(e.animate!==undefined){e.zoom=L.extend({animate:e.animate},e.zoom);e.pan=L.extend({animate:e.animate,duration:e.duration},e.pan)};var n=(this._zoom!==i)?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,i,e.zoom):this._tryAnimatedPan(t,e.pan);if(n){clearTimeout(this._sizeTimer);return this}};this._resetView(t,i);return this},setZoom:function(t,i){if(!this._loaded){this._zoom=t;return this};return this.setView(this.getCenter(),t,{zoom:i})},zoomIn:function(t,i){t=t||(L.Browser.any3d?this.options.zoomDelta:1);return this.setZoom(this._zoom+t,i)},zoomOut:function(t,i){t=t||(L.Browser.any3d?this.options.zoomDelta:1);return this.setZoom(this._zoom-t,i)},setZoomAround:function(t,i,e){var o=this.getZoomScale(i),n=this.getSize().divideBy(2),s=t instanceof L.Point?t:this.latLngToContainerPoint(t),a=s.subtract(n).multiplyBy(1-1/o),r=this.containerPointToLatLng(n.add(a));return this.setView(r,i,{zoom:e})},_getBoundsCenterZoom:function(t,i){i=i||{};t=t.getBounds?t.getBounds():L.latLngBounds(t);var n=L.point(i.paddingTopLeft||i.padding||[0,0]),o=L.point(i.paddingBottomRight||i.padding||[0,0]),e=this.getBoundsZoom(t,!1,n.add(o));e=(typeof i.maxZoom==='number')?Math.min(i.maxZoom,e):e;var s=o.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),e),r=this.project(t.getNorthEast(),e),h=this.unproject(a.add(r).divideBy(2).add(s),e);return{center:h,zoom:e}},fitBounds:function(t,i){t=L.latLngBounds(t);if(!t.isValid()){throw new Error('Bounds are not valid.')};var e=this._getBoundsCenterZoom(t,i);return this.setView(e.center,e.zoom,i)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,i){return this.setView(t,this._zoom,{pan:i})},panBy:function(t,i){t=L.point(t).round();i=i||{};if(!t.x&&!t.y){return this.fire('moveend')};if(i.animate!==!0&&!this.getSize().contains(t)){this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom());return this};if(!this._panAnim){this._panAnim=new L.PosAnimation();this._panAnim.on({'step':this._onPanTransitionStep,'end':this._onPanTransitionEnd},this)};if(!i.noMoveStart){this.fire('movestart')};if(i.animate!==!1){L.DomUtil.addClass(this._mapPane,'leaflet-pan-anim');var e=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,e,i.duration||0.25,i.easeLinearity)}
else{this._rawPanBy(t);this.fire('move').fire('moveend')};return this},flyTo:function(t,i,e){e=e||{};if(e.animate===!1||!L.Browser.any3d){return this.setView(t,i,e)};this._stop();var d=this.project(this.getCenter()),l=this.project(t),f=this.getSize(),h=this._zoom;t=L.latLng(t);i=i===undefined?h:i;var n=Math.max(f.x,f.y),u=n*this.getZoomScale(h,i),a=(l.distanceTo(d))||1,s=1.42,r=s*s;function g(t){var o=t?-1:1,s=t?u:n,h=u*u-n*n+o*r*r*a*a,m=2*s*r*a,i=h/m,e=Math.sqrt(i*i+1)-i,d=e<0.000000001?-18:Math.log(e);return d};function p(t){return(Math.exp(t)-Math.exp(-t))/2};function m(t){return(Math.exp(t)+Math.exp(-t))/2};function z(t){return p(t)/m(t)};var o=g(0);function B(t){return n*(m(o)/m(o+s*t))};function x(t){return n*(m(o)*z(o+s*t)-p(o))/r};function Z(t){return 1-Math.pow(1-t,1.5)};var P=Date.now(),c=(g(1)-o)/s,y=e.duration?1000*e.duration:1000*c*0.8;function v(){var e=(Date.now()-P)/y,o=Z(e)*c;if(e<=1){this._flyToFrame=L.Util.requestAnimFrame(v,this);this._move(this.unproject(d.add(l.subtract(d).multiplyBy(x(o)/a)),h),this.getScaleZoom(n/B(o),h),{flyTo:!0})}
else{this._move(t,i)._moveEnd(!0)}};this._moveStart(!0);v.call(this);return this},flyToBounds:function(t,i){var e=this._getBoundsCenterZoom(t,i);return this.flyTo(e.center,e.zoom,i)},setMaxBounds:function(t){t=L.latLngBounds(t);if(!t.isValid()){this.options.maxBounds=null;return this.off('moveend',this._panInsideMaxBounds)}
else if(this.options.maxBounds){this.off('moveend',this._panInsideMaxBounds)};this.options.maxBounds=t;if(this._loaded){this._panInsideMaxBounds()};return this.on('moveend',this._panInsideMaxBounds)},setMinZoom:function(t){this.options.minZoom=t;if(this._loaded&&this.getZoom()<this.options.minZoom){return this.setZoom(t)};return this},setMaxZoom:function(t){this.options.maxZoom=t;if(this._loaded&&(this.getZoom()>this.options.maxZoom)){return this.setZoom(t)};return this},panInsideBounds:function(t,i){this._enforcingBounds=!0;var e=this.getCenter(),n=this._limitCenter(e,this._zoom,L.latLngBounds(t));if(!e.equals(n)){this.panTo(n,i)};this._enforcingBounds=!1;return this},invalidateSize:function(t){if(!this._loaded){return this};t=L.extend({animate:!1,pan:!0},t===!0?{animate:!0}:t);var n=this.getSize();this._sizeChanged=!0;this._lastCenter=null;var e=this.getSize(),o=n.divideBy(2).round(),s=e.divideBy(2).round(),i=o.subtract(s);if(!i.x&&!i.y){return this};if(t.animate&&t.pan){this.panBy(i)}
else{if(t.pan){this._rawPanBy(i)};this.fire('move');if(t.debounceMoveend){clearTimeout(this._sizeTimer);this._sizeTimer=setTimeout(L.bind(this.fire,this,'moveend'),200)}
else{this.fire('moveend')}};return this.fire('resize',{oldSize:n,newSize:e})},stop:function(){this.setZoom(this._limitZoom(this._zoom));if(!this.options.zoomSnap){this.fire('viewreset')};return this._stop()},locate:function(t){t=this._locateOptions=L.extend({timeout:10000,watch:!1},t);if(!('geolocation' in navigator)){this._handleGeolocationError({code:0,message:'Geolocation not supported.'});return this};var i=L.bind(this._handleGeolocationResponse,this),e=L.bind(this._handleGeolocationError,this);if(t.watch){this._locationWatchId=navigator.geolocation.watchPosition(i,e,t)}
else{navigator.geolocation.getCurrentPosition(i,e,t)};return this},stopLocate:function(){if(navigator.geolocation&&navigator.geolocation.clearWatch){navigator.geolocation.clearWatch(this._locationWatchId)};if(this._locateOptions){this._locateOptions.setView=!1};return this},_handleGeolocationError:function(t){var i=t.code,e=t.message||(i===1?'permission denied':(i===2?'position unavailable':'timeout'));if(this._locateOptions.setView&&!this._loaded){this.fitWorld()};this.fire('locationerror',{code:i,message:'Geolocation error: '+e+'.'})},_handleGeolocationResponse:function(t){var r=t.coords.latitude,h=t.coords.longitude,e=new L.LatLng(r,h),a=e.toBounds(t.coords.accuracy),n=this._locateOptions;if(n.setView){var s=this.getBoundsZoom(a);this.setView(e,n.maxZoom?Math.min(s,n.maxZoom):s)};var o={latlng:e,bounds:a,timestamp:t.timestamp};for(var i in t.coords){if(typeof t.coords[i]==='number'){o[i]=t.coords[i]}};this.fire('locationfound',o)},addHandler:function(t,i){if(!i){return this};var e=this[t]=new i(this);this._handlers.push(e);if(this.options[t]){e.enable()};return this},remove:function(){this._initEvents(!0);if(this._containerId!==this._container._leaflet_id){throw new Error('Map container is being reused by another instance')};try{delete this._container._leaflet_id;delete this._containerId}catch(i){this._container._leaflet_id=undefined;this._containerId=undefined};L.DomUtil.remove(this._mapPane);if(this._clearControlPos){this._clearControlPos()};this._clearHandlers();if(this._loaded){this.fire('unload')};for(var t in this._layers){this._layers[t].remove()};return this},createPane:function(t,i){var n='leaflet-pane'+(t?' leaflet-'+t.replace('Pane','')+'-pane':''),e=L.DomUtil.create('div',n,i||this._mapPane);if(t){this._panes[t]=e};return e},getCenter:function(){this._checkIfLoaded();if(this._lastCenter&&!this._moved()){return this._lastCenter};return this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),i=this.unproject(t.getBottomLeft()),e=this.unproject(t.getTopRight());return new L.LatLngBounds(i,e)},getMinZoom:function(){return this.options.minZoom===undefined?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===undefined?(this._layersMaxZoom===undefined?Infinity:this._layersMaxZoom):this.options.maxZoom},getBoundsZoom:function(t,i,e){t=L.latLngBounds(t);e=L.point(e||[0,0]);var n=this.getZoom()||0,r=this.getMinZoom(),h=this.getMaxZoom(),m=t.getNorthWest(),u=t.getSouthEast(),s=this.getSize().subtract(e),a=this.project(u,n).subtract(this.project(m,n)),o=L.Browser.any3d?this.options.zoomSnap:1,d=Math.min(s.x/a.x,s.y/a.y);n=this.getScaleZoom(d,n);if(o){n=Math.round(n/(o/100))*(o/100);n=i?Math.ceil(n/o)*o:Math.floor(n/o)*o};return Math.max(r,Math.min(h,n))},getSize:function(){if(!this._size||this._sizeChanged){this._size=new L.Point(this._container.clientWidth,this._container.clientHeight);this._sizeChanged=!1};return this._size.clone()},getPixelBounds:function(t,i){var e=this._getTopLeftPoint(t,i);return new L.Bounds(e,e.add(this.getSize()))},getPixelOrigin:function(){this._checkIfLoaded();return this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===undefined?this.getZoom():t)},getPane:function(t){return typeof t==='string'?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,i){var e=this.options.crs;i=i===undefined?this._zoom:i;return e.scale(t)/e.scale(i)},getScaleZoom:function(t,i){var n=this.options.crs;i=i===undefined?this._zoom:i;var e=n.zoom(t*n.scale(i));return isNaN(e)?Infinity:e},project:function(t,i){i=i===undefined?this._zoom:i;return this.options.crs.latLngToPoint(L.latLng(t),i)},unproject:function(t,i){i=i===undefined?this._zoom:i;return this.options.crs.pointToLatLng(L.point(t),i)},layerPointToLatLng:function(t){var i=L.point(t).add(this.getPixelOrigin());return this.unproject(i)},latLngToLayerPoint:function(t){var i=this.project(L.latLng(t))._round();return i._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(L.latLng(t))},distance:function(t,i){return this.options.crs.distance(L.latLng(t),L.latLng(i))},containerPointToLayerPoint:function(t){return L.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return L.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var i=this.containerPointToLayerPoint(L.point(t));return this.layerPointToLatLng(i)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(L.latLng(t)))},mouseEventToContainerPoint:function(t){return L.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var i=this._container=L.DomUtil.get(t);if(!i){throw new Error('Map container not found.')}
else if(i._leaflet_id){throw new Error('Map container is already initialized.')};L.DomEvent.addListener(i,'scroll',this._onScroll,this);this._containerId=L.Util.stamp(i)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&L.Browser.any3d;L.DomUtil.addClass(i,'leaflet-container'+(L.Browser.touch?' leaflet-touch':'')+(L.Browser.retina?' leaflet-retina':'')+(L.Browser.ielt9?' leaflet-oldie':'')+(L.Browser.safari?' leaflet-safari':'')+(this._fadeAnimated?' leaflet-fade-anim':''));var t=L.DomUtil.getStyle(i,'position');if(t!=='absolute'&&t!=='relative'&&t!=='fixed'){i.style.position='relative'};this._initPanes();if(this._initControlPos){this._initControlPos()}},_initPanes:function(){var t=this._panes={};this._paneRenderers={};this._mapPane=this.createPane('mapPane',this._container);L.DomUtil.setPosition(this._mapPane,new L.Point(0,0));this.createPane('tilePane');this.createPane('shadowPane');this.createPane('overlayPane');this.createPane('markerPane');this.createPane('tooltipPane');this.createPane('popupPane');if(!this.options.markerZoomAnimation){L.DomUtil.addClass(t.markerPane,'leaflet-zoom-hide');L.DomUtil.addClass(t.shadowPane,'leaflet-zoom-hide')}},_resetView:function(t,i){L.DomUtil.setPosition(this._mapPane,new L.Point(0,0));var n=!this._loaded;this._loaded=!0;i=this._limitZoom(i);this.fire('viewprereset');var e=this._zoom!==i;this._moveStart(e)._move(t,i)._moveEnd(e);this.fire('viewreset');if(n){this.fire('load')}},_moveStart:function(t){if(t){this.fire('zoomstart')};return this.fire('movestart')},_move:function(t,i,e){if(i===undefined){i=this._zoom};var n=this._zoom!==i;this._zoom=i;this._lastCenter=t;this._pixelOrigin=this._getNewPixelOrigin(t);if(n||(e&&e.pinch)){this.fire('zoom',e)};return this.fire('move',e)},_moveEnd:function(t){if(t){this.fire('zoomend')};return this.fire('moveend')},_stop:function(){L.Util.cancelAnimFrame(this._flyToFrame);if(this._panAnim){this._panAnim.stop()};return this},_rawPanBy:function(t){L.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){if(!this._enforcingBounds){this.panInsideBounds(this.options.maxBounds)}},_checkIfLoaded:function(){if(!this._loaded){throw new Error('Set map center and zoom first.')}},_initEvents:function(t){if(!L.DomEvent){return};this._targets={};this._targets[L.stamp(this._container)]=this;var i=t?'off':'on';L.DomEvent[i](this._container,'click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress',this._handleDOMEvent,this);if(this.options.trackResize){L.DomEvent[i](window,'resize',this._onResize,this)};if(L.Browser.any3d&&this.options.transform3DLimit){this[i]('moveend',this._onMoveEnd)}},_onResize:function(){L.Util.cancelAnimFrame(this._resizeRequest);this._resizeRequest=L.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0;this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();if(Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit){this._resetView(this.getCenter(),this.getZoom())}},_findEventTargets:function(t,i){var o=[],n,s=i==='mouseout'||i==='mouseover',e=t.target||t.srcElement,a=!1;while(e){n=this._targets[L.stamp(e)];if(n&&(i==='click'||i==='preclick')&&!t._simulated&&this._draggableMoved(n)){a=!0;break};if(n&&n.listens(i,!0)){if(s&&!L.DomEvent._isExternalTarget(e,t)){break};o.push(n);if(s){break}};if(e===this._container){break};e=e.parentNode};if(!o.length&&!a&&!s&&L.DomEvent._isExternalTarget(e,t)){o=[this]};return o},_handleDOMEvent:function(t){if(!this._loaded||L.DomEvent._skipped(t)){return};var i=t.type==='keypress'&&t.keyCode===13?'click':t.type;if(i==='mousedown'){L.DomUtil.preventOutline(t.target||t.srcElement)};this._fireDOMEvent(t,i)},_fireDOMEvent:function(t,i,e){if(t.type==='click'){var a=L.Util.extend({},t);a.type='preclick';this._fireDOMEvent(a,a.type,e)};if(t._stopped){return};e=(e||[]).concat(this._findEventTargets(t,i));if(!e.length){return};var s=e[0];if(i==='contextmenu'&&s.listens(i,!0)){L.DomEvent.preventDefault(t)};var n={originalEvent:t};if(t.type!=='keypress'){var r=s instanceof L.Marker;n.containerPoint=r?this.latLngToContainerPoint(s.getLatLng()):this.mouseEventToContainerPoint(t);n.layerPoint=this.containerPointToLayerPoint(n.containerPoint);n.latlng=r?s.getLatLng():this.layerPointToLatLng(n.layerPoint)};for(var o=0;o<e.length;o++){e[o].fire(i,n,!0);if(n.originalEvent._stopped||(e[o].options.nonBubblingEvents&&L.Util.indexOf(e[o].options.nonBubblingEvents,i)!==-1)){return}}},_draggableMoved:function(t){t=t.dragging&&t.dragging.enabled()?t:this;return(t.dragging&&t.dragging.moved())||(this.boxZoom&&this.boxZoom.moved())},_clearHandlers:function(){for(var t=0,i=this._handlers.length;t<i;t++){this._handlers[t].disable()}},whenReady:function(t,i){if(this._loaded){t.call(i||this,{target:this})}
else{this.on('load',t,i)};return this},_getMapPanePos:function(){return L.DomUtil.getPosition(this._mapPane)||new L.Point(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,i){var e=t&&i!==undefined?this._getNewPixelOrigin(t,i):this.getPixelOrigin();return e.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,i){var e=this.getSize()._divideBy(2);return this.project(t,i)._subtract(e)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,i,e){var n=this._getNewPixelOrigin(e,i);return this.project(t,i)._subtract(n)},_latLngBoundsToNewLayerBounds:function(t,i,e){var n=this._getNewPixelOrigin(e,i);return L.bounds([this.project(t.getSouthWest(),i)._subtract(n),this.project(t.getNorthWest(),i)._subtract(n),this.project(t.getSouthEast(),i)._subtract(n),this.project(t.getNorthEast(),i)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,i,e){if(!e){return t};var n=this.project(t,i),o=this.getSize().divideBy(2),a=new L.Bounds(n.subtract(o),n.add(o)),s=this._getBoundsOffset(a,e,i);if(s.round().equals([0,0])){return t};return this.unproject(n.add(s),i)},_limitOffset:function(t,i){if(!i){return t};var e=this.getPixelBounds(),n=new L.Bounds(e.min.add(t),e.max.add(t));return t.add(this._getBoundsOffset(n,i))},_getBoundsOffset:function(t,i,e){var n=L.bounds(this.project(i.getNorthEast(),e),this.project(i.getSouthWest(),e)),o=n.min.subtract(t.min),s=n.max.subtract(t.max),a=this._rebound(o.x,-s.x),r=this._rebound(o.y,-s.y);return new L.Point(a,r)},_rebound:function(t,i){return t+i>0?Math.round(t-i)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(i))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=L.Browser.any3d?this.options.zoomSnap:1;if(i){t=Math.round(t/i)*i};return Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire('move')},_onPanTransitionEnd:function(){L.DomUtil.removeClass(this._mapPane,'leaflet-pan-anim');this.fire('moveend')},_tryAnimatedPan:function(t,i){var e=this._getCenterOffset(t)._floor();if((i&&i.animate)!==!0&&!this.getSize().contains(e)){return!1};this.panBy(e,i);return!0},_createAnimProxy:function(){var t=this._proxy=L.DomUtil.create('div','leaflet-proxy leaflet-zoom-animated');this._panes.mapPane.appendChild(t);this.on('zoomanim',function(i){var e=L.DomUtil.TRANSFORM,n=t.style[e];L.DomUtil.setTransform(t,this.project(i.center,i.zoom),this.getZoomScale(i.zoom,1));if(n===t.style[e]&&this._animatingZoom){this._onZoomTransitionEnd()}},this);this.on('load moveend',function(){var e=this.getCenter(),i=this.getZoom();L.DomUtil.setTransform(t,this.project(e,i),this.getZoomScale(i,1))},this)},_catchTransitionEnd:function(t){if(this._animatingZoom&&t.propertyName.indexOf('transform')>=0){this._onZoomTransitionEnd()}},_nothingToAnimate:function(){return!this._container.getElementsByClassName('leaflet-zoom-animated').length},_tryAnimatedZoom:function(t,i,e){if(this._animatingZoom){return!0};e=e||{};if(!this._zoomAnimated||e.animate===!1||this._nothingToAnimate()||Math.abs(i-this._zoom)>this.options.zoomAnimationThreshold){return!1};var n=this.getZoomScale(i),o=this._getCenterOffset(t)._divideBy(1-1/n);if(e.animate!==!0&&!this.getSize().contains(o)){return!1};L.Util.requestAnimFrame(function(){this._moveStart(!0)._animateZoom(t,i,!0)},this);return!0},_animateZoom:function(t,i,e,n){if(e){this._animatingZoom=!0;this._animateToCenter=t;this._animateToZoom=i;L.DomUtil.addClass(this._mapPane,'leaflet-zoom-anim')};this.fire('zoomanim',{center:t,zoom:i,noUpdate:n});setTimeout(L.bind(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){if(!this._animatingZoom){return};L.DomUtil.removeClass(this._mapPane,'leaflet-zoom-anim');this._animatingZoom=!1;this._move(this._animateToCenter,this._animateToZoom);L.Util.requestAnimFrame(function(){this._moveEnd(!0)},this)}});L.map=function(t,i){return new L.Map(t,i)};
;L.Layer=L.Evented.extend({options:{pane:'overlayPane',nonBubblingEvents:[],attribution:null,},addTo:function(t){t.addLayer(this);return this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){if(t){t.removeLayer(this)};return this},getPane:function(t){return this._map.getPane(t?(this.options[t]||t):this.options.pane)},addInteractiveTarget:function(t){this._map._targets[L.stamp(t)]=this;return this},removeInteractiveTarget:function(t){delete this._map._targets[L.stamp(t)];return this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var i=t.target;if(!i.hasLayer(this)){return};this._map=i;this._zoomAnimated=i._zoomAnimated;if(this.getEvents){var e=this.getEvents();i.on(e,this);this.once('remove',function(){i.off(e,this)},this)};this.onAdd(i);if(this.getAttribution&&this._map.attributionControl){this._map.attributionControl.addAttribution(this.getAttribution())};this.fire('add');i.fire('layeradd',{layer:this})}});L.Map.include({addLayer:function(t){var i=L.stamp(t);if(this._layers[i]){return this};this._layers[i]=t;t._mapToAdd=this;if(t.beforeAdd){t.beforeAdd(this)};this.whenReady(t._layerAdd,t);return this},removeLayer:function(t){var i=L.stamp(t);if(!this._layers[i]){return this};if(this._loaded){t.onRemove(this)};if(t.getAttribution&&this.attributionControl){this.attributionControl.removeAttribution(t.getAttribution())};delete this._layers[i];if(this._loaded){this.fire('layerremove',{layer:t});t.fire('remove')};t._map=t._mapToAdd=null;return this},hasLayer:function(t){return!!t&&(L.stamp(t)in this._layers)},eachLayer:function(t,i){for(var e in this._layers){t.call(i,this._layers[e])};return this},_addLayers:function(t){t=t?(L.Util.isArray(t)?t:[t]):[];for(var i=0,e=t.length;i<e;i++){this.addLayer(t[i])}},_addZoomLimit:function(t){if(isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom)){this._zoomBoundLayers[L.stamp(t)]=t;this._updateZoomLevels()}},_removeZoomLimit:function(t){var i=L.stamp(t);if(this._zoomBoundLayers[i]){delete this._zoomBoundLayers[i];this._updateZoomLevels()}},_updateZoomLevels:function(){var t=Infinity,i=-Infinity,n=this._getZoomSpan();for(var o in this._zoomBoundLayers){var e=this._zoomBoundLayers[o].options;t=e.minZoom===undefined?t:Math.min(t,e.minZoom);i=e.maxZoom===undefined?i:Math.max(i,e.maxZoom)};this._layersMaxZoom=i===-Infinity?undefined:i;this._layersMinZoom=t===Infinity?undefined:t;if(n!==this._getZoomSpan()){this.fire('zoomlevelschange')};if(this.options.maxZoom===undefined&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom){this.setZoom(this._layersMaxZoom)};if(this.options.minZoom===undefined&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom){this.setZoom(this._layersMinZoom)}}});
;var eventsKey='_leaflet_events';L.DomEvent={on:function(e,t,n,o){if(typeof t==='object'){for(var r in t){this._on(e,r,t[r],n)}}
else{t=L.Util.splitWords(t);for(var i=0,s=t.length;i<s;i++){this._on(e,t[i],n,o)}};return this},off:function(e,t,n,o){if(typeof t==='object'){for(var r in t){this._off(e,r,t[r],n)}}
else{t=L.Util.splitWords(t);for(var i=0,s=t.length;i<s;i++){this._off(e,t[i],n,o)}};return this},_on:function(e,t,i,o){var r=t+L.stamp(i)+(o?'_'+L.stamp(o):'');if(e[eventsKey]&&e[eventsKey][r]){return this};var n=function(t){return i.call(o||e,t||window.event)},s=n;if(L.Browser.pointer&&t.indexOf('touch')===0){this.addPointerListener(e,t,n,r)}
else if(L.Browser.touch&&(t==='dblclick')&&this.addDoubleTapListener){this.addDoubleTapListener(e,n,r)}
else if('addEventListener' in e){if(t==='mousewheel'){e.addEventListener('onwheel' in e?'wheel':'mousewheel',n,!1)}
else if((t==='mouseenter')||(t==='mouseleave')){n=function(t){t=t||window.event;if(L.DomEvent._isExternalTarget(e,t)){s(t)}};e.addEventListener(t==='mouseenter'?'mouseover':'mouseout',n,!1)}
else{if(t==='click'&&L.Browser.android){n=function(e){return L.DomEvent._filterClick(e,s)}};e.addEventListener(t,n,!1)}}
else if('attachEvent' in e){e.attachEvent('on'+t,n)};e[eventsKey]=e[eventsKey]||{};e[eventsKey][r]=n;return this},_off:function(e,t,o,n){var i=t+L.stamp(o)+(n?'_'+L.stamp(n):''),r=e[eventsKey]&&e[eventsKey][i];if(!r){return this};if(L.Browser.pointer&&t.indexOf('touch')===0){this.removePointerListener(e,t,i)}
else if(L.Browser.touch&&(t==='dblclick')&&this.removeDoubleTapListener){this.removeDoubleTapListener(e,i)}
else if('removeEventListener' in e){if(t==='mousewheel'){e.removeEventListener('onwheel' in e?'wheel':'mousewheel',r,!1)}
else{e.removeEventListener(t==='mouseenter'?'mouseover':t==='mouseleave'?'mouseout':t,r,!1)}}
else if('detachEvent' in e){e.detachEvent('on'+t,r)};e[eventsKey][i]=null;return this},stopPropagation:function(e){if(e.stopPropagation){e.stopPropagation()}
else if(e.originalEvent){e.originalEvent._stopped=!0}
else{e.cancelBubble=!0};L.DomEvent._skipped(e);return this},disableScrollPropagation:function(e){return L.DomEvent.on(e,'mousewheel',L.DomEvent.stopPropagation)},disableClickPropagation:function(e){var t=L.DomEvent.stopPropagation;L.DomEvent.on(e,L.Draggable.START.join(' '),t);return L.DomEvent.on(e,{click:L.DomEvent._fakeStop,dblclick:t})},preventDefault:function(e){if(e.preventDefault){e.preventDefault()}
else{e.returnValue=!1};return this},stop:function(e){return L.DomEvent.preventDefault(e).stopPropagation(e)},getMousePosition:function(e,t){if(!t){return new L.Point(e.clientX,e.clientY)};var n=t.getBoundingClientRect();return new L.Point(e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop)},_wheelPxFactor:(L.Browser.win&&L.Browser.chrome)?2:L.Browser.gecko?window.devicePixelRatio:1,getWheelDelta:function(e){return(L.Browser.edge)?e.wheelDeltaY/2:(e.deltaY&&e.deltaMode===0)?-e.deltaY/L.DomEvent._wheelPxFactor:(e.deltaY&&e.deltaMode===1)?-e.deltaY*20:(e.deltaY&&e.deltaMode===2)?-e.deltaY*60:(e.deltaX||e.deltaZ)?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:(e.detail&&Math.abs(e.detail)<32765)?-e.detail*20:e.detail?e.detail/-32765*60:0},_skipEvents:{},_fakeStop:function(e){L.DomEvent._skipEvents[e.type]=!0},_skipped:function(e){var t=this._skipEvents[e.type];this._skipEvents[e.type]=!1;return t},_isExternalTarget:function(e,t){var n=t.relatedTarget;if(!n){return!0};try{while(n&&(n!==e)){n=n.parentNode}}catch(o){return!1};return(n!==e)},_filterClick:function(e,t){var o=(e.timeStamp||(e.originalEvent&&e.originalEvent.timeStamp)),n=L.DomEvent._lastClick&&(o-L.DomEvent._lastClick);if((n&&n>100&&n<500)||(e.target._simulatedClick&&!e._simulated)){L.DomEvent.stop(e);return};L.DomEvent._lastClick=o;t(e)}};L.DomEvent.addListener=L.DomEvent.on;L.DomEvent.removeListener=L.DomEvent.off;
;L.PosAnimation=L.Evented.extend({run:function(t,i,s,e){this.stop();this._el=t;this._inProgress=!0;this._duration=s||0.25;this._easeOutPower=1/Math.max(e||0.5,0.2);this._startPos=L.DomUtil.getPosition(t);this._offset=i.subtract(this._startPos);this._startTime=+new Date();this.fire('start');this._animate()},stop:function(){if(!this._inProgress){return};this._step(!0);this._complete()},_animate:function(){this._animId=L.Util.requestAnimFrame(this._animate,this);this._step()},_step:function(t){var i=(+new Date())-this._startTime,s=this._duration*1000;if(i<s){this._runFrame(this._easeOut(i/s),t)}
else{this._runFrame(1);this._complete()}},_runFrame:function(t,i){var s=this._startPos.add(this._offset.multiplyBy(t));if(i){s._round()};L.DomUtil.setPosition(this._el,s);this.fire('step')},_complete:function(){L.Util.cancelAnimFrame(this._animId);this._inProgress=!1;this.fire('end')},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}});
;L.GridLayer=L.Layer.extend({options:{tileSize:256,opacity:1,updateWhenIdle:L.Browser.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:undefined,noWrap:!1,pane:'tilePane',className:'',keepBuffer:2},initialize:function(i){L.setOptions(this,i)},onAdd:function(){this._initContainer();this._levels={};this._tiles={};this._resetView();this._update()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles();L.DomUtil.remove(this._container);i._removeZoomLimit(this);this._container=null;this._tileZoom=null},bringToFront:function(){if(this._map){L.DomUtil.toFront(this._container);this._setAutoZIndex(Math.max)};return this},bringToBack:function(){if(this._map){L.DomUtil.toBack(this._container);this._setAutoZIndex(Math.min)};return this},getContainer:function(){return this._container},setOpacity:function(i){this.options.opacity=i;this._updateOpacity();return this},setZIndex:function(i){this.options.zIndex=i;this._updateZIndex();return this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();this._update()};return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};if(!this.options.updateWhenIdle){if(!this._onMove){this._onMove=L.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)};i.move=this._onMove};if(this._zoomAnimated){i.zoomanim=this._animateZoom};return i},createTile:function(){return document.createElement('div')},getTileSize:function(){var i=this.options.tileSize;return i instanceof L.Point?i:new L.Point(i,i)},_updateZIndex:function(){if(this._container&&this.options.zIndex!==undefined&&this.options.zIndex!==null){this._container.style.zIndex=this.options.zIndex}},_setAutoZIndex:function(i){var n=this.getPane().children,e=-i(-Infinity,Infinity);for(var t=0,s=n.length,o;t<s;t++){o=n[t].style.zIndex;if(n[t]!==this._container&&o){e=i(e,+o)}};if(isFinite(e)){this.options.zIndex=e+i(-1,1);this._updateZIndex()}},_updateOpacity:function(){if(!this._map){return};if(L.Browser.ielt9){return};L.DomUtil.setOpacity(this._container,this.options.opacity);var s=+new Date(),e=!1,o=!1;for(var n in this._tiles){var i=this._tiles[n];if(!i.current||!i.loaded){continue};var t=Math.min(1,(s-i.loaded)/200);L.DomUtil.setOpacity(i.el,t);if(t<1){e=!0}
else{if(i.active){o=!0};i.active=!0}};if(o&&!this._noPrune){this._pruneTiles()};if(e){L.Util.cancelAnimFrame(this._fadeFrame);this._fadeFrame=L.Util.requestAnimFrame(this._updateOpacity,this)}},_initContainer:function(){if(this._container){return};this._container=L.DomUtil.create('div','leaflet-layer '+(this.options.className||''));this._updateZIndex();if(this.options.opacity<1){this._updateOpacity()};this.getPane().appendChild(this._container)},_updateLevels:function(){var e=this._tileZoom,n=this.options.maxZoom;if(e===undefined){return undefined};for(var t in this._levels){if(this._levels[t].el.children.length||t===e){this._levels[t].el.style.zIndex=n-Math.abs(e-t)}
else{L.DomUtil.remove(this._levels[t].el);this._removeTilesAtZoom(t);delete this._levels[t]}};var i=this._levels[e],o=this._map;if(!i){i=this._levels[e]={};i.el=L.DomUtil.create('div','leaflet-tile-container leaflet-zoom-animated',this._container);i.el.style.zIndex=n;i.origin=o.project(o.unproject(o.getPixelOrigin()),e).round();i.zoom=e;this._setZoomTransform(i,o.getCenter(),o.getZoom());L.Util.falseFn(i.el.offsetWidth)};this._level=i;return i},_pruneTiles:function(){if(!this._map){return};var t,e,o=this._map.getZoom();if(o>this.options.maxZoom||o<this.options.minZoom){this._removeAllTiles();return};for(t in this._tiles){e=this._tiles[t];e.retain=e.current};for(t in this._tiles){e=this._tiles[t];if(e.current&&!e.active){var i=e.coords;if(!this._retainParent(i.x,i.y,i.z,i.z-5)){this._retainChildren(i.x,i.y,i.z,i.z+2)}}};for(t in this._tiles){if(!this._tiles[t].retain){this._removeTile(t)}}},_removeTilesAtZoom:function(i){for(var t in this._tiles){if(this._tiles[t].coords.z!==i){continue};this._removeTile(t)}},_removeAllTiles:function(){for(var i in this._tiles){this._removeTile(i)}},_invalidateAll:function(){for(var i in this._levels){L.DomUtil.remove(this._levels[i].el);delete this._levels[i]};this._removeAllTiles();this._tileZoom=null},_retainParent:function(i,t,o,n){var r=Math.floor(i/2),a=Math.floor(t/2),s=o-1,l=new L.Point(+r,+a);l.z=+s;var h=this._tileCoordsToKey(l),e=this._tiles[h];if(e&&e.active){e.retain=!0;return!0}
else if(e&&e.loaded){e.retain=!0};if(s>n){return this._retainParent(r,a,s,n)};return!1},_retainChildren:function(i,t,e,n){for(var r=2*i;r<2*i+2;r++){for(var s=2*t;s<2*t+2;s++){var a=new L.Point(r,s);a.z=e+1;var l=this._tileCoordsToKey(a),o=this._tiles[l];if(o&&o.active){o.retain=!0;continue}
else if(o&&o.loaded){o.retain=!0};if(e+1<n){this._retainChildren(r,s,e+1,n)}}}},_resetView:function(i){var t=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_setView:function(i,t,e,n){var o=Math.round(t);if((this.options.maxZoom!==undefined&&o>this.options.maxZoom)||(this.options.minZoom!==undefined&&o<this.options.minZoom)){o=undefined};var s=this.options.updateWhenZooming&&(o!==this._tileZoom);if(!n||s){this._tileZoom=o;if(this._abortLoading){this._abortLoading()};this._updateLevels();this._resetGrid();if(o!==undefined){this._update(i)};if(!e){this._pruneTiles()};this._noPrune=!!e};this._setZoomTransforms(i,t)},_setZoomTransforms:function(i,t){for(var e in this._levels){this._setZoomTransform(this._levels[e],i,t)}},_setZoomTransform:function(i,t,e){var o=this._map.getZoomScale(e,i.zoom),n=i.origin.multiplyBy(o).subtract(this._map._getNewPixelOrigin(t,e)).round();if(L.Browser.any3d){L.DomUtil.setTransform(i.el,n,o)}
else{L.DomUtil.setPosition(i.el,n)}},_resetGrid:function(){var t=this._map,i=t.options.crs,e=this._tileSize=this.getTileSize(),o=this._tileZoom,n=this._map.getPixelWorldBounds(this._tileZoom);if(n){this._globalTileRange=this._pxBoundsToTileRange(n)};this._wrapX=i.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,i.wrapLng[0]],o).x/e.x),Math.ceil(t.project([0,i.wrapLng[1]],o).x/e.y)];this._wrapY=i.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([i.wrapLat[0],0],o).y/e.x),Math.ceil(t.project([i.wrapLat[1],0],o).y/e.y)]},_onMoveEnd:function(){if(!this._map||this._map._animatingZoom){return};this._update()},_getTiledPixelBounds:function(i){var t=this._map,n=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),s=t.getZoomScale(n,this._tileZoom),e=t.project(i,this._tileZoom).floor(),o=t.getSize().divideBy(s*2);return new L.Bounds(e.subtract(o),e.add(o))},_update:function(i){var l=this._map;if(!l){return};var m=l.getZoom();if(i===undefined){i=l.getCenter()};if(this._tileZoom===undefined){return};var c=this._getTiledPixelBounds(i),e=this._pxBoundsToTileRange(c),f=e.getCenter(),o=[],s=this.options.keepBuffer,p=new L.Bounds(e.getBottomLeft().subtract([s,-s]),e.getTopRight().add([s,-s]));for(var u in this._tiles){var a=this._tiles[u].coords;if(a.z!==this._tileZoom||!p.contains(L.point(a.x,a.y))){this._tiles[u].current=!1}};if(Math.abs(m-this._tileZoom)>1){this._setView(i,m);return};for(var r=e.min.y;r<=e.max.y;r++){for(var t=e.min.x;t<=e.max.x;t++){var n=new L.Point(t,r);n.z=this._tileZoom;if(!this._isValidTile(n)){continue};var d=this._tiles[this._tileCoordsToKey(n)];if(d){d.current=!0}
else{o.push(n)}}};o.sort(function(i,t){return i.distanceTo(f)-t.distanceTo(f)});if(o.length!==0){if(!this._loading){this._loading=!0;this.fire('loading')};var h=document.createDocumentFragment();for(t=0;t<o.length;t++){this._addTile(o[t],h)};this._level.el.appendChild(h)}},_isValidTile:function(i){var e=this._map.options.crs;if(!e.infinite){var t=this._globalTileRange;if((!e.wrapLng&&(i.x<t.min.x||i.x>t.max.x))||(!e.wrapLat&&(i.y<t.min.y||i.y>t.max.y))){return!1}};if(!this.options.bounds){return!0};var o=this._tileCoordsToBounds(i);return L.latLngBounds(this.options.bounds).overlaps(o)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToBounds:function(i){var t=this._map,n=this.getTileSize(),s=i.scaleBy(n),r=s.add(n),e=t.unproject(s,i.z),o=t.unproject(r,i.z);if(!this.options.noWrap){e=t.wrapLatLng(e);o=t.wrapLatLng(o)};return new L.LatLngBounds(e,o)},_tileCoordsToKey:function(i){return i.x+':'+i.y+':'+i.z},_keyToTileCoords:function(i){var t=i.split(':'),e=new L.Point(+t[0],+t[1]);e.z=+t[2];return e},_removeTile:function(i){var t=this._tiles[i];if(!t){return};L.DomUtil.remove(t.el);delete this._tiles[i];this.fire('tileunload',{tile:t.el,coords:this._keyToTileCoords(i)})},_initTile:function(i){L.DomUtil.addClass(i,'leaflet-tile');var t=this.getTileSize();i.style.width=t.x+'px';i.style.height=t.y+'px';i.onselectstart=L.Util.falseFn;i.onmousemove=L.Util.falseFn;if(L.Browser.ielt9&&this.options.opacity<1){L.DomUtil.setOpacity(i,this.options.opacity)};if(L.Browser.android&&!L.Browser.android23){i.style.WebkitBackfaceVisibility='hidden'}},_addTile:function(i,t){var o=this._getTilePos(i),n=this._tileCoordsToKey(i),e=this.createTile(this._wrapCoords(i),L.bind(this._tileReady,this,i));this._initTile(e);if(this.createTile.length<2){L.Util.requestAnimFrame(L.bind(this._tileReady,this,i,null,e))};L.DomUtil.setPosition(e,o);this._tiles[n]={el:e,coords:i,current:!0};t.appendChild(e);this.fire('tileloadstart',{tile:e,coords:i})},_tileReady:function(i,e,t){if(!this._map){return};if(e){this.fire('tileerror',{error:e,tile:t,coords:i})};var o=this._tileCoordsToKey(i);t=this._tiles[o];if(!t){return};t.loaded=+new Date();if(this._map._fadeAnimated){L.DomUtil.setOpacity(t.el,0);L.Util.cancelAnimFrame(this._fadeFrame);this._fadeFrame=L.Util.requestAnimFrame(this._updateOpacity,this)}
else{t.active=!0;this._pruneTiles()};if(!e){L.DomUtil.addClass(t.el,'leaflet-tile-loaded');this.fire('tileload',{tile:t.el,coords:i})};if(this._noTilesToLoad()){this._loading=!1;this.fire('load');if(L.Browser.ielt9||!this._map._fadeAnimated){L.Util.requestAnimFrame(this._pruneTiles,this)}
else{setTimeout(L.bind(this._pruneTiles,this),250)}}},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var t=new L.Point(this._wrapX?L.Util.wrapNum(i.x,this._wrapX):i.x,this._wrapY?L.Util.wrapNum(i.y,this._wrapY):i.y);t.z=i.z;return t},_pxBoundsToTileRange:function(i){var t=this.getTileSize();return new L.Bounds(i.min.unscaleBy(t).floor(),i.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles){if(!this._tiles[i].loaded){return!1}};return!0}});L.gridLayer=function(i){return new L.GridLayer(i)};
;L.TileLayer=L.GridLayer.extend({options:{minZoom:0,maxZoom:18,maxNativeZoom:null,minNativeZoom:null,subdomains:'abc',errorTileUrl:'',zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,i){this._url=t;i=L.setOptions(this,i);if(i.detectRetina&&L.Browser.retina&&i.maxZoom>0){i.tileSize=Math.floor(i.tileSize/2);if(!i.zoomReverse){i.zoomOffset++;i.maxZoom--}
else{i.zoomOffset--;i.minZoom++};i.minZoom=Math.max(0,i.minZoom)};if(typeof i.subdomains==='string'){i.subdomains=i.subdomains.split('')};if(!L.Browser.android){this.on('tileunload',this._onTileRemove)}},setUrl:function(i,t){this._url=i;if(!t){this.redraw()};return this},createTile:function(i,o){var t=document.createElement('img');L.DomEvent.on(t,'load',L.bind(this._tileOnLoad,this,o,t));L.DomEvent.on(t,'error',L.bind(this._tileOnError,this,o,t));if(this.options.crossOrigin){t.crossOrigin=''};t.alt='';t.setAttribute('role','presentation');t.src=this.getTileUrl(i);return t},getTileUrl:function(i){var t={r:L.Browser.retina?'@2x':'',s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var o=this._globalTileRange.max.y-i.y;if(this.options.tms){t['y']=o};t['-y']=o};return L.Util.template(this._url,L.extend(t,this.options))},_tileOnLoad:function(i,t){if(L.Browser.ielt9){setTimeout(L.bind(i,this,null,t),0)}
else{i(null,t)}},_tileOnError:function(i,t,e){var o=this.options.errorTileUrl;if(o){t.src=o};i(e,t)},getTileSize:function(){var n=this._map,t=L.GridLayer.prototype.getTileSize.call(this),i=this._tileZoom+this.options.zoomOffset,o=this.options.minNativeZoom,e=this.options.maxNativeZoom;if(o!==null&&i<o){return t.divideBy(n.getZoomScale(o,i)).round()};if(e!==null&&i>e){return t.divideBy(n.getZoomScale(e,i)).round()};return t},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,e=this.options.maxZoom,n=this.options.zoomReverse,s=this.options.zoomOffset,t=this.options.minNativeZoom,o=this.options.maxNativeZoom;if(n){i=e-i};i+=s;if(t!==null&&i<t){return t};if(o!==null&&i>o){return o};return i},_getSubdomain:function(i){var t=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var t,i;for(t in this._tiles){if(this._tiles[t].coords.z!==this._tileZoom){i=this._tiles[t].el;i.onload=L.Util.falseFn;i.onerror=L.Util.falseFn;if(!i.complete){i.src=L.Util.emptyImageUrl;L.DomUtil.remove(i)}}}}});L.tileLayer=function(i,t){return new L.TileLayer(i,t)};
;L.TileLayer.WMS=L.TileLayer.extend({defaultWmsParams:{service:'WMS',request:'GetMap',layers:'',styles:'',format:'image/jpeg',transparent:!1,version:'1.1.1'},options:{crs:null,uppercase:!1},initialize:function(t,s){this._url=t;var e=L.extend({},this.defaultWmsParams);for(var i in s){if(!(i in this.options)){e[i]=s[i]}};s=L.setOptions(this,s);e.width=e.height=s.tileSize*(s.detectRetina&&L.Browser.retina?2:1);this.wmsParams=e},onAdd:function(s){this._crs=this.options.crs||s.options.crs;this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?'crs':'srs';this.wmsParams[t]=this._crs.code;L.TileLayer.prototype.onAdd.call(this,s)},getTileUrl:function(s){var i=this._tileCoordsToBounds(s),t=this._crs.project(i.getNorthWest()),e=this._crs.project(i.getSouthEast()),a=(this._wmsVersion>=1.3&&this._crs===L.CRS.EPSG4326?[e.y,t.x,t.y,e.x]:[t.x,e.y,e.x,t.y]).join(','),r=L.TileLayer.prototype.getTileUrl.call(this,s);return r+L.Util.getParamString(this.wmsParams,r,this.options.uppercase)+(this.options.uppercase?'&BBOX=':'&bbox=')+a},setParams:function(s,t){L.extend(this.wmsParams,s);if(!t){this.redraw()};return this}});L.tileLayer.wms=function(s,t){return new L.TileLayer.WMS(s,t)};
;L.Icon=L.Class.extend({initialize:function(t){L.setOptions(this,t)},createIcon:function(t){return this._createIcon('icon',t)},createShadow:function(t){return this._createIcon('shadow',t)},_createIcon:function(t,n){var i=this._getIconUrl(t);if(!i){if(t==='icon'){throw new Error('iconUrl not set in Icon options (see the docs).')};return null};var e=this._createImg(i,n&&n.tagName==='IMG'?n:null);this._setIconStyles(e,t);return e},_setIconStyles:function(t,n){var o=this.options,i=o[n+'Size'];if(typeof i==='number'){i=[i,i]};var e=L.point(i),r=L.point(n==='shadow'&&o.shadowAnchor||o.iconAnchor||e&&e.divideBy(2,!0));t.className='leaflet-marker-'+n+' '+(o.className||'');if(r){t.style.marginLeft=(-r.x)+'px';t.style.marginTop=(-r.y)+'px'};if(e){t.style.width=e.x+'px';t.style.height=e.y+'px'}},_createImg:function(t,n){n=n||document.createElement('img');n.src=t;return n},_getIconUrl:function(t){return L.Browser.retina&&this.options[t+'RetinaUrl']||this.options[t+'Url']}});L.icon=function(t){return new L.Icon(t)};
;L.Icon.Default=L.Icon.extend({options:{iconUrl:'marker-icon.png',iconRetinaUrl:'marker-icon-2x.png',shadowUrl:'marker-shadow.png',iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){if(!L.Icon.Default.imagePath){L.Icon.Default.imagePath=this._detectIconPath()};return(this.options.imagePath||L.Icon.Default.imagePath)+L.Icon.prototype._getIconUrl.call(this,e)},_detectIconPath:function(){var e=L.DomUtil.create('div','leaflet-default-icon-path',document.body),o=L.DomUtil.getStyle(e,'background-image')||L.DomUtil.getStyle(e,'backgroundImage');document.body.removeChild(e);return o.indexOf('url')===0?o.replace(/^url\(["']?/,'').replace(/marker-icon\.png["']?\)$/,''):''}});
;L.Marker=L.Layer.extend({options:{icon:new L.Icon.Default(),interactive:!0,draggable:!1,keyboard:!0,title:'',alt:'',zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:'markerPane',nonBubblingEvents:['click','dblclick','mouseover','mouseout','contextmenu']},initialize:function(t,i){L.setOptions(this,i);this._latlng=L.latLng(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation;if(this._zoomAnimated){t.on('zoomanim',this._animateZoom,this)};this._initIcon();this.update()},onRemove:function(t){if(this.dragging&&this.dragging.enabled()){this.options.draggable=!0;this.dragging.removeHooks()};if(this._zoomAnimated){t.off('zoomanim',this._animateZoom,this)};this._removeIcon();this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var i=this._latlng;this._latlng=L.latLng(t);this.update();return this.fire('move',{oldLatLng:i,latlng:this._latlng})},setZIndexOffset:function(t){this.options.zIndexOffset=t;return this.update()},setIcon:function(t){this.options.icon=t;if(this._map){this._initIcon();this.update()};if(this._popup){this.bindPopup(this._popup,this._popup.options)};return this},getElement:function(){return this._icon},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)};return this},_initIcon:function(){var t=this.options,e='leaflet-zoom-'+(this._zoomAnimated?'animated':'hide'),i=t.icon.createIcon(this._icon),s=!1;if(i!==this._icon){if(this._icon){this._removeIcon()};s=!0;if(t.title){i.title=t.title};if(t.alt){i.alt=t.alt}};L.DomUtil.addClass(i,e);if(t.keyboard){i.tabIndex='0'};this._icon=i;if(t.riseOnHover){this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex})};var n=t.icon.createShadow(this._shadow),o=!1;if(n!==this._shadow){this._removeShadow();o=!0};if(n){L.DomUtil.addClass(n,e)};this._shadow=n;if(t.opacity<1){this._updateOpacity()};if(s){this.getPane().appendChild(this._icon)};this._initInteraction();if(n&&o){this.getPane('shadowPane').appendChild(this._shadow)}},_removeIcon:function(){if(this.options.riseOnHover){this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex})};L.DomUtil.remove(this._icon);this.removeInteractiveTarget(this._icon);this._icon=null},_removeShadow:function(){if(this._shadow){L.DomUtil.remove(this._shadow)};this._shadow=null},_setPos:function(t){L.DomUtil.setPosition(this._icon,t);if(this._shadow){L.DomUtil.setPosition(this._shadow,t)};this._zIndex=t.y+this.options.zIndexOffset;this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(i)},_initInteraction:function(){if(!this.options.interactive){return};L.DomUtil.addClass(this._icon,'leaflet-interactive');this.addInteractiveTarget(this._icon);if(L.Handler.MarkerDrag){var t=this.options.draggable;if(this.dragging){t=this.dragging.enabled();this.dragging.disable()};this.dragging=new L.Handler.MarkerDrag(this);if(t){this.dragging.enable()}}},setOpacity:function(t){this.options.opacity=t;if(this._map){this._updateOpacity()};return this},_updateOpacity:function(){var t=this.options.opacity;L.DomUtil.setOpacity(this._icon,t);if(this._shadow){L.DomUtil.setOpacity(this._shadow,t)}},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor||[0,0]}});L.marker=function(t,i){return new L.Marker(t,i)};
;L.DivIcon=L.Icon.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:'leaflet-div-icon'},createIcon:function(n){var t=(n&&n.tagName==='DIV')?n:document.createElement('div'),o=this.options;t.innerHTML=o.html!==!1?o.html:'';if(o.bgPos){var e=L.point(o.bgPos);t.style.backgroundPosition=(-e.x)+'px '+(-e.y)+'px'};this._setIconStyles(t,'icon');return t},createShadow:function(){return null}});L.divIcon=function(n){return new L.DivIcon(n)};
;L.DivOverlay=L.Layer.extend({options:{offset:[0,7],className:'',pane:'popupPane'},initialize:function(t,i){L.setOptions(this,t);this._source=i},onAdd:function(t){this._zoomAnimated=t._zoomAnimated;if(!this._container){this._initLayout()};if(t._fadeAnimated){L.DomUtil.setOpacity(this._container,0)};clearTimeout(this._removeTimeout);this.getPane().appendChild(this._container);this.update();if(t._fadeAnimated){L.DomUtil.setOpacity(this._container,1)};this.bringToFront()},onRemove:function(t){if(t._fadeAnimated){L.DomUtil.setOpacity(this._container,0);this._removeTimeout=setTimeout(L.bind(L.DomUtil.remove,L.DomUtil,this._container),200)}
else{L.DomUtil.remove(this._container)}},getLatLng:function(){return this._latlng},setLatLng:function(t){this._latlng=L.latLng(t);if(this._map){this._updatePosition();this._adjustPan()};return this},getContent:function(){return this._content},setContent:function(t){this._content=t;this.update();return this},getElement:function(){return this._container},update:function(){if(!this._map){return};this._container.style.visibility='hidden';this._updateContent();this._updateLayout();this._updatePosition();this._container.style.visibility='';this._adjustPan()},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};if(this._zoomAnimated){t.zoomanim=this._animateZoom};return t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){if(this._map){L.DomUtil.toFront(this._container)};return this},bringToBack:function(){if(this._map){L.DomUtil.toBack(this._container)};return this},_updateContent:function(){if(!this._content){return};var t=this._contentNode,i=(typeof this._content==='function')?this._content(this._source||this):this._content;if(typeof i==='string'){t.innerHTML=i}
else{while(t.hasChildNodes()){t.removeChild(t.firstChild)};t.appendChild(i)};this.fire('contentupdate')},_updatePosition:function(){if(!this._map){return};var i=this._map.latLngToLayerPoint(this._latlng),t=L.point(this.options.offset),n=this._getAnchor();if(this._zoomAnimated){L.DomUtil.setPosition(this._container,i.add(n))}
else{t=t.add(i).add(n)};var e=this._containerBottom=-t.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=e+'px';this._container.style.left=o+'px'},_getAnchor:function(){return[0,0]}});
;L.Popup=L.DivOverlay.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,className:''},openOn:function(t){t.openPopup(this);return this},onAdd:function(t){L.DivOverlay.prototype.onAdd.call(this,t);t.fire('popupopen',{popup:this});if(this._source){this._source.fire('popupopen',{popup:this},!0);if(!(this._source instanceof L.Path)){this._source.on('preclick',L.DomEvent.stopPropagation)}}},onRemove:function(t){L.DivOverlay.prototype.onRemove.call(this,t);t.fire('popupclose',{popup:this});if(this._source){this._source.fire('popupclose',{popup:this},!0);if(!(this._source instanceof L.Path)){this._source.off('preclick',L.DomEvent.stopPropagation)}}},getEvents:function(){var t=L.DivOverlay.prototype.getEvents.call(this);if('closeOnClick' in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick){t.preclick=this._close};if(this.options.keepInView){t.moveend=this._adjustPan};return t},_close:function(){if(this._map){this._map.closePopup(this)}},_initLayout:function(){var t='leaflet-popup',p=this._container=L.DomUtil.create('div',t+' '+(this.options.className||'')+' leaflet-zoom-animated');if(this.options.closeButton){var i=this._closeButton=L.DomUtil.create('a',t+'-close-button',p);i.href='#close';i.innerHTML='&#215;';L.DomEvent.on(i,'click',this._onCloseButtonClick,this)};var o=this._wrapper=L.DomUtil.create('div',t+'-content-wrapper',p);this._contentNode=L.DomUtil.create('div',t+'-content',o);L.DomEvent.disableClickPropagation(o).disableScrollPropagation(this._contentNode).on(o,'contextmenu',L.DomEvent.stopPropagation);this._tipContainer=L.DomUtil.create('div',t+'-tip-container',p);this._tip=L.DomUtil.create('div',t+'-tip',this._tipContainer)},_updateLayout:function(){var i=this._contentNode,t=i.style;t.width='';t.whiteSpace='nowrap';var o=i.offsetWidth;o=Math.min(o,this.options.maxWidth);o=Math.max(o,this.options.minWidth);t.width=(o+1)+'px';t.whiteSpace='';t.height='';var n=i.offsetHeight,p=this.options.maxHeight,e='leaflet-popup-scrolled';if(p&&n>p){t.height=p+'px';L.DomUtil.addClass(i,e)}
else{L.DomUtil.removeClass(i,e)};this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();L.DomUtil.setPosition(this._container,o.add(i))},_adjustPan:function(){if(!this.options.autoPan||(this._map._panAnim&&this._map._panAnim._inProgress)){return};var s=this._map,c=parseInt(L.DomUtil.getStyle(this._container,'marginBottom'),10)||0,a=this._container.offsetHeight+c,h=this._containerWidth,r=new L.Point(this._containerLeft,-a-this._containerBottom);r._add(L.DomUtil.getPosition(this._container));var t=s.layerPointToContainerPoint(r),u=L.point(this.options.autoPanPadding),p=L.point(this.options.autoPanPaddingTopLeft||u),e=L.point(this.options.autoPanPaddingBottomRight||u),n=s.getSize(),o=0,i=0;if(t.x+h+e.x>n.x){o=t.x+h-n.x+e.x};if(t.x-o-p.x<0){o=t.x-p.x};if(t.y+a+e.y>n.y){i=t.y+a-n.y+e.y};if(t.y-i-p.y<0){i=t.y-p.y};if(o||i){s.fire('autopanstart').panBy([o,i])}},_onCloseButtonClick:function(t){this._close();L.DomEvent.stop(t)},_getAnchor:function(){return L.point(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});L.popup=function(t,o){return new L.Popup(t,o)};L.Map.mergeOptions({closePopupOnClick:!0});L.Map.include({openPopup:function(t,o,i){if(!(t instanceof L.Popup)){t=new L.Popup(i).setContent(t)};if(o){t.setLatLng(o)};if(this.hasLayer(t)){return this};if(this._popup&&this._popup.options.autoClose){this.closePopup()};this._popup=t;return this.addLayer(t)},closePopup:function(t){if(!t||t===this._popup){t=this._popup;this._popup=null};if(t){this.removeLayer(t)};return this}});L.Layer.include({bindPopup:function(t,o){if(t instanceof L.Popup){L.setOptions(t,o);this._popup=t;t._source=this}
else{if(!this._popup||o){this._popup=new L.Popup(o,this)};this._popup.setContent(t)};if(!this._popupHandlersAdded){this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup});this._popupHandlersAdded=!0};return this},unbindPopup:function(){if(this._popup){this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup});this._popupHandlersAdded=!1;this._popup=null};return this},openPopup:function(t,o){if(!(t instanceof L.Layer)){o=t;t=this};if(t instanceof L.FeatureGroup){for(var i in this._layers){t=this._layers[i];break}};if(!o){o=t.getCenter?t.getCenter():t.getLatLng()};if(this._popup&&this._map){this._popup._source=t;this._popup.update();this._map.openPopup(this._popup,o)};return this},closePopup:function(){if(this._popup){this._popup._close()};return this},togglePopup:function(t){if(this._popup){if(this._popup._map){this.closePopup()}
else{this.openPopup(t)}};return this},isPopupOpen:function(){return this._popup.isOpen()},setPopupContent:function(t){if(this._popup){this._popup.setContent(t)};return this},getPopup:function(){return this._popup},_openPopup:function(t){var o=t.layer||t.target;if(!this._popup){return};if(!this._map){return};L.DomEvent.stop(t);if(o instanceof L.Path){this.openPopup(t.layer||t.target,t.latlng);return};if(this._map.hasLayer(this._popup)&&this._popup._source===o){this.closePopup()}
else{this.openPopup(o,t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)}});
;L.Tooltip=L.DivOverlay.extend({options:{pane:'tooltipPane',offset:[0,0],direction:'auto',permanent:!1,sticky:!1,interactive:!1,opacity:0.9},onAdd:function(t){L.DivOverlay.prototype.onAdd.call(this,t);this.setOpacity(this.options.opacity);t.fire('tooltipopen',{tooltip:this});if(this._source){this._source.fire('tooltipopen',{tooltip:this},!0)}},onRemove:function(t){L.DivOverlay.prototype.onRemove.call(this,t);t.fire('tooltipclose',{tooltip:this});if(this._source){this._source.fire('tooltipclose',{tooltip:this},!0)}},getEvents:function(){var t=L.DivOverlay.prototype.getEvents.call(this);if(L.Browser.touch&&!this.options.permanent){t.preclick=this._close};return t},_close:function(){if(this._map){this._map.closeTooltip(this)}},_initLayout:function(){var t='leaflet-tooltip',o=t+' '+(this.options.className||'')+' leaflet-zoom-'+(this._zoomAnimated?'animated':'hide');this._contentNode=this._container=L.DomUtil.create('div',o)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var p=this._map,i=this._container,a=p.latLngToContainerPoint(p.getCenter()),r=p.layerPointToContainerPoint(t),e=this.options.direction,s=i.offsetWidth,l=i.offsetHeight,o=L.point(this.options.offset),n=this._getAnchor();if(e==='top'){t=t.add(L.point(-s/2+o.x,-l+o.y+n.y,!0))}
else if(e==='bottom'){t=t.subtract(L.point(s/2-o.x,-o.y,!0))}
else if(e==='center'){t=t.subtract(L.point(s/2+o.x,l/2-n.y+o.y,!0))}
else if(e==='right'||e==='auto'&&r.x<a.x){e='right';t=t.add(L.point(o.x+n.x,n.y-l/2+o.y,!0))}
else{e='left';t=t.subtract(L.point(s+n.x-o.x,l/2-n.y-o.y,!0))};L.DomUtil.removeClass(i,'leaflet-tooltip-right');L.DomUtil.removeClass(i,'leaflet-tooltip-left');L.DomUtil.removeClass(i,'leaflet-tooltip-top');L.DomUtil.removeClass(i,'leaflet-tooltip-bottom');L.DomUtil.addClass(i,'leaflet-tooltip-'+e);L.DomUtil.setPosition(i,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t;if(this._container){L.DomUtil.setOpacity(this._container,t)}},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(o)},_getAnchor:function(){return L.point(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});L.tooltip=function(t,o){return new L.Tooltip(t,o)};L.Map.include({openTooltip:function(t,o,i){if(!(t instanceof L.Tooltip)){t=new L.Tooltip(i).setContent(t)};if(o){t.setLatLng(o)};if(this.hasLayer(t)){return this};return this.addLayer(t)},closeTooltip:function(t){if(t){this.removeLayer(t)};return this}});L.Layer.include({bindTooltip:function(t,o){if(t instanceof L.Tooltip){L.setOptions(t,o);this._tooltip=t;t._source=this}
else{if(!this._tooltip||o){this._tooltip=L.tooltip(o,this)};this._tooltip.setContent(t)};this._initTooltipInteractions();if(this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)){this.openTooltip()};return this},unbindTooltip:function(){if(this._tooltip){this._initTooltipInteractions(!0);this.closeTooltip();this._tooltip=null};return this},_initTooltipInteractions:function(t){if(!t&&this._tooltipHandlersAdded){return};var i=t?'off':'on',o={remove:this.closeTooltip,move:this._moveTooltip};if(!this._tooltip.options.permanent){o.mouseover=this._openTooltip;o.mouseout=this.closeTooltip;if(this._tooltip.options.sticky){o.mousemove=this._moveTooltip};if(L.Browser.touch){o.click=this._openTooltip}}
else{o.add=this._openTooltip};this[i](o);this._tooltipHandlersAdded=!t},openTooltip:function(t,o){if(!(t instanceof L.Layer)){o=t;t=this};if(t instanceof L.FeatureGroup){for(var i in this._layers){t=this._layers[i];break}};if(!o){o=t.getCenter?t.getCenter():t.getLatLng()};if(this._tooltip&&this._map){this._tooltip._source=t;this._tooltip.update();this._map.openTooltip(this._tooltip,o);if(this._tooltip.options.interactive&&this._tooltip._container){L.DomUtil.addClass(this._tooltip._container,'leaflet-clickable');this.addInteractiveTarget(this._tooltip._container)}};return this},closeTooltip:function(){if(this._tooltip){this._tooltip._close();if(this._tooltip.options.interactive&&this._tooltip._container){L.DomUtil.removeClass(this._tooltip._container,'leaflet-clickable');this.removeInteractiveTarget(this._tooltip._container)}};return this},toggleTooltip:function(t){if(this._tooltip){if(this._tooltip._map){this.closeTooltip()}
else{this.openTooltip(t)}};return this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){if(this._tooltip){this._tooltip.setContent(t)};return this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var o=t.layer||t.target;if(!this._tooltip||!this._map){return};this.openTooltip(o,this._tooltip.options.sticky?t.latlng:undefined)},_moveTooltip:function(t){var o=t.latlng,i,e;if(this._tooltip.options.sticky&&t.originalEvent){i=this._map.mouseEventToContainerPoint(t.originalEvent);e=this._map.containerPointToLayerPoint(i);o=this._map.layerPointToLatLng(e)};this._tooltip.setLatLng(o)}});
;L.LayerGroup=L.Layer.extend({initialize:function(r){this._layers={};var e,t;if(r){for(e=0,t=r.length;e<t;e++){this.addLayer(r[e])}}},addLayer:function(r){var e=this.getLayerId(r);this._layers[e]=r;if(this._map){this._map.addLayer(r)};return this},removeLayer:function(r){var e=r in this._layers?r:this.getLayerId(r);if(this._map&&this._layers[e]){this._map.removeLayer(this._layers[e])};delete this._layers[e];return this},hasLayer:function(r){return!!r&&(r in this._layers||this.getLayerId(r)in this._layers)},clearLayers:function(){for(var r in this._layers){this.removeLayer(this._layers[r])};return this},invoke:function(r){var a=Array.prototype.slice.call(arguments,1),t,e;for(t in this._layers){e=this._layers[t];if(e[r]){e[r].apply(e,a)}};return this},onAdd:function(r){for(var e in this._layers){r.addLayer(this._layers[e])}},onRemove:function(r){for(var e in this._layers){r.removeLayer(this._layers[e])}},eachLayer:function(r,e){for(var t in this._layers){r.call(e,this._layers[t])};return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];for(var e in this._layers){r.push(this._layers[e])};return r},setZIndex:function(r){return this.invoke('setZIndex',r)},getLayerId:function(r){return L.stamp(r)}});L.layerGroup=function(r){return new L.LayerGroup(r)};
;L.FeatureGroup=L.LayerGroup.extend({addLayer:function(e){if(this.hasLayer(e)){return this};e.addEventParent(this);L.LayerGroup.prototype.addLayer.call(this,e);return this.fire('layeradd',{layer:e})},removeLayer:function(e){if(!this.hasLayer(e)){return this};if(e in this._layers){e=this._layers[e]};e.removeEventParent(this);L.LayerGroup.prototype.removeLayer.call(this,e);return this.fire('layerremove',{layer:e})},setStyle:function(e){return this.invoke('setStyle',e)},bringToFront:function(){return this.invoke('bringToFront')},bringToBack:function(){return this.invoke('bringToBack')},getBounds:function(){var r=new L.LatLngBounds();for(var t in this._layers){var e=this._layers[t];r.extend(e.getBounds?e.getBounds():e.getLatLng())};return r}});L.featureGroup=function(e){return new L.FeatureGroup(e)};
;L.Renderer=L.Layer.extend({options:{padding:0.1},initialize:function(t){L.setOptions(this,t);L.stamp(this);this._layers=this._layers||{}},onAdd:function(){if(!this._container){this._initContainer();if(this._zoomAnimated){L.DomUtil.addClass(this._container,'leaflet-zoom-animated')}};this.getPane().appendChild(this._container);this._update();this.on('update',this._updatePaths,this)},onRemove:function(){L.DomUtil.remove(this._container);this.off('update',this._updatePaths,this)},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};if(this._zoomAnimated){t.zoomanim=this._onAnimZoom};return t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),s=L.DomUtil.getPosition(this._container),n=this._map.getSize().multiplyBy(0.5+this.options.padding),a=this._map.project(this._center,e),r=this._map.project(t,e),h=r.subtract(a),o=n.multiplyBy(-i).add(s).add(n).subtract(h);if(L.Browser.any3d){L.DomUtil.setTransform(this._container,o,i)}
else{L.DomUtil.setPosition(this._container,o)}},_reset:function(){this._update();this._updateTransform(this._center,this._zoom);for(var t in this._layers){this._layers[t]._reset()}},_onZoomEnd:function(){for(var t in this._layers){this._layers[t]._project()}},_updatePaths:function(){for(var t in this._layers){this._layers[t]._update()}},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new L.Bounds(i,i.add(e.multiplyBy(1+t*2)).round());this._center=this._map.getCenter();this._zoom=this._map.getZoom()}});L.Map.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;if(!e){e=this._renderer=(this.options.preferCanvas&&L.canvas())||L.svg()};if(!this.hasLayer(e)){this.addLayer(e)};return e},_getPaneRenderer:function(t){if(t==='overlayPane'||t===undefined){return!1};var e=this._paneRenderers[t];if(e===undefined){e=(L.SVG&&L.svg({pane:t}))||(L.Canvas&&L.canvas({pane:t}));this._paneRenderers[t]=e};return e}});
;L.Path=L.Layer.extend({options:{stroke:!0,color:'#3388ff',weight:3,opacity:1,lineCap:'round',lineJoin:'round',dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:0.2,fillRule:'evenodd',interactive:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this);this._reset();this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){if(this._map){this._renderer._updatePath(this)};return this},setStyle:function(t){L.setOptions(this,t);if(this._renderer){this._renderer._updateStyle(this)};return this},bringToFront:function(){if(this._renderer){this._renderer._bringToFront(this)};return this},bringToBack:function(){if(this._renderer){this._renderer._bringToBack(this)};return this},getElement:function(){return this._path},_reset:function(){this._project();this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(L.Browser.touch?10:0)}});
;L.LineUtil={simplify:function(t,i){if(!i||!t.length){return t.slice()};var e=i*i;t=this._reducePoints(t,e);t=this._simplifyDP(t,e);return t},pointToSegmentDistance:function(t,i,e){return Math.sqrt(this._sqClosestPointOnSegment(t,i,e,!0))},closestPointOnSegment:function(t,i,e){return this._sqClosestPointOnSegment(t,i,e)},_simplifyDP:function(t,i){var n=t.length,f=typeof Uint8Array!==undefined+''?Uint8Array:Array,s=new f(n);s[0]=s[n-1]=1;this._simplifyDPStep(t,s,i,0,n-1);var e,r=[];for(e=0;e<n;e++){if(s[e]){r.push(t[e])}};return r},_simplifyDPStep:function(t,i,e,n,s){var o=0,f,r,y;for(r=n+1;r<=s-1;r++){y=this._sqClosestPointOnSegment(t[r],t[n],t[s],!0);if(y>o){f=r;o=y}};if(o>e){i[f]=1;this._simplifyDPStep(t,i,e,n,f);this._simplifyDPStep(t,i,e,f,s)}},_reducePoints:function(t,i){var r=[t[0]];for(var e=1,n=0,s=t.length;e<s;e++){if(this._sqDist(t[e],t[n])>i){r.push(t[e]);n=e}};if(n<s-1){r.push(t[s-1])};return r},clipSegment:function(t,i,e,r,o){var n=r?this._lastCode:this._getBitCode(t,e),s=this._getBitCode(i,e),y,f,u;this._lastCode=s;while(!0){if(!(n|s)){return[t,i]};if(n&s){return!1};y=n||s;f=this._getEdgeIntersection(t,i,y,e,o);u=this._getBitCode(f,e);if(y===n){t=f;n=u}
else{i=f;s=u}}},_getEdgeIntersection:function(t,i,e,n,l){var f=i.x-t.x,o=i.y-t.y,y=n.min,u=n.max,s,r;if(e&8){s=t.x+f*(u.y-t.y)/o;r=u.y}
else if(e&4){s=t.x+f*(y.y-t.y)/o;r=y.y}
else if(e&2){s=u.x;r=t.y+o*(u.x-t.x)/f}
else if(e&1){s=y.x;r=t.y+o*(y.x-t.x)/f};return new L.Point(s,r,l)},_getBitCode:function(t,i){var e=0;if(t.x<i.min.x){e|=1}
else if(t.x>i.max.x){e|=2};if(t.y<i.min.y){e|=4}
else if(t.y>i.max.y){e|=8};return e},_sqDist:function(t,i){var e=i.x-t.x,n=i.y-t.y;return e*e+n*n},_sqClosestPointOnSegment:function(t,i,e,y){var r=i.x,f=i.y,n=e.x-r,s=e.y-f,u=n*n+s*s,o;if(u>0){o=((t.x-r)*n+(t.y-f)*s)/u;if(o>1){r=e.x;f=e.y}
else if(o>0){r+=n*o;f+=s*o}};n=t.x-r;s=t.y-f;return y?n*n+s*s:new L.Point(r,f)}};
;L.Polyline=L.Path.extend({options:{smoothFactor:1.0,noClip:!1},initialize:function(t,n){L.setOptions(this,n);this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){this._setLatLngs(t);return this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){var r=Infinity,i=null,h=L.LineUtil._sqClosestPointOnSegment,o,a;for(var e=0,f=this._parts.length;e<f;e++){var s=this._parts[e];for(var n=1,u=s.length;n<u;n++){o=s[n-1];a=s[n];var l=h(t,o,a,!0);if(l<r){r=l;i=h(t,o,a)}}};if(i){i.distance=Math.sqrt(r)};return i},getCenter:function(){if(!this._map){throw new Error('Must add layer to map before using getCenter()')};var t,s,o,e,r,n,a,i=this._rings[0],l=i.length;if(!l){return null};for(t=0,s=0;t<l-1;t++){s+=i[t].distanceTo(i[t+1])/2};if(s===0){return this._map.layerPointToLatLng(i[0])};for(t=0,e=0;t<l-1;t++){r=i[t];n=i[t+1];o=r.distanceTo(n);e+=o;if(e>s){a=(e-s)/o;return this._map.layerPointToLatLng([n.x-a*(n.x-r.x),n.y-a*(n.y-r.y)])}}},getBounds:function(){return this._bounds},addLatLng:function(t,n){n=n||this._defaultShape();t=L.latLng(t);n.push(t);this._bounds.extend(t);return this.redraw()},_setLatLngs:function(t){this._bounds=new L.LatLngBounds();this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){var i=[],e=L.Polyline._flat(t);for(var n=0,s=t.length;n<s;n++){if(e){i[n]=L.latLng(t[n]);this._bounds.extend(i[n])}
else{i[n]=this._convertLatLngs(t[n])}};return i},_project:function(){var t=new L.Bounds();this._rings=[];this._projectLatlngs(this._latlngs,this._rings,t);var n=this._clickTolerance(),i=new L.Point(n,n);if(this._bounds.isValid()&&t.isValid()){t.min._subtract(i);t.max._add(i);this._pxBounds=t}},_projectLatlngs:function(t,i,e){var o=t[0]instanceof L.LatLng,r=t.length,n,s;if(o){s=[];for(n=0;n<r;n++){s[n]=this._map.latLngToLayerPoint(t[n]);e.extend(s[n])};i.push(s)}
else{for(n=0;n<r;n++){this._projectLatlngs(t[n],i,e)}}},_clipPoints:function(){var l=this._renderer._bounds;this._parts=[];if(!this._pxBounds||!this._pxBounds.intersects(l)){return};if(this.options.noClip){this._parts=this._rings;return};var e=this._parts,r,t,n,a,o,i,s;for(r=0,n=0,a=this._rings.length;r<a;r++){s=this._rings[r];for(t=0,o=s.length;t<o-1;t++){i=L.LineUtil.clipSegment(s[t],s[t+1],l,t,!0);if(!i){continue};e[n]=e[n]||[];e[n].push(i[0]);if((i[1]!==s[t+1])||(t===o-2)){e[n].push(i[1]);n++}}}},_simplifyPoints:function(){var n=this._parts,s=this.options.smoothFactor;for(var t=0,i=n.length;t<i;t++){n[t]=L.LineUtil.simplify(n[t],s)}},_update:function(){if(!this._map){return};this._clipPoints();this._simplifyPoints();this._updatePath()},_updatePath:function(){this._renderer._updatePoly(this)}});L.polyline=function(t,n){return new L.Polyline(t,n)};L.Polyline._flat=function(t){return!L.Util.isArray(t[0])||(typeof t[0][0]!=='object'&&typeof t[0][0]!=='undefined')};
;L.PolyUtil={};L.PolyUtil.clipPolygon=function(o,d,h){var n,u=[1,4,2,8],e,s,f,c,g,l,i,t,r=L.LineUtil;for(e=0,l=o.length;e<l;e++){o[e]._code=r._getBitCode(o[e],d)};for(f=0;f<4;f++){i=u[f];n=[];for(e=0,l=o.length,s=l-1;e<l;s=e++){c=o[e];g=o[s];if(!(c._code&i)){if(g._code&i){t=r._getEdgeIntersection(g,c,i,d,h);t._code=r._getBitCode(t,d);n.push(t)};n.push(c)}
else if(!(g._code&i)){t=r._getEdgeIntersection(g,c,i,d,h);t._code=r._getBitCode(t,d);n.push(t)}};o=n};return o};
;L.Polygon=L.Polyline.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map){throw new Error('Must add layer to map before using getCenter()')};var s,o,t,n,e,i,r,a,h,l=this._rings[0],g=l.length;if(!g){return null};i=r=a=0;for(s=0,o=g-1;s<g;o=s++){t=l[s];n=l[o];e=t.y*n.x-n.y*t.x;r+=(t.x+n.x)*e;a+=(t.y+n.y)*e;i+=e*3};if(i===0){h=l[0]}
else{h=[r/i,a/i]};return this._map.layerPointToLatLng(h)},_convertLatLngs:function(n){var t=L.Polyline.prototype._convertLatLngs.call(this,n),i=t.length;if(i>=2&&t[0]instanceof L.LatLng&&t[0].equals(t[i-1])){t.pop()};return t},_setLatLngs:function(t){L.Polyline.prototype._setLatLngs.call(this,t);if(L.Polyline._flat(this._latlngs)){this._latlngs=[this._latlngs]}},_defaultShape:function(){return L.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,s=this.options.weight,e=new L.Point(s,s);t=new L.Bounds(t.min.subtract(e),t.max.add(e));this._parts=[];if(!this._pxBounds||!this._pxBounds.intersects(t)){return};if(this.options.noClip){this._parts=this._rings;return};for(var n=0,l=this._rings.length,i;n<l;n++){i=L.PolyUtil.clipPolygon(this._rings[n],t,!0);if(i.length){this._parts.push(i)}}},_updatePath:function(){this._renderer._updatePoly(this,!0)}});L.polygon=function(t,n){return new L.Polygon(t,n)};
;L.CircleMarker=L.Path.extend({options:{fill:!0,radius:10},initialize:function(t,i){L.setOptions(this,i);this._latlng=L.latLng(t);this._radius=this.options.radius},setLatLng:function(t){this._latlng=L.latLng(t);this.redraw();return this.fire('move',{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){this.options.radius=this._radius=t;return this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var i=t&&t.radius||this._radius;L.Path.prototype.setStyle.call(this,t);this.setRadius(i);return this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng);this._updateBounds()},_updateBounds:function(){var t=this._radius,n=this._radiusY||t,i=this._clickTolerance(),s=[t+i,n+i];this._pxBounds=new L.Bounds(this._point.subtract(s),this._point.add(s))},_update:function(){if(this._map){this._updatePath()}},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}});L.circleMarker=function(t,i){return new L.CircleMarker(t,i)};
;L.Circle=L.CircleMarker.extend({initialize:function(i,t,a){if(typeof t==='number'){t=L.extend({},a,{radius:t})};L.setOptions(this,t);this._latlng=L.latLng(i);if(isNaN(this.options.radius)){throw new Error('Circle radius cannot be NaN')};this._mRadius=this.options.radius},setRadius:function(t){this._mRadius=t;return this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new L.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:L.Path.prototype.setStyle,_project:function(){var o=this._latlng.lng,s=this._latlng.lat,t=this._map,h=t.options.crs;if(h.distance===L.CRS.Earth.distance){var i=Math.PI/180,n=(this._mRadius/L.CRS.Earth.R)/i,u=t.project([s+n,o]),c=t.project([s-n,o]),r=u.add(c).divideBy(2),e=t.unproject(r).lat,a=Math.acos((Math.cos(n*i)-Math.sin(s*i)*Math.sin(e*i))/(Math.cos(s*i)*Math.cos(e*i)))/i;if(isNaN(a)||a===0){a=n/Math.cos(Math.PI/180*s)};this._point=r.subtract(t.getPixelOrigin());this._radius=isNaN(a)?0:Math.max(Math.round(r.x-t.project([e,o-a]).x),1);this._radiusY=Math.max(Math.round(r.y-u.y),1)}
else{var d=h.unproject(h.project(this._latlng).subtract([this._mRadius,0]));this._point=t.latLngToLayerPoint(this._latlng);this._radius=this._point.x-t.latLngToLayerPoint(d).x};this._updateBounds()}});L.circle=function(t,i,a){return new L.Circle(t,i,a)};
;L.Marker.include.prototype.closePopup=L.Marker.include.prototype.closePopup||function(){return this};L.ImageOverlay=L.ImageOverlay||L.Class.extend({});L.DivIcon=L.DivIcon||L.Class.extend({});L.Rectangle=L.Rectangle||L.Polygon.extend({});L.LayerGroup.include({eachLayerRecursive:function(e,a){this.eachLayer(function(c){e.call(a,c);if(c._layers)c.eachLayerRecursive(e,a)})}});
;L.SVG=L.Renderer.extend({getEvents:function(){var t=L.Renderer.prototype.getEvents.call(this);t.zoomstart=this._onZoomStart;return t},_initContainer:function(){this._container=L.SVG.create('svg');this._container.setAttribute('pointer-events','none');this._rootGroup=L.SVG.create('g');this._container.appendChild(this._rootGroup)},_onZoomStart:function(){this._update()},_update:function(){if(this._map._animatingZoom&&this._bounds){return};L.Renderer.prototype._update.call(this);var e=this._bounds,t=e.getSize(),i=this._container;if(!this._svgSize||!this._svgSize.equals(t)){this._svgSize=t;i.setAttribute('width',t.x);i.setAttribute('height',t.y)};L.DomUtil.setPosition(i,e.min);i.setAttribute('viewBox',[e.min.x,e.min.y,t.x,t.y].join(' '));this.fire('update')},_initPath:function(t){var e=t._path=L.SVG.create('path');if(t.options.className){L.DomUtil.addClass(e,t.options.className)};if(t.options.interactive){L.DomUtil.addClass(e,'leaflet-interactive')};this._updateStyle(t);this._layers[L.stamp(t)]=t},_addPath:function(t){this._rootGroup.appendChild(t._path);t.addInteractiveTarget(t._path)},_removePath:function(t){L.DomUtil.remove(t._path);t.removeInteractiveTarget(t._path);delete this._layers[L.stamp(t)]},_updatePath:function(t){t._project();t._update()},_updateStyle:function(i){var t=i._path,e=i.options;if(!t){return};if(e.stroke){t.setAttribute('stroke',e.color);t.setAttribute('stroke-opacity',e.opacity);t.setAttribute('stroke-width',e.weight);t.setAttribute('stroke-linecap',e.lineCap);t.setAttribute('stroke-linejoin',e.lineJoin);if(e.dashArray){t.setAttribute('stroke-dasharray',e.dashArray)}
else{t.removeAttribute('stroke-dasharray')};if(e.dashOffset){t.setAttribute('stroke-dashoffset',e.dashOffset)}
else{t.removeAttribute('stroke-dashoffset')}}
else{t.setAttribute('stroke','none')};if(e.fill){t.setAttribute('fill',e.fillColor||e.color);t.setAttribute('fill-opacity',e.fillOpacity);t.setAttribute('fill-rule',e.fillRule||'evenodd')}
else{t.setAttribute('fill','none')}},_updatePoly:function(t,e){this._setPath(t,L.SVG.pointsToPath(t._parts,e))},_updateCircle:function(t){var i=t._point,e=t._radius,o=t._radiusY||e,r='a'+e+','+o+' 0 1,0 ',s=t._empty()?'M0 0':'M'+(i.x-e)+','+i.y+r+(e*2)+',0 '+r+(-e*2)+',0 ';this._setPath(t,s)},_setPath:function(t,e){t._path.setAttribute('d',e)},_bringToFront:function(t){L.DomUtil.toFront(t._path)},_bringToBack:function(t){L.DomUtil.toBack(t._path)}});L.extend(L.SVG,{create:function(t){return document.createElementNS('http://www.w3.org/2000/svg',t)},pointsToPath:function(t,r){var o='',i,e,a,u,s,n;for(i=0,a=t.length;i<a;i++){s=t[i];for(e=0,u=s.length;e<u;e++){n=s[e];o+=(e?'L':'M')+n.x+' '+n.y};o+=r?(L.Browser.svg?'z':'x'):''};return o||'M0 0'}});L.Browser.svg=!!(document.createElementNS&&L.SVG.create('svg').createSVGRect);L.svg=function(t){return L.Browser.svg||L.Browser.vml?new L.SVG(t):null};
;L.GeoJSON=L.FeatureGroup.extend({initialize:function(e,t){L.setOptions(this,t);this._layers={};if(e){this.addData(e)}},addData:function(e){var i=L.Util.isArray(e)?e:e.features,n,a,o;if(i){for(n=0,a=i.length;n<a;n++){o=i[n];if(o.geometries||o.geometry||o.features||o.coordinates){this.addData(o)}};return this};var r=this.options;if(r.filter&&!r.filter(e)){return this};var t=L.GeoJSON.geometryToLayer(e,r);if(!t){return this};t.feature=L.GeoJSON.asFeature(e);t.defaultOptions=t.options;this.resetStyle(t);if(r.onEachFeature){r.onEachFeature(e,t)};return this.addLayer(t)},resetStyle:function(e){e.options=L.Util.extend({},e.defaultOptions);this._setLayerStyle(e,this.options.style);return this},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){if(typeof t==='function'){t=t(e.feature)};if(e.setStyle){e.setStyle(t)}}});L.extend(L.GeoJSON,{geometryToLayer:function(e,t){var o=e.type==='Feature'?e.geometry:e,n=o?o.coordinates:null,a=[],s=t&&t.pointToLayer,u=t&&t.coordsToLatLng||this.coordsToLatLng,i,l,r,y;if(!n&&!o){return null};switch(o.type){case'Point':i=u(n);return s?s(e,i):new L.Marker(i);case'MultiPoint':for(r=0,y=n.length;r<y;r++){i=u(n[r]);a.push(s?s(e,i):new L.Marker(i))};return new L.FeatureGroup(a);case'LineString':case'MultiLineString':l=this.coordsToLatLngs(n,o.type==='LineString'?0:1,u);return new L.Polyline(l,t);case'Polygon':case'MultiPolygon':l=this.coordsToLatLngs(n,o.type==='Polygon'?1:2,u);return new L.Polygon(l,t);case'GeometryCollection':for(r=0,y=o.geometries.length;r<y;r++){var g=this.geometryToLayer({geometry:o.geometries[r],type:'Feature',properties:e.properties},t);if(g){a.push(g)}};return new L.FeatureGroup(a);default:throw new Error('Invalid GeoJSON object.')}},coordsToLatLng:function(e){return new L.LatLng(e[1],e[0],e[2])},coordsToLatLngs:function(e,t,r){var i=[];for(var o=0,a=e.length,n;o<a;o++){n=t?this.coordsToLatLngs(e[o],t-1,r):(r||this.coordsToLatLng)(e[o]);i.push(n)};return i},latLngToCoords:function(e){return e.alt!==undefined?[e.lng,e.lat,e.alt]:[e.lng,e.lat]},latLngsToCoords:function(e,t,n){var r=[];for(var o=0,i=e.length;o<i;o++){r.push(t?L.GeoJSON.latLngsToCoords(e[o],t-1,n):L.GeoJSON.latLngToCoords(e[o]))};if(!t&&n){r.push(r[0])};return r},getFeature:function(e,t){return e.feature?L.extend({},e.feature,{geometry:t}):L.GeoJSON.asFeature(t)},asFeature:function(e){if(e.type==='Feature'||e.type==='FeatureCollection'){return e};return{type:'Feature',properties:{},geometry:e}}});var PointToGeoJSON={toGeoJSON:function(){return L.GeoJSON.getFeature(this,{type:'Point',coordinates:L.GeoJSON.latLngToCoords(this.getLatLng())})}};L.Marker.include(PointToGeoJSON);L.Circle.include(PointToGeoJSON);L.CircleMarker.include(PointToGeoJSON);L.Polyline.prototype.toGeoJSON=function(){var e=!L.Polyline._flat(this._latlngs),t=L.GeoJSON.latLngsToCoords(this._latlngs,e?1:0);return L.GeoJSON.getFeature(this,{type:(e?'Multi':'')+'LineString',coordinates:t})};L.Polygon.prototype.toGeoJSON=function(){var e=!L.Polyline._flat(this._latlngs),o=e&&!L.Polyline._flat(this._latlngs[0]),t=L.GeoJSON.latLngsToCoords(this._latlngs,o?2:e?1:0,!0);if(!e){t=[t]};return L.GeoJSON.getFeature(this,{type:(o?'Multi':'')+'Polygon',coordinates:t})};L.LayerGroup.include({toMultiPoint:function(){var e=[];this.eachLayer(function(t){e.push(t.toGeoJSON().geometry.coordinates)});return L.GeoJSON.getFeature(this,{type:'MultiPoint',coordinates:e})},toGeoJSON:function(){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==='MultiPoint'){return this.toMultiPoint()};var t=o==='GeometryCollection',e=[];this.eachLayer(function(o){if(o.toGeoJSON){var r=o.toGeoJSON();e.push(t?r.geometry:L.GeoJSON.asFeature(r))}});if(t){return L.GeoJSON.getFeature(this,{geometries:e,type:'GeometryCollection'})};return{type:'FeatureCollection',features:e}}});L.geoJSON=function(e,t){return new L.GeoJSON(e,t)};L.geoJson=L.geoJSON;
;L.Draggable=L.Evented.extend({options:{clickTolerance:3},statics:{START:L.Browser.touch?['touchstart','mousedown']:['mousedown'],END:{mousedown:'mouseup',touchstart:'touchend',pointerdown:'touchend',MSPointerDown:'touchend'},MOVE:{mousedown:'mousemove',touchstart:'touchmove',pointerdown:'touchmove',MSPointerDown:'touchmove'}},initialize:function(t,e,i){this._element=t;this._dragStartTarget=e||t;this._preventOutline=i},enable:function(){if(this._enabled){return};L.DomEvent.on(this._dragStartTarget,L.Draggable.START.join(' '),this._onDown,this);this._enabled=!0},disable:function(){if(!this._enabled){return};if(L.Draggable._dragging===this){this.finishDrag()};L.DomEvent.off(this._dragStartTarget,L.Draggable.START.join(' '),this._onDown,this);this._enabled=!1;this._moved=!1},_onDown:function(t){if(t._simulated||!this._enabled){return};this._moved=!1;if(L.DomUtil.hasClass(this._element,'leaflet-zoom-anim')){return};if(L.Draggable._dragging||t.shiftKey||((t.which!==1)&&(t.button!==1)&&!t.touches)){return};L.Draggable._dragging=this;if(this._preventOutline){L.DomUtil.preventOutline(this._element)};L.DomUtil.disableImageDrag();L.DomUtil.disableTextSelection();if(this._moving){return};this.fire('down');var e=t.touches?t.touches[0]:t;this._startPoint=new L.Point(e.clientX,e.clientY);L.DomEvent.on(document,L.Draggable.MOVE[t.type],this._onMove,this).on(document,L.Draggable.END[t.type],this._onUp,this)},_onMove:function(t){if(t._simulated||!this._enabled){return};if(t.touches&&t.touches.length>1){this._moved=!0;return};var i=(t.touches&&t.touches.length===1?t.touches[0]:t),n=new L.Point(i.clientX,i.clientY),e=n.subtract(this._startPoint);if(!e.x&&!e.y){return};if(Math.abs(e.x)+Math.abs(e.y)<this.options.clickTolerance){return};L.DomEvent.preventDefault(t);if(!this._moved){this.fire('dragstart');this._moved=!0;this._startPos=L.DomUtil.getPosition(this._element).subtract(e);L.DomUtil.addClass(document.body,'leaflet-dragging');this._lastTarget=t.target||t.srcElement;if((window.SVGElementInstance)&&(this._lastTarget instanceof SVGElementInstance)){this._lastTarget=this._lastTarget.correspondingUseElement};L.DomUtil.addClass(this._lastTarget,'leaflet-drag-target')};this._newPos=this._startPos.add(e);this._moving=!0;L.Util.cancelAnimFrame(this._animRequest);this._lastEvent=t;this._animRequest=L.Util.requestAnimFrame(this._updatePosition,this,!0)},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire('predrag',t);L.DomUtil.setPosition(this._element,this._newPos);this.fire('drag',t)},_onUp:function(t){if(t._simulated||!this._enabled){return};this.finishDrag()},finishDrag:function(){L.DomUtil.removeClass(document.body,'leaflet-dragging');if(this._lastTarget){L.DomUtil.removeClass(this._lastTarget,'leaflet-drag-target');this._lastTarget=null};for(var t in L.Draggable.MOVE){L.DomEvent.off(document,L.Draggable.MOVE[t],this._onMove,this).off(document,L.Draggable.END[t],this._onUp,this)};L.DomUtil.enableImageDrag();L.DomUtil.enableTextSelection();if(this._moved&&this._moving){L.Util.cancelAnimFrame(this._animRequest);this.fire('dragend',{distance:this._newPos.distanceTo(this._startPos)})};this._moving=!1;L.Draggable._dragging=!1}});
;L.Handler=L.Class.extend({initialize:function(e){this._map=e},enable:function(){if(this._enabled){return this};this._enabled=!0;this.addHooks();return this},disable:function(){if(!this._enabled){return this};this._enabled=!1;this.removeHooks();return this},enabled:function(){return!!this._enabled}});
;L.Map.mergeOptions({dragging:!0,inertia:!L.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:Infinity,easeLinearity:0.2,worldCopyJump:!1,maxBoundsViscosity:0.0});L.Map.Drag=L.Handler.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new L.Draggable(i._mapPane,i._container);this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this);this._draggable.on('predrag',this._onPreDragLimit,this);if(i.options.worldCopyJump){this._draggable.on('predrag',this._onPreDragWrap,this);i.on('zoomend',this._onZoomEnd,this);i.whenReady(this._onZoomEnd,this)}};L.DomUtil.addClass(this._map._container,'leaflet-grab leaflet-touch-drag');this._draggable.enable();this._positions=[];this._times=[]},removeHooks:function(){L.DomUtil.removeClass(this._map._container,'leaflet-grab');L.DomUtil.removeClass(this._map._container,'leaflet-touch-drag');this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDown:function(){this._map._stop()},_onDragStart:function(){var t=this._map;if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var i=L.latLngBounds(this._map.options.maxBounds);this._offsetLimit=L.bounds(this._map.latLngToContainerPoint(i.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(i.getSouthEast()).multiplyBy(-1).add(this._map.getSize()));this._viscosity=Math.min(1.0,Math.max(0.0,this._map.options.maxBoundsViscosity))}
else{this._offsetLimit=null};t.fire('movestart').fire('dragstart');if(t.options.inertia){this._positions=[];this._times=[]}},_onDrag:function(i){if(this._map.options.inertia){var t=this._lastTime=+new Date(),s=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(s);this._times.push(t);if(t-this._times[0]>50){this._positions.shift();this._times.shift()}};this._map.fire('move',i).fire('drag',i)},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(i).x;this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,t){return i-(i-t)*this._viscosity},_onPreDragLimit:function(){if(!this._viscosity||!this._offsetLimit){return};var i=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;if(i.x<t.min.x){i.x=this._viscousLimit(i.x,t.min.x)};if(i.y<t.min.y){i.y=this._viscousLimit(i.y,t.min.y)};if(i.x>t.max.x){i.x=this._viscousLimit(i.x,t.max.x)};if(i.y>t.max.y){i.y=this._viscousLimit(i.y,t.max.y)};this._draggable._newPos=this._draggable._startPos.add(i)},_onPreDragWrap:function(){var s=this._worldWidth,t=Math.round(s/2),i=this._initialWorldOffset,a=this._draggable._newPos.x,o=(a-t+i)%s+t-i,e=(a+t+i)%s-t-i,n=Math.abs(o+i)<Math.abs(e+i)?o:e;this._draggable._absPos=this._draggable._newPos.clone();this._draggable._newPos.x=n},_onDragEnd:function(a){var i=this._map,s=i.options,l=!s.inertia||this._times.length<2;i.fire('dragend',a);if(l){i.fire('moveend')}
else{var d=this._lastPos.subtract(this._positions[0]),g=(this._lastTime-this._times[0])/1000,o=s.easeLinearity,e=d.multiplyBy(o/g),n=e.distanceTo([0,0]),r=Math.min(s.inertiaMaxSpeed,n),m=e.multiplyBy(r/n),h=r/(s.inertiaDeceleration*o),t=m.multiplyBy(-h/2).round();if(!t.x&&!t.y){i.fire('moveend')}
else{t=i._limitOffset(t,i.options.maxBounds);L.Util.requestAnimFrame(function(){i.panBy(t,{duration:h,easeLinearity:o,noMoveStart:!0,animate:!0})})}}}});L.Map.addInitHook('addHandler','dragging',L.Map.Drag);
;L.Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});L.Map.ScrollWheelZoom=L.Handler.extend({addHooks:function(){L.DomEvent.on(this._map._container,'mousewheel',this._onWheelScroll,this);this._delta=0},removeHooks:function(){L.DomEvent.off(this._map._container,'mousewheel',this._onWheelScroll,this)},_onWheelScroll:function(e){var t=L.DomEvent.getWheelDelta(e),i=this._map.options.wheelDebounceTime;this._delta+=t;this._lastMousePos=this._map.mouseEventToContainerPoint(e);if(!this._startTime){this._startTime=+new Date()};var o=Math.max(i-(+new Date()-this._startTime),0);clearTimeout(this._timer);this._timer=setTimeout(L.bind(this._performZoom,this),o);L.DomEvent.stop(e)},_performZoom:function(){var e=this._map,o=e.getZoom(),i=this._map.options.zoomSnap||0;e._stop();var a=this._delta/(this._map.options.wheelPxPerZoomLevel*4),s=4*Math.log(2/(1+Math.exp(-Math.abs(a))))/Math.LN2,l=i?Math.ceil(s/i)*i:s,t=e._limitZoom(o+(this._delta>0?l:-l))-o;this._delta=0;this._startTime=null;if(!t){return};if(e.options.scrollWheelZoom==='center'){e.setZoom(o+t)}
else{e.setZoomAround(this._lastMousePos,o+t)}}});L.Map.addInitHook('addHandler','scrollWheelZoom',L.Map.ScrollWheelZoom);
;L.extend(L.DomEvent,{POINTER_DOWN:L.Browser.msPointer?'MSPointerDown':'pointerdown',POINTER_MOVE:L.Browser.msPointer?'MSPointerMove':'pointermove',POINTER_UP:L.Browser.msPointer?'MSPointerUp':'pointerup',POINTER_CANCEL:L.Browser.msPointer?'MSPointerCancel':'pointercancel',TAG_WHITE_LIST:['INPUT','SELECT','OPTION'],_pointers:{},_pointersCount:0,addPointerListener:function(e,t,n,i){if(t==='touchstart'){this._addPointerStart(e,n,i)}
else if(t==='touchmove'){this._addPointerMove(e,n,i)}
else if(t==='touchend'){this._addPointerEnd(e,n,i)};return this},removePointerListener:function(e,t,n){var i=e['_leaflet_'+t+n];if(t==='touchstart'){e.removeEventListener(this.POINTER_DOWN,i,!1)}
else if(t==='touchmove'){e.removeEventListener(this.POINTER_MOVE,i,!1)}
else if(t==='touchend'){e.removeEventListener(this.POINTER_UP,i,!1);e.removeEventListener(this.POINTER_CANCEL,i,!1)};return this},_addPointerStart:function(e,t,n){var o=L.bind(function(e){if(e.pointerType!=='mouse'&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE){if(this.TAG_WHITE_LIST.indexOf(e.target.tagName)<0){L.DomEvent.preventDefault(e)}
else{return}};this._handlePointer(e,t)},this);e['_leaflet_touchstart'+n]=o;e.addEventListener(this.POINTER_DOWN,o,!1);if(!this._pointerDocListener){var i=L.bind(this._globalPointerUp,this);document.documentElement.addEventListener(this.POINTER_DOWN,L.bind(this._globalPointerDown,this),!0);document.documentElement.addEventListener(this.POINTER_MOVE,L.bind(this._globalPointerMove,this),!0);document.documentElement.addEventListener(this.POINTER_UP,i,!0);document.documentElement.addEventListener(this.POINTER_CANCEL,i,!0);this._pointerDocListener=!0}},_globalPointerDown:function(e){this._pointers[e.pointerId]=e;this._pointersCount++},_globalPointerMove:function(e){if(this._pointers[e.pointerId]){this._pointers[e.pointerId]=e}},_globalPointerUp:function(e){delete this._pointers[e.pointerId];this._pointersCount--},_handlePointer:function(e,t){e.touches=[];for(var n in this._pointers){e.touches.push(this._pointers[n])};e.changedTouches=[e];t(e)},_addPointerMove:function(e,t,n){var i=L.bind(function(e){if((e.pointerType===e.MSPOINTER_TYPE_MOUSE||e.pointerType==='mouse')&&e.buttons===0){return};this._handlePointer(e,t)},this);e['_leaflet_touchmove'+n]=i;e.addEventListener(this.POINTER_MOVE,i,!1)},_addPointerEnd:function(e,t,n){var i=L.bind(function(e){this._handlePointer(e,t)},this);e['_leaflet_touchend'+n]=i;e.addEventListener(this.POINTER_UP,i,!1);e.addEventListener(this.POINTER_CANCEL,i,!1)}});
;L.Map.mergeOptions({touchZoom:L.Browser.touch&&!L.Browser.android23,bounceAtZoomLimits:!0});L.Map.TouchZoom=L.Handler.extend({addHooks:function(){L.DomUtil.addClass(this._map._container,'leaflet-touch-zoom');L.DomEvent.on(this._map._container,'touchstart',this._onTouchStart,this)},removeHooks:function(){L.DomUtil.removeClass(this._map._container,'leaflet-touch-zoom');L.DomEvent.off(this._map._container,'touchstart',this._onTouchStart,this)},_onTouchStart:function(o){var t=this._map;if(!o.touches||o.touches.length!==2||t._animatingZoom||this._zooming){return};var i=t.mouseEventToContainerPoint(o.touches[0]),n=t.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=t.getSize()._divideBy(2);this._startLatLng=t.containerPointToLatLng(this._centerPoint);if(t.options.touchZoom!=='center'){this._pinchStartLatLng=t.containerPointToLatLng(i.add(n)._divideBy(2))};this._startDist=i.distanceTo(n);this._startZoom=t.getZoom();this._moved=!1;this._zooming=!0;t._stop();L.DomEvent.on(document,'touchmove',this._onTouchMove,this).on(document,'touchend',this._onTouchEnd,this);L.DomEvent.preventDefault(o)},_onTouchMove:function(o){if(!o.touches||o.touches.length!==2||!this._zooming){return};var t=this._map,e=t.mouseEventToContainerPoint(o.touches[0]),s=t.mouseEventToContainerPoint(o.touches[1]),i=e.distanceTo(s)/this._startDist;this._zoom=t.getScaleZoom(i,this._startZoom);if(!t.options.bounceAtZoomLimits&&((this._zoom<t.getMinZoom()&&i<1)||(this._zoom>t.getMaxZoom()&&i>1))){this._zoom=t._limitZoom(this._zoom)};if(t.options.touchZoom==='center'){this._center=this._startLatLng;if(i===1){return}}
else{var n=e._add(s)._divideBy(2)._subtract(this._centerPoint);if(i===1&&n.x===0&&n.y===0){return};this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(n),this._zoom)};if(!this._moved){t._moveStart(!0);this._moved=!0};L.Util.cancelAnimFrame(this._animRequest);var h=L.bind(t._move,t,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=L.Util.requestAnimFrame(h,this,!0);L.DomEvent.preventDefault(o)},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return};this._zooming=!1;L.Util.cancelAnimFrame(this._animRequest);L.DomEvent.off(document,'touchmove',this._onTouchMove).off(document,'touchend',this._onTouchEnd);if(this._map.options.zoomAnimation){this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap)}
else{this._map._resetView(this._center,this._map._limitZoom(this._zoom))}}});L.Map.addInitHook('addHandler','touchZoom',L.Map.TouchZoom);
;L.Handler.MarkerDrag=L.Handler.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;if(!this._draggable){this._draggable=new L.Draggable(a,a,!0)};this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable();L.DomUtil.addClass(a,'leaflet-marker-draggable')},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable();if(this._marker._icon){L.DomUtil.removeClass(this._marker._icon,'leaflet-marker-draggable')}},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng();this._marker.closePopup().fire('movestart').fire('dragstart')},_onDrag:function(a){var r=this._marker,t=r._shadow,e=L.DomUtil.getPosition(r._icon),i=r._map.layerPointToLatLng(e);if(t){L.DomUtil.setPosition(t,e)};r._latlng=i;a.latlng=i;a.oldLatLng=this._oldLatLng;r.fire('move',a).fire('drag',a)},_onDragEnd:function(a){delete this._oldLatLng;this._marker.fire('moveend').fire('dragend',a)}});
;L.Control=L.Class.extend({options:{position:'topright'},initialize:function(t){L.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var o=this._map;if(o){o.removeControl(this)};this.options.position=t;if(o){o.addControl(this)};return this},getContainer:function(){return this._container},addTo:function(t){this.remove();this._map=t;var o=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];L.DomUtil.addClass(o,'leaflet-control');if(n.indexOf('bottom')!==-1){i.insertBefore(o,i.firstChild)}
else{i.appendChild(o)};return this},remove:function(){if(!this._map){return this};L.DomUtil.remove(this._container);if(this.onRemove){this.onRemove(this._map)};this._map=null;return this},_refocusOnMap:function(t){if(this._map&&t&&t.screenX>0&&t.screenY>0){this._map.getContainer().focus()}}});L.control=function(t){return new L.Control(t)};L.Map.include({addControl:function(t){t.addTo(this);return this},removeControl:function(t){t.remove();return this},_initControlPos:function(){var i=this._controlCorners={},o='leaflet-',n=this._controlContainer=L.DomUtil.create('div',o+'control-container',this._container);function t(t,e){var r=o+t+' '+o+e;i[t+e]=L.DomUtil.create('div',r,n)};t('top','left');t('top','right');t('bottom','left');t('bottom','right')},_clearControlPos:function(){L.DomUtil.remove(this._controlContainer)}});
;L.Control.Zoom=L.Control.extend({options:{position:'topleft',zoomInText:'+',zoomInTitle:'Zoom in',zoomOutText:'-',zoomOutTitle:'Zoom out'},onAdd:function(o){var i='leaflet-control-zoom',e=L.DomUtil.create('div',i+' leaflet-bar'),t=this.options;this._zoomInButton=this._createButton(t.zoomInText,t.zoomInTitle,i+'-in',e,this._zoomIn);this._zoomOutButton=this._createButton(t.zoomOutText,t.zoomOutTitle,i+'-out',e,this._zoomOut);this._updateDisabled();o.on('zoomend zoomlevelschange',this._updateDisabled,this);return e},onRemove:function(o){o.off('zoomend zoomlevelschange',this._updateDisabled,this)},disable:function(){this._disabled=!0;this._updateDisabled();return this},enable:function(){this._disabled=!1;this._updateDisabled();return this},_zoomIn:function(o){if(!this._disabled&&this._map._zoom<this._map.getMaxZoom()){this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))}},_zoomOut:function(o){if(!this._disabled&&this._map._zoom>this._map.getMinZoom()){this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))}},_createButton:function(t,i,e,n,s){var o=L.DomUtil.create('a',e,n);o.innerHTML=t;o.href='#';o.title=i;o.setAttribute('role','button');o.setAttribute('aria-label',i);L.DomEvent.on(o,'mousedown dblclick',L.DomEvent.stopPropagation).on(o,'click',L.DomEvent.stop).on(o,'click',s,this).on(o,'click',this._refocusOnMap,this);return o},_updateDisabled:function(){var o=this._map,t='leaflet-disabled';L.DomUtil.removeClass(this._zoomInButton,t);L.DomUtil.removeClass(this._zoomOutButton,t);if(this._disabled||o._zoom===o.getMinZoom()){L.DomUtil.addClass(this._zoomOutButton,t)};if(this._disabled||o._zoom===o.getMaxZoom()){L.DomUtil.addClass(this._zoomInButton,t)}}});L.Map.mergeOptions({zoomControl:!0});L.Map.addInitHook(function(){if(this.options.zoomControl){this.zoomControl=new L.Control.Zoom();this.addControl(this.zoomControl)}});L.control.zoom=function(o){return new L.Control.Zoom(o)};
;L.Control.Attribution=L.Control.extend({options:{position:'bottomright',prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){L.setOptions(this,t);this._attributions={}},onAdd:function(t){t.attributionControl=this;this._container=L.DomUtil.create('div','leaflet-control-attribution');if(L.DomEvent){L.DomEvent.disableClickPropagation(this._container)};for(var i in t._layers){if(t._layers[i].getAttribution){this.addAttribution(t._layers[i].getAttribution())}};this._update();return this._container},setPrefix:function(t){this.options.prefix=t;this._update();return this},addAttribution:function(t){if(!t){return this};if(!this._attributions[t]){this._attributions[t]=0};this._attributions[t]++;this._update();return this},removeAttribution:function(t){if(!t){return this};if(this._attributions[t]){this._attributions[t]--;this._update()};return this},_update:function(){if(!this._map){return};var i=[];for(var n in this._attributions){if(this._attributions[n]){i.push(n)}};var t=[];if(this.options.prefix){t.push(this.options.prefix)};if(i.length){t.push(i.join(', '))};this._container.innerHTML=t.join(' | ')}});L.Map.mergeOptions({attributionControl:!0});L.Map.addInitHook(function(){if(this.options.attributionControl){new L.Control.Attribution().addTo(this)}});L.control.attribution=function(t){return new L.Control.Attribution(t)};
;L.Control.Scale=L.Control.extend({options:{position:'bottomleft',maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e='leaflet-control-scale',i=L.DomUtil.create('div',e),n=this.options;this._addScales(n,e+'-line',i);t.on(n.updateWhenIdle?'moveend':'move',this._update,this);t.whenReady(this._update,this);return i},onRemove:function(t){t.off(this.options.updateWhenIdle?'moveend':'move',this._update,this)},_addScales:function(t,e,i){if(t.metric){this._mScale=L.DomUtil.create('div',e,i)};if(t.imperial){this._iScale=L.DomUtil.create('div',e,i)}},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){if(this.options.metric&&t){this._updateMetric(t)};if(this.options.imperial&&t){this._updateImperial(t)}},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1000?e+' m':(e/1000)+' km';this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e=t*3.2808399,i,n,o;if(e>5280){i=e/5280;n=this._getRoundNum(i);this._updateScale(this._iScale,n+' mi',n/i)}
else{o=this._getRoundNum(e);this._updateScale(this._iScale,o+' ft',o/e)}},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+'px';t.innerHTML=e},_getRoundNum:function(t){var i=Math.pow(10,(Math.floor(t)+'').length-1),e=t/i;e=e>=10?10:e>=5?5:e>=3?3:e>=2?2:1;return i*e}});L.control.scale=function(t){return new L.Control.Scale(t)};
;L.Control.Layers=L.Control.extend({options:{collapsed:!0,position:'topright',autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,i,a){return i<a?-1:(a<i?1:0)}},initialize:function(e,t,a){L.setOptions(this,a);this._layers=[];this._lastZIndex=0;this._handlingClick=!1;for(var i in e){this._addLayer(e[i],i)};for(i in t){this._addLayer(t[i],i,!0)}},onAdd:function(e){this._initLayout();this._update();this._map=e;e.on('zoomend',this._checkDisabledLayers,this);return this._container},onRemove:function(){this._map.off('zoomend',this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++){this._layers[e].layer.off('add remove',this._onLayerChange,this)}},addBaseLayer:function(e,t){this._addLayer(e,t);return(this._map)?this._update():this},addOverlay:function(e,t){this._addLayer(e,t,!0);return(this._map)?this._update():this},removeLayer:function(e){e.off('add remove',this._onLayerChange,this);var t=this._getLayer(L.stamp(e));if(t){this._layers.splice(this._layers.indexOf(t),1)};return(this._map)?this._update():this},expand:function(){L.DomUtil.addClass(this._container,'leaflet-control-layers-expanded');this._form.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);if(e<this._form.clientHeight){L.DomUtil.addClass(this._form,'leaflet-control-layers-scrollbar');this._form.style.height=e+'px'}
else{L.DomUtil.removeClass(this._form,'leaflet-control-layers-scrollbar')};this._checkDisabledLayers();return this},collapse:function(){L.DomUtil.removeClass(this._container,'leaflet-control-layers-expanded');return this},_initLayout:function(){var e='leaflet-control-layers',t=this._container=L.DomUtil.create('div',e),s=this.options.collapsed;t.setAttribute('aria-haspopup',!0);L.DomEvent.disableClickPropagation(t);if(!L.Browser.touch){L.DomEvent.disableScrollPropagation(t)};var a=this._form=L.DomUtil.create('form',e+'-list');if(s){this._map.on('click',this.collapse,this);if(!L.Browser.android){L.DomEvent.on(t,{mouseenter:this.expand,mouseleave:this.collapse},this)}};var i=this._layersLink=L.DomUtil.create('a',e+'-toggle',t);i.href='#';i.title='Layers';if(L.Browser.touch){L.DomEvent.on(i,'click',L.DomEvent.stop).on(i,'click',this.expand,this)}
else{L.DomEvent.on(i,'focus',this.expand,this)};L.DomEvent.on(a,'click',function(){setTimeout(L.bind(this._onInputClick,this),0)},this);if(!s){this.expand()};this._baseLayersList=L.DomUtil.create('div',e+'-base',a);this._separator=L.DomUtil.create('div',e+'-separator',a);this._overlaysList=L.DomUtil.create('div',e+'-overlays',a);t.appendChild(a)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++){if(this._layers[t]&&L.stamp(this._layers[t].layer)===e){return this._layers[t]}}},_addLayer:function(e,t,i){e.on('add remove',this._onLayerChange,this);this._layers.push({layer:e,name:t,overlay:i});if(this.options.sortLayers){this._layers.sort(L.bind(function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)},this))};if(this.options.autoZIndex&&e.setZIndex){this._lastZIndex++;e.setZIndex(this._lastZIndex)}},_update:function(){if(!this._container){return this};L.DomUtil.empty(this._baseLayersList);L.DomUtil.empty(this._overlaysList);var e,a,i,t,s=0;for(i=0;i<this._layers.length;i++){t=this._layers[i];this._addItem(t);a=a||t.overlay;e=e||!t.overlay;s+=!t.overlay?1:0};if(this.options.hideSingleBase){e=e&&s>1;this._baseLayersList.style.display=e?'':'none'};this._separator.style.display=a&&e?'':'none';return this},_onLayerChange:function(e){if(!this._handlingClick){this._update()};var t=this._getLayer(L.stamp(e.target)),i=t.overlay?(e.type==='add'?'overlayadd':'overlayremove'):(e.type==='add'?'baselayerchange':null);if(i){this._map.fire(i,t)}},_createRadioElement:function(e,t){var a='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':'')+'/>',i=document.createElement('div');i.innerHTML=a;return i.firstChild},_addItem:function(e){var a=document.createElement('label'),n=this._map.hasLayer(e.layer),t;if(e.overlay){t=document.createElement('input');t.type='checkbox';t.className='leaflet-control-layers-selector';t.defaultChecked=n}
else{t=this._createRadioElement('leaflet-base-layers',n)};t.layerId=L.stamp(e.layer);L.DomEvent.on(t,'click',this._onInputClick,this);var s=document.createElement('span');s.innerHTML=' '+e.name;var i=document.createElement('div');a.appendChild(i);i.appendChild(t);i.appendChild(s);var r=e.overlay?this._overlaysList:this._baseLayersList;r.appendChild(a);this._checkDisabledLayers();return a},_onInputClick:function(){var r=this._form.getElementsByTagName('input'),t,i,a,s=[],n=[];this._handlingClick=!0;for(var e=r.length-1;e>=0;e--){t=r[e];i=this._getLayer(t.layerId).layer;a=this._map.hasLayer(i);if(t.checked&&!a){s.push(i)}
else if(!t.checked&&a){n.push(i)}};for(e=0;e<n.length;e++){this._map.removeLayer(n[e])};for(e=0;e<s.length;e++){this._map.addLayer(s[e])};this._handlingClick=!1;this._refocusOnMap()},_checkDisabledLayers:function(){var a=this._form.getElementsByTagName('input'),i,e,s=this._map.getZoom();for(var t=a.length-1;t>=0;t--){i=a[t];e=this._getLayer(i.layerId).layer;i.disabled=(e.options.minZoom!==undefined&&s<e.options.minZoom)||(e.options.maxZoom!==undefined&&s>e.options.maxZoom)}},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}});L.control.layers=function(e,t,i){return new L.Control.Layers(e,t,i)};
;L.TileLayer.OSM=L.TileLayer.extend({options:{url:'//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a>'},initialize:function(e){if(this.options.subAttribution)this.options.attribution+=' | '+this.options.subAttribution;L.TileLayer.prototype.initialize.call(this,this.options.url,e)}});L.TileLayer.OSM.FR=L.TileLayer.OSM.extend({options:{url:'//{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png'}});L.TileLayer.OSM.MRI=L.TileLayer.OSM.extend({options:{url:'http://maps.refuges.info/hiking/{z}/{x}/{y}.png',subAttribution:'<a href="http://wiki.openstreetmap.org/wiki/Hiking/mri">MRI</a>'}});L.TileLayer.Kompass=L.TileLayer.OSM.extend({options:{l:'Touristik',url:'http://ec{s}.cdn.ecmaps.de/WmsGateway.ashx.jpg?Experience=kompass&MapStyle=KOMPASS%20{l}&TileX={x}&TileY={y}&ZoomLevel={z}',maxZoom:15,subdomains:'0123',subAttribution:'<a href="http://www.kompass.de/livemap/">KOMPASS</a>'}});L.TileLayer.OSM.hikebike=L.TileLayer.OSM.extend({options:{url:'http://{s}.tiles.wmflabs.org/hikebike/{z}/{x}/{y}.png',subdomains:'abc',maxZoom:20,subAttribution:'<a href="http://www.hikebikemap.org/">hikebikemap.org</a>'}});L.TileLayer.OSM.hill=L.TileLayer.OSM.extend({options:{url:'//{s}.tiles.wmflabs.org/hillshading/{z}/{x}/{y}.png',subdomains:'abc',maxZoom:15,subAttribution:'<a href="https://wikitech.wikimedia.org">Wikimedia Tool Labs</a>'}});var ft=['Landscape','Outdoors','Cycle','Transport'];for(m in ft)L.TileLayer.OSM[ft[m]]=L.TileLayer.OSM.extend({options:{url:'//{s}.tile.thunderforest.com/'+ft[m].toLowerCase()+'/{z}/{x}/{y}.png',subAttribution:'<a href="http://www.thunderforest.com">Thunderforest '+ft[m]+'</a>'}});
;L.TileLayer.IGN=L.TileLayer.extend({options:{l:'GEOGRAPHICALGRIDSYSTEMS.MAPS',f:'jpeg',maxNativeZoom:18,maxZoom:21,errorTileUrl:'http://www.ign.fr/sites/all/themes/ign_portail/logo.png',attribution:'&copy; <a href="http://www.ign.fr/">IGN</a>'},initialize:function(i){L.TileLayer.prototype.initialize.call(this,'//wxs.ign.fr/{k}/geoportail/wmts?LAYER={l}&EXCEPTIONS=text/xml&FORMAT=image/{f}&SERVICE=WMTS&VERSION=1.0.0&REQUEST=GetTile&STYLE=normal&TILEMATRIXSET=PM&TILEMATRIX={z}&TILECOL={x}&TILEROW={y}',i)}});
;L.TileLayer.WMS.IGM=L.TileLayer.WMS.extend({initialize:function(){L.TileLayer.WMS.prototype.initialize.call(this,'http://129.206.228.72/cached/osm?',{crs:L.CRS.EPSG900913,tileSize:512})},onAdd:function(t){L.TileLayer.WMS.prototype.onAdd.call(this,t);t.on('zoomend',this._onZoom,this);this._onZoom()},_onZoom:function(){if(!this._map)return;var t={url:'http://wms.pcn.minambiente.it/ogc?map=/ms_ogc/WMS_v1.3/raster/',urlExt:'',attribution:'&copy; <a href="http://www.pcn.minambiente.it/viewer">IGM</a>'};if(this._map._zoom<11){t.url='http://129.206.228.72/cached/osm?';t.layers='osm_auto:all';t.attribution='&copy; <a href="http://www.osm-wms.de/">OSM</a>'}
else if(this._map._zoom<13){t.urlExt='IGM_250000.map';t.layers='CB.IGM250000'}
else if(this._map._zoom<15){t.urlExt='IGM_100000.map';t.layers='MB.IGM100000'}
else if(this._map._zoom<16){t.urlExt='IGM_25000.map';t.layers='CB.IGM25000'};if(this.wmsParams.layers!=t.layers){this._url=t.url+t.urlExt;this.wmsParams.layers=t.layers;this.redraw();this.options.attribution=t.attribution;this._map.attributionControl._attributions=[];this._map.attributionControl.addAttribution(t.attribution)}}});
;L.TileLayer.WMS.IDEE=L.TileLayer.WMS.extend({options:{url:'http://www.idee.es/wms/MTN-Raster/MTN-Raster',layer:'mtn_rasterizado',crs:L.CRS.EPSG3857,maxNativeZoom:18,maxZoom:21,attribution:'&copy; <a href="http://www.idee.es/">IDEE</a>'},initialize:function(t){L.TileLayer.WMS.prototype.initialize.call(this,this.options.url,{layers:this.options.layer,attribution:this.options.attribution},t)}});L.TileLayer.WMS.IDEE.Photo=L.TileLayer.WMS.IDEE.extend({options:{url:'//www.ign.es/wms-inspire/pnoa-ma',layer:'OI.OrthoimageCoverage',attribution:'&copy; <a href="http://www.ign.es/PNOA/">PNOA</a>'}});
;L.TileLayer.Google=L.TileLayer.extend({options:{subdomains:'0123',l:'m',maxZoom:22,attribution:'&copy; <a href="https://www.google.com/maps">Google Maps</a>'},initialize:function(o){L.TileLayer.prototype.initialize.call(this,'//mt{s}.google.com/vt/lyrs={l}&x={x}&y={y}&z={z}',o)},onAdd:function(o){o.on('movestart',this._resetNativeZoom,this);L.TileLayer.prototype.onAdd.call(this,o)},onRemove:function(o){o.off('movestart',this._resetNativeZoom,this);L.TileLayer.prototype.onRemove.call(this,o)},_resetNativeZoom:function(){this.options.maxNativeZoom=20},_tileOnError:function(o,t,e){this.options.maxNativeZoom=19;L.TileLayer.prototype._tileOnError.call(this,o,t,e)}});
!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var s;"undefined"!=typeof window?s=window:"undefined"!=typeof global?s=global:"undefined"!=typeof self&&(s=self),s.proj4=t()}}(function(){var t,s,n;return(function i(t,s,n){function o(a,r){if(!s[a]){if(!t[a]){var m=typeof require=="function"&&require;if(!r&&m)return m(a,!0);if(e)return e(a,!0);throw new Error("Cannot find module '"+a+"'")};var h=s[a]={exports:{}};t[a][0].call(h.exports,function(s){var n=t[a][1][s];return o(n?n:s)},h,h.exports,i,t,s,n)};return s[a].exports};var e=typeof require=="function"&&require;for(var a=0;a<n.length;a++)o(n[a]);return o})({1:[function(t,s,n){},{"mgrs":66}],2:[function(t,s,n){var o=t("./parseCode"),a=t("./extend"),e=t("./projections"),r=t("./deriveConstants");function i(t,s){if(!(this instanceof i)){return new i(t)};s=s||function(t){if(t){throw t}};var h=o(t);if(typeof h!=="object"){s(t);return};var n=r(h),e=i.projections.get(n.projName);if(e){a(this,n);a(this,e);this.init();s(null,this)}
else{s(t)}};i.projections=e;i.projections.start();s.exports=i},{"./deriveConstants":32,"./extend":33,"./parseCode":36,"./projections":38}],3:[function(t,s,n){},{}],4:[function(t,s,n){},{"./sign":21}],5:[function(t,s,n){var i=Math.PI*2,a=t("./sign");s.exports=function(t){return(Math.abs(t)<Math.PI)?t:(t-(a(t)*i))}},{"./sign":21}],6:[function(t,s,n){},{}],7:[function(t,s,n){s.exports=function(t){return(1-0.25*t*(1+t/16*(3+1.25*t)))}},{}],8:[function(t,s,n){s.exports=function(t){return(0.375*t*(1+0.25*t*(1+0.46875*t)))}},{}],9:[function(t,s,n){s.exports=function(t){return(0.05859375*t*t*(1+0.75*t))}},{}],10:[function(t,s,n){s.exports=function(t){return(t*t*t*(35/3072))}},{}],11:[function(t,s,n){},{}],12:[function(t,s,n){},{}],13:[function(t,s,n){},{}],14:[function(t,s,n){s.exports=function(t,s,n,a,i){return(t*i-s*Math.sin(2*i)+n*Math.sin(4*i)-a*Math.sin(6*i))}},{}],15:[function(t,s,n){s.exports=function(t,s,n){var i=t*s;return n/(Math.sqrt(1-i*i))}},{}],16:[function(t,s,n){var i=Math.PI/2;s.exports=function(t,s){var r=0.5*t,a,o,n=i-2*Math.atan(s);for(var e=0;e<=15;e++){a=t*Math.sin(n);o=i-2*Math.atan(s*(Math.pow(((1-a)/(1+a)),r)))-n;n+=o;if(Math.abs(o)<=0.0000000001){return n}};return-9999}},{}],17:[function(t,s,n){},{}],18:[function(t,s,n){},{"./pj_mlfn":19}],19:[function(t,s,n){},{}],20:[function(t,s,n){},{}],21:[function(t,s,n){},{}],22:[function(t,s,n){},{}],23:[function(t,s,n){s.exports=function(t){var s={x:t[0],y:t[1]};if(t.length>2){s.z=t[2]};if(t.length>3){s.m=t[3]};return s}},{}],24:[function(t,s,n){var i=Math.PI/2;s.exports=function(t,s,n){var a=t*n,o=0.5*t;a=Math.pow(((1-a)/(1+a)),o);return(Math.tan(0.5*(i-s))/a)}},{}],25:[function(t,s,n){n.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"}},{}],26:[function(t,s,n){n.airy={a:6377563.396,b:6356256.910,ellipseName:"Airy 1830"};n.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"};n.WGS84={a:6378137.0,rf:298.257223563,ellipseName:"WGS 84"};n.sphere={a:6370997.0,b:6370997.0,ellipseName:"Normal Sphere (r=6370997)"}},{}],27:[function(t,s,n){},{}],28:[function(t,s,n){var i=t("./Proj"),o=t("./transform"),e=i("WGS84");function a(t,s,n){var i;if(Array.isArray(n)){i=o(t,s,n);if(n.length===3){return[i.x,i.y,i.z]}
else{return[i.x,i.y]}}
else{return o(t,s,n)}};function r(t){if(t instanceof i){return t};if(t.oProj){return t.oProj};return i(t)};function h(t,s,n){t=r(t);var i=!1,o;if(typeof s==="undefined"){s=t;t=e;i=!0}
else if(typeof s.x!=="undefined"||Array.isArray(s)){n=s;s=t;t=e;i=!0};s=r(s);if(n){return a(t,s,n)}
else{o={forward:function(n){return a(t,s,n)},inverse:function(n){return a(s,t,n)}};if(i){o.oProj=s};return o}};s.exports=h},{"./Proj":2,"./transform":64}],29:[function(t,s,n){var i=Math.PI/2,a=1,o=2,e=3,m=4,c=5,h=4.84813681109535993589914102357e-6,u=1.0026000,f=0.38268343236508977,r=function(t){if(!(this instanceof r)){return new r(t)};this.datum_type=m;if(!t){return};if(t.datumCode&&t.datumCode==="none"){this.datum_type=c};if(t.datum_params){for(var s=0;s<t.datum_params.length;s++){t.datum_params[s]=parseFloat(t.datum_params[s])};if(t.datum_params[0]!==0||t.datum_params[1]!==0||t.datum_params[2]!==0){this.datum_type=a};if(t.datum_params.length>3){if(t.datum_params[3]!==0||t.datum_params[4]!==0||t.datum_params[5]!==0||t.datum_params[6]!==0){this.datum_type=o;t.datum_params[3]*=h;t.datum_params[4]*=h;t.datum_params[5]*=h;t.datum_params[6]=(t.datum_params[6]/1000000.0)+1.0}}};this.datum_type=t.grids?e:this.datum_type;this.a=t.a;this.b=t.b;this.es=t.es;this.ep2=t.ep2;this.datum_params=t.datum_params;if(this.datum_type===e){this.grids=t.grids}};r.prototype={compare_datums:function(t){if(this.datum_type!==t.datum_type){return!1}
else if(this.a!==t.a||Math.abs(this.es-t.es)>0.000000000050){return!1}
else if(this.datum_type===a){return(this.datum_params[0]===t.datum_params[0]&&this.datum_params[1]===t.datum_params[1]&&this.datum_params[2]===t.datum_params[2])}
else if(this.datum_type===o){return(this.datum_params[0]===t.datum_params[0]&&this.datum_params[1]===t.datum_params[1]&&this.datum_params[2]===t.datum_params[2]&&this.datum_params[3]===t.datum_params[3]&&this.datum_params[4]===t.datum_params[4]&&this.datum_params[5]===t.datum_params[5]&&this.datum_params[6]===t.datum_params[6])}
else if(this.datum_type===e||t.datum_type===e){return this.nadgrids===t.nadgrids}
else{return!0}},geodetic_to_geocentric:function(t){var n=t.x,s=t.y,e=t.z?t.z:0,h,m,c,f=0,a,o,u,r;if(s<-i&&s>-1.001*i){s=-i}
else if(s>i&&s<1.001*i){s=i}
else if((s<-i)||(s>i)){return null};if(n>Math.PI){n-=(2*Math.PI)};o=Math.sin(s);r=Math.cos(s);u=o*o;a=this.a/(Math.sqrt(1.0e0-this.es*u));h=(a+e)*r*Math.cos(n);m=(a+e)*r*Math.sin(n);c=((a*(1-this.es))+e)*o;t.x=h;t.y=m;t.z=c;return f},geocentric_to_geodetic:function(t){var r=1e-12,w=(r*r),P=30,h,m,g,n,a,c,u,f,s,l,p,j,v,y,o=t.x,e=t.y,d=t.z?t.z:0.0,b,x,M;v=!1;h=Math.sqrt(o*o+e*e);m=Math.sqrt(o*o+e*e+d*d);if(h/this.a<r){v=!0;b=0.0;if(m/this.a<r){x=i;M=-this.b;return}}
else{b=Math.atan2(e,o)};g=d/m;n=h/m;a=1.0/Math.sqrt(1.0-this.es*(2.0-this.es)*n*n);f=n*(1.0-this.es)*a;s=g*a;y=0;do{y++;u=this.a/Math.sqrt(1.0-this.es*s*s);M=h*f+d*s-u*(1.0-this.es*s*s);c=this.es*u/(u+M);a=1.0/Math.sqrt(1.0-c*(2.0-c)*n*n);l=n*(1.0-c)*a;p=g*a;j=p*f-l*s;f=l;s=p}
while(j*j>w&&y<P);x=Math.atan(p/Math.abs(l));t.x=b;t.y=x;t.z=M;return t},geocentric_to_wgs84:function(t){if(this.datum_type===a){t.x+=this.datum_params[0];t.y+=this.datum_params[1];t.z+=this.datum_params[2]}
else if(this.datum_type===o){var r=this.datum_params[0],h=this.datum_params[1],m=this.datum_params[2],n=this.datum_params[3],i=this.datum_params[4],e=this.datum_params[5],s=this.datum_params[6],c=s*(t.x-e*t.y+i*t.z)+r,u=s*(e*t.x+t.y-n*t.z)+h,f=s*(-i*t.x+n*t.y+t.z)+m;t.x=c;t.y=u;t.z=f}},geocentric_from_wgs84:function(t){if(this.datum_type===a){t.x-=this.datum_params[0];t.y-=this.datum_params[1];t.z-=this.datum_params[2]}
else if(this.datum_type===o){var c=this.datum_params[0],u=this.datum_params[1],f=this.datum_params[2],r=this.datum_params[3],h=this.datum_params[4],m=this.datum_params[5],s=this.datum_params[6],n=(t.x-c)/s,i=(t.y-u)/s,e=(t.z-f)/s;t.x=n+m*i-h*e;t.y=-m*n+i+r*e;t.z=h*n-r*i+e}}};s.exports=r},{}],30:[function(t,s,n){var a=1,o=2,i=3,e=5,r=6378137,h=0.006694379990141316;s.exports=function(t,s,n){var l,c,p;function u(t){return(t===a||t===o)};if(t.compare_datums(s)){return n};if(t.datum_type===e||s.datum_type===e){return n};var f=t.a,d=t.es,M=s.a,g=s.es,m=t.datum_type;if(m===i){if(this.apply_gridshift(t,0,n)===0){t.a=r;t.es=h}
else{if(!t.datum_params){t.a=f;t.es=t.es;return n};l=1;for(c=0,p=t.datum_params.length;c<p;c++){l*=t.datum_params[c]};if(l===0){t.a=f;t.es=t.es;return n};if(t.datum_params.length>3){m=o}
else{m=a}}};if(s.datum_type===i){s.a=r;s.es=h};if(t.es!==s.es||t.a!==s.a||u(m)||u(s.datum_type)){t.geodetic_to_geocentric(n);if(u(t.datum_type)){t.geocentric_to_wgs84(n)};if(u(s.datum_type)){s.geocentric_from_wgs84(n)};s.geocentric_to_geodetic(n)};if(s.datum_type===i){this.apply_gridshift(s,1,n)};t.a=f;t.es=d;s.a=M;s.es=g;return n}},{}],31:[function(t,s,n){var a=t("./global"),o=t("./projString"),e=t("./wkt");function i(t){var n=this;if(arguments.length===2){var s=arguments[1];if(typeof s==="string"){if(s[0]==="+"){i[t]=o(arguments[1])}
else{i[t]=e(arguments[1])}}
else{i[t]=s}}
else if(arguments.length===1){if(Array.isArray(t)){return t.map(function(t){if(Array.isArray(t)){i.apply(n,t)}
else{i(t)}})}
else if(typeof t==="string"){if(t in i){return i[t]}}
else if("EPSG" in t){i["EPSG:"+t.EPSG]=t}
else if("ESRI" in t){i["ESRI:"+t.ESRI]=t}
else if("IAU2000" in t){i["IAU2000:"+t.IAU2000]=t}
else{console.log(t)};return}};a(i);s.exports=i},{"./global":34,"./projString":37,"./wkt":65}],32:[function(t,s,n){var a=t("./constants/Datum"),i=t("./constants/Ellipsoid"),o=t("./extend"),e=t("./datum"),r=1.0e-10,h=0.1666666666666666667,m=0.04722222222222222222,c=0.02215608465608465608;s.exports=function(t){if(t.datumCode&&t.datumCode!=="none"){var s=a[t.datumCode];if(s){t.datum_params=s.towgs84?s.towgs84.split(","):null;t.ellps=s.ellipse;t.datumName=s.datumName?s.datumName:t.datumCode}};if(!t.a){var n=i[t.ellps]?i[t.ellps]:i.WGS84;o(t,n)};if(t.rf&&!t.b){t.b=(1.0-1.0/t.rf)*t.a};if(t.rf===0||Math.abs(t.a-t.b)<r){t.sphere=!0;t.b=t.a};t.a2=t.a*t.a;t.b2=t.b*t.b;t.es=(t.a2-t.b2)/t.a2;t.e=Math.sqrt(t.es);if(t.R_A){t.a*=1-t.es*(h+t.es*(m+t.es*c));t.a2=t.a*t.a;t.b2=t.b*t.b;t.es=0};t.ep2=(t.a2-t.b2)/t.b2;if(!t.k0){t.k0=1.0};if(!t.axis){t.axis="enu"};t.datum=e(t);return t}},{"./constants/Datum":25,"./constants/Ellipsoid":26,"./datum":29,"./extend":33}],33:[function(t,s,n){s.exports=function(t,s){t=t||{};var n,i;if(!s){return t};for(i in s){n=s[i];if(n!==undefined){t[i]=n}};return t}},{}],34:[function(t,s,n){s.exports=function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees");t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees");t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");t.WGS84=t["EPSG:4326"];t["EPSG:3785"]=t["EPSG:3857"];t.GOOGLE=t["EPSG:3857"];t["EPSG:900913"]=t["EPSG:3857"];t["EPSG:102113"]=t["EPSG:3857"]}},{}],35:[function(t,s,n){var i=t("./core");i.defaultDatum="WGS84";i.Proj=t("./Proj");i.WGS84=new i.Proj("WGS84");i.Point=t("./Point");i.toPoint=t("./common/toPoint");i.defs=t("./defs");i.transform=t("./transform");i.mgrs=t("mgrs");i.version=t("../package.json").version;t("./includedProjections")(i);s.exports=i},{"../package.json":67,"./Point":1,"./Proj":2,"./common/toPoint":23,"./core":28,"./defs":31,"./includedProjections":"gWUPNW","./transform":64,"mgrs":66}],36:[function(t,s,n){var i=t("./defs"),a=t("./wkt"),o=t("./projString");function e(t){return typeof t==="string"};function r(t){return t in i};function h(t){var s=["GEOGCS","GEOCCS","PROJCS","LOCAL_CS"];return s.reduce(function(s,n){return s+1+t.indexOf(n)},0)};function m(t){return t[0]==="+"};function c(t){if(e(t)){if(r(t)){return i[t]}
else if(h(t)){return a(t)}
else if(m(t)){return o(t)}}
else{return t}};s.exports=c},{"./defs":31,"./projString":37,"./wkt":65}],37:[function(t,s,n){var i=0.01745329251994329577,a=t("./constants/PrimeMeridian");s.exports=function(t){var s={};var r={};t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).forEach(function(t){var s=t.split("=");s.push(!0);r[s[0].toLowerCase()]=s[1]});var n,o,e,h={proj:"projName",datum:"datumCode",rf:function(t){s.rf=parseFloat(t,10)},lat_0:function(t){s.lat0=t*i},lat_1:function(t){s.lat1=t*i},lat_2:function(t){s.lat2=t*i},lat_ts:function(t){s.lat_ts=t*i},lon_0:function(t){s.long0=t*i},lon_1:function(t){s.long1=t*i},lon_2:function(t){s.long2=t*i},alpha:function(t){s.alpha=parseFloat(t)*i},lonc:function(t){s.longc=t*i},x_0:function(t){s.x0=parseFloat(t,10)},y_0:function(t){s.y0=parseFloat(t,10)},k_0:function(t){s.k0=parseFloat(t,10)},k:function(t){s.k0=parseFloat(t,10)},r_a:function(){s.R_A=!0},zone:function(t){s.zone=parseInt(t,10)},south:function(){s.utmSouth=!0},towgs84:function(t){s.datum_params=t.split(",").map(function(t){return parseFloat(t,10)})},to_meter:function(t){s.to_meter=parseFloat(t,10)},from_greenwich:function(t){s.from_greenwich=t*i},pm:function(t){s.from_greenwich=(a[t]?a[t]:parseFloat(t,10))*i},nadgrids:function(t){if(t==="@null"){s.datumCode="none"}
else{s.nadgrids=t}},axis:function(t){var n="ewnsud";if(t.length===3&&n.indexOf(t.substr(0,1))!==-1&&n.indexOf(t.substr(1,1))!==-1&&n.indexOf(t.substr(2,1))!==-1){s.axis=t}}};for(n in r){o=r[n];if(n in h){e=h[n];if(typeof e==="function"){e(o)}
else{s[e]=o}}
else{s[n]=o}};if(typeof s.datumCode==="string"&&s.datumCode!=="WGS84"){s.datumCode=s.datumCode.toLowerCase()};return s}},{"./constants/PrimeMeridian":27}],38:[function(t,s,n){var e=[t("./projections/merc"),t("./projections/longlat")],a={};var i=[];function o(t,s){var n=i.length;if(!t.names){return!0};i[n]=t;t.names.forEach(function(t){a[t.toLowerCase()]=n});return this};n.add=o;n.get=function(t){if(!t){return!1};var s=t.toLowerCase();if(typeof a[s]!=="undefined"&&i[a[s]]){return i[a[s]]}};n.start=function(){e.forEach(o)}},{"./projections/longlat":50,"./projections/merc":51}],39:[function(t,s,n){var a=1.0e-10,o=t("../common/msfnz"),i=t("../common/qsfnz"),e=t("../common/adjust_lon"),r=t("../common/asinz");n.init=function(){if(Math.abs(this.lat1+this.lat2)<a){return};this.temp=this.b/this.a;this.es=1-Math.pow(this.temp,2);this.e3=Math.sqrt(this.es);this.sin_po=Math.sin(this.lat1);this.cos_po=Math.cos(this.lat1);this.t1=this.sin_po;this.con=this.sin_po;this.ms1=o(this.e3,this.sin_po,this.cos_po);this.qs1=i(this.e3,this.sin_po,this.cos_po);this.sin_po=Math.sin(this.lat2);this.cos_po=Math.cos(this.lat2);this.t2=this.sin_po;this.ms2=o(this.e3,this.sin_po,this.cos_po);this.qs2=i(this.e3,this.sin_po,this.cos_po);this.sin_po=Math.sin(this.lat0);this.cos_po=Math.cos(this.lat0);this.t3=this.sin_po;this.qs0=i(this.e3,this.sin_po,this.cos_po);if(Math.abs(this.lat1-this.lat2)>a){this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1)}
else{this.ns0=this.con};this.c=this.ms1*this.ms1+this.ns0*this.qs1;this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0};n.forward=function(t){var m=t.x,a=t.y;this.sin_phi=Math.sin(a);this.cos_phi=Math.cos(a);var o=i(this.e3,this.sin_phi,this.cos_phi),s=this.a*Math.sqrt(this.c-this.ns0*o)/this.ns0,n=this.ns0*e(m-this.long0),r=s*Math.sin(n)+this.x0,h=this.rh-s*Math.cos(n)+this.y0;t.x=r;t.y=h;return t};n.inverse=function(t){var n,o,s,i,r,a;t.x-=this.x0;t.y=this.rh-t.y+this.y0;if(this.ns0>=0){n=Math.sqrt(t.x*t.x+t.y*t.y);s=1}
else{n=-Math.sqrt(t.x*t.x+t.y*t.y);s=-1};i=0;if(n!==0){i=Math.atan2(s*t.x,s*t.y)};s=n*this.ns0/this.a;if(this.sphere){a=Math.asin((this.c-s*s)/(2*this.ns0))}
else{o=(this.c-s*s)/this.ns0;a=this.phi1z(this.e3,o)};r=e(i/this.ns0+this.long0);t.x=r;t.y=a;return t};n.names=["Albers_Conic_Equal_Area","Albers","aea"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/msfnz":15,"../common/qsfnz":20}],40:[function(t,s,n){var i=t("../common/adjust_lon"),a=Math.PI/2,o=1.0e-10,e=t("../common/mlfn"),r=t("../common/e0fn"),h=t("../common/e1fn"),m=t("../common/e2fn"),c=t("../common/e3fn"),u=t("../common/gN"),f=t("../common/asinz"),l=t("../common/imlfn");n.init=function(){this.sin_p12=Math.sin(this.lat0);this.cos_p12=Math.cos(this.lat0)};n.names=["Azimuthal_Equidistant","aeqd"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/imlfn":12,"../common/mlfn":14}],41:[function(t,s,n){var i=t("../common/mlfn"),a=t("../common/e0fn"),o=t("../common/e1fn"),e=t("../common/e2fn"),r=t("../common/e3fn"),h=t("../common/gN"),m=t("../common/adjust_lon"),c=t("../common/adjust_lat"),u=t("../common/imlfn"),f=Math.PI/2,l=1.0e-10;n.init=function(){if(!this.sphere){this.e0=a(this.es);this.e1=o(this.es);this.e2=e(this.es);this.e3=r(this.es);this.ml0=this.a*i(this.e0,this.e1,this.e2,this.e3,this.lat0)}};n.names=["Cassini","Cassini_Soldner","cass"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/imlfn":12,"../common/mlfn":14}],42:[function(t,s,n){var a=t("../common/adjust_lon"),o=t("../common/qsfnz"),i=t("../common/msfnz"),e=t("../common/iqsfnz");n.init=function(){if(!this.sphere){this.k0=i(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))}};n.names=["cea"]},{"../common/adjust_lon":5,"../common/iqsfnz":13,"../common/msfnz":15,"../common/qsfnz":20}],43:[function(t,s,n){},{"../common/adjust_lat":4,"../common/adjust_lon":5}],44:[function(t,s,n){},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/imlfn":12,"../common/mlfn":14,"../common/msfnz":15}],45:[function(t,s,n){},{"../common/srat":22}],46:[function(t,s,n){},{"../common/adjust_lon":5,"../common/asinz":6}],47:[function(t,s,n){},{"../common/adjust_lon":5}],48:[function(t,s,n){},{"../common/adjust_lon":5,"../common/qsfnz":20}],49:[function(t,s,n){var i=1.0e-10,e=t("../common/msfnz"),a=t("../common/tsfnz"),o=Math.PI/2,h=t("../common/sign"),r=t("../common/adjust_lon"),m=t("../common/phi2z");n.init=function(){if(!this.lat2){this.lat2=this.lat1};if(!this.k0){this.k0=1};this.x0=this.x0||0;this.y0=this.y0||0;if(Math.abs(this.lat1+this.lat2)<i){return};var r=this.b/this.a;this.e=Math.sqrt(1-r*r);var t=Math.sin(this.lat1),h=Math.cos(this.lat1),s=e(this.e,t,h),n=a(this.e,this.lat1,t),o=Math.sin(this.lat2),m=Math.cos(this.lat2),c=e(this.e,o,m),u=a(this.e,this.lat2,o),f=a(this.e,this.lat0,Math.sin(this.lat0));if(Math.abs(this.lat1-this.lat2)>i){this.ns=Math.log(s/c)/Math.log(n/u)}
else{this.ns=t};if(isNaN(this.ns)){this.ns=t};this.f0=s/(this.ns*Math.pow(n,this.ns));this.rh=this.a*this.f0*Math.pow(f,this.ns);if(!this.title){this.title="Lambert Conformal Conic"}};n.forward=function(t){var u=t.x,s=t.y;if(Math.abs(2*Math.abs(s)-Math.PI)<=i){s=h(s)*(o-2*i)};var e=Math.abs(Math.abs(s)-o),c,n;if(e>i){c=a(this.e,s,Math.sin(s));n=this.a*this.f0*Math.pow(c,this.ns)}
else{e=s*this.ns;if(e<=0){return null};n=0};var m=this.ns*r(u-this.long0);t.x=this.k0*(n*Math.sin(m))+this.x0;t.y=this.k0*(this.rh-n*Math.cos(m))+this.y0;return t};n.inverse=function(t){var n,s,c,e,u,i=(t.x-this.x0)/this.k0,a=(this.rh-(t.y-this.y0)/this.k0);if(this.ns>0){n=Math.sqrt(i*i+a*a);s=1}
else{n=-Math.sqrt(i*i+a*a);s=-1};var h=0;if(n!==0){h=Math.atan2((s*i),(s*a))};if((n!==0)||(this.ns>0)){s=1/this.ns;c=Math.pow((n/(this.a*this.f0)),s);e=m(this.e,c);if(e===-9999){return null}}
else{e=-o};u=r(h/this.ns+this.long0);t.x=u;t.y=e;return t};n.names=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/sign":21,"../common/tsfnz":24}],50:[function(t,s,n){n.init=function(){};function i(t){return t};n.forward=i;n.inverse=i;n.names=["longlat","identity"]},{}],51:[function(t,s,n){},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/tsfnz":24}],52:[function(t,s,n){},{"../common/adjust_lon":5}],53:[function(t,s,n){},{"../common/adjust_lon":5}],54:[function(t,s,n){},{}],55:[function(t,s,n){},{"../common/adjust_lon":5,"../common/phi2z":16,"../common/tsfnz":24}],56:[function(t,s,n){},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/mlfn":14}],57:[function(t,s,n){},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/asinz":6,"../common/pj_enfn":17,"../common/pj_inv_mlfn":18,"../common/pj_mlfn":19}],58:[function(t,s,n){n.init=function(){var i=this.lat0;this.lambda0=this.long0;var s=Math.sin(i),h=this.a,m=this.rf,a=1/m,t=2*a-Math.pow(a,2),n=this.e=Math.sqrt(t);this.R=this.k0*h*Math.sqrt(1-t)/(1-t*Math.pow(s,2));this.alpha=Math.sqrt(1+t/(1-t)*Math.pow(Math.cos(i),4));this.b0=Math.asin(s/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),e=Math.log(Math.tan(Math.PI/4+i/2)),r=Math.log((1+n*s)/(1-n*s));this.K=o-this.alpha*e+this.alpha*n/2*r};n.forward=function(t){var a=Math.log(Math.tan(Math.PI/4-t.y/2)),o=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),e=-this.alpha*(a+o)+this.K,s=2*(Math.atan(Math.exp(e))-Math.PI/4),n=this.alpha*(t.x-this.lambda0),r=Math.atan(Math.sin(n)/(Math.sin(this.b0)*Math.tan(s)+Math.cos(this.b0)*Math.cos(n))),i=Math.asin(Math.cos(this.b0)*Math.sin(s)-Math.sin(this.b0)*Math.cos(s)*Math.cos(n));t.y=this.R/2*Math.log((1+Math.sin(i))/(1-Math.sin(i)))+this.y0;t.x=this.R*r+this.x0;return t};n.inverse=function(t){var r=t.x-this.x0,h=t.y-this.y0,n=r/this.R,i=2*(Math.atan(Math.exp(h/this.R))-Math.PI/4),a=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(n)),m=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(i))),c=this.lambda0+m/this.alpha,o=0,s=a,e=-1000,u=0;while(Math.abs(s-e)>0.0000001){if(++u>20){return};o=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(s))/2));e=s;s=2*Math.atan(Math.exp(o))-Math.PI/2};t.x=c;t.y=s;return t};n.names=["somerc"]},{}],59:[function(t,s,n){},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/sign":21,"../common/tsfnz":24}],60:[function(t,s,n){},{"../common/adjust_lon":5,"./gauss":45}],61:[function(t,s,n){var e=t("../common/e0fn"),r=t("../common/e1fn"),h=t("../common/e2fn"),m=t("../common/e3fn"),a=t("../common/mlfn"),i=t("../common/adjust_lon"),o=Math.PI/2,c=1.0e-10,u=t("../common/sign"),f=t("../common/asinz");n.init=function(){this.e0=e(this.es);this.e1=r(this.es);this.e2=h(this.es);this.e3=m(this.es);this.ml0=this.a*a(this.e0,this.e1,this.e2,this.e3,this.lat0)};n.forward=function(t){var g=t.x,h=t.y,c=i(g-this.long0),n,u,f,j=Math.sin(h),m=Math.cos(h);if(this.sphere){var r=m*Math.sin(c);if((Math.abs(Math.abs(r)-1))<0.0000000001){return(93)}
else{u=0.5*this.a*this.k0*Math.log((1+r)/(1-r));n=Math.acos(m*Math.cos(c)/Math.sqrt(1-r*r));if(h<0){n=-n};f=this.a*this.k0*(n-this.lat0)}}
else{var p=m*c,o=Math.pow(p,2),e=this.ep2*Math.pow(m,2),d=Math.tan(h),s=Math.pow(d,2);n=1-this.es*Math.pow(j,2);var l=this.a/Math.sqrt(n),M=this.a*a(this.e0,this.e1,this.e2,this.e3,h);u=this.k0*l*p*(1+o/6*(1-s+e+o/20*(5-18*s+Math.pow(s,2)+72*e-58*this.ep2)))+this.x0;f=this.k0*(M-this.ml0+l*d*(o*(0.5+o/24*(5-s+9*e+4*Math.pow(e,2)+o/30*(61-58*s+Math.pow(s,2)+600*e-330*this.ep2)))))+this.y0};t.x=u;t.y=f;return t};n.inverse=function(t){var n,s,g,j,G=6,a,m;if(this.sphere){var P=Math.exp(t.x/(this.a*this.k0)),l=0.5*(P-1/P),z=this.lat0+t.y/(this.a*this.k0),p=Math.cos(z);n=Math.sqrt((1-p*p)/(1+l*l));a=f(n);if(z<0){a=-a};if((l===0)&&(p===0)){m=this.long0}
else{m=i(Math.atan2(l,p)+this.long0)}}
else{var C=t.x-this.x0,w=t.y-this.y0;n=(this.ml0+w/this.k0)/this.a;s=n;for(j=0;!0;j++){g=((n+this.e1*Math.sin(2*s)-this.e2*Math.sin(4*s)+this.e3*Math.sin(6*s))/this.e0)-s;s+=g;if(Math.abs(g)<=c){break};if(j>=G){return(95)}};if(Math.abs(s)<o){var S=Math.sin(s),b=Math.cos(s),x=Math.tan(s),r=this.ep2*Math.pow(b,2),M=Math.pow(r,2),h=Math.pow(x,2),v=Math.pow(h,2);n=1-this.es*Math.pow(S,2);var d=this.a/Math.sqrt(n),q=d*(1-this.es)/n,y=C/(d*this.k0),e=Math.pow(y,2);a=s-(d*x*e/q)*(0.5-e/24*(5+3*h+10*r-4*M-9*this.ep2-e/30*(61+90*h+298*r+45*v-252*this.ep2-3*M)));m=i(this.long0+(y*(1-e/6*(1+2*h+r-e/20*(5-2*r+28*h-3*M+8*this.ep2+24*v)))/b))}
else{a=o*u(w);m=this.long0}};t.x=m;t.y=a;return t};n.names=["Transverse_Mercator","Transverse Mercator","tmerc"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/mlfn":14,"../common/sign":21}],62:[function(t,s,n){var a=0.01745329251994329577,i=t("./tmerc");n.dependsOn="tmerc";n.init=function(){if(!this.zone){return};this.lat0=0;this.long0=((6*Math.abs(this.zone))-183)*a;this.x0=500000;this.y0=this.utmSouth?10000000:0;this.k0=0.9996;i.init.apply(this);this.forward=i.forward;this.inverse=i.inverse};n.names=["Universal Transverse Mercator System","utm"]},{"./tmerc":61}],63:[function(t,s,n){},{"../common/adjust_lon":5,"../common/asinz":6}],64:[function(t,s,n){var i=0.01745329251994329577,a=57.29577951308232088,e=1,r=2,h=t("./datum_transform"),o=t("./adjust_axis"),m=t("./Proj"),c=t("./common/toPoint");s.exports=function u(t,n,s){var f;if(Array.isArray(s)){s=c(s)};function l(t,s){return((t.datum.datum_type===e||t.datum.datum_type===r)&&s.datumCode!=="WGS84")};if(t.datum&&n.datum&&(l(t,n)||l(n,t))){f=new m("WGS84");u(t,f,s);t=f};if(t.axis!=="enu"){o(t,!1,s)};if(t.projName==="longlat"){s.x*=i;s.y*=i}
else{if(t.to_meter){s.x*=t.to_meter;s.y*=t.to_meter};t.inverse(s)};if(t.from_greenwich){s.x+=t.from_greenwich};s=h(t.datum,n.datum,s);if(n.from_greenwich){s.x-=n.from_greenwich};if(n.projName==="longlat"){s.x*=a;s.y*=a}
else{n.forward(s);if(n.to_meter){s.x/=n.to_meter;s.y/=n.to_meter}};if(n.axis!=="enu"){o(n,!0,s)};return s}},{"./Proj":2,"./adjust_axis":3,"./common/toPoint":23,"./datum_transform":30}],65:[function(t,s,n){},{"./extend":33}],66:[function(t,s,n){},{}],67:[function(t,s,n){},{}],"./includedProjections":[function(t,s,n){},{}],"gWUPNW":[function(t,s,n){var i=[t("./lib/projections/tmerc"),t("./lib/projections/utm"),t("./lib/projections/sterea"),t("./lib/projections/stere"),t("./lib/projections/somerc"),t("./lib/projections/omerc"),t("./lib/projections/lcc"),t("./lib/projections/krovak"),t("./lib/projections/cass"),t("./lib/projections/laea"),t("./lib/projections/aea"),t("./lib/projections/gnom"),t("./lib/projections/cea"),t("./lib/projections/eqc"),t("./lib/projections/poly"),t("./lib/projections/nzmg"),t("./lib/projections/mill"),t("./lib/projections/sinu"),t("./lib/projections/moll"),t("./lib/projections/eqdc"),t("./lib/projections/vandg"),t("./lib/projections/aeqd")];s.exports=function(t){i.forEach(function(s){t.Proj.projections.add(s)})}},{"./lib/projections/aea":39,"./lib/projections/aeqd":40,"./lib/projections/cass":41,"./lib/projections/cea":42,"./lib/projections/eqc":43,"./lib/projections/eqdc":44,"./lib/projections/gnom":46,"./lib/projections/krovak":47,"./lib/projections/laea":48,"./lib/projections/lcc":49,"./lib/projections/mill":52,"./lib/projections/moll":53,"./lib/projections/nzmg":54,"./lib/projections/omerc":55,"./lib/projections/poly":56,"./lib/projections/sinu":57,"./lib/projections/somerc":58,"./lib/projections/stere":59,"./lib/projections/sterea":60,"./lib/projections/tmerc":61,"./lib/projections/utm":62,"./lib/projections/vandg":63}]},{},[35])(35)});
(function(t){var e,i;if(typeof define==='function'&&define.amd){define(['leaflet','proj4'],t)}
else if(typeof module==='object'&&typeof module.exports==='object'){e=require('leaflet');i=require('proj4');module.exports=t(e,i)}
else{if(typeof window.L==='undefined'||typeof window.proj4==='undefined')throw'Leaflet and proj4 must be loaded first';t(window.L,window.proj4)}}(function(t,e){t.Proj={};t.Proj._isProj4Obj=function(t){return(typeof t.inverse!=='undefined'&&typeof t.forward!=='undefined')};t.Proj.Projection=t.Class.extend({initialize:function(e,i,o){var n=t.Proj._isProj4Obj(e);this._proj=n?e:this._projFromCodeDef(e,i);this.bounds=n?i:o},project:function(e){var i=this._proj.forward([e.lng,e.lat]);return new t.Point(i[0],i[1])},unproject:function(e,i){var o=this._proj.inverse([e.x,e.y]);return new t.LatLng(o[1],o[0],i)},_projFromCodeDef:function(t,i){if(i){e.defs(t,i)}
else if(e.defs[t]===undefined){var o=t.split(':');if(o.length>3){t=o[o.length-3]+':'+o[o.length-1]};if(e.defs[t]===undefined){throw'No projection definition for code '+t}};return e(t)}});t.Proj.CRS=t.Class.extend({includes:t.CRS,options:{transformation:new t.Transformation(1,0,-1,0)},initialize:function(e,i,o){var r,a,f,s;if(t.Proj._isProj4Obj(e)){a=e;r=a.srsCode;s=i||{};this.projection=new t.Proj.Projection(a,s.bounds)}
else{r=e;f=i;s=o||{};this.projection=new t.Proj.Projection(r,f,s.bounds)};t.Util.setOptions(this,s);this.code=r;this.transformation=this.options.transformation;if(this.options.origin){this.transformation=new t.Transformation(1,-this.options.origin[0],-1,this.options.origin[1])};if(this.options.scales){this._scales=this.options.scales}
else if(this.options.resolutions){this._scales=[];for(var n=this.options.resolutions.length-1;n>=0;n--){if(this.options.resolutions[n]){this._scales[n]=1/this.options.resolutions[n]}}};this.infinite=!this.options.bounds},scale:function(t){var e=Math.floor(t),i,o,n,s;if(t===e){return this._scales[t]}
else{i=this._scales[e];o=this._scales[e+1];n=o-i;s=(t-e);return i+n*s}},zoom:function(t){var e=this._closestElement(this._scales,t),i=this._scales.indexOf(e),o,n,s;if(t===e){return i};n=i+1;o=this._scales[n];if(o===undefined){return Infinity};s=o-e;return(t-e)/s+i},_closestElement:function(t,e){var o;for(var i=t.length;i--;){if(t[i]<=e&&(o===undefined||o<t[i])){o=t[i]}};return o}});t.Proj.GeoJSON=t.GeoJSON.extend({initialize:function(e,i){this._callLevel=0;t.GeoJSON.prototype.initialize.call(this,e,i)},addData:function(e){var i;if(e){if(e.crs&&e.crs.type==='name'){i=new t.Proj.CRS(e.crs.properties.name)}
else if(e.crs&&e.crs.type){i=new t.Proj.CRS(e.crs.type+':'+e.crs.properties.code)};if(i!==undefined){this.options.coordsToLatLng=function(e){var o=t.point(e[0],e[1]);return i.projection.unproject(o)}}};this._callLevel++;try{t.GeoJSON.prototype.addData.call(this,e)}finally{this._callLevel--;if(this._callLevel===0){delete this.options.coordsToLatLng}}}});t.Proj.geoJson=function(e,i){return new t.Proj.GeoJSON(e,i)};t.Proj.ImageOverlay=t.ImageOverlay.extend({initialize:function(e,i,o){t.ImageOverlay.prototype.initialize.call(this,e,null,o);this._projectedBounds=i},_animateZoom:function(e){var i=this._map.getZoomScale(e.zoom),o=t.point(this._projectedBounds.min.x,this._projectedBounds.max.y),n=this._projectedToNewLayerPoint(o,e.zoom,e.center);t.DomUtil.setTransform(this._image,n,i)},_reset:function(){var e=this._map.getZoom(),i=this._map.getPixelOrigin(),o=t.bounds(this._transform(this._projectedBounds.min,e)._subtract(i),this._transform(this._projectedBounds.max,e)._subtract(i)),n=o.getSize();t.DomUtil.setPosition(this._image,o.min);this._image.style.width=n.x+'px';this._image.style.height=n.y+'px'},_projectedToNewLayerPoint:function(t,e,i){var o=this._map.getSize()._divideBy(2),n=this._map.project(i,e)._subtract(o)._round(),s=n.add(this._map._getMapPanePos());return this._transform(t,e)._subtract(s)},_transform:function(t,e){var i=this._map.options.crs,o=i.transformation,n=i.scale(e);return o.transform(t,n)}});t.Proj.imageOverlay=function(e,i,o){return new t.Proj.ImageOverlay(e,i,o)};return t.Proj}));
;L.Map.addInitHook(function(){this.on('layeradd',function(t){if(t.layer.options){var e=t.layer.options.crs||L.CRS.EPSG3857;if(t.layer.options.tileSize&&this.options.crs!=e){var s=this.getBounds(),c=this.getCenter();this.options.crs=e;var a=s.getNorthWest(),r=s.getSouthEast(),h=this.getSize().distanceTo(L.point(0,0)),i=Infinity;for(z=0;z<this.getMaxZoom();z++){var n=this.project(r,z).distanceTo(this.project(a,z)),o=Math.abs(n-h);if(o<i){i=o;closestZoom=z}};this._resetView(c,closestZoom)}}},this)});
;L.CRS.EPSG21781=L.extend(new L.Proj.CRS('EPSG:21781','+proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +k_0=1 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs',{resolutions:[4000,3750,3500,3250,3000,2750,2500,2250,2000,1750,1500,1250,1000,750,650,500,250,100,50,20,10,5,2.5,2,1.5,1,0.5,1/4,1/8,1/16],origin:[420000,350000]}),{bounds:L.bounds([5.97,45.83],[10.49,47.81]),name:'Coordonnées suisses',title:{lng:'X',lat:'Y'},distance:function(o,s){return L.CRS.Earth.distance(o,s)}});L.TileLayer.SwissTopo=L.TileLayer.extend({options:{subdomains:'56789',l:'ch.swisstopo.pixelkarte-farbe',f:'jpeg',crs:L.CRS.EPSG21781,minZoom:0,maxNativeZoom:L.CRS.EPSG21781.options.resolutions.length-1-3,maxZoom:L.CRS.EPSG21781.options.resolutions.length-1,attribution:'&copy; <a href="http://www.swisstopo.admin.ch/internet/swisstopo/fr/home.html">swisstopo, BAFU</a>'},initialize:function(o){L.TileLayer.prototype.initialize.call(this,'//wmts{s}.geo.admin.ch/1.0.0/{l}/default/current/21781/{z}/{y}/{x}.{f}',o)}});L.TileLayer.SwissTopo.Extended=L.TileLayer.SwissTopo.extend({_update:function(){if(this._map){this.options.l=this._map._zoom<24?'ch.swisstopo.pixelkarte-farbe':'ch.swisstopo.landeskarte-farbe-10';this.options.f=this._map._zoom<24?'jpeg':'png'};L.TileLayer.prototype._update.call(this)}});
(function(e,t){if(typeof define==='function'&&define.amd){define(['leaflet','proj4leaflet'],t)}
else if(typeof exports==='object'){var i=require('leaflet');require('proj4leaflet');module.exports=t(i)}
else{if(typeof window.L==='undefined'){throw new Error('Leaflet missing')};e.returnExports=t(e.L)}}(this,function(e){e.OSOpenSpace=e.OSOpenSpace||{};e.OSOpenSpace.CRS=e.extend(new e.Proj.CRS('EPSG:27700','+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +datum=OSGB36 +units=m +no_defs',{resolutions:[2500,1000,500,200,100,50,25,10,5,2.5]}),{distance:function(t,i){return e.CRS.Earth.distance(t,i)}});e.OSOpenSpace.TileLayer=e.TileLayer.WMS.extend({initialize:function(t,i){if(!t){throw new Error('OSOpenSpace layer requires an API Key parameter to function.')};e.TileLayer.WMS.prototype.initialize.call(this,'http://openspace.ordnancesurvey.co.uk/osmapapi/ts',{crs:e.OSOpenSpace.CRS,maxZoom:14,minZoom:0,tileSize:200,attribution:'&copy; <a href="https://www.ordnancesurvey.co.uk/osmaps/">Ordnance Survey</a>.'},i);this.wmsParams={KEY:t,FORMAT:'image/png',URL:'file:///',REQUEST:'GetMap',WIDTH:this.options.tileSize,HEIGHT:this.options.tileSize}},getTileUrl:function(t){var i=this.options.crs.options.resolutions[t.z],n=this.options.tileSize*i,r=n*t.x,a=n*(-1-t.y);this.wmsParams.BBOX=[r,a,0,0].join(',');this.wmsParams.LAYERS=i;return this._url+e.Util.getParamString(this.wmsParams)}});e.OSOpenSpace.tilelayer=function(t,i){return new e.OSOpenSpace.TileLayer(t,i)};return e.OSOpenSpace}));
;L.BingLayer=L.TileLayer.extend({options:{subdomains:[0,1,2,3],type:'Aerial',attribution:'Bing',culture:''},initialize:function(t,i){L.Util.setOptions(this,i);this._key=t;this._url=null;this._providers=[];this.metaRequested=!1},tile2quad:function(t,i,n){var o='';for(var r=n;r>0;r--){var e=0,a=1<<(r-1);if((t&a)!==0)e+=1;if((i&a)!==0)e+=2;o=o+e};return o},getTileUrl:function(t){var i=this._getZoomForUrl(),e=this.options.subdomains,r=this.options.subdomains[Math.abs((t.x+t.y)%e.length)];return this._url.replace('{subdomain}',r).replace('{quadkey}',this.tile2quad(t.x,t.y,i)).replace('{culture}',this.options.culture)},loadMetadata:function(){if(this.metaRequested)return;this.metaRequested=!0;var o=this,t='_bing_metadata_'+L.Util.stamp(this);window[t]=function(i){window[t]=undefined;var e=document.getElementById(t);e.parentNode.removeChild(e);if(i.errorDetails){throw new Error(i.errorDetails);return};o.initMetadata(i)};var e=(document.location.protocol==='file:')?'http':document.location.protocol.slice(0,-1),r=e+'://dev.virtualearth.net/REST/v1/Imagery/Metadata/'+this.options.type+'?include=ImageryProviders&jsonp='+t+'&key='+this._key+'&UriScheme='+e,i=document.createElement('script');i.type='text/javascript';i.src=r;i.id=t;document.getElementsByTagName('head')[0].appendChild(i)},initMetadata:function(t){var e=t.resourceSets[0].resources[0];this.options.subdomains=e.imageUrlSubdomains;this._url=e.imageUrl;if(e.imageryProviders){for(var n=0;n<e.imageryProviders.length;n++){var a=e.imageryProviders[n];for(var o=0;o<a.coverageAreas.length;o++){var i=a.coverageAreas[o],r={zoomMin:i.zoomMin,zoomMax:i.zoomMax,active:!1};var s=new L.LatLngBounds(new L.LatLng(i.bbox[0]+0.01,i.bbox[1]+0.01),new L.LatLng(i.bbox[2]-0.01,i.bbox[3]-0.01));r.bounds=s;r.attrib=a.attribution;this._providers.push(r)}}};this._update()},_update:function(){if(this._url===null||!this._map)return;this._update_attribution();L.TileLayer.prototype._update.apply(this,[])},_update_attribution:function(){var r=L.latLngBounds(this._map.getBounds().getSouthWest().wrap(),this._map.getBounds().getNorthEast().wrap()),e=this._map.getZoom();for(var i=0;i<this._providers.length;i++){var t=this._providers[i];if((e<=t.zoomMax&&e>=t.zoomMin)&&r.intersects(t.bounds)){if(!t.active&&this._map.attributionControl)this._map.attributionControl.addAttribution(t.attrib);t.active=!0}
else{if(t.active&&this._map.attributionControl)this._map.attributionControl.removeAttribution(t.attrib);t.active=!1}}},onAdd:function(t){this.loadMetadata();L.TileLayer.prototype.onAdd.apply(this,[t])},onRemove:function(t){for(var e=0;e<this._providers.length;e++){var i=this._providers[e];if(i.active&&this._map.attributionControl){this._map.attributionControl.removeAttribution(i.attrib);i.active=!1}};L.TileLayer.prototype.onRemove.apply(this,[t])}});L.bingLayer=function(t,i){return new L.BingLayer(t,i)};
;L.TileLayer.collection=function(i){if(typeof this._col=='undefined'){this._col={'OSM-FR':new L.TileLayer.OSM.FR(),'Maps-refuges-info':new L.TileLayer.OSM.MRI(),'Hike & Bike':new L.TileLayer.OSM.hikebike()};var e=['Landscape','Outdoors','Cycle','Transport'];for(m in e)if(typeof L.TileLayer.OSM[e[m]]!='undefined')this._col['OSM-'+e[m]]=new L.TileLayer.OSM[e[m]]();if(typeof L.TileLayer.IGN!='undefined'&&typeof key!='undefined'&&typeof key.ign!='undefined')L.Util.extend(this._col,{'IGN':new L.TileLayer.IGN({k:key.ign,l:'GEOGRAPHICALGRIDSYSTEMS.MAPS'}),'IGN topo':new L.TileLayer.IGN({k:key.ign,l:'GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.STANDARD'}),'IGN classique':new L.TileLayer.IGN({k:key.ign,l:'GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.CLASSIQUE'}),'IGN cadastre':new L.TileLayer.IGN({k:key.ign,l:'CADASTRALPARCELS.PARCELS',f:'png'}),'IGN photo':new L.TileLayer.IGN({k:key.ign,l:'ORTHOIMAGERY.ORTHOPHOTOS'})});if(typeof L.TileLayer.WMS.IDEE!='undefined')L.Util.extend(this._col,{'Espagne':new L.TileLayer.WMS.IDEE(),'Espagne photo':new L.TileLayer.WMS.IDEE.Photo()});if(typeof L.TileLayer.WMS.IGM!='undefined')this._col.Italie=new L.TileLayer.WMS.IGM();if(typeof L.TileLayer.SwissTopo!='undefined')L.Util.extend(this._col,{'SwissTopo':new L.TileLayer.SwissTopo.Extended(),'Swiss Image':new L.TileLayer.SwissTopo({l:'ch.swisstopo.swissimage'})});if(typeof L.TileLayer.Kompass!='undefined')L.Util.extend(this._col,{'Autriche':new L.TileLayer.Kompass({l:'Touristik'})});if(typeof key!='undefined'&&typeof key.os!='undefined'){if(window.location.href[4]!='s')if(typeof L.OSOpenSpace.TileLayer!='undefined'){L.OSOpenSpace.TileLayer.prototype.options.crs=L.OSOpenSpace.CRS;this._col['OS Great Britain']=new L.OSOpenSpace.TileLayer(key.os)}
else if(typeof L.TileLayer.OSOpenSpace!='undefined'){L.TileLayer.OSOpenSpace.prototype._url=L.TileLayer.OSOpenSpace.prototype._url.replace('https','http');this._col['OS-Great Britain']=new L.TileLayer.OSOpenSpace(key.os,{})}};if(typeof L.BingLayer!='undefined'&&typeof key!='undefined'&&typeof key.bing!='undefined'){L.BingLayer.prototype.options.maxNativeZoom=18;L.BingLayer.prototype.options.maxZoom=21;L.Util.extend(this._col,{'Bing Photo':new L.BingLayer(key.bing,{type:'Aerial'}),})};if(typeof L.TileLayer.Google!='undefined')L.Util.extend(this._col,{'Google Terrain':new L.TileLayer.Google({l:'p'}),'Google Photo':new L.TileLayer.Google({l:'s'})});L.Util.extend(this._col,{'Neutre':L.tileLayer('',{maxZoom:23})})};return typeof this._col[i]!='undefined'?this._col[i]:this._col};
;L.Control.Permalink=L.Control.extend({includes:L.Mixin.Events,options:{position:'bottomleft',useAnchor:!0,useLocation:!1,useLocalStorage:!1,text:'Permalink'},initialize:function(t){L.Util.setOptions(this,t);this._params={};this._set_urlvars();this.on('update',this._set_center,this);for(var i in this){if(typeof(i)==='string'&&i.indexOf('initialize_')===0)this[i]()}},onAdd:function(t){this._container=L.DomUtil.create('div','leaflet-control-attribution leaflet-control-permalink');L.DomEvent.disableClickPropagation(this._container);this._map=t;this._href=L.DomUtil.create('a',null,this._container);this._href.innerHTML=this.options.text;t.on('moveend',this._update_center,this);this.fire('update',{params:this._params});this._update_center();if(this.options.useAnchor&&'onhashchange' in window){var e=this,i=window.onhashchange;window.onhashchange=function(){e._set_urlvars();if(i)return i()}};this.fire('add',{map:t});return this._container},_update_center:function(){if(!this._map)return;var t=this._round_point(this._map.getCenter());this._update({zoom:String(this._map.getZoom()),lat:String(t.lat),lon:String(t.lng)})},_update_href:function(){var t=L.Util.getParamString(this._params),e='?';if(this.options.useAnchor)e='#';var i=this._url_base+e+t.slice(1);if(this._href)this._href.setAttribute('href',i);if(this.options.useLocation)location.replace('#'+t.slice(1));if(this.options.useLocalStorage)window.localStorage.setItem('paramsTemp',t.slice(1));return i},_round_point:function(t){var i=this._map.getBounds(),e=this._map.getSize(),n=i.getNorthEast(),r=i.getSouthWest(),a=function(t,i){if(i===0)return t;var e=1;while(i<1&&i>-1){t*=10;i*=10;e*=10};return Math.floor(t)/e};t.lat=a(t.lat,(n.lat-r.lat)/e.y);t.lng=a(t.lng,(n.lng-r.lng)/e.x);return t},_update:function(t){for(var i in t){if(!t.hasOwnProperty(i))continue;if(t[i]!==null&&t[i]!==undefined)this._params[i]=t[i];else delete this._params[i]};this._update_href()},_set_urlvars:function(){var t;if(this.options.useAnchor){t=L.UrlUtil.queryParse(L.UrlUtil.hash());this._url_base=window.location.href.split('#')[0]}
else{t=L.UrlUtil.queryParse(L.UrlUtil.query());this._url_base=window.location.href.split('#')[0].split('?')[0]};if(this.options.useLocalStorage){t=window.localStorage.getItem('paramsTemp');if(t!==null){t=L.UrlUtil.queryParse(t)}
else{t={}}};function i(t,i){for(var e in t)if(t.hasOwnProperty(e)&&t[e]!==i[e])return!1;return!0};if(i(t,this._params)&&i(this._params,t))return;this._params=t;this._update_href();this.fire('update',{params:this._params})},_set_center:function(t){var i=t.params;if(i.zoom===undefined||i.lat===undefined||i.lon===undefined)return;this._map.setView(new L.LatLng(i.lat,i.lon),i.zoom)}});L.UrlUtil={queryParse:function(t){var a={};var r='&';if(t.search('&amp;')!==-1)r='&amp;';var n=t.split(r);for(var e=0;e<n.length;e++){var i=n[e].split('=');if(i.length!==2)continue;a[i[0]]=decodeURIComponent(i[1])};return a},query:function(){var t=window.location.href.split('#')[0],i=t.indexOf('?');if(i<0)return'';return t.slice(i+1)},hash:function(){return window.location.hash.slice(1)},updateParamString:function(t,i){var n=L.UrlUtil.queryParse(t);for(var e in i){if(i.hasOwnProperty(e))n[e]=i[e]};return L.Util.getParamString(n).slice(1)}};
;L.Control.Permalink.include({initialize_layer:function(){this.on('update',this._set_layer,this);this.on('add',this._onadd_layer,this)},_onadd_layer:function(){this._map.on('layeradd',this._update_layer,this);this._map.on('layerremove',this._update_layer,this);this._update_layer()},_update_layer:function(){if(!this.options.layers)return;var a=this.options.layers.currentBaseLayer();if(a)this._update({layer:a.name})},_set_layer:function(a){var e=a.params;if(!this.options.layers||!e.layer)return;this.options.layers.chooseBaseLayer(e.layer)}});L.Control.Layers.include({chooseBaseLayer:function(r){var e,a;for(var t in this._layers){if(!this._layers.hasOwnProperty(t))continue;a=this._layers[t];if(!a.overlay&&a.name===r)e=a.layer};if(!e||this._map.hasLayer(e))return;for(var i in this._layers){if(!this._layers.hasOwnProperty(i))continue;a=this._layers[i];if(!a.overlay&&this._map.hasLayer(a.layer))this._map.removeLayer(a.layer)};this._map.addLayer(e);this._update()},currentBaseLayer:function(){for(var e in this._layers){if(!this._layers.hasOwnProperty(e))continue;var a=this._layers[e];if(a.overlay)continue;if(!a.overlay&&this._map.hasLayer(a.layer))return a}}});
;L.Control.Permalink.Cookies=L.Control.Permalink.extend({_pk:document.cookie.match(/permalink=([^;]+)/),options:{useAnchor:!1,move:!0,layer:!0},onAdd:function(t){if(this._pk&&!this._params.zoom)this._params=L.UrlUtil.queryParse(this._pk[1]);return L.Control.Permalink.prototype.onAdd.call(this,t)},_set_center:function(o){var t=o.params;if(t.zoom&&t.lat&&t.lon&&this.options.move)this._map.setView(new L.LatLng(t.lat,t.lon),t.zoom,{reset:!0})},_set_layer:function(t){if(this.options.layer)L.Control.Permalink.prototype._set_layer.call(this,t)},_update_href:function(){document.cookie='permalink='+L.Util.getParamString(this._params).substring(1)+';path=/';return L.Control.Permalink.prototype._update_href.call(this)}});
;L.NumberFormatter={round:function(t,n,a){var e=L.Util.formatNum(t,n)+"",r=e.split(".");if(r[1]){var i=n-r[1].length;for(;i>0;i--){r[1]+="0"};e=r.join(a||".")};return e},toDMS:function(n){var e=Math.floor(Math.abs(n)),a=(Math.abs(n)-e)*60,r=Math.floor(a),f=(a-r)*60,t=Math.round(f);if(t==60){r++;t="00"};if(r==60){e++;r="00"};if(t<10){t="0"+t};if(r<10){r="0"+r};var i="";if(n<0){i="-"};return(""+i+e+"&deg; "+r+"' "+t+"''")},createValidNumber:function(r,t){if(r&&r.length>0){var e=r.split(t||".");try{var n=Number(e.join("."));if(isNaN(n)){return undefined};return n}catch(i){return undefined}};return undefined}};
;L.Control.Coordinates=L.Control.extend({options:{position:'bottomright',decimals:4,decimalSeperator:'.',labelTemplateLat:'Lat: {y}',labelTemplateLng:'Lng: {x}',labelFormatterLat:undefined,labelFormatterLng:undefined,enableUserInput:!0,useDMS:!1,useLatLngOrder:!1,centerUserCoordinates:!1,markerType:L.marker,markerProps:{}},onAdd:function(t){this._map=t;var o='leaflet-control-coordinates',a=this._container=L.DomUtil.create('div',o),e=this.options;this._labelcontainer=L.DomUtil.create('div','uiElement label',a);this._label=L.DomUtil.create('span','labelFirst',this._labelcontainer);this._inputcontainer=L.DomUtil.create('div','uiElement input uiHidden',a);var i,n;if(e.useLatLngOrder){n=L.DomUtil.create('span','',this._inputcontainer);this._inputY=this._createInput('inputY',this._inputcontainer);i=L.DomUtil.create('span','',this._inputcontainer);this._inputX=this._createInput('inputX',this._inputcontainer)}
else{i=L.DomUtil.create('span','',this._inputcontainer);this._inputX=this._createInput('inputX',this._inputcontainer);n=L.DomUtil.create('span','',this._inputcontainer);this._inputY=this._createInput('inputY',this._inputcontainer)};i.innerHTML=e.labelTemplateLng.replace('{x}','');n.innerHTML=e.labelTemplateLat.replace('{y}','');L.DomEvent.on(this._inputX,'keyup',this._handleKeypress,this);L.DomEvent.on(this._inputY,'keyup',this._handleKeypress,this);t.on('mousemove',this._update,this);t.on('dragstart',this.collapse,this);t.whenReady(this._update,this);this._showsCoordinates=!0;if(e.enableUserInput){L.DomEvent.addListener(this._container,'click',this._switchUI,this)};return a},_createInput:function(t,i){var e=L.DomUtil.create('input',t,i);e.type='text';L.DomEvent.disableClickPropagation(e);return e},_clearMarker:function(){this._map.removeLayer(this._marker)},_handleKeypress:function(t){switch(t.keyCode){case 27:this.collapse();break;case 13:this._handleSubmit();this.collapse();break;default:this._handleSubmit();break}},_handleSubmit:function(){var i=L.NumberFormatter.createValidNumber(this._inputX.value,this.options.decimalSeperator),n=L.NumberFormatter.createValidNumber(this._inputY.value,this.options.decimalSeperator);if(i!==undefined&&n!==undefined){var t=this._marker;if(!t){t=this._marker=this._createNewMarker();t.on('click',this._clearMarker,this)};var e=new L.LatLng(n,i);t.setLatLng(e);t.addTo(this._map);if(this.options.centerUserCoordinates){this._map.setView(e,this._map.getZoom())}}},expand:function(){this._showsCoordinates=!1;this._map.off('mousemove',this._update,this);L.DomEvent.addListener(this._container,'mousemove',L.DomEvent.stop);L.DomEvent.removeListener(this._container,'click',this._switchUI,this);L.DomUtil.addClass(this._labelcontainer,'uiHidden');L.DomUtil.removeClass(this._inputcontainer,'uiHidden')},_createCoordinateLabel:function(t){var e=this.options,i,n;if(e.customLabelFcn){return e.customLabelFcn(t,e)};if(e.labelLng){i=e.labelFormatterLng(t.lng)}
else{i=L.Util.template(e.labelTemplateLng,{x:this._getNumber(t.lng,e)})};if(e.labelFormatterLat){n=e.labelFormatterLat(t.lat)}
else{n=L.Util.template(e.labelTemplateLat,{y:this._getNumber(t.lat,e)})};if(e.useLatLngOrder){return n+' '+i};return i+' '+n},_getNumber:function(t,e){var i;if(e.useDMS){i=L.NumberFormatter.toDMS(t)}
else{i=L.NumberFormatter.round(t,e.decimals,e.decimalSeperator)};return i},collapse:function(){if(!this._showsCoordinates){this._map.on('mousemove',this._update,this);this._showsCoordinates=!0;var r=this.options;L.DomEvent.addListener(this._container,'click',this._switchUI,this);L.DomEvent.removeListener(this._container,'mousemove',L.DomEvent.stop);L.DomUtil.addClass(this._inputcontainer,'uiHidden');L.DomUtil.removeClass(this._labelcontainer,'uiHidden');if(this._marker){var e=this._createNewMarker(),a=this._marker.getLatLng();e.setLatLng(a);var n=L.DomUtil.create('div',''),o=L.DomUtil.create('div','',n);o.innerHTML=this._ordinateLabel(a);var t=L.DomUtil.create('a','',n);t.innerHTML='Remove';t.href='#';var i=L.DomEvent.stopPropagation;L.DomEvent.on(t,'click',i).on(t,'mousedown',i).on(t,'dblclick',i).on(t,'click',L.DomEvent.preventDefault).on(t,'click',function(){this._map.removeLayer(e)},this);e.bindPopup(n);e.addTo(this._map);this._map.removeLayer(this._marker);this._marker=null}}},_switchUI:function(t){L.DomEvent.stop(t);L.DomEvent.stopPropagation(t);L.DomEvent.preventDefault(t);if(this._showsCoordinates){this.expand()}
else{this.collapse()}},onRemove:function(t){t.off('mousemove',this._update,this)},_update:function(t){var e=t.latlng,i=this.options;if(e){e=e.wrap();this._currentPos=e;this._inputY.value=L.NumberFormatter.round(e.lat,i.decimals,i.decimalSeperator);this._inputX.value=L.NumberFormatter.round(e.lng,i.decimals,i.decimalSeperator);this._label.innerHTML=this._createCoordinateLabel(e)}},_createNewMarker:function(){return this.options.markerType(null,this.options.markerProps)}});L.control.coordinates=function(t){return new L.Control.Coordinates(t)};L.Map.mergeOptions({coordinateControl:!1});L.Map.addInitHook(function(){if(this.options.coordinateControl){this.coordinateControl=new L.Control.Coordinates();this.addControl(this.coordinateControl)}});
;L.Control.Fullscreen=L.Control.extend({options:{position:'topleft',title:{'false':'View Fullscreen','true':'Exit Fullscreen'}},onAdd:function(e){var l=L.DomUtil.create('div','leaflet-control-fullscreen leaflet-bar leaflet-control');this.link=L.DomUtil.create('a','leaflet-control-fullscreen-button leaflet-bar-part',l);this.link.href='#';this._map=e;this._map.on('fullscreenchange',this._toggleTitle,this);this._toggleTitle();L.DomEvent.on(this.link,'click',this._click,this);return l},_click:function(e){L.DomEvent.stopPropagation(e);L.DomEvent.preventDefault(e);this._map.toggleFullscreen(this.options)},_toggleTitle:function(){this.link.title=this.options.title[this._map.isFullscreen()]}});L.Map.include({isFullscreen:function(){return this._isFullscreen||!1},toggleFullscreen:function(l){var e=this.getContainer();if(this.isFullscreen()){if(l&&l.pseudoFullscreen){this._disablePseudoFullscreen(e)}
else if(document.exitFullscreen){document.exitFullscreen()}
else if(document.mozCancelFullScreen){document.mozCancelFullScreen()}
else if(document.webkitCancelFullScreen){document.webkitCancelFullScreen()}
else if(document.msExitFullscreen){document.msExitFullscreen()}
else{this._disablePseudoFullscreen(e)}}
else{if(l&&l.pseudoFullscreen){this._enablePseudoFullscreen(e)}
else if(e.requestFullscreen){e.requestFullscreen()}
else if(e.mozRequestFullScreen){e.mozRequestFullScreen()}
else if(e.webkitRequestFullscreen){e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}
else if(e.msRequestFullscreen){e.msRequestFullscreen()}
else{this._enablePseudoFullscreen(e)}}},_enablePseudoFullscreen:function(e){L.DomUtil.addClass(e,'leaflet-pseudo-fullscreen');this._setFullscreen(!0);this.invalidateSize();this.fire('fullscreenchange')},_disablePseudoFullscreen:function(e){L.DomUtil.removeClass(e,'leaflet-pseudo-fullscreen');this._setFullscreen(!1);this.invalidateSize();this.fire('fullscreenchange')},_setFullscreen:function(e){this._isFullscreen=e;var l=this.getContainer();if(e){L.DomUtil.addClass(l,'leaflet-fullscreen-on')}
else{L.DomUtil.removeClass(l,'leaflet-fullscreen-on')}},_onFullscreenChange:function(e){var l=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;if(l===this.getContainer()&&!this._isFullscreen){this._setFullscreen(!0);this.fire('fullscreenchange')}
else if(l!==this.getContainer()&&this._isFullscreen){this._setFullscreen(!1);this.fire('fullscreenchange')}}});L.Map.mergeOptions({fullscreenControl:!1});L.Map.addInitHook(function(){if(this.options.fullscreenControl){this.fullscreenControl=new L.Control.Fullscreen(this.options.fullscreenControl);this.addControl(this.fullscreenControl)};var e;if('onfullscreenchange' in document){e='fullscreenchange'}
else if('onmozfullscreenchange' in document){e='mozfullscreenchange'}
else if('onwebkitfullscreenchange' in document){e='webkitfullscreenchange'}
else if('onmsfullscreenchange' in document){e='MSFullscreenChange'};if(e){var l=L.bind(this._onFullscreenChange,this);this.whenReady(function(){L.DomEvent.on(document,e,l)});this.on('unload',function(){L.DomEvent.off(document,e,l)})}});L.control.fullscreen=function(e){return new L.Control.Fullscreen(e)};
(function(t){if(typeof define==='function'&&define.amd){define(['leaflet'],t)}
else if(typeof module!=='undefined'){module.exports=t(require('leaflet'))}
else{if(typeof window.L==='undefined')throw'Leaflet must be loaded first';t(window.L)}})(function(t){t.Control.Gps=t.Control.extend({includes:t.Mixin.Events,options:{autoActive:!1,autoCenter:!1,maxZoom:null,textErr:null,callErr:null,style:{radius:5,weight:2,color:'#c20',opacity:1,fillColor:'#f23',fillOpacity:1},marker:null,accuracy:!0,title:'Center map on your location',position:'topleft',transform:function(t){return t},setView:!1},initialize:function(i){if(i&&i.style)i.style=t.Util.extend({},this.options.style,i.style);t.Util.setOptions(this,i);this._errorFunc=this.options.callErr||this.showAlert;this._isActive=!1;this._firstMoved=!1;this._currentLocation=null},onAdd:function(i){this._map=i;var o=t.DomUtil.create('div','leaflet-control-gps');this._button=t.DomUtil.create('a','gps-button',o);this._button.href='#';this._button.title=this.options.title;t.DomEvent.on(this._button,'click',t.DomEvent.stop,this).on(this._button,'click',this._switchGps,this);this._alert=t.DomUtil.create('div','gps-alert',o);this._alert.style.display='none';this._gpsMarker=this.options.marker?this.options.marker:new t.CircleMarker([0,0],this.options.style);this._map.on('locationfound',this._drawGps,this).on('locationerror',this._errorGps,this);if(this.options.autoActive)this.activate();return o},onRemove:function(t){this.deactivate()},_switchGps:function(){if(this._isActive)this.deactivate();else this.activate()},getLocation:function(){return this._currentLocation},activate:function(){this._isActive=!0;this._map.addLayer(this._gpsMarker);this._map.locate({enableHighAccuracy:!0,watch:!0,setView:this.options.setView,maxZoom:this.options.maxZoom})},deactivate:function(){this._isActive=!1;this._firstMoved=!1;this._map.stopLocate();t.DomUtil.removeClass(this._button,'active');this._map.removeLayer(this._gpsMarker);this.fire('gps:disabled')},_drawGps:function(i){this._currentLocation=this.options.transform(i.latlng);this._gpsMarker.setLatLng(this._currentLocation);if(this._isActive&&(!this._firstMoved||this.options.autoCenter))this._moveTo(this._currentLocation);this.fire('gps:located',{latlng:this._currentLocation,marker:this._gpsMarker});t.DomUtil.addClass(this._button,'active')},_moveTo:function(t){this._firstMoved=!0;if(this.options.maxZoom)this._map.setView(t,Math.min(this._map.getZoom(),this.options.maxZoom));else this._map.panTo(t)},_errorGps:function(t){this.deactivate();this._errorFunc.call(this,this.options.textErr||t.message)},showAlert:function(t){this._alert.style.display='block';this._alert.innerHTML=t;var i=this;clearTimeout(this.timerAlert);this.timerAlert=setTimeout(function(){i._alert.style.display='none'},5000)}});t.Map.addInitHook(function(){if(this.options.gpsControl){this.gpsControl=t.control.gps(this.options.gpsControl);this.addControl(this.gpsControl)}});t.control.gps=function(i){return new t.Control.Gps(i)};return t.Control.Gps});
;if(typeof console=="undefined"){this.console={log:function(t){}}};L.Control.OSMGeocoder=L.Control.extend({options:{collapsed:!0,position:"topright",text:"Locate",bounds:null,email:null,callback:function(t){if(t.length==0){console.log("ERROR: didn't find a result");return};var e=t[0].boundingbox,o=new L.LatLng(e[0],e[2]),n=new L.LatLng(e[1],e[3]),i=new L.LatLngBounds([o,n]);this._map.fitBounds(i)}},_callbackId:0,initialize:function(t){L.Util.setOptions(this,t)},onAdd:function(t){this._map=t;var s="leaflet-control-geocoder",e=this._container=L.DomUtil.create("div",s);L.DomEvent.disableClickPropagation(e);var o=this._form=L.DomUtil.create("form",s+"-form"),a=this._input=document.createElement("input");a.type="text";var i=document.createElement("input");i.type="submit";i.value=this.options.text;o.appendChild(a);o.appendChild(i);L.DomEvent.addListener(o,"submit",this._geocode,this);if(this.options.collapsed){L.DomEvent.addListener(e,"mouseover",this._expand,this);L.DomEvent.addListener(e,"mouseout",this._collapse,this);var n=this._layersLink=L.DomUtil.create("a",s+"-toggle",e);n.href="#";n.title="Nominatim Geocoder";L.DomEvent.addListener(n,L.Browser.touch?"click":"focus",this._expand,this);this._map.on("movestart",this._collapse,this)}
else{this._expand()};e.appendChild(o);return e},_createSearchResult:function(t,o){var n=0.005,e=[];e[0]={};e[0]["boundingbox"]=[parseFloat(t)-n,parseFloat(t)+n,parseFloat(o)-n,parseFloat(o)+n];e[0]["class"]="boundary";e[0]["display_name"]="Position: "+t+" "+o;e[0]["lat"]=t;e[0]["lon"]=o;return e},_isLatLon:function(t){var o=/(-?\d+\.\d+)\s(-?\d+\.\d+)/,e=o.exec(t);if(e!=undefined)return e;o=/lat\D*(-?\d+\.\d+)\D*lon\D*(-?\d+\.\d+)/;e=o.exec(t);if(e!=undefined)return e;else return null},_isLatLon_decMin:function(t){console.log("is LatLon?: "+t);re=/([ns])\s*(\d+)\D*(\d+\.\d+).?\s*([ew])\s*(\d+)\D*(\d+\.\d+)/i;m=re.exec(t.toLowerCase());if((m!=undefined))return m;else return null},_geocode:function(e){L.DomEvent.preventDefault(e);var s=this._input.value;if(this._isLatLon(s)!=null){var t=this._isLatLon(s);console.log("LatLon: "+t[1]+" "+t[2]);this.options.callback.call(this,this._createSearchResult(t[1],t[2]));return}
else if(this._isLatLon_decMin(s)!=null){var t=this._isLatLon_decMin(s),o=[];o["n"]=1;o["s"]=-1;o["e"]=1;o["w"]=-1;this.options.callback.call(this,this._createSearchResult(o[t[1]]*(Number(t[2])+t[3]/60),o[t[4]]*(Number(t[5])+t[6]/60)));return};console.log(this._callbackId);window[("_l_osmgeocoder_"+this._callbackId)]=L.Util.bind(this.options.callback,this);var i={q:this._input.value,json_callback:("_l_osmgeocoder_"+this._callbackId++),format:"json"};if(this.options.bounds&&this.options.bounds!=null){if(this.options.bounds instanceof L.LatLngBounds){i.viewbox=this.options.bounds.toBBoxString();i.bounded=1}
else{console.log("bounds must be of type L.LatLngBounds");return}};if(this.options.email&&this.options.email!=null){if(typeof this.options.email=="string"){i.email=this.options.email}
else{console.log("email must be a string")}};var a=location.protocol,l=a+"//nominatim.openstreetmap.org/search"+L.Util.getParamString(i),n=document.createElement("script");n.type="text/javascript";n.src=l;n.id=this._callbackId;document.getElementsByTagName("head")[0].appendChild(n)},_expand:function(){L.DomUtil.addClass(this._container,"leaflet-control-geocoder-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-geocoder-expanded","")}});
;var toGeoJSON=(function(){'use strict';var d=/\s*/g,y=/^\s*|\s*$/g,v=/\s+/;function s(e){if(!e||!e.length)return 0;for(var r=0,t=0;r<e.length;r++){t=((t<<5)-t)+e.charCodeAt(r)|0};return t};function r(e,t){return e.getElementsByTagName(t)};function i(e,t){return e.getAttribute(t)};function l(e,t){return parseFloat(i(e,t))};function e(e,t){var i=r(e,t);return i.length?i[0]:null};function k(e){if(e.normalize){e.normalize()};return e};function f(e){for(var t=0,r=[];t<e.length;t++){r[t]=parseFloat(e[t])};return r};function t(e){if(e){k(e)};return(e&&e.textContent)||''};function a(r,i){var a={},o,n;for(n=0;n<i.length;n++){o=e(r,i[n]);if(o)a[i[n]]=t(o)};return a};function n(e,t){for(var r in t)e[r]=t[r]};function u(e){return f(e.replace(d,'').split(','))};function c(e){var r=e.replace(y,'').split(v),i=[];for(var t=0;t<r.length;t++){i.push(u(r[t]))};return i};function p(r){var n=[l(r,'lon'),l(r,'lat')],o=e(r,'ele'),a=e(r,'gpxtpx:hr')||e(r,'hr'),s=e(r,'time'),i;if(o){i=parseFloat(t(o));if(!isNaN(i)){n.push(i)}};return{coordinates:n,time:s?t(s):null,heartRate:a?parseFloat(t(a)):null}};function h(){return{type:'FeatureCollection',features:[]}};var o;if(typeof XMLSerializer!=='undefined'){o=new XMLSerializer()}
else if(typeof exports==='object'&&typeof process==='object'&&!process.browser){o=new(require('xmldom').XMLSerializer)()};function g(e){if(e.xml!==undefined)return e.xml;return o.serializeToString(e)};var m={kml:function(n){var x=h(),p={},L={},y={},o=['Polygon','LineString','Point','Track','gx:Track'],F=r(n,'Placemark'),v=r(n,'Style'),m=r(n,'StyleMap');for(var l=0;l<v.length;l++){var b=s(g(v[l])).toString(16);p['#'+i(v[l],'id')]=b;L[b]=v[l]};for(var a=0;a<m.length;a++){p['#'+i(m[a],'id')]=s(g(m[a])).toString(16);var T=r(m[a],'Pair'),N={};for(var d=0;d<T.length;d++){N[t(e(T[d],'key'))]=t(e(T[d],'styleUrl'))};y['#'+i(m[a],'id')]=N};for(var S=0;S<F.length;S++){x.features=x.features.concat(R(F[S]))};function M(e){var t,r;e=e||'';if(e.substr(0,1)==='#'){e=e.substr(1)};if(e.length===6||e.length===3){t=e};if(e.length===8){r=parseInt(e.substr(0,2),16)/255;t='#'+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)};return[t,isNaN(r)?undefined:r]};function P(e){return f(e.split(' '))};function w(e){var i=r(e,'coord','gx'),s=[],l=[];if(i.length===0)i=r(e,'gx:coord');for(var o=0;o<i.length;o++)s.push(P(t(i[o])));var a=r(e,'when');for(var n=0;n<a.length;n++)l.push(t(a[n]));return{coords:s,times:l}};function k(i){var a,l,n,f,p,s=[],d=[];if(e(i,'MultiGeometry')){return k(e(i,'MultiGeometry'))};if(e(i,'MultiTrack')){return k(e(i,'MultiTrack'))};if(e(i,'gx:MultiTrack')){return k(e(i,'gx:MultiTrack'))};for(n=0;n<o.length;n++){l=r(i,o[n]);if(l){for(f=0;f<l.length;f++){a=l[f];if(o[n]==='Point'){s.push({type:'Point',coordinates:u(t(e(a,'coordinates')))})}
else if(o[n]==='LineString'){s.push({type:'LineString',coordinates:c(t(e(a,'coordinates')))})}
else if(o[n]==='Polygon'){var g=r(a,'LinearRing'),m=[];for(p=0;p<g.length;p++){m.push(c(t(e(g[p],'coordinates'))))};s.push({type:'Polygon',coordinates:m})}
else if(o[n]==='Track'||o[n]==='gx:Track'){var h=w(a);s.push({type:'LineString',coordinates:h.coords});if(h.times.length)d.push(h.times)}}}};return{geoms:s,coordTimes:d}};function R(n){var l=k(n),a,o={},z=t(e(n,'name')),G=t(e(n,'address')),s=t(e(n,'styleUrl')),A=t(e(n,'description')),m=e(n,'TimeSpan'),C=e(n,'TimeStamp'),d=e(n,'ExtendedData'),u=e(n,'LineStyle'),f=e(n,'PolyStyle'),H=e(n,'visibility');if(!l.geoms.length)return[];if(z)o.name=z;if(G)o.address=G;if(s){if(s[0]!=='#'){s='#'+s};o.styleUrl=s;if(p[s]){o.styleHash=p[s]};if(y[s]){o.styleMapHash=y[s];o.styleHash=p[y[s].normal]};var g=L[o.styleHash];if(g){if(!u)u=e(g,'LineStyle');if(!f)f=e(g,'PolyStyle')}};if(A)o.description=A;if(m){var D=t(e(m,'begin')),U=t(e(m,'end'));o.timespan={begin:D,end:U}};if(C){o.timestamp=t(e(C,'when'))};if(u){var F=M(t(e(u,'color'))),P=F[0],w=F[1],R=parseFloat(t(e(u,'width')));if(P)o.stroke=P;if(!isNaN(w))o['stroke-opacity']=w;if(!isNaN(R))o['stroke-width']=R};if(f){var S=M(t(e(f,'color'))),T=S[0],x=S[1],N=t(e(f,'fill')),b=t(e(f,'outline'));if(T)o.fill=T;if(!isNaN(x))o['fill-opacity']=x;if(N)o['fill-opacity']=N==='1'?o['fill-opacity']||1:0;if(b)o['stroke-opacity']=b==='1'?o['stroke-opacity']||1:0};if(d){var c=r(d,'Data'),h=r(d,'SimpleData');for(a=0;a<c.length;a++){o[c[a].getAttribute('name')]=t(e(c[a],'value'))};for(a=0;a<h.length;a++){o[h[a].getAttribute('name')]=t(h[a])}};if(H){o.visibility=t(H)};if(l.coordTimes.length){o.coordTimes=(l.coordTimes.length===1)?l.coordTimes[0]:l.coordTimes};var v={type:'Feature',geometry:(l.geoms.length===1)?l.geoms[0]:{type:'GeometryCollection',geometries:l.geoms},properties:o};if(i(n,'id'))v.id=i(n,'id');return[v]};return x},gpx:function(o){var s,c=r(o,'trk'),g=r(o,'rte'),m=r(o,'wpt'),f=h(),l;for(s=0;s<c.length;s++){l=v(c[s]);if(l)f.features.push(l)};for(s=0;s<g.length;s++){l=k(g[s]);if(l)f.features.push(l)};for(s=0;s<m.length;s++){f.features.push(S(m[s]))};function d(e,t){var o=r(e,t),a=[],s=[],l=[],f=o.length;if(f<2)return{};for(var n=0;n<f;n++){var i=p(o[n]);a.push(i.coordinates);if(i.time)s.push(i.time);if(i.heartRate)l.push(i.heartRate)};return{line:a,times:s,heartRates:l}};function v(t){var c=r(t,'trkseg'),o=[],s=[],l=[],i;for(var f=0;f<c.length;f++){i=d(c[f],'trkpt');if(i){if(i.line)o.push(i.line);if(i.times&&i.times.length)s.push(i.times);if(i.heartRates&&i.heartRates.length)l.push(i.heartRates)}};if(o.length===0)return;var a=u(t);n(a,y(e(t,'extensions')));if(s.length)a.coordTimes=o.length===1?s[0]:s;if(l.length)a.heartRates=o.length===1?l[0]:l;return{type:'Feature',properties:a,geometry:{type:o.length===1?'LineString':'MultiLineString',coordinates:o.length===1?o[0]:o}}};function k(t){var i=d(t,'rtept');if(!i.line)return;var r=u(t);n(r,y(e(t,'extensions')));var o={type:'Feature',properties:r,geometry:{type:'LineString',coordinates:i.line}};return o};function S(e){var t=u(e);n(t,a(e,['sym']));return{type:'Feature',properties:t,geometry:{type:'Point',coordinates:p(e).coordinates}}};function y(r){var n={};if(r){var i=e(r,'line');if(i){var o=t(e(i,'color')),a=parseFloat(t(e(i,'opacity'))),s=parseFloat(t(e(i,'width')));if(o)n.stroke=o;if(!isNaN(a))n['stroke-opacity']=a;if(!isNaN(s))n['stroke-width']=s*96/25.4}};return n};function u(e){var l=a(e,['name','cmt','desc','type','time','keywords']),o=r(e,'link');if(o.length)l.links=[];for(var t=0,s;t<o.length;t++){s={href:i(o[t],'href')};n(s,a(o[t],['text','type']));l.links.push(s)};return l};return f}};return m})();if(typeof module!=='undefined')module.exports=toGeoJSON;
(function(e,i){if(typeof define==='function'&&define.amd&&i.toGeoJSON){define(['leaflet'],function(t){e(t,i.toGeoJSON)})}
else if(typeof module==='object'&&module.exports){module.exports=function(t,o,r){if(o===undefined){if(typeof i!=='undefined'){o=require('leaflet')}
else{o=require('leaflet')(t)}};if(r===undefined){if(typeof i!=='undefined'){r=require('togeojson')}
else{r=require('togeojson')(t)}};e(o,r);return o}}
else if(typeof i!=='undefined'&&i.L&&i.toGeoJSON){e(i.L,i.toGeoJSON)}}(function(e,i){var o=e.Class.extend({includes:e.Mixin.Events,options:{layer:e.geoJson,layerOptions:{},fileSizeLimit:1024},initialize:function(i,t){this._map=i;e.Util.setOptions(this,t);this._parsers={geojson:this._loadGeoJSON,json:this._loadGeoJSON,gpx:this._convertToGeoJSON,kml:this._convertToGeoJSON}},load:function(i){var o,t;if(this._isParameterMissing(i,'file')){return!1};if(!this._isFileSizeOk(i.size)){return!1};t=this._getParser(i.name);if(!t){return!1};o=new FileReader();o.onload=e.Util.bind(function(e){var o;try{this.fire('data:loading',{filename:i.name,format:t.ext});o=t.processor.call(this,e.target.result,t.ext);this.fire('data:loaded',{layer:o,filename:i.name,format:t.ext})}catch(r){this.fire('data:error',{error:r})}},this);if(!i.testing){o.readAsText(i)};return o},loadData:function(e,i,o){var t,r;if((this._isParameterMissing(e,'data'))||(this._isParameterMissing(i,'name'))){return};if(!this._isFileSizeOk(e.length)){return};t=this._getParser(i,o);if(!t){return};try{this.fire('data:loading',{filename:i,format:t.ext});r=t.processor.call(this,e,t.ext);this.fire('data:loaded',{layer:r,filename:i,format:t.ext})}catch(n){this.fire('data:error',{error:n})}},_isParameterMissing:function(e,i){if(typeof e==='undefined'){this.fire('data:error',{error:new Error('Missing parameter: '+i)});return!0};return!1},_getParser:function(e,i){var t;i=i||e.split('.').pop();t=this._parsers[i];if(!t){this.fire('data:error',{error:new Error('Unsupported file type ('+i+')')});return undefined};return{processor:t,ext:i}},_isFileSizeOk:function(e){var i=(e/1024).toFixed(4);if(i>this.options.fileSizeLimit){this.fire('data:error',{error:new Error('File size exceeds limit ('+i+' > '+this.options.fileSizeLimit+'kb)')});return!1};return!0},_loadGeoJSON:function(e){var i;if(typeof e==='string'){e=JSON.parse(e)};i=this.options.layer(e,this.options.layerOptions);if(i.getLayers().length===0){throw new Error('GeoJSON has no valid layers.')};if(this.options.addToMap){i.addTo(this._map)};return i},_convertToGeoJSON:function(e,t){var o;if(typeof e==='string'){e=(new window.DOMParser()).parseFromString(e,'text/xml')};o=i[t](e);return this._loadGeoJSON(o)}});var t=e.Control.extend({statics:{TITLE:'Load local file (GPX, KML, GeoJSON)',LABEL:'&#8965;'},options:{position:'topleft',fitBounds:!0,layerOptions:{},addToMap:!0,fileSizeLimit:1024},initialize:function(i){e.Util.setOptions(this,i);this.loader=null},onAdd:function(i){this.loader=e.Util.fileLoader(i,this.options);this.loader.on('data:loaded',function(e){if(this.options.fitBounds){window.setTimeout(function(){i.fitBounds(e.layer.getBounds())},500)}},this);this._initDragAndDrop(i);return this._initContainer()},_initDragAndDrop:function(e){var i,o=this,r=e._container,t={dragenter:function(){e.scrollWheelZoom.disable()},dragleave:function(){e.scrollWheelZoom.enable()},dragover:function(e){e.stopPropagation();e.preventDefault()},drop:function(i){i.stopPropagation();i.preventDefault();o._loadFiles(i.dataTransfer.files);e.scrollWheelZoom.enable()}};for(i in t){if(t.hasOwnProperty(i)){r.addEventListener(i,t[i],!1)}}},_initContainer:function(){var a=this,i,r='leaflet-control-filelayer leaflet-control-zoom',n='leaflet-bar',s=n+'-part',o=e.DomUtil.create('div',r+' '+n),t=e.DomUtil.create('a',r+'-in '+s,o);t.innerHTML=e.Control.FileLayerLoad.LABEL;t.href='#';t.title=e.Control.FileLayerLoad.TITLE;i=e.DomUtil.create('input','hidden',o);i.type='file';i.multiple='multiple';if(!this.options.formats){i.accept='.gpx,.kml,.geojson'}
else{i.accept=this.options.formats.join(',')};i.style.display='none';i.addEventListener('change',function(){a._loadFiles(this.files);this.value=''},!1);e.DomEvent.disableClickPropagation(t);e.DomEvent.on(t,'click',function(e){i.click();e.preventDefault()});return o},_loadFiles:function(e){var i=this.loader;e=Array.prototype.slice.apply(e);setTimeout(function(){i.load(e.shift());if(e.length>0){setTimeout(arguments.callee,25)}},25)}});e.Util.FileLoader=o;e.Util.fileLoader=function(i,t){return new e.Util.FileLoader(i,t)};e.Control.FileLayerLoad=t;e.Control.fileLayerLoad=function(i){return new e.Control.FileLayerLoad(i)}},window));
;L.Control.Click=L.Control.extend({options:{position:'topleft',title:'Click to launch action',label:'X'},initialize:function(t,i){this._url=t;L.Util.setOptions(this,i)},onAdd:function(o){var i=L.DomUtil.create('div','leaflet-control-zoom leaflet-bar'),t=L.DomUtil.create('a','leaflet-control-zoom-in leaflet-bar-part',i);t.innerHTML=this.options.label;t.title=this.options.title;t.style.cursor='pointer';L.DomEvent.on(t,'click',function(){var i=typeof this._url=='function'?this._url():this._url;if(i)t.href=i},this);return i}});
;L.Control.EasyPrint=L.Control.extend({options:{title:'Print map',position:'topleft'},onAdd:function(){var e=L.DomUtil.create('div','leaflet-control-easyPrint leaflet-bar leaflet-control');this.link=L.DomUtil.create('a','leaflet-control-easyPrint-button leaflet-bar-part',e);this.link.id='leafletEasyPrint';this.link.title=this.options.title;L.DomEvent.addListener(this.link,'click',printPage,this.options);return e}});L.easyPrint=function(e){return new L.Control.EasyPrint(e)};function printPage(){if(this.elementsToHide){var t=document.querySelectorAll(this.elementsToHide);for(var e=0;e<t.length;e++){t[e].className=t[e].className+' _epHidden'}};window.print();if(this.elementsToHide){var t=document.querySelectorAll(this.elementsToHide);for(var e=0;e<t.length;e++){t[e].className=t[e].className.replace(' _epHidden','')}}};
;L.Rrose=L.Popup.extend({_initLayout:function(){var t='leaflet-rrose',i=this._container=L.DomUtil.create('div',t+' '+this.options.className+' leaflet-zoom-animated'),n,o;if(this.options.closeButton){n=this._closeButton=L.DomUtil.create('a',t+'-close-button',i);n.href='#close';n.innerHTML='&#215;';L.DomEvent.on(n,'click',this._onCloseButtonClick,this)};var s=80,p=80;this.options.position='n';var a=p-this._map.latLngToContainerPoint(this._latlng).y;if(a>0){this.options.position='s'};var e=this._map.latLngToContainerPoint(this._latlng).x-(this._map.getSize().x-s);if(e>0){this.options.position+='w'}
else{e=s-this._map.latLngToContainerPoint(this._latlng).x;if(e>0){this.options.position+='e'}};if(/s/.test(this.options.position)){if(this.options.position==='s'){this._tipContainer=L.DomUtil.create('div',t+'-tip-container',i);o=this._wrapper=L.DomUtil.create('div',t+'-content-wrapper',i)}
else{this._tipContainer=L.DomUtil.create('div',t+'-tip-container '+t+'-tip-container-'+this.options.position,i);o=this._wrapper=L.DomUtil.create('div',t+'-content-wrapper '+t+'-content-wrapper-'+this.options.position,i)};this._tip=L.DomUtil.create('div',t+'-tip '+t+'-tip-'+this.options.position,this._tipContainer);L.DomEvent.disableClickPropagation(o);this._contentNode=L.DomUtil.create('div',t+'-content',o);L.DomEvent.on(this._contentNode,'mousewheel',L.DomEvent.stopPropagation)}
else{if(this.options.position==='n'){o=this._wrapper=L.DomUtil.create('div',t+'-content-wrapper',i);this._tipContainer=L.DomUtil.create('div',t+'-tip-container',i)}
else{o=this._wrapper=L.DomUtil.create('div',t+'-content-wrapper '+t+'-content-wrapper-'+this.options.position,i);this._tipContainer=L.DomUtil.create('div',t+'-tip-container '+t+'-tip-container-'+this.options.position,i)};L.DomEvent.disableClickPropagation(o);this._contentNode=L.DomUtil.create('div',t+'-content',o);L.DomEvent.on(this._contentNode,'mousewheel',L.DomEvent.stopPropagation);this._tip=L.DomUtil.create('div',t+'-tip '+t+'-tip-'+this.options.position,this._tipContainer)}},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng),i=L.Browser.any3d,o=this.options.offset;if(i){L.DomUtil.setPosition(this._container,t)};if(/s/.test(this.options.position)){this._containerBottom=-this._container.offsetHeight+o.y-(i?0:t.y)}
else{this._containerBottom=-o.y-(i?0:t.y)};if(/e/.test(this.options.position)){this._containerLeft=o.x+(i?0:t.x)}
else if(/w/.test(this.options.position)){this._containerLeft=-Math.round(this._containerWidth)+o.x+(i?0:t.x)}
else{this._containerLeft=-Math.round(this._containerWidth/2)+o.x+(i?0:t.x)};this._container.style.bottom=this._containerBottom+'px';this._container.style.left=this._containerLeft+'px'}});
;L.Marker.include({setStyle:function(t){L.setOptions(this,t);if(this._map){this._initIcon();this.update()};return this},});L.GeoJSON.Style=L.GeoJSON.extend({_setLayerStyle:function(o,e){var t=L.extend({popupAnchor:[0,-8],popupClass:'',popupValidity:100},o.feature.properties,typeof e=='function'?e.call(this,o.feature):e);if(t.iconUrl&&typeof o.setIcon=='function')o.setIcon(L.icon(t));function i(o){o=o.originalEvent||o;if(o.shiftKey||o.ctrlKey)window.open(t.url);else document.location.href=t.url};o.on('mouseover mousemove',function(o){if(t.popup){var e=new(L.Rrose||L.Popup)({offset:new L.Point(t.popupAnchor[0],t.popupAnchor[1]),className:t.popupClass,closeButton:!1,autoPan:!1});e.setContent(t.popup).setLatLng(o.latlng).openOn(this._map);if(t.url){e._container.style.cursor='pointer';e._container.addEventListener('click',i,!1)};this.popupLatlng=o.latlng}},this);if(this._map){if(t.popupValidity)this._map.on('mousemove',function(o){if(typeof this.popupLatlng=='object'){var e=this._map.latLngToLayerPoint(this.popupLatlng),i=Math.hypot(e.x-o.layerPoint.x,e.y-o.layerPoint.y);if(i>t.popupValidity)this._closePopup()}},this);else o.on('mouseout',this._closePopup,this);this._map.on('mouseout',this._closePopup,this)};if(t.url)o.on('click',i);o.on('mouseover',function(e){if(t.degroup)this._degroup(o,t.degroup)},this);if(typeof t.draggable=='function')o.on('dragstart drag dragend',t.draggable,this);L.GeoJSON.prototype._setLayerStyle.call(this,o,t)},_closePopup:function(){if(this._map)this._map.closePopup();delete this.popupLatlng},_degroup:function(o,i){var e=o._latlng;if(e){var a=this._map.latLngToLayerPoint(e);for(l in this._layers){var t=this._layers[l];if(!t._lli)t._lli=t._latlng;if(t._latlng&&o._leaflet_id!=t._leaflet_id){var p=this._map.latLngToLayerPoint(t._lli),n=p.distanceTo(a);if(!n)t.setLatLng(this._map.layerPointToLatLng(p.add([i,0])));else t.setLatLng(n>i?t._lli:[e.lat+(t._lli.lat-e.lat)*i/n,e.lng+(t._lli.lng-e.lng)*i/n])}}}}});
;L.GeoJSON.Ajax=L.GeoJSON.Style.extend({ajaxRequest:null,options:{urlGeoJSON:null,argsGeoJSON:{},idAjaxStatus:null},initialize:function(t,e){if(typeof t=='string')this.options.urlGeoJSON=t;else e=e||t;L.GeoJSON.Style.prototype.initialize.call(this,null,e);this.elAjaxStatus=document.getElementById(this.options.idAjaxStatus)||document.createElement('div');if(window.XMLHttpRequest)this.ajaxRequest=new XMLHttpRequest();else if(window.ActiveXObject)this.ajaxRequest=new ActiveXObject('Microsoft.XMLHTTP');else{return};this.ajaxRequest.context=this;this.ajaxRequest.onreadystatechange=this._onreadystatechange},onAdd:function(t){L.GeoJSON.Style.prototype.onAdd.call(this,t);this.reload();if(this.options.bbox)this._map.on('moveend',this.reload,this)},onRemove:function(t){this.elAjaxStatus.className='';this._map.off('moveend',this.reload,this);L.GeoJSON.Style.prototype.onRemove.call(this,t)},_getUrl:function(){var t=typeof this.options.argsGeoJSON=='function'?this.options.argsGeoJSON.call(this,this):this.options.argsGeoJSON;if(this.options.bbox&&this._map)t.bbox=this._map.getBounds().toBBoxString();return this.options.urlGeoJSON+L.Util.getParamString(t)},reload:function(){if(this.ajaxRequest){this.ajaxRequest.open('GET',this._getUrl(),!0);if(this.options.disabled){this.redraw();this.elAjaxStatus.className='ajax-none';return};if(this._map){var t=this._map.getBounds();if(t._northEast.lng-t._southWest.lng>this.options.maxLatAperture){this.elAjaxStatus.className='ajax-zoom';this.redraw();return}};this.ajaxRequest.send(null);this.elAjaxStatus.className='ajax-wait'}},_onreadystatechange:function(t){if(t.target.readyState<3);else if(t.target.status==200)t.target.context.redraw(t.target.responseText,t.target.status);else if(typeof t.target.context['error'+t.target.status]=='function')t.target.context['error'+t.target.status].call(t.target.context)},redraw:function(t,a){for(l in this._layers)if(this._map)this._map.removeLayer(this._layers[l]);this._layers=[];if(t){try{var e=JSON.parse(t)}catch(s){if(typeof a=='undefined'||a==4){this.elAjaxStatus.className='ajax-error'};return};e=this._tradJson.call(this,e);this.addData(e);if(this.elAjaxStatus.className=='ajax-wait')this.elAjaxStatus.className=e.length||(e.features&&e.features.length)?'ajax-some':'ajax-zero'}},_tradJson:function(t){return t}});
;L.Control.Layers.argsGeoJSON=L.Control.Layers.extend({_kl:document.cookie.match(/layerargs=([^;]+)/),_ac:window.location.search.match(/cookie=([^&]*)/),initialize:function(a,e,t){this.jsonLayer=a;for(i in e){e[i].on=function(){};e[i].options={}};L.Control.Layers.prototype.initialize.call(this,{},e,t)},onAdd:function(i){var o=L.Control.Layers.prototype.onAdd.call(this,i),l=this._ac?this._ac[1].split(','):this._kl?this._kl[1].split(','):[],r=null,a=this._form.getElementsByTagName('input');for(var e=0;e<a.length;e++){var t=this._getLayer(a[e].layerId);if(r&&r!=t.layer.p)a[e].parentElement.className='overlay-separator';r=t.layer.p;a[e].checked=l.indexOf(t.name)!=-1||!this._kl};this._onInputClick();return o},_onInputClick:function(){var o=[],t={},l={},r=this._form.getElementsByTagName('input');for(var a=0;a<this._layers.length;a++){var e=this._layers[a].layer;e.l.options.argsGeoJSON[e.p]='';t[e.l._leaflet_id]=e.l};for(var a=0;a<r.length;a++){var e=this._getLayer(r[a].layerId),i=e.layer.l.options.argsGeoJSON;if(r[a].checked){i[e.layer.p]+=(i[e.layer.p]?',':'')+e.layer.v;o.push(e.name)}};document.cookie='layerargs='+o.join(',')+';path=/';for(id in t)t[id].reload()}});
;L.GeoJSON.Ajax.OSM=L.GeoJSON.Ajax.extend({options:{urlGeoJSON:'//api.openstreetmap.fr/oapi/interpreter',bbox:!0,maxLatAperture:0.25,timeout:25,maxPoints:500,services:{},icons:{},language:{min:''},argsGeoJSON:function(){var t=document.getElementsByName('osm-categories[]');if(t.length){this.options.services={};for(var e=0;e<t.length;e++)if(t[e].checked)this.options.services[t[e].id]=t[e].value};this.options.disabled=!Object.keys(this.options.services).length;var a='[out:json][timeout:'+this.options.timeout+'];(\n',o=this._map.getBounds(),n=o._southWest.lat+','+o._southWest.lng+','+o._northEast.lat+','+o._northEast.lng;for(var i in this.options.services){var s=this.options.services[i]+'('+n+');\n';a+='node'+s+'way'+s};return{data:a+');out center;>;'}}},label:function(t){var e=t.tags;return{name:'<b>'+e.name+'</b>',description:[t.icon_name,'*'.repeat(e.stars),e.rooms?e.rooms+' rooms':'',e.place?e.place+' places':'',e.capacity?e.capacity+' places':'','<a href="http://www.openstreetmap.org/'+(t.center?'way':'node')+'/'+t.id+'">&copy;</a>'],phone:'<a href="tel:'+e.phone.replace(/[^0-9\+]+/ig,'')+'">'+e.phone+'</a>',email:'<a href="mailto:'+e.email+'">'+e.email+'</a>',address:[e['addr:housenumber'],e['addr:street'],e['addr:postcode'],e['addr:city']],website:'<a href="'+e.website+'>'+e.website+'</a>'}},_tradJson:function(a){if(a.remark)this.elAjaxStatus.className='ajax-zoom';var p=[];if(a.elements.length>this.options.maxPoints)this.elAjaxStatus.className='ajax-too';else for(var c in a.elements){var t=a.elements[c],e=t.tags,r=null;for(s in this.options.services)for(ti in e)if(this.options.services[s].indexOf(ti)!=-1&&e[ti]&&this.options.services[s].indexOf(e[ti])!=-1){t.icon_name=r=s;t.tag=e[ti]};if(!e.phone)e.phone=e['contact:phone']||'';delete e['contact:phone'];var o=typeof this.options.label=='function'?o=this.options.label(t,o):this.label(t),i=this.options.language,n=o.description.join(' ').replace(new RegExp(Object.keys(i).join('|'),'gi'),function(e){return i[e.toLowerCase()]}),l=[e.name?o.name:'',n.charAt(0).toUpperCase()+n.substr(1),e.ele?o.altitude:'',e.phone?o.phone:'',e.email?o.email:'',e['addr:street']?o.address.join(' '):'',e.website?o.website:'',e.ext1,e.ext2,e.ext3];if(t.center){t.lat=t.center.lat;t.lon=t.center.lon};if(t.type&&t.lon&&t.lat)p.push({type:'Feature',id:t.id,properties:{icon_name:r,popup:('<p>'+l.join('</p><p>')+'</p>').replace(/<p>\s*<\/p>/ig,'')},geometry:{type:'Point',coordinates:[t.lon,t.lat]}})};return p},error429:function(){this.elAjaxStatus.className='ajax-zoom'},error504:function(){this.elAjaxStatus.className='ajax-zoom'}});
;L.extend(L.CRS,{title:{lng:"Longitude",lat:"Latitude"},format:function(e){if(e<1000)return Math.round(e);var t=Math.floor(e/1000000),n=Math.floor((e-t*1000000)/1000),a=Math.round(e-t*1000000-n*1000);if(a>=1000){n++;a-=1000};if(n>=1000){t++;n-=1000};return(t===0?"":t+" ")+(t+n===0?"":(n<100?"0":"")+(n<10?"0":"")+n+" ")+(a<100?"0":"")+(a<10?"0":"")+a},unformat:function(e){if(!e)return 0;else return e.replace(/\s/g,"").replace(/,/g,".")}});L.CRS.decimal=L.extend({},L.CRS.EPSG4326,{name:"Degrés décimaux",format:function(e){return Math.round(e*100000)/100000}});L.CRS.degminsec=L.extend({},L.CRS.decimal,{name:"Deg Min Sec",format:function(e){var a=Math.floor(Math.abs(e)),r=(Math.abs(e)-a)*60,n=Math.floor(r),t=Math.round((r-n)*600)/10;if(t>=60){n++;t-=60};if(n>=60){a++;n-=60};return(e<0?"-":"")+a+"°"+(n<10?"0":"")+n+"'"+(t<10?"0":"")+t+"\""},unformat:function(e){va="0"+e.replace(/\s/g,"").replace(/,/g,".").replace(/-/g,"")+"°0°";vs=va.replace(/'|"/g,"°").split("°");return(e[0]=="-"?-1:1)*(parseFloat(vs[0])+parseFloat(0+vs[1])/60+parseFloat(0+vs[2])/3600)}});L.CRS.degmin=L.extend({},L.CRS.degminsec,{name:"Deg Min",format:function(e){var t=Math.floor(Math.abs(e)),n=Math.round((Math.abs(e)-t)*60*1000)/1000;if(n>=60){t++;n-=60};return(e<0?"-":"")+t+"°"+(n<10?"0":"")+n+"'"}});for(var u=28;u<=35;u++)L.CRS["EPSG326"+u]=L.extend(new L.Proj.CRS("EPSG:326"+u,"+proj=utm +zone="+u+" +ellps=WGS84 +datum=WGS84 +units=m +no_defs"),{bounds:L.bounds([6*u-186,0],[6*u-180,84]),name:"UTM "+u+"N"});L.CRS.EPSG32630.name+=" (France ouest)";L.CRS.EPSG32631.name+=" (France centre)";L.CRS.EPSG32632.name+=" (France est)";L.CRS.EPSG32633.name+=" (Autriche)";L.CRS.EPSG27571=L.extend(new L.Proj.CRS("EPSG:27571","+title=Lambert zone 1 , LCC +proj=lcc +lat_1=49.5 +lat_0=49.5 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs"),{bounds:L.bounds([-5.2,48.15],[8.23,51.1]),name:"Lambert I (Nord)"});L.CRS.EPSG27572=L.extend({},L.CRS.EPSG27571,new L.Proj.CRS("EPSG:27572","+title=Lambert 2 étendue, LCC +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs"),{bounds:L.bounds([-5.2,42.25],[8.23,51.1]),name:"Lambert II (Centre)"});L.CRS.EPSG27573=L.extend({},L.CRS.EPSG27571,new L.Proj.CRS("EPSG:27573","+title=Lambert zone 3, LCC +proj=lcc +lat_1=44.1 +lat_0=44.1 +lon_0=0 +k_0=0.999877499 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs"),{bounds:L.bounds([-1.76,42.33],[7.77,45.45]),name:"Lambert III (Sud)"});L.CRS.EPSG27574=L.extend({},L.CRS.EPSG27571,new L.Proj.CRS("EPSG:27574","+title=Lambert zone 4, +proj=lcc +lat_1=42.165 +lat_0=42.165 +lon_0=0 +k_0=0.99994471 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs"),{bounds:L.bounds([8.5,41.33],[9.6,43.05]),name:"Lambert IV (Corse)"});
;L.Marker.include({coordinates:function(o){this._elCoordinate=o;var t=document.getElementById(o+'-json');if(t){var n=t.innerHTML||t.value;if(n){var e=JSON.parse(n).coordinates;if(e)this.setLatLng([e[1],e[0]])}};this._displayCoord();this.on('move',this._displayCoord,this);return this},_displayCoord:function(){var r=this,t=r._latlng,a='decimal';if(!t)return;var e=document.getElementById(this._elCoordinate+'-select');if(e){if(e.value)a=e.value;while(e.hasChildNodes())e.removeChild(e.firstChild);for(c in L.CRS)if(L.CRS[c].name&&typeof L.CRS[c]=='object'&&(!L.CRS[c].bounds||L.CRS[c].bounds.contains([t.lng,t.lat]))){var i=document.createElement('option');i.value=c;if(c==a)i.selected='selected';i.appendChild(document.createTextNode(L.CRS[c].name));e.appendChild(i)};e.onchange=function(){r._displayCoord()}};var o=L.extend({},L.CRS,L.CRS[a]);var u=L.Projection.LonLat.unproject(o.projection.project(t));for(l in t){var s={title:o.title[l],deg:t[l],proj:o.format(u[l]),json:JSON.stringify(this.toGeoJSON().geometry)};for(v in s){var n=document.getElementById([this._elCoordinate,v,l].join('-'))||document.getElementById([this._elCoordinate,v].join('-'));if(n){var d=typeof n.value!='undefined'?'value':'innerHTML';n[d]=s[v];n.onchange=function(){var a={};for(l in t){var i=this.id.split('-');i[2]=l;var n=document.getElementById(i.join('-'));if(n)a[l]=o.unformat(n[d])};var e=o.projection.unproject(L.Projection.LonLat.project(a));r.setLatLng(e);r._map.panTo(e)}}}}}});
;L.drawVersion='0.4.2';L.Draw={};L.drawLocal={draw:{toolbar:{actions:{title:'Cancel drawing',text:'Cancel'},finish:{title:'Finish drawing',text:'Finish'},undo:{title:'Delete last point drawn',text:'Delete last point'},buttons:{polyline:'Draw a polyline',polygon:'Draw a polygon',rectangle:'Draw a rectangle',circle:'Draw a circle',marker:'Draw a marker'}},handlers:{circle:{tooltip:{start:'Click and drag to draw circle.'},radius:'Radius'},marker:{tooltip:{start:'Click map to place marker.'}},polygon:{tooltip:{start:'Click to start drawing shape.',cont:'Click to continue drawing shape.',end:'Click first point to close this shape.'}},polyline:{error:'<strong>Error:</strong> shape edges cannot cross!',tooltip:{start:'Click to start drawing line.',cont:'Click to continue drawing line.',end:'Click last point to finish line.'}},rectangle:{tooltip:{start:'Click and drag to draw rectangle.'}},simpleshape:{tooltip:{end:'Release mouse to finish drawing.'}}}},edit:{toolbar:{actions:{save:{title:'Save changes.',text:'Save'},cancel:{title:'Cancel editing, discards all changes.',text:'Cancel'}},buttons:{edit:'Edit layers.',editDisabled:'No layers to edit.',remove:'Delete layers.',removeDisabled:'No layers to delete.'}},handlers:{edit:{tooltip:{text:'Drag handles, or marker to edit feature.',subtext:'Click cancel to undo changes.'}},remove:{tooltip:{text:'Click on a feature to remove'}}}}};
;L.Draw.Event={};L.Draw.Event.CREATED='draw:created';L.Draw.Event.EDITED='draw:edited';L.Draw.Event.DELETED='draw:deleted';L.Draw.Event.DRAWSTART='draw:drawstart';L.Draw.Event.DRAWSTOP='draw:drawstop';L.Draw.Event.DRAWVERTEX='draw:drawvertex';L.Draw.Event.EDITSTART='draw:editstart';L.Draw.Event.EDITMOVE='draw:editmove';L.Draw.Event.EDITRESIZE='draw:editresize';L.Draw.Event.EDITVERTEX='draw:editvertex';L.Draw.Event.EDITSTOP='draw:editstop';L.Draw.Event.DELETESTART='draw:deletestart';L.Draw.Event.DELETESTOP='draw:deletestop';
;L.Draw=L.Draw||{};L.Draw.Feature=L.Handler.extend({includes:L.Mixin.Events,initialize:function(e,t){this._map=e;this._container=e._container;this._overlayPane=e._panes.overlayPane;this._popupPane=e._panes.popupPane;if(t&&t.shapeOptions){t.shapeOptions=L.Util.extend({},this.options.shapeOptions,t.shapeOptions)};L.setOptions(this,t)},enable:function(){if(this._enabled){return};L.Handler.prototype.enable.call(this);this.fire('enabled',{handler:this.type});this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type})},disable:function(){if(!this._enabled){return};L.Handler.prototype.disable.call(this);this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type});this.fire('disabled',{handler:this.type})},addHooks:function(){var e=this._map;if(e){L.DomUtil.disableTextSelection();e.getContainer().focus();this._tooltip=new L.Draw.Tooltip(this._map);L.DomEvent.on(this._container,'keyup',this._cancelDrawing,this)}},removeHooks:function(){if(this._map){L.DomUtil.enableTextSelection();this._tooltip.dispose();this._tooltip=null;L.DomEvent.off(this._container,'keyup',this._cancelDrawing,this)}},setOptions:function(e){L.setOptions(this,e)},_fireCreatedEvent:function(e){this._map.fire(L.Draw.Event.CREATED,{layer:e,layerType:this.type})},_cancelDrawing:function(e){this._map.fire('draw:canceled',{layerType:this.type});if(e.keyCode===27){this.disable()}}});
;L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:'polyline'},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:'#b00b00',timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:'leaflet-div-icon leaflet-editing-icon'}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:'leaflet-div-icon leaflet-editing-icon leaflet-touch-icon'}),guidelineDistance:20,maxGuideLineLength:4000,shapeOptions:{stroke:!0,color:'#f06eaa',weight:4,opacity:0.5,fill:!1,clickable:!0},metric:!0,feet:!0,showLength:!0,zIndexOffset:2000},initialize:function(t,e){if(L.Browser.touch){this.options.icon=this.options.touchIcon};this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error;if(e&&e.drawError){e.drawError=L.Util.extend({},this.options.drawError,e.drawError)};this.type=L.Draw.Polyline.TYPE;L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this);if(this._map){this._markers=[];this._markerGroup=new L.LayerGroup();this._map.addLayer(this._markerGroup);this._poly=new L.Polyline([],this.options.shapeOptions);this._tooltip.updateContent(this._getTooltipText());if(!this._mouseMarker){this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:'leaflet-mouse-marker',iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})};if(!L.Browser.touch){this._map.on('mouseup',this._onMouseUp,this)};this._mouseMarker.on('mousedown',this._onMouseDown,this).on('mouseout',this._onMouseOut,this).on('mouseup',this._onMouseUp,this).on('mousemove',this._onMouseMove,this).addTo(this._map);this._map.on('mouseup',this._onMouseUp,this).on('mousemove',this._onMouseMove,this).on('zoomlevelschange',this._onZoomEnd,this).on('click',this._onTouch,this).on('zoomend',this._onZoomEnd,this)}},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this);this._clearHideErrorTimeout();this._cleanUpShape();this._map.removeLayer(this._markerGroup);delete this._markerGroup;delete this._markers;this._map.removeLayer(this._poly);delete this._poly;this._mouseMarker.off('mousedown',this._onMouseDown,this).off('mouseout',this._onMouseOut,this).off('mouseup',this._onMouseUp,this).off('mousemove',this._onMouseMove,this);this._map.removeLayer(this._mouseMarker);delete this._mouseMarker;this._clearGuides();this._map.off('mouseup',this._onMouseUp,this).off('mousemove',this._onMouseMove,this).off('zoomlevelschange',this._onZoomEnd,this).off('zoomend',this._onZoomEnd,this).off('click',this._onTouch,this)},deleteLastVertex:function(){if(this._markers.length<=1){return};var i=this._markers.pop(),t=this._poly,e=t.getLatLngs(),o=e.splice(-1,1)[0];this._poly.setLatLngs(e);this._markerGroup.removeLayer(i);if(t.getLatLngs().length<2){this._map.removeLayer(t)};this._vertexChanged(o,!1)},addVertex:function(t){var e=this._markers.length;if(e>0&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(t)){this._showErrorTooltip();return}
else if(this._errorShown){this._hideErrorTooltip()};this._markers.push(this._createMarker(t));this._poly.addLatLng(t);if(this._poly.getLatLngs().length===2){this._map.addLayer(this._poly)};this._vertexChanged(t,!0)},completeShape:function(){if(this._markers.length<=1){return};this._fireCreatedEvent();this.disable();if(this.options.repeatMode){this.enable()}},_finishShape:function(){var t=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),e=this._poly.newLatLngIntersects(t[t.length-1]);if((!this.options.allowIntersection&&e)||!this._shapeIsValid()){this._showErrorTooltip();return};this._fireCreatedEvent();this.disable();if(this.options.repeatMode){this.enable()}},_shapeIsValid:function(){return!0},_onZoomEnd:function(){if(this._markers!==null){this._updateGuide()}},_onMouseMove:function(t){var i=this._map.mouseEventToLayerPoint(t.originalEvent),e=this._map.layerPointToLatLng(i);this._currentLatLng=e;this._updateTooltip(e);this._updateGuide(i);this._mouseMarker.setLatLng(e);L.DomEvent.preventDefault(t.originalEvent)},_vertexChanged:function(t,e){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup});this._updateFinishHandler();this._updateRunningMeasure(t,e);this._clearGuides();this._updateTooltip()},_onMouseDown:function(t){var e=t.originalEvent;this._mouseDownOrigin=L.point(e.clientX,e.clientY)},_onMouseUp:function(t){if(this._mouseDownOrigin){var e=L.point(t.originalEvent.clientX,t.originalEvent.clientY).distanceTo(this._mouseDownOrigin);if(Math.abs(e)<9*(window.devicePixelRatio||1)){this.addVertex(t.latlng)}};this._mouseDownOrigin=null},_onTouch:function(t){if(L.Browser.touch){this._onMouseDown(t);this._onMouseUp(t)}},_onMouseOut:function(){if(this._tooltip){this._tooltip._onMouseOut.call(this._tooltip)}},_updateFinishHandler:function(){var t=this._markers.length;if(t>1){this._markers[t-1].on('click',this._finishShape,this)};if(t>2){this._markers[t-2].off('click',this._finishShape,this)}},_createMarker:function(t){var e=new L.Marker(t,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset*2});this._markerGroup.addLayer(e);return e},_updateGuide:function(t){var e=this._markers?this._markers.length:0;if(e>0){t=t||this._map.latLngToLayerPoint(this._currentLatLng);this._clearGuides();this._drawGuide(this._map.latLngToLayerPoint(this._markers[e-1].getLatLng()),t)}},_updateTooltip:function(t){var e=this._getTooltipText();if(t){this._tooltip.updatePosition(t)};if(!this._errorShown){this._tooltip.updateContent(e)}},_drawGuide:function(t,e){var o=Math.floor(Math.sqrt(Math.pow((e.x-t.x),2)+Math.pow((e.y-t.y),2))),h=this.options.guidelineDistance,n=this.options.maxGuideLineLength,s=o>n?o-n:h,i,a,r;if(!this._guidesContainer){this._guidesContainer=L.DomUtil.create('div','leaflet-draw-guides',this._overlayPane)};for(;s<o;s+=this.options.guidelineDistance){i=s/o;a={x:Math.floor((t.x*(1-i))+(i*e.x)),y:Math.floor((t.y*(1-i))+(i*e.y))};r=L.DomUtil.create('div','leaflet-draw-guide-dash',this._guidesContainer);r.style.backgroundColor=!this._errorShown?this.options.shapeOptions.color:this.options.drawError.color;L.DomUtil.setPosition(r,a)}},_updateGuideColor:function(t){if(this._guidesContainer){for(var e=0,i=this._guidesContainer.childNodes.length;e<i;e++){this._guidesContainer.childNodes[e].style.backgroundColor=t}}},_clearGuides:function(){if(this._guidesContainer){while(this._guidesContainer.firstChild){this._guidesContainer.removeChild(this._guidesContainer.firstChild)}}},_getTooltipText:function(){var i=this.options.showLength,t,e;if(this._markers.length===0){t={text:L.drawLocal.draw.handlers.polyline.tooltip.start}}
else{e=i?this._getMeasurementString():'';if(this._markers.length===1){t={text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:e}}
else{t={text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:e}}};return t},_updateRunningMeasure:function(t,e){var s=this._markers.length,i,o;if(this._markers.length===1){this._measurementRunningTotal=0}
else{i=s-(e?2:1);o=t.distanceTo(this._markers[i].getLatLng());this._measurementRunningTotal+=o*(e?1:-1)}},_getMeasurementString:function(){var e=this._currentLatLng,i=this._markers[this._markers.length-1].getLatLng(),t;t=this._measurementRunningTotal+e.distanceTo(i);return L.GeometryUtil.readableDistance(t,this.options.metric,this.options.feet)},_showErrorTooltip:function(){this._errorShown=!0;this._tooltip.showAsError().updateContent({text:this.options.drawError.message});this._updateGuideColor(this.options.drawError.color);this._poly.setStyle({color:this.options.drawError.color});this._clearHideErrorTimeout();this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1;this._clearHideErrorTimeout();this._tooltip.removeError().updateContent(this._getTooltipText());this._updateGuideColor(this.options.shapeOptions.color);this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){if(this._hideErrorTimeout){clearTimeout(this._hideErrorTimeout);this._hideErrorTimeout=null}},_cleanUpShape:function(){if(this._markers.length>1){this._markers[this._markers.length-1].off('click',this._finishShape,this)}},_fireCreatedEvent:function(){var t=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}});
;L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:'polygon'},Poly:L.Polygon,options:{showArea:!1,shapeOptions:{stroke:!0,color:'#f06eaa',weight:4,opacity:0.5,fill:!0,fillColor:null,fillOpacity:0.2,clickable:!0},metric:!0},initialize:function(i,t){L.Draw.Polyline.prototype.initialize.call(this,i,t);this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var i=this._markers.length;if(i===1){this._markers[0].on('click',this._finishShape,this)};if(i>2){this._markers[i-1].on('dblclick',this._finishShape,this);if(i>3){this._markers[i-2].off('dblclick',this._finishShape,this)}}},_getTooltipText:function(){var i,t;if(this._markers.length===0){i=L.drawLocal.draw.handlers.polygon.tooltip.start}
else if(this._markers.length<3){i=L.drawLocal.draw.handlers.polygon.tooltip.cont}
else{i=L.drawLocal.draw.handlers.polygon.tooltip.end;t=this._getMeasurementString()};return{text:i,subtext:t}},_getMeasurementString:function(){var i=this._area;if(!i){return null};return L.GeometryUtil.readableArea(i,this.options.metric)},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(i,t){var e;if(!this.options.allowIntersection&&this.options.showArea){e=this._poly.getLatLngs();this._area=L.GeometryUtil.geodesicArea(e)};L.Draw.Polyline.prototype._vertexChanged.call(this,i,t)},_cleanUpShape:function(){var i=this._markers.length;if(i>0){this._markers[0].off('click',this._finishShape,this);if(i>2){this._markers[i-1].off('dblclick',this._finishShape,this)}}}});
;L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:'marker'},options:{icon:new L.Icon.Default(),repeatMode:!1,zIndexOffset:2000},initialize:function(t,e){this.type=L.Draw.Marker.TYPE;L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this);if(this._map){this._tooltip.updateContent({text:L.drawLocal.draw.handlers.marker.tooltip.start});if(!this._mouseMarker){this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:'leaflet-mouse-marker',iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})};this._mouseMarker.on('click',this._onClick,this).addTo(this._map);this._map.on('mousemove',this._onMouseMove,this);this._map.on('click',this._onTouch,this)}},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this);if(this._map){if(this._marker){this._marker.off('click',this._onClick,this);this._map.off('click',this._onClick,this).off('click',this._onTouch,this).removeLayer(this._marker);delete this._marker};this._mouseMarker.off('click',this._onClick,this);this._map.removeLayer(this._mouseMarker);delete this._mouseMarker;this._map.off('mousemove',this._onMouseMove,this)}},_onMouseMove:function(e){var t=e.latlng;this._tooltip.updatePosition(t);this._mouseMarker.setLatLng(t);if(!this._marker){this._marker=new L.Marker(t,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset});this._marker.on('click',this._onClick,this);this._map.on('click',this._onClick,this).addLayer(this._marker)}
else{t=this._mouseMarker.getLatLng();this._marker.setLatLng(t)}},_onClick:function(){this._fireCreatedEvent();this.disable();if(this.options.repeatMode){this.enable()}},_onTouch:function(t){this._onMouseMove(t);this._onClick()},_fireCreatedEvent:function(){var t=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}});
;L.Edit=L.Edit||{};L.Edit.Poly=L.Handler.extend({options:{},initialize:function(t,i){this.latlngs=[t._latlngs];if(t._holes){this.latlngs=this.latlngs.concat(t._holes)};this._poly=t;L.setOptions(this,i);this._poly.on('revert-edited',this._updateLatLngs,this)},_defaultShape:function(){if(!L.Polyline._flat){return this._poly._latlngs};return L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]},_eachVertexHandler:function(t){for(var i=0;i<this._verticesHandlers.length;i++){t(this._verticesHandlers[i])}},addHooks:function(){this._initHandlers();this._eachVertexHandler(function(t){t.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(t){t.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(t){t.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var t=0;t<this.latlngs.length;t++){this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[t],this.options))}},_updateLatLngs:function(t){this.latlngs=[t.layer._latlngs];if(t.layer._holes){this.latlngs=this.latlngs.concat(t.layer._holes)}}});L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:'leaflet-div-icon leaflet-editing-icon'}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:'leaflet-div-icon leaflet-editing-icon leaflet-touch-icon'}),drawError:{color:'#b00b00',timeout:1000}},initialize:function(t,i,e){if(L.Browser.touch){this.options.icon=this.options.touchIcon};this._poly=t;if(e&&e.drawError){e.drawError=L.Util.extend({},this.options.drawError,e.drawError)};this._latlngs=i;L.setOptions(this,e)},_defaultShape:function(){if(!L.Polyline._flat){return this._latlngs};return L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},addHooks:function(){var t=this._poly;if(!(t instanceof L.Polygon)){t.options.fill=!1;if(t.options.editing){t.options.editing.fill=!1}};t.setStyle(t.options.editing);if(this._poly._map){this._map=this._poly._map;if(!this._markerGroup){this._initMarkers()};this._poly._map.addLayer(this._markerGroup)}},removeHooks:function(){var t=this._poly;t.setStyle(t.options.original);if(t._map){t._map.removeLayer(this._markerGroup);delete this._markerGroup;delete this._markers}},updateMarkers:function(){this._markerGroup.clearLayers();this._initMarkers()},_initMarkers:function(){if(!this._markerGroup){this._markerGroup=new L.LayerGroup()};this._markers=[];var s=this._defaultShape(),t,n,i,o;for(t=0,i=s.length;t<i;t++){o=this._createMarker(s[t],t);o.on('click',this._onMarkerClick,this);this._markers.push(o)};var e,r;for(t=0,n=i-1;t<i;n=t++){if(t===0&&!(L.Polygon&&(this._poly instanceof L.Polygon))){continue};e=this._markers[n];r=this._markers[t];this._createMiddleMarker(e,r);this._updatePrevNext(e,r)}},_createMarker:function(t,i){var e=new L.Marker.Touch(t,{draggable:!0,icon:this.options.icon,});e._origLatLng=t;e._index=i;e.on('dragstart',this._onMarkerDragStart,this).on('drag',this._onMarkerDrag,this).on('dragend',this._fireEdit,this).on('touchmove',this._onTouchMove,this).on('touchend',this._fireEdit,this).on('MSPointerMove',this._onTouchMove,this).on('MSPointerUp',this._fireEdit,this);this._markerGroup.addLayer(e);return e},_onMarkerDragStart:function(){this._poly.fire('editstart')},_spliceLatLngs:function(){var t=this._defaultShape(),i=[].splice.apply(t,arguments);this._poly._convertLatLngs(t,!0);this._poly.redraw();return i},_removeMarker:function(t){var i=t._index;this._markerGroup.removeLayer(t);this._markers.splice(i,1);this._spliceLatLngs(i,1);this._updateIndexes(i,-1);t.off('dragstart',this._onMarkerDragStart,this).off('drag',this._onMarkerDrag,this).off('dragend',this._fireEdit,this).off('touchmove',this._onMarkerDrag,this).off('touchend',this._fireEdit,this).off('click',this._onMarkerClick,this).off('MSPointerMove',this._onTouchMove,this).off('MSPointerUp',this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0;this._poly.fire('edit');this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup})},_onMarkerDrag:function(t){var i=t.target,e=this._poly;L.extend(i._origLatLng,i._latlng);if(i._middleLeft){i._middleLeft.setLatLng(this._getMiddleLatLng(i._prev,i))};if(i._middleRight){i._middleRight.setLatLng(this._getMiddleLatLng(i,i._next))};if(e.options.poly){var r=e._map._editTooltip;if(!e.options.poly.allowIntersection&&e.intersects()){var n=e.options.color;e.setStyle({color:this.options.drawError.color});if(L.version.indexOf('0.7')!==0){i.dragging._draggable._onUp(t)};this._onMarkerClick(t);if(r){r.updateContent({text:L.drawLocal.draw.handlers.polyline.error})};setTimeout(function(){e.setStyle({color:n});if(r){r.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})}},1000)}};this._poly.redraw();this._poly.fire('editdrag')},_onMarkerClick:function(t){var e=L.Polygon&&(this._poly instanceof L.Polygon)?4:3,i=t.target;if(this._defaultShape().length<e){return};this._removeMarker(i);this._updatePrevNext(i._prev,i._next);if(i._middleLeft){this._markerGroup.removeLayer(i._middleLeft)};if(i._middleRight){this._markerGroup.removeLayer(i._middleRight)};if(i._prev&&i._next){this._createMiddleMarker(i._prev,i._next)}
else if(!i._prev){i._next._middleLeft=null}
else if(!i._next){i._prev._middleRight=null};this._fireEdit()},_onTouchMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent.touches[0]),r=this._map.layerPointToLatLng(e),i=t.target;L.extend(i._origLatLng,r);if(i._middleLeft){i._middleLeft.setLatLng(this._getMiddleLatLng(i._prev,i))};if(i._middleRight){i._middleRight.setLatLng(this._getMiddleLatLng(i,i._next))};this._poly.redraw();this.updateMarkers()},_updateIndexes:function(t,i){this._markerGroup.eachLayer(function(e){if(e._index>t){e._index+=i}})},_createMiddleMarker:function(t,e){var n=this._getMiddleLatLng(t,e),i=this._createMarker(n),s,r,o;i.setOpacity(0.6);t._middleRight=e._middleLeft=i;r=function(){i.off('touchmove',r,this);var o=e._index;i._index=o;i.off('click',s,this).on('click',this._onMarkerClick,this);n.lat=i.getLatLng().lat;n.lng=i.getLatLng().lng;this._spliceLatLngs(o,0,n);this._markers.splice(o,0,i);i.setOpacity(1);this._updateIndexes(o,1);e._index++;this._updatePrevNext(t,i);this._updatePrevNext(i,e);this._poly.fire('editstart')};o=function(){i.off('dragstart',r,this);i.off('dragend',o,this);i.off('touchmove',r,this);this._createMiddleMarker(t,i);this._createMiddleMarker(i,e)};s=function(){r.call(this);o.call(this);this._fireEdit()};i.on('click',s,this).on('dragstart',r,this).on('dragend',o,this).on('touchmove',r,this);this._markerGroup.addLayer(i)},_updatePrevNext:function(t,i){if(t){t._next=i};if(i){i._prev=t}},_getMiddleLatLng:function(t,i){var e=this._poly._map,r=e.project(t.getLatLng()),n=e.project(i.getLatLng());return e.unproject(r._add(n)._divideBy(2))}});L.Polyline.addInitHook(function(){if(this.editing){return};if(L.Edit.Poly){this.editing=new L.Edit.Poly(this,this.options.poly);if(this.options.editable){this.editing.enable()}};this.on('add',function(){if(this.editing&&this.editing.enabled()){this.editing.addHooks()}});this.on('remove',function(){if(this.editing&&this.editing.enabled()){this.editing.removeHooks()}})});
;L.Map.mergeOptions({touchExtend:!0});L.Map.TouchExtend=L.Handler.extend({initialize:function(t){this._map=t;this._container=t._container;this._pane=t._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,'touchstart',this._onTouchStart,this);L.DomEvent.on(this._container,'touchend',this._onTouchEnd,this);L.DomEvent.on(this._container,'touchmove',this._onTouchMove,this);if(this._detectIE()){L.DomEvent.on(this._container,'MSPointerDown',this._onTouchStart,this);L.DomEvent.on(this._container,'MSPointerUp',this._onTouchEnd,this);L.DomEvent.on(this._container,'MSPointerMove',this._onTouchMove,this);L.DomEvent.on(this._container,'MSPointerCancel',this._onTouchCancel,this)}
else{L.DomEvent.on(this._container,'touchcancel',this._onTouchCancel,this);L.DomEvent.on(this._container,'touchleave',this._onTouchLeave,this)}},removeHooks:function(){L.DomEvent.off(this._container,'touchstart',this._onTouchStart);L.DomEvent.off(this._container,'touchend',this._onTouchEnd);L.DomEvent.off(this._container,'touchmove',this._onTouchMove);if(this._detectIE()){L.DomEvent.off(this._container,'MSPointerDowm',this._onTouchStart);L.DomEvent.off(this._container,'MSPointerUp',this._onTouchEnd);L.DomEvent.off(this._container,'MSPointerMove',this._onTouchMove);L.DomEvent.off(this._container,'MSPointerCancel',this._onTouchCancel)}
else{L.DomEvent.off(this._container,'touchcancel',this._onTouchCancel);L.DomEvent.off(this._container,'touchleave',this._onTouchLeave)}},_touchEvent:function(t,o){var n={};if(typeof t.touches!=='undefined'){if(!t.touches.length){return};n=t.touches[0]}
else if(t.pointerType==='touch'){n=t;if(!this._filterClick(t)){return}}
else{return};var i=this._map.mouseEventToContainerPoint(n),e=this._map.mouseEventToLayerPoint(n),r=this._map.layerPointToLatLng(e);this._map.fire(o,{latlng:r,layerPoint:e,containerPoint:i,pageX:n.pageX,pageY:n.pageY,originalEvent:t})},_filterClick:function(t){var e=(t.timeStamp||t.originalEvent.timeStamp),n=L.DomEvent._lastClick&&(e-L.DomEvent._lastClick);if((n&&n>100&&n<500)||(t.target._simulatedClick&&!t._simulated)){L.DomEvent.stop(t);return!1};L.DomEvent._lastClick=e;return!0},_onTouchStart:function(t){if(!this._map._loaded){return};var n='touchstart';this._touchEvent(t,n)},_onTouchEnd:function(t){if(!this._map._loaded){return};var n='touchend';this._touchEvent(t,n)},_onTouchCancel:function(t){if(!this._map._loaded){return};var n='touchcancel';if(this._detectIE()){n='pointercancel'};this._touchEvent(t,n)},_onTouchLeave:function(t){if(!this._map._loaded){return};var n='touchleave';this._touchEvent(t,n)},_onTouchMove:function(t){if(!this._map._loaded){return};var n='touchmove';this._touchEvent(t,n)},_detectIE:function(){var t=window.navigator.userAgent,e=t.indexOf('MSIE ');if(e>0){return parseInt(t.substring(e+5,t.indexOf('.',e)),10)};var i=t.indexOf('Trident/');if(i>0){var o=t.indexOf('rv:');return parseInt(t.substring(o+3,t.indexOf('.',o)),10)};var n=t.indexOf('Edge/');if(n>0){return parseInt(t.substring(n+5,t.indexOf('.',n)),10)};return!1}});L.Map.addInitHook('addHandler','touchExtend',L.Map.TouchExtend);L.Marker.Touch=L.Marker.extend({_initInteraction:function(){if(!this.addInteractiveTarget){return this._initInteractionLegacy()};return L.Marker.prototype._initInteraction.apply(this)},_initInteractionLegacy:function(){if(!this.options.clickable){return};var t=this._icon,n=['dblclick','mousedown','mouseover','mouseout','contextmenu','touchstart','touchend','touchmove'];if(this._detectIE){n.concat(['MSPointerDown','MSPointerUp','MSPointerMove','MSPointerCancel'])}
else{n.concat(['touchcancel'])};L.DomUtil.addClass(t,'leaflet-clickable');L.DomEvent.on(t,'click',this._onMouseClick,this);L.DomEvent.on(t,'keypress',this._onKeyPress,this);for(var e=0;e<n.length;e++){L.DomEvent.on(t,n[e],this._fireMouseEvent,this)};if(L.Handler.MarkerDrag){this.dragging=new L.Handler.MarkerDrag(this);if(this.options.draggable){this.dragging.enable()}}},_detectIE:function(){var t=window.navigator.userAgent,e=t.indexOf('MSIE ');if(e>0){return parseInt(t.substring(e+5,t.indexOf('.',e)),10)};var i=t.indexOf('Trident/');if(i>0){var o=t.indexOf('rv:');return parseInt(t.substring(o+3,t.indexOf('.',o)),10)};var n=t.indexOf('Edge/');if(n>0){return parseInt(t.substring(n+5,t.indexOf('.',n)),10)};return!1}});
;L.LatLngUtil={cloneLatLngs:function(n){var a=[];for(var t=0,l=n.length;t<l;t++){if(Array.isArray(n[t])){a.push(L.LatLngUtil.cloneLatLngs(n[t]))}
else{a.push(this.cloneLatLng(n[t]))}};return a},cloneLatLng:function(n){return L.latLng(n.lat,n.lng)}};
;L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(e){var a=e.length,t=0.0,l=Math.PI/180,r,s;if(a>2){for(var i=0;i<a;i++){r=e[i];s=e[(i+1)%a];t+=((s.lng-r.lng)*l)*(2+Math.sin(r.lat*l)+Math.sin(s.lat*l))};t=t*6378137.0*6378137.0/2.0};return Math.abs(t)},readableArea:function(e,t){var i;if(t){if(e>=10000){i=(e*0.0001).toFixed(2)+' ha'}
else{i=e.toFixed(2)+' m&sup2;'}}
else{e/=0.836127;if(e>=3097600){i=(e/3097600).toFixed(2)+' mi&sup2;'}
else if(e>=4840){i=(e/4840).toFixed(2)+' acres'}
else{i=Math.ceil(e)+' yd&sup2;'}};return i},readableDistance:function(e,t,l){var i;if(t){if(e>1000){i=(e/1000).toFixed(2)+' km'}
else{i=Math.ceil(e)+' m'}}
else{e*=1.09361;if(e>1760){i=(e/1760).toFixed(2)+' miles'}
else{var a=' yd';if(l){e=e*3;a=' ft'};i=Math.ceil(e)+a}};return i}});
;L.Util.extend(L.LineUtil,{segmentsIntersect:function(e,c,t,n){return this._checkCounterclockwise(e,t,n)!==this._checkCounterclockwise(c,t,n)&&this._checkCounterclockwise(e,c,t)!==this._checkCounterclockwise(e,c,n)},_checkCounterclockwise:function(e,c,t){return(t.y-e.y)*(c.x-e.x)>(c.y-e.y)*(t.x-e.x)}});
;L.Polyline.include({intersects:function(){var e=this._getProjectedPoints(),i=e?e.length:0,t,n,r;if(this._tooFewPointsForIntersection()){return!1};for(t=i-1;t>=3;t--){n=e[t-1];r=e[t];if(this._lineSegmentsIntersectsRange(n,r,t-2)){return!0}};return!1},newLatLngIntersects:function(t,e){if(!this._map){return!1};return this.newPointIntersects(this._map.latLngToLayerPoint(t),e)},newPointIntersects:function(t,n){var e=this._getProjectedPoints(),r=e?e.length:0,i=e?e[r-1]:null,s=r-2;if(this._tooFewPointsForIntersection(1)){return!1};return this._lineSegmentsIntersectsRange(i,t,s,n?1:0)},_tooFewPointsForIntersection:function(t){var e=this._getProjectedPoints(),n=e?e.length:0;n+=t||0;return!e||n<=3},_lineSegmentsIntersectsRange:function(t,n,a,r){var i=this._getProjectedPoints(),s,o;r=r||0;for(var e=a;e>r;e--){s=i[e-1];o=i[e];if(L.LineUtil.segmentsIntersect(t,n,s,o)){return!0}};return!1},_getProjectedPoints:function(){if(!this._defaultShape){return this._originalPoints};var e=[],n=this._defaultShape();for(var t=0;t<n.length;t++){e.push(this._map.latLngToLayerPoint(n[t]))};return e}});
;L.Control.Draw=L.Control.extend({options:{position:'topleft',draw:{},edit:!1},initialize:function(o){if(L.version<'0.7'){throw new Error('Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/')};L.Control.prototype.initialize.call(this,o);var t;this._toolbars={};if(L.DrawToolbar&&this.options.draw){t=new L.DrawToolbar(this.options.draw);this._toolbars[L.DrawToolbar.TYPE]=t;this._toolbars[L.DrawToolbar.TYPE].on('enable',this._toolbarEnabled,this)};if(L.EditToolbar&&this.options.edit){t=new L.EditToolbar(this.options.edit);this._toolbars[L.EditToolbar.TYPE]=t;this._toolbars[L.EditToolbar.TYPE].on('enable',this._toolbarEnabled,this)};L.toolbar=this},onAdd:function(t){var r=L.DomUtil.create('div','leaflet-draw'),a=!1,s='leaflet-draw-toolbar-top',o;for(var i in this._toolbars){if(this._toolbars.hasOwnProperty(i)){o=this._toolbars[i].addToolbar(t);if(o){if(!a){if(!L.DomUtil.hasClass(o,s)){L.DomUtil.addClass(o.childNodes[0],s)};a=!0};r.appendChild(o)}}};return r},onRemove:function(){for(var o in this._toolbars){if(this._toolbars.hasOwnProperty(o)){this._toolbars[o].removeToolbar()}}},setDrawingOptions:function(o){for(var t in this._toolbars){if(this._toolbars[t]instanceof L.DrawToolbar){this._toolbars[t].setOptions(o)}}},_toolbarEnabled:function(o){var i=o.target;for(var t in this._toolbars){if(this._toolbars[t]!==i){this._toolbars[t].disable()}}}});L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1});L.Map.addInitHook(function(){if(this.options.drawControl){this.drawControl=new L.Control.Draw();this.addControl(this.drawControl)}});
;L.Toolbar=L.Class.extend({includes:[L.Mixin.Events],initialize:function(t){L.setOptions(this,t);this._modes={};this._actionButtons=[];this._activeMode=null},enabled:function(){return this._activeMode!==null},disable:function(){if(!this.enabled()){return};this._activeMode.handler.disable()},addToolbar:function(t){var i=L.DomUtil.create('div','leaflet-draw-section'),n=0,a=this._toolbarClass||'',e=this.getModeHandlers(t),o;this._toolbarContainer=L.DomUtil.create('div','leaflet-draw-toolbar leaflet-bar');this._map=t;for(o=0;o<e.length;o++){if(e[o].enabled){this._initModeHandler(e[o].handler,this._toolbarContainer,n++,a,e[o].title)}};if(!n){return};this._lastButtonIndex=--n;this._actionsContainer=L.DomUtil.create('ul','leaflet-draw-actions');i.appendChild(this._toolbarContainer);i.appendChild(this._actionsContainer);return i},removeToolbar:function(){for(var t in this._modes){if(this._modes.hasOwnProperty(t)){this._disposeButton(this._modes[t].button,this._modes[t].handler.enable,this._modes[t].handler);this._modes[t].handler.disable();this._modes[t].handler.off('enabled',this._handlerActivated,this).off('disabled',this._handlerDeactivated,this)}};this._modes={};for(var o=0,e=this._actionButtons.length;o<e;o++){this._disposeButton(this._actionButtons[o].button,this._actionButtons[o].callback,this)};this._actionButtons=[];this._actionsContainer=null},_initModeHandler:function(o,e,i,n,a){var t=o.type;this._modes[t]={};this._modes[t].handler=o;this._modes[t].button=this._createButton({type:t,title:a,className:n+'-'+t,container:e,callback:this._modes[t].handler.enable,context:this._modes[t].handler});this._modes[t].buttonIndex=i;this._modes[t].handler.on('enabled',this._handlerActivated,this).on('disabled',this._handlerDeactivated,this)},_createButton:function(t){var o=L.DomUtil.create('a',t.className||'',t.container);o.href='#';if(t.text){o.innerHTML=t.text};if(t.title){o.title=t.title};L.DomEvent.on(o,'click',L.DomEvent.stopPropagation).on(o,'mousedown',L.DomEvent.stopPropagation).on(o,'dblclick',L.DomEvent.stopPropagation).on(o,'click',L.DomEvent.preventDefault).on(o,'click',t.callback,t.context);return o},_disposeButton:function(t,o){L.DomEvent.off(t,'click',L.DomEvent.stopPropagation).off(t,'mousedown',L.DomEvent.stopPropagation).off(t,'dblclick',L.DomEvent.stopPropagation).off(t,'click',L.DomEvent.preventDefault).off(t,'click',o)},_handlerActivated:function(t){this.disable();this._activeMode=this._modes[t.handler];L.DomUtil.addClass(this._activeMode.button,'leaflet-draw-toolbar-button-enabled');this._showActionsToolbar();this.fire('enable')},_handlerDeactivated:function(){this._hideActionsToolbar();L.DomUtil.removeClass(this._activeMode.button,'leaflet-draw-toolbar-button-enabled');this._activeMode=null;this.fire('disable')},_createActions:function(e){var n=this._actionsContainer,o=this.getActions(e),r=o.length,a,i,s,l;for(i=0,s=this._actionButtons.length;i<s;i++){this._disposeButton(this._actionButtons[i].button,this._actionButtons[i].callback)};this._actionButtons=[];while(n.firstChild){n.removeChild(n.firstChild)};for(var t=0;t<r;t++){if('enabled' in o[t]&&!o[t].enabled){continue};a=L.DomUtil.create('li','',n);l=this._createButton({title:o[t].title,text:o[t].text,container:a,callback:o[t].callback,context:o[t].context});this._actionButtons.push({button:l,callback:o[t].callback})}},_showActionsToolbar:function(){var t=this._activeMode.buttonIndex,o=this._lastButtonIndex,e=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler);this._actionsContainer.style.top=e+'px';if(t===0){L.DomUtil.addClass(this._toolbarContainer,'leaflet-draw-toolbar-notop');L.DomUtil.addClass(this._actionsContainer,'leaflet-draw-actions-top')};if(t===o){L.DomUtil.addClass(this._toolbarContainer,'leaflet-draw-toolbar-nobottom');L.DomUtil.addClass(this._actionsContainer,'leaflet-draw-actions-bottom')};this._actionsContainer.style.display='block'},_hideActionsToolbar:function(){this._actionsContainer.style.display='none';L.DomUtil.removeClass(this._toolbarContainer,'leaflet-draw-toolbar-notop');L.DomUtil.removeClass(this._toolbarContainer,'leaflet-draw-toolbar-nobottom');L.DomUtil.removeClass(this._actionsContainer,'leaflet-draw-actions-top');L.DomUtil.removeClass(this._actionsContainer,'leaflet-draw-actions-bottom')}});
;L.Draw=L.Draw||{};L.Draw.Tooltip=L.Class.extend({initialize:function(t){this._map=t;this._popupPane=t._panes.popupPane;this._container=t.options.drawControlTooltips?L.DomUtil.create('div','leaflet-draw-tooltip',this._popupPane):null;this._singleLineLabel=!1;this._map.on('mouseout',this._onMouseOut,this)},dispose:function(){this._map.off('mouseout',this._onMouseOut,this);if(this._container){this._popupPane.removeChild(this._container);this._container=null}},updateContent:function(t){if(!this._container){return this};t.subtext=t.subtext||'';if(t.subtext.length===0&&!this._singleLineLabel){L.DomUtil.addClass(this._container,'leaflet-draw-tooltip-single');this._singleLineLabel=!0}
else if(t.subtext.length>0&&this._singleLineLabel){L.DomUtil.removeClass(this._container,'leaflet-draw-tooltip-single');this._singleLineLabel=!1};this._container.innerHTML=(t.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+t.subtext+'</span><br />':'')+'<span>'+t.text+'</span>';return this},updatePosition:function(t){var e=this._map.latLngToLayerPoint(t),i=this._container;if(this._container){i.style.visibility='inherit';L.DomUtil.setPosition(i,e)};return this},showAsError:function(){if(this._container){L.DomUtil.addClass(this._container,'leaflet-error-draw-tooltip')};return this},removeError:function(){if(this._container){L.DomUtil.removeClass(this._container,'leaflet-error-draw-tooltip')};return this},_onMouseOut:function(){if(this._container){this._container.style.visibility='hidden'}}});
;L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:'draw'},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{}},initialize:function(t){for(var o in this.options){if(this.options.hasOwnProperty(o)){if(t[o]){t[o]=L.extend({},this.options[o],t[o])}}};this._toolbarClass='leaflet-draw-draw';L.Toolbar.prototype.initialize.call(this,t)},getModeHandlers:function(t){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(t,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(t,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(t,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(t,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(t,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker}]},getActions:function(t){return[{enabled:t.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:t.completeShape,context:t},{enabled:t.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:t.deleteLastVertex,context:t},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(t){L.setOptions(this,t);for(var o in this._modes){if(this._modes.hasOwnProperty(o)&&t.hasOwnProperty(o)){this._modes[o].handler.setOptions(t[o])}}}});
;L.EditToolbar=L.Toolbar.extend({statics:{TYPE:'edit'},options:{edit:{selectedPathOptions:{dashArray:'10, 10',fill:!0,fillColor:'#fe57a1',fillOpacity:0.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(t){if(t.edit){if(typeof t.edit.selectedPathOptions==='undefined'){t.edit.selectedPathOptions=this.options.edit.selectedPathOptions};t.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,t.edit.selectedPathOptions)};if(t.remove){t.remove=L.extend({},this.options.remove,t.remove)};if(t.poly){t.poly=L.extend({},this.options.poly,t.poly)};this._toolbarClass='leaflet-draw-edit';L.Toolbar.prototype.initialize.call(this,t);this._selectedFeatureCount=0},getModeHandlers:function(t){var e=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(t,{featureGroup:e,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(t,{featureGroup:e}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(){return[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}]},addToolbar:function(t){var e=L.Toolbar.prototype.addToolbar.call(this,t);this._checkDisabled();this.options.featureGroup.on('layeradd layerremove',this._checkDisabled,this);return e},removeToolbar:function(){this.options.featureGroup.off('layeradd layerremove',this._checkDisabled,this);L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){if(!this.enabled()){return};this._activeMode.handler.revertLayers();L.Toolbar.prototype.disable.call(this)},_save:function(){this._activeMode.handler.save();if(this._activeMode){this._activeMode.handler.disable()}},_checkDisabled:function(){var o=this.options.featureGroup,e=o.getLayers().length!==0,t;if(this.options.edit){t=this._modes[L.EditToolbar.Edit.TYPE].button;if(e){L.DomUtil.removeClass(t,'leaflet-disabled')}
else{L.DomUtil.addClass(t,'leaflet-disabled')};t.setAttribute('title',e?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)};if(this.options.remove){t=this._modes[L.EditToolbar.Delete.TYPE].button;if(e){L.DomUtil.removeClass(t,'leaflet-disabled')}
else{L.DomUtil.addClass(t,'leaflet-disabled')};t.setAttribute('title',e?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled)}}});
;L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:'edit'},includes:L.Mixin.Events,initialize:function(t,e){L.Handler.prototype.initialize.call(this,t);L.setOptions(this,e);this._featureGroup=e.featureGroup;if(!(this._featureGroup instanceof L.FeatureGroup)){throw new Error('options.featureGroup must be a L.FeatureGroup')};this._uneditedLayerProps={};this.type=L.EditToolbar.Edit.TYPE},enable:function(){if(this._enabled||!this._hasAvailableLayers()){return};this.fire('enabled',{handler:this.type});this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type});L.Handler.prototype.enable.call(this);this._featureGroup.on('layeradd',this._enableLayerEdit,this).on('layerremove',this._disableLayerEdit,this)},disable:function(){if(!this._enabled){return};this._featureGroup.off('layeradd',this._enableLayerEdit,this).off('layerremove',this._disableLayerEdit,this);L.Handler.prototype.disable.call(this);this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type});this.fire('disabled',{handler:this.type})},addHooks:function(){var t=this._map;if(t){t.getContainer().focus();this._featureGroup.eachLayer(this._enableLayerEdit,this);this._tooltip=new L.Draw.Tooltip(this._map);this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext});t._editTooltip=this._tooltip;this._updateTooltip();this._map.on('mousemove',this._onMouseMove,this).on('touchmove',this._onMouseMove,this).on('MSPointerMove',this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this)}},removeHooks:function(){if(this._map){this._featureGroup.eachLayer(this._disableLayerEdit,this);this._uneditedLayerProps={};this._tooltip.dispose();this._tooltip=null;this._map.off('mousemove',this._onMouseMove,this).off('touchmove',this._onMouseMove,this).off('MSPointerMove',this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this)}},revertLayers:function(){this._featureGroup.eachLayer(function(t){this._revertLayer(t)},this)},save:function(){var t=new L.LayerGroup();this._featureGroup.eachLayer(function(e){if(e.edited){t.addLayer(e);e.edited=!1}});this._map.fire(L.Draw.Event.EDITED,{layers:t})},_backupLayer:function(t){var e=L.Util.stamp(t);if(!this._uneditedLayerProps[e]){if(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle){this._uneditedLayerProps[e]={latlngs:L.LatLngUtil.cloneLatLngs(t.getLatLngs())}}
else if(t instanceof L.Circle){this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng()),radius:t.getRadius()}}
else if(t instanceof L.Marker){this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng())}}}},_getTooltipText:function(){return({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(t){var e=L.Util.stamp(t);t.edited=!1;if(this._uneditedLayerProps.hasOwnProperty(e)){if(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle){t.setLatLngs(this._uneditedLayerProps[e].latlngs)}
else if(t instanceof L.Circle){t.setLatLng(this._uneditedLayerProps[e].latlng);t.setRadius(this._uneditedLayerProps[e].radius)}
else if(t instanceof L.Marker){t.setLatLng(this._uneditedLayerProps[e].latlng)};t.fire('revert-edited',{layer:t})}},_enableLayerEdit:function(e){var t=e.layer||e.target||e,i,o;this._backupLayer(t);if(this.options.poly){o=L.Util.extend({},this.options.poly);t.options.poly=o};if(this.options.selectedPathOptions){i=L.Util.extend({},this.options.selectedPathOptions);if(i.maintainColor){i.color=t.options.color;i.fillColor=t.options.fillColor};t.options.original=L.extend({},t.options);t.options.editing=i};if(t instanceof L.Marker){if(t.editing){t.editing.enable()};t.dragging.enable();t.on('dragend',this._onMarkerDragEnd).on('touchmove',this._onTouchMove,this).on('MSPointerMove',this._onTouchMove,this).on('touchend',this._onMarkerDragEnd,this).on('MSPointerUp',this._onMarkerDragEnd,this)}
else{t.editing.enable()}},_disableLayerEdit:function(e){var t=e.layer||e.target||e;t.edited=!1;if(t.editing){t.editing.disable()};delete t.options.editing;delete t.options.original;if(this._selectedPathOptions){if(t instanceof L.Marker){this._toggleMarkerHighlight(t)}
else{t.setStyle(t.options.previousOptions);delete t.options.previousOptions}};if(t instanceof L.Marker){t.dragging.disable();t.off('dragend',this._onMarkerDragEnd,this).off('touchmove',this._onTouchMove,this).off('MSPointerMove',this._onTouchMove,this).off('touchend',this._onMarkerDragEnd,this).off('MSPointerUp',this._onMarkerDragEnd,this)}
else{t.editing.disable()}},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_onMarkerDragEnd:function(t){var e=t.target;e.edited=!0;this._map.fire(L.Draw.Event.EDITMOVE,{layer:e})},_onTouchMove:function(t){var e=t.originalEvent.changedTouches[0],i=this._map.mouseEventToLayerPoint(e),o=this._map.layerPointToLatLng(i);t.target.setLatLng(o)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}});
;L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:'remove'},includes:L.Mixin.Events,initialize:function(e,t){L.Handler.prototype.initialize.call(this,e);L.Util.setOptions(this,t);this._deletableLayers=this.options.featureGroup;if(!(this._deletableLayers instanceof L.FeatureGroup)){throw new Error('options.featureGroup must be a L.FeatureGroup')};this.type=L.EditToolbar.Delete.TYPE},enable:function(){if(this._enabled||!this._hasAvailableLayers()){return};this.fire('enabled',{handler:this.type});this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type});L.Handler.prototype.enable.call(this);this._deletableLayers.on('layeradd',this._enableLayerDelete,this).on('layerremove',this._disableLayerDelete,this)},disable:function(){if(!this._enabled){return};this._deletableLayers.off('layeradd',this._enableLayerDelete,this).off('layerremove',this._disableLayerDelete,this);L.Handler.prototype.disable.call(this);this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type});this.fire('disabled',{handler:this.type})},addHooks:function(){var e=this._map;if(e){e.getContainer().focus();this._deletableLayers.eachLayer(this._enableLayerDelete,this);this._deletedLayers=new L.LayerGroup();this._tooltip=new L.Draw.Tooltip(this._map);this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text});this._map.on('mousemove',this._onMouseMove,this)}},removeHooks:function(){if(this._map){this._deletableLayers.eachLayer(this._disableLayerDelete,this);this._deletedLayers=null;this._tooltip.dispose();this._tooltip=null;this._map.off('mousemove',this._onMouseMove,this)}},revertLayers:function(){this._deletedLayers.eachLayer(function(e){this._deletableLayers.addLayer(e);e.fire('revert-deleted',{layer:e})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},_enableLayerDelete:function(e){var t=e.layer||e.target||e;t.on('click',this._removeLayer,this)},_disableLayerDelete:function(e){var t=e.layer||e.target||e;t.off('click',this._removeLayer,this);this._deletedLayers.removeLayer(t)},_removeLayer:function(e){var t=e.layer||e.target||e;this._deletableLayers.removeLayer(t);this._deletedLayers.addLayer(t);t.fire('deleted')},_onMouseMove:function(e){this._tooltip.updatePosition(e.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}});
;L.Draw.Rectangle=L.Draw.Rectangle||L.Draw.Feature.extend({});L.Draw.Circle=L.Draw.Circle||L.Draw.Feature.extend({});
(function(t){var e;if(typeof define==='function'&&define.amd){define(['leaflet'],t)}
else if(typeof module!=='undefined'){e=require('leaflet');module.exports=t(e)}
else{if(typeof window.L==='undefined')throw'Leaflet must be loaded first';t(window.L)}}(function(t){'use strict';t.Polyline._flat=t.Polyline._flat||function(e){return!t.Util.isArray(e[0])||(typeof e[0][0]!=='object'&&typeof e[0][0]!=='undefined')};t.GeometryUtil=t.extend(t.GeometryUtil||{},{distance:function(t,e,n){return t.latLngToLayerPoint(e).distanceTo(t.latLngToLayerPoint(n))},distanceSegment:function(e,n,r,i){var a=e.latLngToLayerPoint(n),o=e.latLngToLayerPoint(r),l=e.latLngToLayerPoint(i);return t.LineUtil.pointToSegmentDistance(a,o,l)},readableDistance:function(t,e){var r=(e!=='imperial'),n;if(r){if(t>1000){n=(t/1000).toFixed(2)+' km'}
else{n=Math.ceil(t)+' m'}}
else{t*=1.09361;if(t>1760){n=(t/1760).toFixed(2)+' miles'}
else{n=Math.ceil(t)+' yd'}};return n},belongsSegment:function(t,e,n,r){r=r===undefined?0.2:r;var i=e.distanceTo(n),a=e.distanceTo(t)+t.distanceTo(n)-i;return a/i<r},length:function(e){var n=t.GeometryUtil.accumulatedLengths(e);return n.length>0?n[n.length-1]:0},accumulatedLengths:function(t){if(typeof t.getLatLngs=='function'){t=t.getLatLngs()};if(t.length===0)return[];var n=0,r=[0];for(var e=0,i=t.length-1;e<i;e++){n+=t[e].distanceTo(t[e+1]);r.push(n)};return r},closestOnSegment:function(e,n,r,i){var a=e.getMaxZoom();if(a===Infinity)a=e.getZoom();var o=e.project(n,a),l=e.project(r,a),s=e.project(i,a),f=t.LineUtil.closestPointOnSegment(o,l,s);return e.unproject(f,a)},closest:function(n,e,r,o){var l,s=Infinity,a=null,i,u,f;if(e instanceof Array){if(e[0]instanceof Array&&typeof e[0][0]!=='number'){for(var i=0;i<e.length;i++){var c=t.GeometryUtil.closest(n,e[i],r,o);if(c.distance<s){s=c.distance;a=c}};return a}
else if(e[0]instanceof t.LatLng||typeof e[0][0]==='number'||typeof e[0].lat==='number'){e=t.polyline(e)}
else{return a}};if(!(e instanceof t.Polyline))return a;l=JSON.parse(JSON.stringify(e.getLatLngs().slice(0)));if(e instanceof t.Polygon){var h=function(e){if(t.Polyline._flat(e)){e.push(e[0])}
else{for(var n=0;n<e.length;n++){h(e[n])}}};h(l)};if(!t.Polyline._flat(l)){for(var i=0;i<l.length;i++){var c=t.GeometryUtil.closest(n,l[i],r,o);if(c.distance<s){s=c.distance;a=c}};return a}
else{if(o){for(i=0,u=l.length;i<u;i++){var L=l[i];f=t.GeometryUtil.distance(n,r,L);if(f<s){s=f;a=L;a.distance=f}};return a};for(i=0,u=l.length;i<u-1;i++){var g=l[i],y=l[i+1];f=t.GeometryUtil.distanceSegment(n,r,g,y);if(f<=s){s=f;a=t.GeometryUtil.closestOnSegment(n,r,g,y);a.distance=f}};return a}},closestLayer:function(e,n,r){var l=Infinity,c=null,a=null,o=Infinity;for(var f=0,u=n.length;f<u;f++){var i=n[f];if(i instanceof t.LayerGroup){var s=t.GeometryUtil.closestLayer(e,i.getLayers(),r);if(s.distance<l){l=s.distance;c=s}}
else{if(typeof i.getLatLng=='function'){a=i.getLatLng();o=t.GeometryUtil.distance(e,r,a)}
else{a=t.GeometryUtil.closest(e,i,r);if(a)o=a.distance};if(o<l){l=o;c={layer:i,latlng:a,distance:o}}}};return c},nClosestLayers:function(e,n,r,i){i=typeof i==='number'?i:n.length;if(i<1||n.length<1){return null};var o=[],f,l;for(var s=0,u=n.length;s<u;s++){var a=n[s];if(a instanceof t.LayerGroup){var c=t.GeometryUtil.closestLayer(e,a.getLayers(),r);o.push(c)}
else{if(typeof a.getLatLng=='function'){l=a.getLatLng();f=t.GeometryUtil.distance(e,r,l)}
else{l=t.GeometryUtil.closest(e,a,r);if(l)f=l.distance};o.push({layer:a,latlng:l,distance:f})}};o.sort(function(t,e){return t.distance-e.distance});if(o.length>i){return o.slice(0,i)}
else{return o}},layersWithin:function(e,n,r,i){i=typeof i=='number'?i:Infinity;var f=[],a=null,l=0;for(var s=0,u=n.length;s<u;s++){var o=n[s];if(typeof o.getLatLng=='function'){a=o.getLatLng();l=t.GeometryUtil.distance(e,r,a)}
else{a=t.GeometryUtil.closest(e,o,r);if(a)l=a.distance};if(a&&l<i){f.push({layer:o,latlng:a,distance:l})}};var c=f.sort(function(t,e){return t.distance-e.distance});return c},closestLayerSnap:function(e,n,r,i,o){i=typeof i=='number'?i:Infinity;o=typeof o=='boolean'?o:!0;var a=t.GeometryUtil.closestLayer(e,n,r);if(!a||a.distance>i)return null;if(o&&typeof a.layer.getLatLngs=='function'){var l=t.GeometryUtil.closest(e,a.layer,a.latlng,!0);if(l.distance<i){a.latlng=l;a.distance=t.GeometryUtil.distance(e,l,r)}};return a},interpolateOnPointSegment:function(e,n,r){return t.point((e.x*(1-r))+(r*n.x),(e.y*(1-r))+(r*n.y))},interpolateOnLine:function(n,e,r){e=(e instanceof t.Polyline)?e.getLatLngs():e;var g=e.length;if(g<2){return null};r=Math.max(Math.min(r,1),0);if(r===0){return{latLng:e[0]instanceof t.LatLng?e[0]:t.latLng(e[0]),predecessor:-1}};if(r==1){return{latLng:e[e.length-1]instanceof t.LatLng?e[e.length-1]:t.latLng(e[e.length-1]),predecessor:e.length-2}};var u=n.getMaxZoom();if(u===Infinity)u=n.getZoom();var a=[],L=0;for(var i=0;i<g;i++){a[i]=n.project(e[i],u);if(i>0)L+=a[i-1].distanceTo(a[i])};var y=L*r,s=a[0],o=a[1],f=0,l=s.distanceTo(o),c=1;for(;c<g&&l<y;c++){s=o;f=l;o=a[c];l+=s.distanceTo(o)};var h=((l-f)!==0)?((y-f)/(l-f)):0,d=t.GeometryUtil.interpolateOnPointSegment(s,o,h);return{latLng:n.unproject(d,u),predecessor:c-2}},locateOnLine:function(e,n,r){var i=n.getLatLngs();if(r.equals(i[0]))return 0.0;if(r.equals(i[i.length-1]))return 1.0;var f=t.GeometryUtil.closest(e,n,r,!1),o=t.GeometryUtil.accumulatedLengths(i),y=o[o.length-1],l=0,c=!1;for(var a=0,g=i.length-1;a<g;a++){var s=i[a],u=i[a+1];l=o[a];if(t.GeometryUtil.belongsSegment(f,s,u)){l+=s.distanceTo(f);c=!0;break}};if(!c){throw'Could not interpolate '+r.toString()+' within '+n.toString()};return l/y},reverse:function(e){return t.polyline(e.getLatLngs().slice(0).reverse())},extract:function(e,n,r,i){if(r>i){return t.GeometryUtil.extract(e,t.GeometryUtil.reverse(n),1.0-r,1.0-i)};r=Math.max(Math.min(r,1),0);i=Math.max(Math.min(i,1),0);var f=n.getLatLngs(),a=t.GeometryUtil.interpolateOnLine(e,n,r),o=t.GeometryUtil.interpolateOnLine(e,n,i);if(r==i){var s=t.GeometryUtil.interpolateOnLine(e,n,i);return[s.latLng]};if(a.predecessor==-1)a.predecessor=0;if(o.predecessor==-1)o.predecessor=0;var l=f.slice(a.predecessor+1,o.predecessor+1);l.unshift(a.latLng);l.push(o.latLng);return l},isBefore:function(t,e){if(!e)return!1;var n=t.getLatLngs(),r=e.getLatLngs();return(n[n.length-1]).equals(r[0])},isAfter:function(t,e){if(!e)return!1;var r=t.getLatLngs(),n=e.getLatLngs();return(r[0]).equals(n[n.length-1])},startsAtExtremity:function(t,e){if(!e)return!1;var i=t.getLatLngs(),n=e.getLatLngs(),r=i[0];return r.equals(n[0])||r.equals(n[n.length-1])},computeAngle:function(t,e){return(Math.atan2(e.y-t.y,e.x-t.x)*180/Math.PI)},computeSlope:function(t,e){var n=(e.y-t.y)/(e.x-t.x),r=t.y-(n*t.x);return{'a':n,'b':r}},rotatePoint:function(e,n,r,i){var o=e.getMaxZoom();if(o===Infinity)o=e.getZoom();var l=r*Math.PI/180,s=e.project(n,o),a=e.project(i,o),f=Math.cos(l)*(s.x-a.x)-Math.sin(l)*(s.y-a.y)+a.x,c=Math.sin(l)*(s.x-a.x)+Math.cos(l)*(s.y-a.y)+a.y;return e.unproject(new t.Point(f,c),o)},bearing:function(t,e){var n=Math.PI/180,a=t.lat*n,r=e.lat*n,o=t.lng*n,l=e.lng*n,s=Math.sin(l-o)*Math.cos(r),f=Math.cos(a)*Math.sin(r)-Math.sin(a)*Math.cos(r)*Math.cos(l-o),i=((Math.atan2(s,f)*180/Math.PI)+360)%360;return i>=180?i-360:i},destination:function(e,n,r){n=(n+360)%360;var a=Math.PI/180,o=180/Math.PI,l=6378137,h=e.lng*a,s=e.lat*a,f=n*a,c=Math.sin(s),u=Math.cos(s),g=Math.cos(r/l),y=Math.sin(r/l),L=Math.asin(c*g+u*y*Math.cos(f)),i=h+Math.atan2(Math.sin(f)*y*u,g-c*Math.sin(L));i=i*o;i=i>180?i-360:i<-180?i+360:i;return t.latLng([L*o,i])}});return t.GeometryUtil}));
(function(){L.Handler.MarkerSnap=L.Handler.extend({options:{snapDistance:15,snapVertices:!0},initialize:function(i,e,t){L.Handler.prototype.initialize.call(this,i);this._markers=[];this._guides=[];if(arguments.length==2){if(!(e instanceof L.Class)){t=e;e=null}};L.Util.setOptions(this,t||{});if(e){if(!e.dragging)e.dragging=new L.Handler.MarkerDrag(e);e.dragging.enable();this.watchMarker(e)};function n(){this._buffer=i.layerPointToLatLng(new L.Point(0,0)).lat-i.layerPointToLatLng(new L.Point(this.options.snapDistance,0)).lat};i.on('zoomend',n,this);i.whenReady(n,this);n.call(this)},enable:function(){this.disable();for(var i=0;i<this._markers.length;i++){this.watchMarker(this._markers[i])}},disable:function(){for(var i=0;i<this._markers.length;i++){this.unwatchMarker(this._markers[i])}},watchMarker:function(i){if(this._markers.indexOf(i)==-1)this._markers.push(i);i.on('move',this._snapMarker,this)},unwatchMarker:function(i){i.off('move',this._snapMarker,this);delete i['snap']},addGuideLayer:function(i){for(var e=0,t=this._guides.length;e<t;e++)if(L.stamp(i)===L.stamp(this._guides[e]))return;this._guides.push(i)},_snapMarker:function(i){var t=i.target,s=t.getLatLng(),n=[];function r(i){if(i.getLatLng){return L.stamp(t)!==L.stamp(i)}
else{if(i.editing&&i.editing._enabled){var n=i.editing._verticesHandlers[0]._markerGroup.getLayers();for(var e=0,a=n.length;e<a;e++){if(L.stamp(n[e])===L.stamp(t)){return!1}}}};return!0};function o(i){if((i._layers!==undefined)&&(typeof i.searchBuffer!=='function')){for(var t in i._layers){o(i._layers[t])}}
else if(typeof i.searchBuffer==='function'){var e=i.searchBuffer(s,this._buffer);n=n.concat(e.filter(function(i){return r(i)}))}
else if(r(i)){n.push(i)}};for(var a=0,l=this._guides.length;a<l;a++){var p=this._guides[a];o.call(this,p)};var e=this._findClosestLayerSnap(this._map,n,s,this.options.snapDistance,this.options.snapVertices);e=e||{layer:null,latlng:null};this._updateSnap(t,e.layer,e.latlng)},_findClosestLayerSnap:function(i,e,t,n,a){return L.GeometryUtil.closestLayerSnap(i,e,t,n,a)},_updateSnap:function(i,e,t){if(e&&t){i._latlng=L.latLng(t);i.update();if(i.snap!=e){i.snap=e;if(i._icon)L.DomUtil.addClass(i._icon,'marker-snapped');i.fire('snap',{layer:e,latlng:t})}}
else{if(i.snap){if(i._icon)L.DomUtil.removeClass(i._icon,'marker-snapped');i.fire('unsnap',{layer:i.snap})};delete i['snap']}}});if(!L.Edit){return};L.Handler.PolylineSnap=L.Edit.Poly.extend({initialize:function(i,e,t){var n=this;L.Edit.Poly.prototype.initialize.call(this,e,t);this._snapper=new L.Handler.MarkerSnap(i,t);e.on('remove',function(){n.disable()})},addGuideLayer:function(i){this._snapper.addGuideLayer(i)},_initHandlers:function(){this._verticesHandlers=[];for(var i=0;i<this.latlngs.length;i++){this._verticesHandlers.push(new L.Edit.PolyVerticesEditSnap(this._poly,this.latlngs[i],this.options))}}});L.Edit.PolyVerticesEditSnap=L.Edit.PolyVerticesEdit.extend({_createMarker:function(i,e){var t=L.Edit.PolyVerticesEdit.prototype._createMarker.call(this,i,e),n=e===undefined;if(n){t.on('dragstart',function(){this._poly.snapediting._snapper.watchMarker(t)},this)}
else{this._poly.snapediting._snapper.watchMarker(t)};return t}});L.EditToolbar.SnapEdit=L.EditToolbar.Edit.extend({snapOptions:{snapDistance:15,snapVertices:!0},initialize:function(i,e){L.EditToolbar.Edit.prototype.initialize.call(this,i,e);if(e.snapOptions){L.Util.extend(this.snapOptions,e.snapOptions)};if(Array.isArray(this.snapOptions.guideLayers)){this._guideLayers=this.snapOptions.guideLayers}
else if(e.guideLayers instanceof L.LayerGroup){this._guideLayers=this.snapOptions.guideLayers.getLayers()}
else{this._guideLayers=[]}},addGuideLayer:function(i){var e=this._guideLayers.findIndex(function(e){return L.stamp(i)===L.stamp(e)});if(e===-1){this._guideLayers.push(i);this._featureGroup.eachLayer(function(i){if(i.snapediting){i.snapediting._guides.push(i)}})}},removeGuideLayer:function(i){var e=this._guideLayers.findIndex(function(e){return L.stamp(i)===L.stamp(e)});if(e!==-1){this._guideLayers.splice(e,1);this._featureGroup.eachLayer(function(i){if(i.snapediting){i.snapediting._guides.splice(e,1)}})}},clearGuideLayers:function(){this._guideLayers=[];this._featureGroup.eachLayer(function(i){if(i.snapediting){i.snapediting._guides=[]}})},_enableLayerEdit:function(i){L.EditToolbar.Edit.prototype._enableLayerEdit.call(this,i);var e=i.layer||i.target||i;if(!e.snapediting){if(e.getLatLng){e.snapediting=new L.Handler.MarkerSnap(e._map,e,this.snapOptions)}
else{if(e.editing){e.editing._verticesHandlers[0]._markerGroup.clearLayers();delete e.editing};e.editing=e.snapediting=new L.Handler.PolylineSnap(e._map,e,this.snapOptions)};for(var t=0,n=this._guideLayers.length;t<n;t++){e.snapediting.addGuideLayer(this._guideLayers[t])}};e.snapediting.enable()}});L.Draw.Feature.SnapMixin={_snap_initialize:function(){this.on('enabled',this._snap_on_enabled,this);this.on('disabled',this._snap_on_disabled,this)},_snap_on_enabled:function(){if(!this.options.guideLayers){return};if(!this._mouseMarker){this._map.on('layeradd',this._snap_on_enabled,this);return}
else{this._map.off('layeradd',this._snap_on_enabled,this)};if(!this._snapper){this._snapper=new L.Handler.MarkerSnap(this._map);if(this.options.snapDistance){this._snapper.options.snapDistance=this.options.snapDistance};if(this.options.snapVertices){this._snapper.options.snapVertices=this.options.snapVertices}};for(var e=0,n=this.options.guideLayers.length;e<n;e++)this._snapper.addGuideLayer(this.options.guideLayers[e]);var i=this._mouseMarker;this._snapper.watchMarker(i);var t=i.options.icon;i.on('snap',function(e){i.setIcon(this.options.icon);i.setOpacity(1)},this).on('unsnap',function(e){i.setIcon(t);i.setOpacity(0)},this);i.on('click',this._snap_on_click,this)},_snap_on_click:function(i){if(this._markers){var n=this._markers.length,e=this._markers[n-1];if(this._mouseMarker.snap){if(i){e.setLatLng(i.target._latlng);if(this._poly){var t=this._poly._latlngs.length;this._poly._latlngs[t-1]=i.target._latlng;this._poly.redraw()}};L.DomUtil.addClass(e._icon,'marker-snapped')}}},_snap_on_disabled:function(){delete this._snapper},};L.Draw.Feature.include(L.Draw.Feature.SnapMixin);L.Draw.Feature.addInitHook('_snap_initialize')})();
;L.Control.Draw.Plus=L.Control.Draw.extend({snapLayers:new L.FeatureGroup(),editLayers:new L.FeatureGroup(),options:{draw:{marker:!1,polyline:!1,polygon:!1,rectangle:!1,circle:!1},edit:{edit:!1,remove:!1},entry:'edit-json',jsonOptions:{},changed:'edit-changed'},initialize:function(e){L.Util.extend(L.Draw.Polyline.prototype.options.shapeOptions,L.Polyline.prototype.options);L.Util.extend(L.Draw.Polygon.prototype.options.shapeOptions,L.Polygon.prototype.options);e.edit=L.extend(this.options.edit,e.edit);e.draw=L.extend(this.options.draw,e.draw);for(var t in e.draw)if(e.draw[t])e.draw[t]={guideLayers:[this.snapLayers]};L.Control.Draw.prototype.initialize.call(this,e)},onAdd:function(e){this._toolbars['edit'].options.featureGroup=this.editLayers;this.editLayers.addTo(this.snapLayers);this.snapLayers.addTo(e);e.on('draw:created',function(e){this.addLayer(e.layer)},this);e.on('layerremove',function(e){this.editLayers.removeLayer(e.layer)},this);var t=document.getElementById(this.options.entry);if(t){var i=typeof t.value!='undefined'?'value':'innerHTML',r=JSON.parse(t[i].replace(/\s/g,'')||'{"type":"FeatureCollection","features":[]}');new L.GeoJSON(this.explodeMultiFeatures(r),this.options.jsonOptions).addTo(this)};e.on('draw:created draw:editvertex',this._optimSavGeom,this);this._optimSavGeom(!1);return L.Control.Draw.prototype.onAdd.call(this,e)},explodeMultiFeatures:function(e){var i={type:'FeatureCollection',features:[]};switch(e.type){case'FeatureCollection':for(var t=0;t<e.features.length;t++)i.features.push(this.explodeMultiFeatures(e.features[t]));return i;case'Feature':return this.explodeMultiFeatures(e.geometry);case'MultiPoint':case'MultiLineString':case'MultiPolygon':for(var t=0;t<e.coordinates.length;t++)i.features.push({type:e.type.replace('Multi',''),coordinates:e.coordinates[t]});return i};return e},addLayer:function(e){if(e._layers){for(var t in e._layers)this.addLayer(e._layers[t]);return};e.on('mouseover mouseout',function(e){if(typeof e.target.setStyle=='function')e.target.setStyle({color:e.type=='mouseover'?'red':L.Polyline.prototype.options.color})});e.addTo(this.editLayers);if(e._latlng)e.snapediting=new L.Handler.MarkerSnap(this._map,e);else if(e._latlngs)e.snapediting=new L.Handler.PolylineSnap(this._map,e);else return;e.snapediting.addGuideLayer(this.snapLayers);e.snapediting.enable();this._optimSavGeom();e.on('deleted',function(){for(m in this._toolbars['edit']._modes)this._toolbars['edit']._modes[m].handler.disable();this._optimSavGeom()},this)},_optimSavGeom:function(i){var r=this.editLayers._layers;if(!this._map.noOptim)for(var o in r)if(o&&!r[o].options.fill){var e=r[o]._latlngs;if(e[0].equals(e[e.length-1])&&e.length>3){this.editLayers.removeLayer(r[o]);this.addLayer(new L.Polygon(e));return};for(var s in r){var t=r[s]._latlngs,a=null;if(o&&s&&o<s&&!r[s].options.fill){if(e[0].equals(t[0])){e.reverse();a=t}
else if(e[0].equals(t[t.length-1])){e.reverse();a=t.reverse()}
else if(e[e.length-1].equals(t[0])){a=t}
else if(e[e.length-1].equals(t[t.length-1])){a=t.reverse()};if(a){a.shift();this.editLayers.removeLayer(r[o]);this.editLayers.removeLayer(r[s]);this.addLayer(new L.Polyline(e.concat(a)));return}}}};var n=document.getElementById(this.options.entry),l=document.getElementById(this.options.changed);if(n){var d=typeof n.value!='undefined'?'value':'innerHTML';n[d]=JSON.stringify(this.editLayers.toGeoJSON())};this._map.fire('draw:entry-changed');if(l)l.style.display=i===!1?'none':''}});eval('L.Edit.PolyVerticesEdit.prototype._createMiddleMarker = '+L.Edit.PolyVerticesEdit.prototype._createMiddleMarker.toString().replace(/'click', onClick, this|'click',[a-z],this/g,'\'click\',this._cut,this'));L.Edit.PolyVerticesEdit.include({_cut:function(e){var i=0,t=[[],[]];for(m in this._markers){t[i].push(this._markers[m]._latlng);if(this._markers[m]._middleRight&&this._markers[m]._middleRight._leaflet_id==e.target._leaflet_id)i=1};this._map.removeLayer(this._poly);if(this._poly.options.fill)this._map.fire('draw:created',{layer:new L.Polyline(t[1].concat(t[0]))});else for(f in t)if(t[f].length>1)this._map.fire('draw:created',{layer:new L.Polyline(t[f])});this._map.fire('draw:editvertex')}});
;L.Control.Layers.include({addTo:function(o){var t=L.Control.prototype.addTo.call(this,o);L.DomEvent.on(this._container,{mouseleave:this.expand,mouseenter:function(){o.fire('cl_collapse',this)}},this);o.on('cl_collapse',this._collapse_others,this);o.on('mouseout',this.collapse,this);return t},_collapse_others:function(o){if(o._leaflet_id!=this._leaflet_id)this.collapse()},remove:function(){map.off('cl_collapse',this._collapse_others,this);map.off('mouseout',this.collapse,this);L.Control.prototype.remove.call(this)}});
;L.myLeafletVersion="1.0";L.Control.Scale.prototype.options.imperial=!1;if(navigator.language||navigator.userLanguage=="fr"){if(L.Control.Zoom)L.Control.Zoom=L.Control.Zoom.extend({options:{zoomInTitle:"Rapprocher",zoomOutTitle:"Eloigner"}});if(L.Control.Fullscreen)L.Control.Fullscreen=L.Control.Fullscreen.extend({options:{title:{"false":"Plein écran","true":"Sortir du plein écran"}}});if(L.Control.Gps)L.Control.Gps=L.Control.Gps.extend({options:{title:"Afficher votre position GPS"}});if(L.Control.FileLayerLoad)L.Control.FileLayerLoad=L.Control.FileLayerLoad.extend({statics:{TITLE:"Importer un fichier GPX, KML, GeoJSON",LABEL:"&#8657;"}});if(L.Control.OSMGeocoder)L.Control.OSMGeocoder=L.Control.OSMGeocoder.extend({options:{text:"Chercher"}});L.drawLocal={draw:{toolbar:{actions:{title:"Annuler le dessin",text:"Annuler"},finish:{title:"Finir le dessin",text:"Finir"},undo:{title:"Supprimer le dernier point",text:"Supprimer le dernier point"},buttons:{polyline:"Tracer une ligne",polygon:"Tracer un polygone",rectangle:"Tracer un rectangle",circle:"Tracer un cercle",marker:"Placer un marqueur"}},handlers:{circle:{tooltip:{start:"Cliquer et glisser pour tracer un cercle"},radius:"Rayon"},marker:{tooltip:{start:"Cliquer sur la carte pour placer un marqueur"}},polygon:{tooltip:{start:"Cliquer pour commencer le dessin d'un polygone",cont:"Cliquer pour continuer le dessin d'un polygone",end:"Cliquer sur le premier point clôt le polygone"}},polyline:{error:"<strong>Erreur:</strong> Les contours de la forme ne peuvent pas se croiser !",tooltip:{start:"Cliquer pour commencer une ligne",cont:"Cliquer pour continuer le dessin de la ligne",end:"Cliquer sur le dernier point pour finir la ligne"}},rectangle:{tooltip:{start:"Cliquer et glisser pour tracer un rectangle"}},simpleshape:{tooltip:{end:"Relacher la souris pour finir le dessin"}}}},edit:{toolbar:{actions:{save:{title:"Finir les changements",text:"Finir"},cancel:{title:"Annuler les changements",text:"Annuler"}},buttons:{edit:"Editer les éléments",editDisabled:"Pas d'élément",remove:"Supprimer un élément",removeDisabled:"Pas d'élément"}},handlers:{edit:{tooltip:{text:"Cliquer et glisser pour editer",subtext:"Cliquer annuler pour annuler les changements"}},remove:{tooltip:{text:"Cliquer sur un élément pour le supprimer"}}}}}};
;var originalInitTile=L.GridLayer.prototype._initTile;L.GridLayer.include({_initTile:function(i){originalInitTile.call(this,i);var t=this.getTileSize();i.style.width=t.x+1+'px';i.style.height=t.y+1+'px'}});L.Map.addInitHook(function(i){this.on('fullscreenchange',function(){this.invalidateSize()},this)});
;if(navigator.userAgent.search(/arach|archiver|bot|crawl|curl|factory|index|partner|rss|seek|search|semantic|scoot|spider|spyder|yandex/i)!=-1)L.Map.prototype.addLayer=function(){};