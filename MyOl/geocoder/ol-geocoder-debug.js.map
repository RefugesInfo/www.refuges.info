{"version":3,"file":"ol-geocoder-debug.js","sources":["../konstants/index.js","../src/helpers/mix.js","../src/helpers/dom.js","../src/html.js","../src/providers/photon.js","../src/providers/osm.js","../src/providers/mapquest.js","../src/providers/bing.js","../src/providers/opencage.js","../src/helpers/ajax.js","../src/nominatim.js","../src/base.js"],"sourcesContent":["import * as _VARS_ from './vars.json';\n\nexport const VARS = _VARS_;\n\nexport const EVENT_TYPE = {\n  ADDRESSCHOSEN: 'addresschosen',\n};\n\nexport const CONTROL_TYPE = {\n  NOMINATIM: 'nominatim',\n  REVERSE: 'reverse',\n};\n\nexport const TARGET_TYPE = {\n  GLASS: 'glass-button',\n  INPUT: 'text-input',\n};\n\nexport const FEATURE_SRC = '//cdn.rawgit.com/jonataswalker/map-utils/master/images/marker.png';\n\nexport const PROVIDERS = {\n  OSM: 'osm',\n  MAPQUEST: 'mapquest',\n  PHOTON: 'photon',\n  BING: 'bing',\n  OPENCAGE: 'opencage',\n};\n\nexport const DEFAULT_OPTIONS = {\n  provider: PROVIDERS.OSM,\n  placeholder: 'Search for an address',\n  featureStyle: null,\n  targetType: TARGET_TYPE.GLASS,\n  lang: 'en-US',\n  limit: 5,\n  keepOpen: false,\n  preventDefault: false,\n  autoComplete: false,\n  autoCompleteMinLength: 2,\n  autoCompleteTimeout: 200,\n  debug: false,\n};\n","/**\n * Overwrites obj1's values with obj2's and adds\n * obj2's if non existent in obj1\n * @returns obj3 a new object based on obj1 and obj2\n */\nexport function mergeOptions(obj1, obj2) {\n  const obj3 = {};\n\n  for (const key in obj1) {\n    if (Object.prototype.hasOwnProperty.call(obj1, key)) {\n      obj3[key] = obj1[key];\n    }\n  }\n\n  for (const key in obj2) {\n    if (Object.prototype.hasOwnProperty.call(obj2, key)) {\n      obj3[key] = obj2[key];\n    }\n  }\n\n  return obj3;\n}\n\nexport function assert(condition, message = 'Assertion failed') {\n  if (!condition) {\n    if (typeof Error !== 'undefined') throw new Error(message);\n\n    throw message; // Fallback\n  }\n}\n\nexport function now() {\n  // Polyfill for window.performance.now()\n  // @license http://opensource.org/licenses/MIT\n  // copyright Paul Irish 2015\n  // https://gist.github.com/paulirish/5438650\n  if ('performance' in window === false) {\n    window.performance = {};\n  }\n\n  if ('now' in window.performance === false) {\n    let nowOffset = Date.now();\n\n    if (performance.timing && performance.timing.navigationStart) {\n      nowOffset = performance.timing.navigationStart;\n    }\n\n    window.performance.now = () => Date.now() - nowOffset;\n  }\n\n  return window.performance.now();\n}\n\nexport function flyTo(map, coord, duration = 500, resolution = 2.388657133911758) {\n  map.getView().animate({ duration, resolution }, { duration, center: coord });\n}\n\nexport function randomId(prefix) {\n  const id = now().toString(36);\n\n  return prefix ? prefix + id : id;\n}\n\nexport function isNumeric(str) {\n  return /^\\d+$/u.test(str);\n}\n\nexport function isEmpty(str) {\n  return !str || str.length === 0;\n}\n\nexport function emptyArray(array) {\n  while (array.length) array.pop();\n}\n\nexport function anyMatchInArray(source, target) {\n  return source.some((each) => target.includes(each));\n}\n\nexport function everyMatchInArray(arr1, arr2) {\n  return arr2.every((each) => arr1.includes(each));\n}\n\nexport function anyItemHasValue(obj, has = false) {\n  const keys = Object.keys(obj);\n\n  keys.forEach((key) => {\n    if (!isEmpty(obj[key])) has = true;\n  });\n\n  return has;\n}\n","/* eslint-disable optimize-regex/optimize-regex */\n/* eslint-disable prefer-named-capture-group */\nimport { isNumeric } from './mix';\n\n/**\n * @param {Element|Array<Element>} element DOM node or array of nodes.\n * @param {String|Array<String>} classname Class or array of classes.\n * For example: 'class1 class2' or ['class1', 'class2']\n * @param {Number|undefined} timeout Timeout to remove a class.\n */\nexport function addClass(element, classname, timeout) {\n  if (Array.isArray(element)) {\n    element.forEach((each) => addClass(each, classname));\n\n    return;\n  }\n\n  const array = Array.isArray(classname) ? classname : classname.split(/\\s+/u);\n\n  let i = array.length;\n\n  while (i--) {\n    if (!hasClass(element, array[i])) {\n      _addClass(element, array[i], timeout);\n    }\n  }\n}\n\n/**\n * @param {Element|Array<Element>} element DOM node or array of nodes.\n * @param {String|Array<String>} classname Class or array of classes.\n * For example: 'class1 class2' or ['class1', 'class2']\n * @param {Number|undefined} timeout Timeout to add a class.\n */\nexport function removeClass(element, classname, timeout) {\n  if (Array.isArray(element)) {\n    element.forEach((each) => removeClass(each, classname, timeout));\n\n    return;\n  }\n\n  const array = Array.isArray(classname) ? classname : classname.split(/\\s+/u);\n\n  let i = array.length;\n\n  while (i--) {\n    if (hasClass(element, array[i])) {\n      _removeClass(element, array[i], timeout);\n    }\n  }\n}\n\n/**\n * @param {Element} element DOM node.\n * @param {String} classname Classname.\n * @return {Boolean}\n */\nexport function hasClass(element, c) {\n  // use native if available\n  return element.classList ? element.classList.contains(c) : classRegex(c).test(element.className);\n}\n\n/**\n * @param {Element|Array<Element>} element DOM node or array of nodes.\n * @param {String} classname Classe.\n */\nexport function toggleClass(element, classname) {\n  if (Array.isArray(element)) {\n    element.forEach((each) => toggleClass(each, classname));\n\n    return;\n  }\n\n  // use native if available\n  if (element.classList) {\n    element.classList.toggle(classname);\n  } else {\n    hasClass(element, classname) ? _removeClass(element, classname) : _addClass(element, classname);\n  }\n}\n\n/**\n * Abstraction to querySelectorAll for increased\n * performance and greater usability\n * @param {String} selector\n * @param {Element} context (optional)\n * @param {Boolean} findAll (optional)\n * @return (findAll) {Element} : {Array}\n */\nexport function $(id) {\n  id = id[0] === '#' ? id.slice(1, 1 + id.length) : id;\n\n  return document.getElementById(id);\n}\n\nexport function isElement(obj) {\n  // DOM, Level2\n  if ('HTMLElement' in window) {\n    return !!obj && obj instanceof HTMLElement;\n  }\n\n  // Older browsers\n  return !!obj && typeof obj === 'object' && obj.nodeType === 1 && !!obj.nodeName;\n}\n\nexport function getAllChildren(node, tag) {\n  return [].slice.call(node.getElementsByTagName(tag));\n}\n\nexport function removeAllChildren(node) {\n  while (node.firstChild) node.firstChild.remove();\n}\n\nexport function removeAll(collection) {\n  let node;\n\n  while ((node = collection[0])) node.remove();\n}\n\nexport function getChildren(node, tag) {\n  return [].filter.call(node.childNodes, (el) =>\n    tag ? el.nodeType === 1 && el.tagName.toLowerCase() === tag : el.nodeType === 1\n  );\n}\n\nexport function template(html, row) {\n  return html.replace(/\\{\\s*([\\w-]+)\\s*\\}/gu, (htm, key) => {\n    const value = row[key] === undefined ? '' : row[key];\n\n    return htmlEscape(value);\n  });\n}\n\nexport function htmlEscape(str) {\n  return String(str)\n    .replaceAll('&', '&amp;')\n    .replaceAll('<', '&lt;')\n    .replaceAll('>', '&gt;')\n    .replaceAll('\"', '&quot;')\n    .replaceAll(\"'\", '&#039;');\n}\n\nexport function createElement(node, html) {\n  let elem;\n\n  if (Array.isArray(node)) {\n    elem = document.createElement(node[0]);\n\n    if (node[1].id) elem.id = node[1].id;\n\n    if (node[1].classname) elem.className = node[1].classname;\n\n    if (node[1].attr) {\n      const { attr } = node[1];\n\n      if (Array.isArray(attr)) {\n        let i = -1;\n\n        while (++i < attr.length) {\n          elem.setAttribute(attr[i].name, attr[i].value);\n        }\n      } else {\n        elem.setAttribute(attr.name, attr.value);\n      }\n    }\n  } else {\n    elem = document.createElement(node);\n  }\n\n  elem.innerHTML = html;\n\n  const frag = document.createDocumentFragment();\n\n  while (elem.childNodes[0]) frag.append(elem.childNodes[0]);\n\n  elem.append(frag);\n\n  return elem;\n}\n\nfunction classRegex(classname) {\n  // eslint-disable-next-line security/detect-non-literal-regexp\n  return new RegExp(`(^|\\\\s+) ${classname} (\\\\s+|$)`, 'u');\n}\n\nfunction _addClass(el, klass, timeout) {\n  // use native if available\n  if (el.classList) {\n    el.classList.add(klass);\n  } else {\n    el.className = `${el.className} ${klass}`.trim();\n  }\n\n  if (timeout && isNumeric(timeout)) {\n    window.setTimeout(() => _removeClass(el, klass), timeout);\n  }\n}\n\nfunction _removeClass(el, klass, timeout) {\n  if (el.classList) {\n    el.classList.remove(klass);\n  } else {\n    el.className = el.className.replace(classRegex(klass), ' ').trim();\n  }\n\n  if (timeout && isNumeric(timeout)) {\n    window.setTimeout(() => _addClass(el, klass), timeout);\n  }\n}\n","import { VARS, TARGET_TYPE } from '../konstants';\n\nimport { createElement } from './helpers/dom';\n\nconst klasses = VARS.cssClasses;\n\n/**\n * @class Html\n */\nexport class Html {\n  /**\n   * @constructor\n   * @param {Function} base Base class.\n   */\n  constructor(base) {\n    this.options = base.options;\n    this.els = this.createControl();\n  }\n\n  createControl() {\n    let container;\n    let containerClass;\n    let elements;\n\n    if (this.options.targetType === TARGET_TYPE.INPUT) {\n      containerClass = `${klasses.namespace} ${klasses.inputText.container}`;\n      container = createElement(\n        ['div', { id: VARS.containerId, classname: containerClass }],\n        Html.input\n      );\n      elements = {\n        container,\n        control: container.querySelector(`.${klasses.inputText.control}`),\n        input: container.querySelector(`.${klasses.inputText.input}`),\n        reset: container.querySelector(`.${klasses.inputText.reset}`),\n        result: container.querySelector(`.${klasses.inputText.result}`),\n      };\n    } else {\n      containerClass = `${klasses.namespace} ${klasses.glass.container}`;\n      container = createElement(\n        ['div', { id: VARS.containerId, classname: containerClass }],\n        Html.glass\n      );\n      elements = {\n        container,\n        control: container.querySelector(`.${klasses.glass.control}`),\n        button: container.querySelector(`.${klasses.glass.button}`),\n        input: container.querySelector(`.${klasses.glass.input}`),\n        reset: container.querySelector(`.${klasses.glass.reset}`),\n        result: container.querySelector(`.${klasses.glass.result}`),\n      };\n    }\n\n    // set placeholder from options\n    elements.input.placeholder = this.options.placeholder;\n\n    return elements;\n  }\n}\n\nHtml.glass = `\n  <div class=\"${klasses.glass.control} ${klasses.olControl}\">\n    <button type=\"button\" id=\"${VARS.buttonControlId}\" class=\"${klasses.glass.button}\"></button>\n    <input type=\"text\" id=\"${VARS.inputQueryId}\" class=\"${klasses.glass.input}\" autocomplete=\"off\" placeholder=\"Search ...\">\n    <a id=\"${VARS.inputResetId}\" class=\"${klasses.glass.reset} ${klasses.hidden}\"></a>\n  </div>\n  <ul class=\"${klasses.glass.result}\"></ul>\n`;\n\nHtml.input = `\n  <div class=\"${klasses.inputText.control}\">\n    <input type=\"text\" id=\"${VARS.inputQueryId}\" class=\"${klasses.inputText.input}\" autocomplete=\"off\" placeholder=\"Search ...\">\n    <span class=\"${klasses.inputText.icon}\"></span>\n    <button type=\"button\" id=\"${VARS.inputResetId}\" class=\"${klasses.inputText.reset} ${klasses.hidden}\"></button>\n  </div>\n  <ul class=\"${klasses.inputText.result}\"></ul>\n`;\n","/**\n * @class Photon\n */\nexport class Photon {\n  /**\n   * @constructor\n   */\n  constructor() {\n    this.settings = {\n      url: 'https://photon.komoot.io/api/',\n\n      params: {\n        q: '',\n        limit: 10,\n        lang: 'en',\n      },\n\n      langs: ['de', 'it', 'fr', 'en'],\n    };\n  }\n\n  getParameters(options) {\n    options.lang = options.lang.toLowerCase();\n\n    return {\n      url: this.settings.url,\n\n      params: {\n        q: options.query,\n        limit: options.limit || this.settings.params.limit,\n\n        lang: this.settings.langs.includes(options.lang) ? options.lang : this.settings.params.lang,\n      },\n    };\n  }\n\n  handleResponse(results) {\n    if (results.features.length === 0) return [];\n\n    return results.features.map((result) => ({\n      lon: result.geometry.coordinates[0],\n      lat: result.geometry.coordinates[1],\n\n      address: {\n        name: result.properties.name,\n        postcode: result.properties.postcode,\n        city: result.properties.city,\n        state: result.properties.state,\n        country: result.properties.country,\n      },\n\n      original: {\n        formatted: result.properties.name,\n        details: result.properties,\n      },\n    }));\n  }\n}\n","/**\n * @class OpenStreet\n */\nexport class OpenStreet {\n  /**\n   * @constructor\n   */\n  constructor() {\n    this.settings = {\n      url: 'https://nominatim.openstreetmap.org/search/',\n\n      params: {\n        q: '',\n        format: 'json',\n        addressdetails: 1,\n        limit: 10,\n        countrycodes: '',\n        'accept-language': 'en-US',\n      },\n    };\n  }\n\n  getParameters(opt) {\n    return {\n      url: this.settings.url,\n\n      params: {\n        q: opt.query,\n        format: this.settings.params.format,\n        addressdetails: this.settings.params.addressdetails,\n        limit: opt.limit || this.settings.params.limit,\n        countrycodes: opt.countrycodes || this.settings.params.countrycodes,\n        'accept-language': opt.lang || this.settings.params['accept-language'],\n      },\n    };\n  }\n\n  handleResponse(results) {\n    if (results.length === 0) return [];\n\n    return results.map((result) => ({\n      lon: result.lon,\n      lat: result.lat,\n      bbox: result.boundingbox,\n\n      address: {\n        name: result.display_name,\n        road: result.address.road || '',\n        houseNumber: result.address.house_number || '',\n        postcode: result.address.postcode,\n        city: result.address.city || result.address.town,\n        state: result.address.state,\n        country: result.address.country,\n      },\n\n      original: {\n        formatted: result.display_name,\n        details: result.address,\n      },\n    }));\n  }\n}\n","/**\n * @class MapQuest\n */\nexport class MapQuest {\n  /**\n   * @constructor\n   */\n  constructor() {\n    this.settings = {\n      url: 'https://open.mapquestapi.com/nominatim/v1/search.php',\n\n      params: {\n        q: '',\n        key: '',\n        format: 'json',\n        addressdetails: 1,\n        limit: 10,\n        countrycodes: '',\n        'accept-language': 'en-US',\n      },\n    };\n  }\n\n  getParameters(options) {\n    return {\n      url: this.settings.url,\n\n      params: {\n        q: options.query,\n        key: options.key,\n        format: 'json',\n        addressdetails: 1,\n        limit: options.limit || this.settings.params.limit,\n        countrycodes: options.countrycodes || this.settings.params.countrycodes,\n\n        'accept-language': options.lang || this.settings.params['accept-language'],\n      },\n    };\n  }\n\n  handleResponse(results) {\n    if (results.length === 0) return [];\n\n    return results.map((result) => ({\n      lon: result.lon,\n      lat: result.lat,\n\n      address: {\n        name: result.address.neighbourhood || '',\n        road: result.address.road || '',\n        postcode: result.address.postcode,\n        city: result.address.city || result.address.town,\n        state: result.address.state,\n        country: result.address.country,\n      },\n\n      original: {\n        formatted: result.display_name,\n        details: result.address,\n      },\n    }));\n  }\n}\n","/**\n * @class Bing\n */\nexport class Bing {\n  /**\n   * @constructor\n   */\n  constructor() {\n    this.settings = {\n      url: 'https://dev.virtualearth.net/REST/v1/Locations',\n      callbackName: 'jsonp',\n\n      params: {\n        query: '',\n        key: '',\n        includeNeighborhood: 0,\n        maxResults: 10,\n      },\n    };\n  }\n\n  getParameters(options) {\n    return {\n      url: this.settings.url,\n      callbackName: this.settings.callbackName,\n\n      params: {\n        query: options.query,\n        key: options.key,\n\n        includeNeighborhood:\n          options.includeNeighborhood || this.settings.params.includeNeighborhood,\n\n        maxResults: options.maxResults || this.settings.params.maxResults,\n      },\n    };\n  }\n\n  handleResponse(results) {\n    const { resources } = results.resourceSets[0];\n\n    if (resources.length === 0) return [];\n\n    return resources.map((result) => ({\n      lon: result.point.coordinates[1],\n      lat: result.point.coordinates[0],\n\n      address: {\n        name: result.name,\n      },\n\n      original: {\n        formatted: result.address.formattedAddress,\n        details: result.address,\n      },\n    }));\n  }\n}\n","/**\n * @class OpenCage\n */\nexport class OpenCage {\n  /**\n   * @constructor\n   */\n  constructor() {\n    this.settings = {\n      url: 'https://api.opencagedata.com/geocode/v1/json?',\n\n      params: {\n        q: '',\n        key: '',\n        limit: 10,\n        countrycode: '',\n        pretty: 1,\n        no_annotations: 1,\n      },\n    };\n  }\n\n  getParameters(options) {\n    return {\n      url: this.settings.url,\n\n      params: {\n        q: options.query,\n        key: options.key,\n        limit: options.limit || this.settings.params.limit,\n        countrycode: options.countrycodes || this.settings.params.countrycodes,\n      },\n    };\n  }\n\n  handleResponse(results) {\n    if (results.results.length === 0) return [];\n\n    return results.results.map((result) => ({\n      lon: result.geometry.lng,\n      lat: result.geometry.lat,\n\n      address: {\n        name: result.components.house_number || '',\n        road: result.components.road || '',\n        postcode: result.components.postcode,\n        city: result.components.city || result.components.town,\n        state: result.components.state,\n        country: result.components.country,\n      },\n\n      original: {\n        formatted: result.formatted,\n        details: result.components,\n      },\n    }));\n  }\n}\n","export function json(obj) {\n  return new Promise((resolve, reject) => {\n    const url = encodeUrlXhr(obj.url, obj.data);\n    const config = {\n      method: 'GET',\n      mode: 'cors',\n      credentials: 'same-origin',\n    };\n\n    if (obj.jsonp) {\n      jsonp(url, obj.callbackName, resolve);\n    } else {\n      fetch(url, config)\n        .then((r) => r.json())\n        .then(resolve)\n        .catch(reject);\n    }\n  });\n}\n\nfunction toQueryString(obj) {\n  return Object.keys(obj)\n    .reduce((acc, k) => {\n      acc.push(\n        typeof obj[k] === 'object'\n          ? toQueryString(obj[k])\n          : `${encodeURIComponent(k)}=${encodeURIComponent(obj[k])}`\n      );\n\n      return acc;\n    }, [])\n    .join('&');\n}\n\nfunction encodeUrlXhr(url, data) {\n  if (data && typeof data === 'object') {\n    url += (/\\?/u.test(url) ? '&' : '?') + toQueryString(data);\n  }\n\n  return url;\n}\n\nfunction jsonp(url, key, callback) {\n  // https://github.com/Fresheyeball/micro-jsonp/blob/master/src/jsonp.js\n  const { head } = document;\n  const script = document.createElement('script');\n  // generate minimally unique name for callback function\n  const callbackName = `f${Math.round(Math.random() * Date.now())}`;\n\n  // set request url\n  script.setAttribute(\n    'src',\n    // add callback parameter to the url\n    //    where key is the parameter key supplied\n    //    and callbackName is the parameter value\n    `${url + (url.indexOf('?') > 0 ? '&' : '?') + key}=${callbackName}`\n  );\n\n  // place jsonp callback on window,\n  //  the script sent by the server should call this\n  //  function as it was passed as a url parameter\n  window[callbackName] = (data) => {\n    window[callbackName] = undefined;\n\n    // clean up script tag created for request\n    setTimeout(() => head.removeChild(script), 0);\n\n    // hand data back to the user\n    callback(data);\n  };\n\n  // actually make the request\n  head.append(script);\n}\n","import LayerVector from 'ol/layer/Vector';\nimport SourceVector from 'ol/source/Vector';\nimport Point from 'ol/geom/Point';\nimport Feature from 'ol/Feature';\nimport proj from 'ol/proj';\n\nimport { VARS, TARGET_TYPE, PROVIDERS, EVENT_TYPE } from '../konstants';\n\nimport {\n  hasClass,\n  addClass,\n  removeClass,\n  createElement,\n  template,\n  removeAllChildren,\n} from './helpers/dom';\nimport { Photon } from './providers/photon';\nimport { OpenStreet } from './providers/osm';\nimport { MapQuest } from './providers/mapquest';\nimport { Bing } from './providers/bing';\nimport { OpenCage } from './providers/opencage';\nimport { randomId, flyTo } from './helpers/mix';\nimport { json } from './helpers/ajax';\n\nconst klasses = VARS.cssClasses;\n\n/**\n * @class Nominatim\n */\nexport class Nominatim {\n  /**\n   * @constructor\n   * @param {Function} base Base class.\n   */\n  constructor(base, els) {\n    this.Base = base;\n\n    this.layerName = randomId('geocoder-layer-');\n    this.layer = new LayerVector({\n      name: this.layerName,\n      source: new SourceVector(),\n    });\n\n    this.options = base.options;\n    // provider is either the name of a built-in provider as a string or an\n    // object that implements the provider API\n    this.options.provider =\n      typeof this.options.provider === 'string'\n        ? this.options.provider.toLowerCase()\n        : this.options.provider;\n    this.provider = this.newProvider();\n\n    this.els = els;\n    this.lastQuery = '';\n    this.container = this.els.container;\n    this.registeredListeners = { mapClick: false };\n    this.setListeners();\n  }\n\n  setListeners() {\n    let timeout;\n    let lastQuery;\n\n    const openSearch = (evt) => {\n      evt.stopPropagation();\n\n      hasClass(this.els.control, klasses.glass.expanded) ? this.collapse() : this.expand();\n    };\n    const query = (evt) => {\n      const value = evt.target.value.trim();\n      const hit = evt.key\n        ? evt.key === 'Enter'\n        : evt.which\n        ? evt.which === 13\n        : evt.keyCode\n        ? evt.keyCode === 13\n        : false;\n\n      if (hit) {\n        evt.preventDefault();\n        this.query(value);\n      }\n    };\n    // eslint-disable-next-line unicorn/consistent-function-scoping\n    const stopBubbling = (evt) => evt.stopPropagation();\n    const reset = (evt) => {\n      this.els.input.focus();\n      this.els.input.value = '';\n      this.lastQuery = '';\n      addClass(this.els.reset, klasses.hidden);\n      this.clearResults();\n    };\n    const handleValue = (evt) => {\n      const value = evt.target.value.trim();\n\n      value.length !== 0\n        ? removeClass(this.els.reset, klasses.hidden)\n        : addClass(this.els.reset, klasses.hidden);\n\n      if (this.options.autoComplete && value !== lastQuery) {\n        lastQuery = value;\n        timeout && clearTimeout(timeout);\n        timeout = setTimeout(() => {\n          if (value.length >= this.options.autoCompleteMinLength) {\n            this.query(value);\n          }\n        }, this.options.autoCompleteTimeout);\n      }\n    };\n\n    this.els.input.addEventListener('keypress', query, false);\n    this.els.input.addEventListener('click', stopBubbling, false);\n    this.els.input.addEventListener('input', handleValue, false);\n    this.els.reset.addEventListener('click', reset, false);\n\n    if (this.options.targetType === TARGET_TYPE.GLASS) {\n      this.els.button.addEventListener('click', openSearch, false);\n    }\n  }\n\n  query(q) {\n    // lazy provider\n    if (!this.provider) {\n      this.provider = this.newProvider();\n    }\n\n    const parameters = this.provider.getParameters({\n      query: q,\n      key: this.options.key,\n      lang: this.options.lang,\n      countrycodes: this.options.countrycodes,\n      limit: this.options.limit,\n    });\n\n    if (this.lastQuery === q && this.els.result.firstChild) return;\n\n    this.lastQuery = q;\n    this.clearResults();\n    addClass(this.els.reset, klasses.spin);\n\n    const ajax = {\n      url: parameters.url,\n      data: parameters.params,\n    };\n\n    if (parameters.callbackName) {\n      ajax.jsonp = true;\n      ajax.callbackName = parameters.callbackName;\n    }\n\n    json(ajax)\n      .then((res) => {\n        // eslint-disable-next-line no-console\n        this.options.debug && console.info(res);\n\n        removeClass(this.els.reset, klasses.spin);\n\n        // will be fullfiled according to provider\n        const res_ = this.provider.handleResponse(res);\n\n        if (res_) {\n          this.createList(res_);\n          this.listenMapClick();\n        }\n      })\n      .catch((err) => {\n        removeClass(this.els.reset, klasses.spin);\n\n        const li = createElement('li', '<h5>Error! No internet connection?</h5>');\n\n        this.els.result.append(li);\n      });\n  }\n\n  createList(response) {\n    const ul = this.els.result;\n\n    response.forEach((row) => {\n      let addressHtml;\n\n      switch (this.options.provider) {\n        case PROVIDERS.OSM:\n          addressHtml = `<span class=\"${klasses.road}\">${row.address.name}</span>`;\n\n          break;\n\n        default:\n          addressHtml = this.addressTemplate(row.address);\n      }\n\n      const html = `<a href=\"#\">${addressHtml}</a>`;\n      const li = createElement('li', html);\n\n      li.addEventListener(\n        'click',\n        (evt) => {\n          evt.preventDefault();\n          this.chosen(row, addressHtml, row.address, row.original);\n        },\n        false\n      );\n\n      ul.append(li);\n    });\n  }\n\n  chosen(place, addressHtml, addressObj, addressOriginal) {\n    const map = this.Base.getMap();\n    const coord_ = [Number.parseFloat(place.lon), Number.parseFloat(place.lat)];\n    const projection = map.getView().getProjection();\n    const coord = proj.transform(coord_, 'EPSG:4326', projection);\n\n    let { bbox } = place;\n\n    if (bbox) {\n      bbox = proj.transformExtent(\n        [bbox[2], bbox[1], bbox[3], bbox[0]], // NSWE -> WSEN\n        'EPSG:4326',\n        projection\n      );\n    }\n\n    const address = {\n      formatted: addressHtml,\n      details: addressObj,\n      original: addressOriginal,\n    };\n\n    this.options.keepOpen === false && this.clearResults(true);\n\n    if (this.options.preventDefault === true) {\n      this.Base.dispatchEvent({\n        type: EVENT_TYPE.ADDRESSCHOSEN,\n        address,\n        coordinate: coord,\n        bbox,\n        place,\n      });\n    } else {\n      if (bbox) {\n        map.getView().fit(bbox, { duration: 500 });\n      } else {\n        flyTo(map, coord);\n      }\n\n      const feature = this.createFeature(coord, address);\n\n      this.Base.dispatchEvent({\n        type: EVENT_TYPE.ADDRESSCHOSEN,\n        address,\n        feature,\n        coordinate: coord,\n        bbox,\n        place,\n      });\n    }\n  }\n\n  createFeature(coord) {\n    const feature = new Feature(new Point(coord));\n\n    this.addLayer();\n    feature.setStyle(this.options.featureStyle);\n    feature.setId(randomId('geocoder-ft-'));\n    this.getSource().addFeature(feature);\n\n    return feature;\n  }\n\n  addressTemplate(address) {\n    const html = [];\n\n    if (address.name) {\n      html.push(['<span class=\"', klasses.road, '\">{name}</span>'].join(''));\n    }\n\n    if (address.road || address.building || address.house_number) {\n      html.push(\n        ['<span class=\"', klasses.road, '\">{building} {road} {house_number}</span>'].join('')\n      );\n    }\n\n    if (address.city || address.town || address.village) {\n      html.push(\n        ['<span class=\"', klasses.city, '\">{postcode} {city} {town} {village}</span>'].join('')\n      );\n    }\n\n    if (address.state || address.country) {\n      html.push(['<span class=\"', klasses.country, '\">{state} {country}</span>'].join(''));\n    }\n\n    return template(html.join('<br>'), address);\n  }\n\n  newProvider() {\n    switch (this.options.provider) {\n      case PROVIDERS.OSM:\n        return new OpenStreet();\n      case PROVIDERS.MAPQUEST:\n        return new MapQuest();\n      case PROVIDERS.PHOTON:\n        return new Photon();\n      case PROVIDERS.BING:\n        return new Bing();\n      case PROVIDERS.OPENCAGE:\n        return new OpenCage();\n\n      default:\n        return this.options.provider;\n    }\n  }\n\n  expand() {\n    removeClass(this.els.input, klasses.spin);\n    addClass(this.els.control, klasses.glass.expanded);\n    window.setTimeout(() => this.els.input.focus(), 100);\n    this.listenMapClick();\n  }\n\n  collapse() {\n    this.els.input.value = '';\n    this.els.input.blur();\n    addClass(this.els.reset, klasses.hidden);\n    removeClass(this.els.control, klasses.glass.expanded);\n    this.clearResults();\n  }\n\n  listenMapClick() {\n    // already registered\n    if (this.registeredListeners.mapClick) return;\n\n    const that = this;\n    const mapElement = this.Base.getMap().getTargetElement();\n\n    this.registeredListeners.mapClick = true;\n\n    // one-time fire click\n    mapElement.addEventListener(\n      'click',\n      {\n        handleEvent(evt) {\n          that.clearResults(true);\n          mapElement.removeEventListener(evt.type, this, false);\n          that.registeredListeners.mapClick = false;\n        },\n      },\n      false\n    );\n  }\n\n  clearResults(collapse) {\n    collapse && this.options.targetType === TARGET_TYPE.GLASS\n      ? this.collapse()\n      : removeAllChildren(this.els.result);\n  }\n\n  getSource() {\n    return this.layer.getSource();\n  }\n\n  addLayer() {\n    let found = false;\n\n    const map = this.Base.getMap();\n\n    map.getLayers().forEach((layer) => {\n      if (layer === this.layer) found = true;\n    });\n\n    if (!found) map.addLayer(this.layer);\n  }\n}\n","import Control from 'ol/control/Control';\nimport Style from 'ol/style/Style';\nimport Icon from 'ol/style/Icon';\n\nimport { CONTROL_TYPE, DEFAULT_OPTIONS, FEATURE_SRC } from '../konstants';\n\nimport { Html } from './html';\nimport { Nominatim } from './nominatim';\nimport { assert, mergeOptions } from './helpers/mix';\n\n/**\n * @class Base\n * @extends {ol.control.Control}\n */\nexport default class Base extends Control {\n  /**\n   * @constructor\n   * @param {string} type nominatim|reverse.\n   * @param {object} options Options.\n   */\n  constructor(type = CONTROL_TYPE.NOMINATIM, options = {}) {\n    if (!(this instanceof Base)) return new Base();\n\n    assert(typeof type === 'string', '@param `type` should be string!');\n    assert(\n      type === CONTROL_TYPE.NOMINATIM || type === CONTROL_TYPE.REVERSE,\n      `@param 'type' should be '${CONTROL_TYPE.NOMINATIM}'\n      or '${CONTROL_TYPE.REVERSE}'!`\n    );\n    assert(typeof options === 'object', '@param `options` should be object!');\n\n    DEFAULT_OPTIONS.featureStyle = [\n      new Style({ image: new Icon({ scale: 0.7, src: FEATURE_SRC }) }),\n    ];\n\n    this.options = mergeOptions(DEFAULT_OPTIONS, options);\n    this.container = undefined;\n\n    let $nominatim;\n\n    const $html = new Html(this);\n\n    if (type === CONTROL_TYPE.NOMINATIM) {\n      this.container = $html.els.container;\n      $nominatim = new Nominatim(this, $html.els);\n      this.layer = $nominatim.layer;\n    }\n\n    super({ element: this.container });\n  }\n\n  /**\n   * @return {ol.layer.Vector} Returns the layer created by this control\n   */\n  getLayer() {\n    return this.layer;\n  }\n\n  /**\n   * @return {ol.source.Vector} Returns the source created by this control\n   */\n  getSource() {\n    return this.getLayer().getSource();\n  }\n\n  /**\n   * Set a new provider\n   * @param {String} provider\n   */\n  setProvider(provider) {\n    this.options.provider = provider;\n  }\n\n  /**\n   * Set provider key\n   * @param {String} key\n   */\n  setProviderKey(key) {\n    this.options.key = key;\n  }\n}\n"],"names":["const","key","let","klasses","LayerVector","SourceVector","this","proj","Feature","Point","Style","Icon","super","Control"],"mappings":"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"}