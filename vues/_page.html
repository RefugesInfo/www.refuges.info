<?php
// Affichage de l'entête des pages de refuges.info

// $vue contient les données passées par le fichier PHP
// $config_wri les données communes à tout WRI
// Ce fichier est l'unique endroit ou peuvent se trouver des balises HTML
// Un couple <ouverture de balise> </fermeture de balise> doit se trouver dans le même fichier et avec la même indentation
// Ce fichier ne contient que des balises HTML et des balises de contrôle PHP

// Ici on permet de changer le code http qui, par défaut est 200
if ($vue->http_status_code) 
    switch ($vue->http_status_code) 
    {
        case 403:
            header("HTTP/1.0 403 Forbidden");
            break;

        case 404:
            header("HTTP/1.0 404 Not Found");
        
        default:
            break;
    }
?>
<?='<?'?>xml version="1.0" encoding="<?=$config_wri['encodage_des_contenu_web']?>"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr">
	<head>
		<title><?=$vue->titre?></title>
		<link rel="shortcut icon" href="<?=$config_wri['sous_dossier_installation']?>images/favicon.svg" />
		<meta name="robots" content="all" />
		<meta name="robots" content="index,follow" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/> 
		<meta http-equiv="Content-Type" content="text/html;charset=<?=$config_wri['encodage_des_contenu_web']?>" />
		<meta http-equiv="Content-Style-Type" content="text/css" />

		<!-- Compatibilité de certains explorateurs, notamment pour les cartes -->
		<!-- IE --><!-- nomodule ne charge le script que pour IE -->
		<script nomodule src="https://polyfill.io/v3/polyfill.min.js?features=Math.hypot%2CObject.assign"></script>
		<!-- iOS -->
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
		<!-- FF -->
		<?php
			if ((stripos ($_SERVER['HTTP_USER_AGENT'], 'android') && stripos ($_SERVER['HTTP_USER_AGENT'], 'firefox')) ||
				(stripos ($_SERVER['HTTP_USER_AGENT'], 'iphone') && stripos ($_SERVER['HTTP_USER_AGENT'], 'safari'))) {
		?>
				<script src="https://unpkg.com/elm-pep"></script>
		<?php } ?>

		<script>
			var mapKeys = <?=json_encode(@$mapKeys)?>;
		</script>

		<link type="text/css" rel="stylesheet" href="<?=$config_wri['sous_dossier_installation']?>vues/style.css.php?<?=filemtime($config_wri['racine_projet'].'vues/style.css.php')?>" />
		<?if (isset ($vue->css))
			foreach ($vue->css as $css) {?>
				<link type="text/css" rel="stylesheet" href="<?=$css?>" />
		<?}?>
		<meta http-equiv="Content-Script-Type" content="text/javascript" />
	</head>

	<body>
		<?
			include ($config_wri['chemin_vues'].'_bandeau.html');
			include ($config_wri['chemin_vues'].$vue->type.'.html');
			include ($config_wri['chemin_vues'].'_pied.html');
		?>
	</body>
</html>
